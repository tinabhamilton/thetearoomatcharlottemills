if (self.CavalryLogger) { CavalryLogger.start_js(["Dlk+K"]); }

__d('AdsPagerConstants',['keyMirror'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('keyMirror')({ADD_PAGE:null,PAGE_TRANSITION:null,REQUEST_PAGE:null}),i=c('keyMirror')({VIEW_ACTION:null,SERVER_ACTION:null});f.exports={ActionTypes:h,PayloadSources:i};},null);
__d('AdsPagerDispatcher',['AdsPagerConstants','Dispatcher_DEPRECATED'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('AdsPagerConstants').PayloadSources;function i(k){return function(l){this.dispatch({payloadSource:k,action:l});};}var j=Object.assign(new (c('Dispatcher_DEPRECATED'))(),{handleUpdateFromViewAction:i(h.VIEW_ACTION),handleUpdateFromServerAction:i(h.SERVER_ACTION)});f.exports=j;},null);
__d('AdsRefreshHandler',['csx','AdsMouseStateStore','AdsPagerConstants','AdsPagerDispatcher','Animation','Arbiter','DOM','Event','SubscriptionsHandler','Toggler','UIPagelet','debounceAcrossTransitions','getOrCreateDOMID'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('AdsMouseStateStore').STATES,j=600;function k(l,m,n){'use strict';if(!n.data||!n.pid)return;this.$AdsRefreshHandler1=l;this.$AdsRefreshHandler2=Date.now();this.$AdsRefreshHandler3=m;this.$AdsRefreshHandler4=n;this.$AdsRefreshHandler5=0;this.$AdsRefreshHandler6=false;this.$AdsRefreshHandler7=true;this.$AdsRefreshHandler8=null;this.$AdsRefreshHandler9=c('debounceAcrossTransitions')(this.reloadAdsIfNeeded.bind(this),this.$AdsRefreshHandler3.delay);this.$AdsRefreshHandler10=new (c('SubscriptionsHandler'))();this.$AdsRefreshHandler10.addSubscriptions(c('Event').listen(this.$AdsRefreshHandler1,'mouseenter',this.setMouseOver.bind(this,true)),c('Event').listen(this.$AdsRefreshHandler1,'mouseleave',this.setMouseOver.bind(this,false)),c('AdsMouseStateStore').subscribe('change',this.onMouseStateStoreChange.bind(this)),c('Arbiter').subscribe('AdsPreferencesDialog/opened',this.stopRefreshingRHC.bind(this)),c('Arbiter').subscribe('AdsPreferencesDialog/closed',this.startRefreshingRHC.bind(this)),c('Arbiter').subscribe('VideoChannelView/opened',this.stopRefreshingRHC.bind(this)),c('Arbiter').subscribe('VideoChannelView/closed',this.startRefreshingRHC.bind(this)));this.$AdsRefreshHandler11();c('AdsPagerDispatcher').register(this.handlePageDispatch.bind(this));}k.prototype.$AdsRefreshHandler11=function(){'use strict';if(this.$AdsRefreshHandler12)this.$AdsRefreshHandler12.release();this.$AdsRefreshHandler12=new (c('SubscriptionsHandler'))();var l=c('DOM').scry(this.$AdsRefreshHandler1,'.uiToggle');for(var m=0;m<l.length;m++)this.$AdsRefreshHandler12.addSubscriptions(c('Toggler').listen('show',l[m],this.stopRefreshingRHC.bind(this)),c('Toggler').listen('hide',l[m],this.startRefreshingRHC.bind(this)));};k.prototype.handlePageDispatch=function(l){'use strict';var m=l.action||{};if(m.actionType===c('AdsPagerConstants').ActionTypes.REQUEST_PAGE)this.reloadAds();};k.prototype.setMouseOver=function(l){'use strict';this.$AdsRefreshHandler13=l;if(l&&this.$AdsRefreshHandler8!=null){this.$AdsRefreshHandler8.cancel();this.$AdsRefreshHandler8=null;}};k.prototype.subscribeDefaultEventsForRefresh=function(){'use strict';this.$AdsRefreshHandler10.addSubscriptions(c('Event').listen(window,'scroll',this.$AdsRefreshHandler9),c('Event').listen(window,'resize',this.$AdsRefreshHandler9));return this;};k.prototype.reloadWithDebounce=function(){'use strict';this.$AdsRefreshHandler9();};k.prototype.reloadWithoutDebounce=function(){'use strict';this.reloadAdsIfNeeded();};k.prototype.stopRefreshingRHC=function(l,m){'use strict';this.$AdsRefreshHandler7=false;};k.prototype.startRefreshingRHC=function(l,m){'use strict';this.$AdsRefreshHandler2=Date.now();this.$AdsRefreshHandler7=true;};k.prototype.forceLoadIfEnoughTimePassed=function(l){'use strict';if(Date.now()-this.$AdsRefreshHandler2>l)this.reloadAds();};k.prototype.containsPremium=function(){'use strict';var l=c('DOM').scry(this.$AdsRefreshHandler1,"div._4u8");return !!l.filter(function(m){return JSON.parse(m.getAttribute('data-ad')).segment==='premium';}).length;};k.prototype.reloadAdsIfNeeded=function(){'use strict';if(!this.$AdsRefreshHandler1)return;c('Arbiter').inform('AdsRefreshHandler/CheckingReload');if(this.$AdsRefreshHandler3.stateRefresh){this.reloadAdsIfNeededStateBased();return;}if(this.containsPremium()||this.$AdsRefreshHandler13||!this.$AdsRefreshHandler3.interval)return;if(Date.now()-this.$AdsRefreshHandler2>=this.$AdsRefreshHandler3.interval)this.reloadAds();};k.prototype.reloadAdsIfNeededStateBased=function(){'use strict';if(Date.now()-this.$AdsRefreshHandler2<this.$AdsRefreshHandler3.interval)return;if(this.containsPremium())return;if(!this.$AdsRefreshHandler3.interval)return;this.$AdsRefreshHandler6=true;c('Arbiter').inform('AdsRefreshHandler/RefreshScheduled');this.checkScheduledRefresh();};k.prototype.getRefreshScheduled=function(){'use strict';return this.$AdsRefreshHandler6;};k.prototype.onMouseStateStoreChange=function(){'use strict';this.checkScheduledRefresh();};k.prototype.checkScheduledRefresh=function(){'use strict';if(!this.$AdsRefreshHandler6)return;if(this.$AdsRefreshHandler13)return;var l=c('AdsMouseStateStore').getState(),m=false;switch(l){case i.HOVER:case i.NO_INTENT:m=true;break;default:break;}if(!m)return;this.$AdsRefreshHandler6=false;this.reloadAds();};k.prototype.reloadAds=function(){'use strict';if(!this.$AdsRefreshHandler1)return;this.$AdsRefreshHandler2=Date.now();if(!this.$AdsRefreshHandler7)return;var l=this.$AdsRefreshHandler4&&this.$AdsRefreshHandler4.data,m=babelHelpers['extends']({},l,{refresh_num:++this.$AdsRefreshHandler5});this.$AdsRefreshHandler8=c('UIPagelet').loadFromEndpoint('WebEgoPane',this.$AdsRefreshHandler1,{dom_id:c('getOrCreateDOMID')(this.$AdsRefreshHandler1),pid:this.$AdsRefreshHandler4.pid,data:m},{bundle:false,handler:this.onLoadHandler.bind(this)});c('Arbiter').inform('AdsRefreshHandler/AdsLoading');};k.prototype.onLoadHandler=function(){'use strict';c('Arbiter').inform('AdsRefreshHandler/AdsLoaded');this.$AdsRefreshHandler8=null;this.$AdsRefreshHandler11();if(!this.$AdsRefreshHandler3.fade)return;new (c('Animation'))(this.$AdsRefreshHandler1).from('opacity',0).to('opacity',1).duration(j).go();};k.prototype.cleanup=function(){'use strict';this.$AdsRefreshHandler1=null;this.$AdsRefreshHandler10.release();this.$AdsRefreshHandler9.reset();};f.exports=k;},null);
__d('HomeRHCAdsBasicRefresh',['AdsRefreshHandler','Arbiter','NavigationMessage','Run','SubscriptionsHandler','ge'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h,i,j,k;function l(){if(h){h.cleanup();h=null;}if(i){i.release();i=null;}j=null;}function m(){var p=c('ge')(k);if(p&&j){p.appendChild(j);j=null;}}function n(p,q){j=q;h&&h.forceLoadIfEnoughTimePassed(0);}var o={init:function(p,q,r){k=p;h=new (c('AdsRefreshHandler'))(c('ge')(p),q,r).subscribeDefaultEventsForRefresh();i=new (c('SubscriptionsHandler'))();i.addSubscriptions(c('Arbiter').subscribe(c('NavigationMessage').NAVIGATION_BEGIN,l),c('Arbiter').subscribe('ProfileQuestionAnswered',n),c('Arbiter').subscribe('AdsRefreshHandler/AdsLoaded',m));c('Run').onLeave(l);}};f.exports=o;},null);
__d('KeyboardShortcuts',['KeyEventController','Layer','ModalLayer'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(j,k,l){'use strict';this.key=j;this.handler=k;this.filter=l;this.register();}h.prototype.register=function(){'use strict';this.token=c('KeyEventController').registerKey(this.key,this.handler,this.filter);};h.prototype.remove=function(){'use strict';this.token.remove();};var i={_tokens:[[]],register:function(j,k,l){l=l||{};var m=l.allowDefault?k:function(event,q){k.apply(this,arguments);event.prevent();},n=l.baseFilters||[c('KeyEventController').defaultFilter],o=function(event,q){for(var r=0,s=n.length;r<s;r++)if(!n[r](event,q))return false;return !l.filter||l.filter(event,q);},p=new h(j,m,o);if(!this._tokens.length)this._tokens.push([]);this._tokens[this._tokens.length-1].push(p);return p;},init:function(){c('Layer').subscribe('show',function(j,k){if(k.hasBehavior(c('ModalLayer')))this.pushLayer();}.bind(this));c('Layer').subscribe('hide',function(j,k){if(k.hasBehavior(c('ModalLayer')))this.popLayer();}.bind(this));},pushLayer:function(){var j=this._tokens[this._tokens.length-1];j&&j.forEach(function(k){k.remove();});this._tokens.push([]);},popLayer:function(){var j=this._tokens.length-1;if(j<0)return;var k=this._tokens[j];k.forEach(function(m){m.remove();});this._tokens.pop();var l=this._tokens[j-1];l&&l.forEach(function(m){m.register();});}};i.init();f.exports=i;},null);
__d('FeedBaseKeyboardController',['csx','AccessibilityLogger','Arbiter','AsyncDialog','AsyncRequest','Banzai','BanzaiODS','BanzaiNectar','CSS','DOM','DOMScroll','Event','Focus','KeyboardShortcuts','LikeConfirmer','NavigationMessage','Parent','ReactComposerEvents','ReactComposerIDGenerator','Run','Scroll','SubscriptionsHandler','UITinyViewportAction','Vector','ViewportBounds','emptyFunction','ge','getActiveElement','isAsyncScrollQuery','isElementNode','throttle'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=0;function j(){i=c('UITinyViewportAction').isTiny()?0:c('ViewportBounds').getTop();}function k(l){'use strict';this.root=l;this.init();}k.prototype.getStories=function(){'use strict';};k.prototype.getParentStory=function(l){'use strict';};k.prototype.isStory=function(l){'use strict';};k.prototype.isHoldoutStory=function(l){'use strict';};k.prototype.getHeadline=function(l){'use strict';};k.prototype.getPreviousStory=function(l){'use strict';};k.prototype.getNextStory=function(l){'use strict';};k.prototype.setSelected=function(l,m){'use strict';};k.prototype.clickLike=function(){'use strict';};k.prototype.clickComment=function(){'use strict';};k.prototype.clickShare=function(){'use strict';};k.prototype.clickSeeMore=function(){'use strict';};k.prototype.clickLeft=function(){'use strict';};k.prototype.clickRight=function(){'use strict';};k.prototype.openAttachment=function(){'use strict';};k.prototype.focusComposer=function(){'use strict';var l=c('ge')('pagelet_composer');if(!l)l=c('ge')('pagelet_group_composer');if(l){var m=c('DOM').scry(l,'textarea')[0];if(m){c('Focus').set(m);c('DOMScroll').scrollToTop(true);}else{var n=c('DOM').scry(l,"div._36bx")[0],o=n&&n.id;if(c('ReactComposerIDGenerator').isComposerID(o)){c('Arbiter').inform(c('ReactComposerEvents').ACTIVATE_ATTACHMENT+n.id);c('DOMScroll').scrollToTop(true);}}}};k.prototype.getScrollOffset=function(){'use strict';return 10+(this.scrollOffset||0);};k.prototype.getAnimationLength=function(l){'use strict';return Math.min(Math.abs(c('Vector').getElementPosition(l).y-c('ViewportBounds').getTop()-c('Scroll').getTop(document.body)),400);};k.prototype.findTop=function(){'use strict';var l=this.getStories();for(var m=0;m<l.length;m++)if(c('Vector').getElementPosition(l[m]).y>c('Vector').getScrollPosition().y)return l[m];};k.prototype.onLeave=function(){'use strict';this.subscriptions&&this.subscriptions.release();};k.prototype.getHelpDialogRequest=function(){'use strict';if(!this.dialogRequest){this.dialogRequest=new (c('AsyncRequest'))('/ajax/keyboard_shortcuts');this.dialogRequest.setReadOnly(true);}else if(this.dialogRequest.transport)return null;return this.dialogRequest;};k.prototype.init=function(){'use strict';c('Run').onLeave(this.onLeave.bind(this));this.subscriptions=new (c('SubscriptionsHandler'))();this.subscriptions.addSubscriptions(c('Arbiter').subscribe(c('NavigationMessage').NAVIGATION_BEGIN,this.onLeave.bind(this)),c('KeyboardShortcuts').register('j',this.vert.bind(this,1)),c('KeyboardShortcuts').register('k',this.vert.bind(this,-1)),c('KeyboardShortcuts').register('l',function(){var l=this.getParentStory(c('getActiveElement')());c('LikeConfirmer').like(function(){this.setSelected(l,false);this.clickLike();}.bind(this),c('getActiveElement')());}.bind(this),{filter:this.hasActiveStory.bind(this)}),c('KeyboardShortcuts').register('c',this.clickComment.bind(this),{filter:this.hasActiveStory.bind(this)}),c('KeyboardShortcuts').register('o',this.openAttachment.bind(this),{filter:this.hasActiveStory.bind(this)}),c('KeyboardShortcuts').register('p',this.focusComposer.bind(this)),c('KeyboardShortcuts').register('s',this.clickShare.bind(this),{filter:this.hasActiveStory.bind(this)}),c('KeyboardShortcuts').register('SLASH',function(){var l=this.getHelpDialogRequest();if(l){l.setRelativeTo(c('getActiveElement')());c('AsyncDialog').send(l);}}.bind(this),{filter:function(event,l){return event.getModifiers().shift;}}),c('KeyboardShortcuts').register('RETURN',this.clickSeeMore.bind(this),{filter:this.hasExpandableStoryInFocus.bind(this)}),c('KeyboardShortcuts').register('LEFT',this.clickLeft.bind(this),{filter:this.hasActiveStory.bind(this)}),c('KeyboardShortcuts').register('RIGHT',this.clickRight.bind(this),{filter:this.hasActiveStory.bind(this)}),c('Event').listen(this.root,'focusin',function(event){var l=event.getTarget();if(!this.isStory(l)){var m=c('DOM').isNodeOfType(l,['object','embed','iframe']),n=this.getParentStory(l),o=this.selected;if(n&&!m&&o){this.setSelected(n,true);this.selected=n;}}}.bind(this)));};k.prototype.hasActiveStory=function(event,l){'use strict';var m=c('getActiveElement')();return !(m&&c('CSS').shown(m))||!!this.getParentStory(m);};k.prototype.hasExpandableStoryInFocus=function(event,l){'use strict';var m=c('getActiveElement')();return !!(m.getElementsByClassName('text_exposed_root').length&&!m.getElementsByClassName('text_exposed_root text_exposed').length);};k.prototype.clickElement=function(l){'use strict';if(!l)return;var m=void 0;for(var n=arguments.length,o=Array(n>1?n-1:0),p=1;p<n;p++)o[p-1]=arguments[p];for(var q=0,r=o.length;q<r;q++){m=c('DOM').scry(l,o[q])[0];if(m&&c('CSS').shown(m)){m.click();return;}}};k.prototype.click=function(){'use strict';for(var l=arguments.length,m=Array(l),n=0;n<l;n++)m[n]=arguments[n];this.clickElement.apply(this,[this.selected].concat(m));};k.prototype.$FeedBaseKeyboardController1=function(){'use strict';if(!this.$FeedBaseKeyboardController2){this.scrollOffset=0;var l=c('ge')('pagelet_feed_switcher_root');if(l)this.scrollOffset+=l.getBoundingClientRect().height;this.subscriptions.addSubscriptions(c('Event').listen(document,'scroll',function(){if(this.selected&&!this.scrolling)this.setSelected(null,false);}.bind(this)));this.$FeedBaseKeyboardController2=true;}};k.prototype.$FeedBaseKeyboardController3=function(){'use strict';if(!this.$FeedBaseKeyboardController4){j();this.subscriptions.addSubscriptions(c('Event').listen(window,'resize',c('throttle')(j)));this.$FeedBaseKeyboardController4=true;}};k.prototype.vert=function(l){'use strict';this.$FeedBaseKeyboardController1();var m,n;if(this.selected){if(c('Banzai').isEnabled('kbshortcuts_feed')){n=l>0?'kbshortcuts.scroll_down':'kbshortcuts.scroll_up';c('BanzaiODS').bumpEntityKey('kbshortcuts_feed',n);c('BanzaiNectar').log('feed_scroll',n,{});}c('AccessibilityLogger').logJKKey();if(this.selected.id=='pagelet_composer'){m=l>0?this.getStories()[0]:null;if(this.isHoldoutStory(m))m=this.getPreviousStory(m);}else if(l===0){m=this.selected;}else m=l>0?this.getNextStory(this.selected):this.getPreviousStory(this.selected)||c('ge')('pagelet_composer');if(!m){return;}else if(!c('isElementNode')(m)){c('CSS').removeClass(this.selected,'selectedStorySimple');this.selected=m;return this.vert(l);}}if(!m||c('Parent').byClass(m,'hidden_elem')||!c('DOM').contains(document,m)){m=this.findTop();if(m&&l<0)m=this.getPreviousStory(m);if(this.isHoldoutStory(m))m=this.getPreviousStory(m);}if(!m)return;this.anim&&this.anim.stop();var o=Date.now()-(this.lastScroll||0)>30,p=c('emptyFunction');if(l!==0)p=this.setFocused.bind(this,m);if(c('isAsyncScrollQuery')()){o=false;p();p=c('emptyFunction');}this.scrolling=true;this.scrollingTimer&&clearTimeout(this.scrollingTimer);this.$FeedBaseKeyboardController3();this.anim=c('DOMScroll').scrollTo(m,o?this.getAnimationLength(m):0,false,c('Vector').getViewportDimensions().y-i-this.getScrollOffset(),0,function(){this.scrollingTimer=setTimeout(function(){this.scrolling=false;}.bind(this),300);var q=c('Vector').getScrollPosition();p();if(q.distanceTo(c('Vector').getScrollPosition())!==0)c('DOMScroll').scrollTo(q,0);}.bind(this));this.setSelected(m,true);this.lastScroll=Date.now();};k.prototype.setTabindexOnStory=function(l,m){'use strict';if(this.isStory(l))l.tabIndex=m;};k.prototype.setFocused=function(l){'use strict';if(this.isStory(l))c('Focus').setWithoutOutline(l);};f.exports=k;},null);
__d('NewStoriesPillController',['csx','Bootloader','DOMQuery','ge'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i={_isAtTop:false,_view:null,show:function(j){c('Bootloader').loadModules(["NewStoriesPillView"],function(k){this._view=k;k.renderInto(c('DOMQuery').scry(c('ge')('contentArea'),"._2c44")[0],this._isAtTop);k.hideWhenScrollAbove(j);}.bind(this),'NewStoriesPillController');},hide:function(){this._isAtTop=false;if(this._view)this._view.unmount();},setAtTop:function(){this._isAtTop=true;if(this._view)this._view.setAtTop();}};f.exports=i;},null);
__d('ChatTabListener',['cx','ChatTabModel','CSS','DOMQuery','Event','Run','SubscriptionsHandler','getNormalizedClientRect','throttle'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i,j=new (c('SubscriptionsHandler'))();function k(){if(!i)return;var n=c('DOMQuery').scry(document.body,'div.fbDockChatTabFlyout'),o=c('getNormalizedClientRect')(i);for(var p=0;p<n.length;p++){var q=c('getNormalizedClientRect')(n[p]);if(!q.height||!q.width)continue;if(q.left<=o.right){c('CSS').addClass(i,"_yy7");return;}}c('CSS').removeClass(i,"_yy7");}var l=c('throttle')(k,50),m={init:function(n){c('Run').onAfterLoad(function(){i=n;j.addSubscriptions(c('ChatTabModel').addListener(l),c('Event').listen(window,'resize',l));k();});c('Run').onUnload(function(){return j.release();});}};f.exports=m;},null);
__d('LitestandColumnManager',['Arbiter','BlueBar','Event','NavigationMessage','Run','SubscriptionsHandler','clamp','ge','getScrollPosition'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=0,i=null;function j(){if(i)return;i=new (c('SubscriptionsHandler'))();i.addSubscriptions(c('Arbiter').subscribe(c('NavigationMessage').NAVIGATION_BEGIN,function(){m(0);k();}),c('Arbiter').subscribe('ufi/didUpdate',function(p,q){if(q.offsetY)o.adjustVerticalWindowPosition(c('getScrollPosition')(window),q.offsetY);}),c('Event').listen(window,'resize',function(){if(!c('BlueBar').hasFixedBlueBar()){m(0);k();}}),c('Event').listen(window,'scroll',function(){if(!l())k();}));c('Run').onLeave(function(){return i&&i.release();});}function k(){i.release();i=null;}function l(){if(h<=0)return false;m(c('clamp')(c('getScrollPosition')(window).y,0,h));return h>0;}function m(p){if(p===h)return;n('leftCol',p);n('rightCol',p);h=p;}function n(p,q){var r=c('ge')(p);if(r)r.style.marginTop=q?q+'px':'';}var o={adjustVerticalWindowPosition:function(p,q){j();m(q);window.scrollTo(p.x,p.y+h);}};f.exports=o;},null);
__d('runAfterScrollingStops',['Arbiter','Event','Run','debounceAcrossTransitions','emptyFunction'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(s,t,u){if(t&&k[t])return;if(!j){c('Arbiter').subscribe('page_transition',r);j=true;}if(!i){s();return;}t&&(k[t]=1);l.push(s);if(!u){if(n){c('Run').onLeave(r);n=false;}m.push(l.length-1);}}var i,j,k={},l=[],m=[],n=true,o=500,p=c('debounceAcrossTransitions')(function(){i=false;var s=l;l=[];m=[];k={};for(var t=0,u=s.length;t<u;++t)s[t]();},o);function q(){i=true;p();}function r(){var s=m;m=[];n=true;for(var t=0,u=s.length;t<u;++t)l[s[t]]=c('emptyFunction');}c('Event').listen(window,'scroll',q);f.exports=h;},null);
__d('LitestandOffscreenController',['csx','cx','Arbiter','CSS','DOMQuery','Event','NavigationMessage','Run','Scroll','Style','SubscriptionsHandler','Vector','getFullScreenElement','getOrCreateDOMID','queryThenMutateDOM','runAfterScrollingStops','throttle'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=1,k=9,l=10,m={},n=false,o,p,q,r,s=[];function t(){o&&o.release();o=null;n=false;}function u(){m={};s=[];}function v(){if(c('CSS').matchesSelector(document.body,"._5vb_"))return l;return k;}function w(){r=r||c('Vector').getViewportDimensions().y;p=c('Vector').getScrollPosition().y;q=p+r;if(j){p-=r*j;q+=r*j;}for(var ea in m){var fa=m[ea];fa.position=c('Vector').getElementPosition(fa.element).y;if(!fa.hidden)fa.height=fa.element.offsetHeight;}}function x(){var ea=[],fa=c('getFullScreenElement')();for(var ga in m){var ha=m[ga],ia=ha.position,ja=ia+ha.height<p,ka=ia>q;if(!fa&&!ha.hidden&&(ja||ka)){y(ha);}else if(!ja&&!ka){ha.pendingHide=false;if(ha.hidden){if(ha.dirty&&ia<p){ea.push(ga);c('CSS').addClass(z(ha),"_49nu");}else c('Style').apply(ha.element,{height:'',marginBottom:''});c('CSS').show(z(ha));ha.dirty=false;ha.hidden=false;}}}if(!ea.length)return;var la=0;c('queryThenMutateDOM')(function(){for(var ma=0,na=ea.length;ma<na;ma++){var oa=m[ea[ma]];la+=oa.height-z(oa).offsetHeight+c('Style').getFloat(oa.element,'marginBottom');}},function(){for(var ma=0,na=ea.length;ma<na;ma++){var oa=m[ea[ma]];c('CSS').removeClass(z(oa),"_49nu");c('Style').apply(oa.element,{height:'',marginBottom:''});}la&&c('Scroll').setTop(document.body,c('Scroll').getTop(document.body)-la);});}function y(ea){if(!ea.pendingHide){s.push(ea);ea.pendingHide=true;}}function z(ea){if(ea.wrapperElement)return ea.wrapperElement;var fa=ea.element;if(fa.firstElementChild)return ea.wrapperElement=fa.firstElementChild;for(var ga=0;ga<fa.childNodes.length;ga++)if(fa.childNodes[ga].tagName)return ea.wrapperElement=fa.childNodes[ga];}function aa(){var ea=v()+'px';for(var fa=0;fa<s.length;fa++){var ga=s[fa];if(c('DOMQuery').scry(ga.element,"._52fb").length)ga.pendingHide=false;if(ga&&ga.element&&ga.pendingHide&&!ga.hidden){c('Style').apply(ga.element,{height:ga.height+'px',marginBottom:ea});c('CSS').hide(z(ga));ga.hidden=true;ga.pendingHide=false;}}s=[];}function ba(){c('runAfterScrollingStops')(aa,'LitestandOffscreenController/hide');c('queryThenMutateDOM')(w,x,'LitestandOffscreenController');}function ca(){c('Run').onLeave(t);o=new (c('SubscriptionsHandler'))();o.addSubscriptions(c('Arbiter').subscribe(c('NavigationMessage').NAVIGATION_BEGIN,u),c('Event').listen(window,'scroll',c('throttle')(ba)),c('Event').listen(window,'resize',c('throttle')(function(){r=null;ba();})));n=true;}var da={attachSubstream:function(ea){n||ca();m[c('getOrCreateDOMID')(ea)]={element:ea};}};f.exports=da;},null);
__d('LitestandNewStoryController',['cx','Arbiter','AsyncRequest','BlueBar','LitestandColumnManager','LitestandMessages','LitestandStream','Style','$','getScrollPosition','queryThenMutateDOM','requestAnimationFrame','setImmediate'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=50,j=500,k,l,m;function n(){m&&clearTimeout(m);m=null;}function o(){m=setTimeout(function(){m=null;p();},j);}function p(){var v;c('queryThenMutateDOM')(function(){v=c('LitestandStream').canInsertNewerStories();},function(){if(v){s();}else o();},'LitestandNewStoryController/tryShowingStories');}function q(v){CSS.addClass(v,"_38xk");c('requestAnimationFrame')(function(){return c('Style').set(v,'opacity',1);});}function r(v){n();if(!l)return;var w=l.nextSibling;if(v&&w)var x=w.offsetTop;c('Style').apply(l,{height:'',left:'',opacity:'',overflow:'',position:'',width:''});if(v){var y=w.offsetTop+i,z=y-x,aa=c('getScrollPosition')(window);c('LitestandColumnManager').adjustVerticalWindowPosition(aa,z);c('requestAnimationFrame')(function(){c('LitestandColumnManager').adjustVerticalWindowPosition(aa,z);q(l);if(k){k.setAtTop();k.show(z);}});}else q(l);c('Arbiter').inform(c('LitestandMessages').STORIES_INSERTED);c('Arbiter').inform(c('LitestandMessages').NEWER_STORIES_INSERTED);c('setImmediate')(function(){return c('Arbiter').inform('reflow');});new (c('AsyncRequest'))().setURI('/ajax/litestand/update_filter_viewtime').setData({section_id:c('LitestandStream').getSectionID()}).send();}function s(){r(c('BlueBar').hasFixedBlueBar());}function t(){r(false);}var u={waitForDisplay:function(v){if(!l)l=c('$')(v);if(c('LitestandStream').canInsertNewerStories()){s();}else o();},showStoriesNow:function(v){l=v;t();},setNewStoryPill:function(v){k=v;}};f.exports=u;},null);
__d('FeedErrorDetection',['csx','Banzai','CSS','DataAttributeUtils','DOM','ge'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=0,j={},k=false,l=false;function m(event,r,s,t){var u={event:event,shouldLogDetail:r,site:'www'};if(r){u.intValues=s;u.normalValues=t;}c('Banzai').post('feed_error_detection',u,{delay:0});}var n=function(r,s,t,u){var v=c('DOM').scry(r,s||"._5jmm").filter(t),w={};for(var x=0;x<v.length;x++){var y=v[x],z=y.getAttribute('data-dedupekey');if(w[z]){u(y);}else w[z]=1;}},o=function(r){return !!r.getAttribute('data-dedupekey');},p=function(r){return o(r)&&c('CSS').shown(r);},q={dedupe:function(r,s){n(r,s,o,function(t){return c('DOM').remove(t);});},dedupeHide:function(r,s){n(r,s,p,function(t){c('CSS').hide(t);t.removeAttribute('style');});},registerFeedStories:function(r,s){if(r=='substream_0'){i=0;j={};k=false;l=false;}var t=c('DOM').scry(c('ge')(r),"._5jmm"),u=t.length;if(!u&&!k){if(!l){l=true;return;}if(!i){m('empty_feed_js',s,{},{});}else m('end_of_feed_js',s,s?{stories_count:i}:{},{});k=true;return;}l=false;for(var v=0;v<u;v++){var w=t[v],x=w.getAttribute('data-dedupekey'),y=c('DataAttributeUtils').getDataFt(w);if(!x||!y)continue;if(x in j){var z={};if(s)z={dedupKey:x,ft_A:y,ft_B:j[x]};m('duplicate_stories',s,{},{dup_field:z});}else{j[x]=y;i++;}}}};f.exports=q;},null);
__d('LitestandStreamLoader',['$','Arbiter','Bootloader','CSS','DOM','FeedErrorDetection','Event','JSXDOM','LitestandMessages','LitestandOffscreenController','LitestandStoryInsertionStatus','LitestandStream','NavigationMessage','OnVisible','Run','UserActivity','ex','ge','getElementPosition','getOrCreateDOMID','getUnboundedScrollPosition','getViewportDimensions','throttle'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h='www_feed_load_universe',i=0,j=false,k={},l,m,n,o,p,q,r=0,s,t,u=[],v=0,w=false,x=0,y,z;function aa(){c('Run').onLeave(ca);i=0;u=[c('Arbiter').subscribe(c('NavigationMessage').NAVIGATION_BEGIN,ca),c('Arbiter').subscribe(c('LitestandMessages').NEWER_STORIES_INSERTED,function(){z=null;})];u.push(c('Arbiter').subscribe('layer_shown',function(ta,ua){if(ua&&ua.type==='DialogX')i++;}),c('Arbiter').subscribe('layer_hidden',function(ta,ua){if(ua&&ua.type==='DialogX')i--;}));c('LitestandStoryInsertionStatus').registerBlocker(function(){return i>0;});j=true;}function ba(ta){c('Bootloader').loadModules(["BanzaiODS"],function(ua){ua&&ua.bumpEntityKey('feed_load',ta);},'LitestandStreamLoader');}function ca(){c('Arbiter').inform(c('LitestandMessages').LEAVE_HOME);j=false;k={};t=null;r=0;u.forEach(c('Arbiter').unsubscribe);u=[];l&&l.remove();p&&clearTimeout(p);p=null;o=null;z=null;s&&s.remove();s=null;x=0;v=0;w=false;}function da(ta){p&&clearTimeout(p);p=setTimeout(function(){p=null;ja();},ta);}function ea(){if(t&&o&&t.pollIntervalMS&&t.pollIntervalMS>1000){c('UserActivity').setIdleTime(t.newStoryIdleTime);da(t.pollIntervalMS);}}function fa(){l=new (c('OnVisible'))(c('DOM').find(m,'a'),ra.bind(null,false),false,t?t.bufferPixels:1000);}function ga(){var ta=c('getUnboundedScrollPosition')(window).y;return ta>t.firstPagerScrollBuffer;}function ha(){if(ga()){fa();s&&s.remove();s=null;}}function ia(ta){var ua=c('DOM').find(m,'a');c('Event').listen(ua,'click',function(event){ra();s&&s.remove();s=null;event.preventDefault();});var va=c('getElementPosition')(m),wa=c('getViewportDimensions')();if(ta&&va.y<wa.height){ra();}else if(ta&&!ga()){s=c('Event').listen(window,'scroll',c('throttle')(ha));}else fa();}function ja(){if(!o)return;if(!c('UserActivity').isActive(t.newStoryIdleTime)){c('UserActivity').subscribeOnce(ja);return;}if(c('UserActivity').hasBeenInactive()){c('UserActivity').resetActiveStatus();var ta=t.pollIntervalMS,ua=Date.now()-c('UserActivity').getLastInActiveEnds();if(ua<ta){da(ta-ua);return;}}if(!c('LitestandStream').canInsertNewerStories()){da(t.pollIntervalMS);return;}ka();}function ka(){if(!o)return;p&&clearTimeout(p);if(!z){var ta=c('LitestandStream').getStreamRoot();z=c('JSXDOM').div({style:{height:0,width:ta.offsetWidth+'px',left:'-10000px',opacity:0,overflow:'hidden',position:'absolute'}});c('DOM').prependContent(ta,z);c('Arbiter').inform(c('LitestandMessages').NEW_STORIES_CONTAINER_CREATED,z);}var ua=c('JSXDOM').div(null);c('DOM').prependContent(z,ua);c('Bootloader').loadModules(["UIPagelet"],function(va){va.loadFromEndpoint('LitestandNewerStoriesPagelet',ua,Object.assign(o,{cursor:y,containerID:c('getOrCreateDOMID')(z)}),{crossPage:true,errorHandler:ma,transportErrorHandler:ma});},'LitestandStreamLoader');c('Arbiter').inform(c('LitestandMessages').NEWER_STORIES_REQUESTED);}function la(){var ta=c('getOrCreateDOMID')(m);c('CSS').addClass(m,'async_saving');var ua=pa(),va=ua.cursor,wa=ua.storiesCount;if(k[va]){ba('duplicate_cursor');c('Arbiter').inform(c('LitestandMessages').DUPLICATE_CURSOR_ERROR,va);throw new Error(c('ex')('This cursor has been used before, stories would be repeated. Cursor: %s',va));}k[va]=va;var xa={cursor:va,pager_config:n,pager_id:ta,scroll_count:++r,feed_stream_id:c('LitestandStream').getFeedStreamID(),story_id:c('LitestandStream').getStoryID(),client_stories_count:wa};c('Bootloader').loadModules(["UIPagelet"],function(ya){ya.loadFromEndpoint(t.pagerController,c('getOrCreateDOMID')(q),xa,{append:true,automatic:true,usePipe:true,crossPage:t.crossPage,errorHandler:na,transportErrorHandler:na});c('Arbiter').inform(c('LitestandMessages').STORIES_REQUESTED);},'LitestandStreamLoader');}function ma(ta){ba('streamload_error.head');c('Arbiter').inform(c('LitestandMessages').STREAM_LOAD_ERROR,ta);}function na(ta){var ua=pa();delete k[ua.cursor];ba('streamload_error.tail');c('Arbiter').inform(c('LitestandMessages').STREAM_LOAD_ERROR,ta);if(t&&t.inRetryExp){c('Bootloader').loadModules(["QE"],function(va){va&&va.logExposure(h);},'LitestandStreamLoader');if(t.hasTailRetry){if(w)ba('streamload_error.tail.retry');if(v<t.maxTailRetries){v++;ra(true);ba('streamload.tail.retry');c('Arbiter').inform(c('LitestandMessages').STREAM_LOAD_RETRY);return;}}}c('CSS').removeClass(m,'async_saving');}function oa(){var ta=qa();if(ta.length){return ta[0].getAttribute('data-cursor');}else return m&&m.getAttribute('data-cursor');}function pa(){var ta=qa(),ua={},va=t&&t.noDOMCursors;ua.storiesCount=ta.length;if(!ta.length)ta.length=0;if(ta.length&&!va){ua.cursor=ta[ta.length-1].getAttribute('data-cursor');}else ua.cursor=m&&m.getAttribute('data-cursor');return ua;}function qa(){var ta=c('DOM').scry(q,c('LitestandStream').getStoriesSelector());return ta.filter(function(ua){return ua.getAttribute('data-cursor');});}function ra(ta){if(j){w=ta;la();l&&l.remove();l=null;}else ba('uninitialized_load');}var sa={register:function(ta,ua,va,wa){j||aa();t=babelHelpers['extends']({bufferPixels:1000,firstPagerScrollBuffer:100,pagerController:'LitestandMoreStoriesPagelet',pollIntervalMS:null,newStoryIdleTime:60000,inRetryExp:false,hasTailRetry:false,maxTailRetries:2},ua);n=va;q=c('$')(ta);y=oa();m=wa;ia(true);ea();},removeOldPager:function(ta,ua){if(ta)c('DOM').remove(c('$')(ta));c('CSS').show(c('$')(ua));},removeLoadingIndicator:function(ta,ua){var va=c('ge')(ta);if(va)c('DOM').remove(va);c('CSS').show(ua);},moreStoriesInserted:function(ta){c('Arbiter').inform(c('LitestandMessages').STORIES_INSERTED,{substream_id:ta});var ua=c('$')(ta);c('LitestandOffscreenController').attachSubstream(ua);if(w){w=false;v=0;ba('streamload.tail.retry.success');}},attachNewPager:function(ta){c('FeedErrorDetection').dedupeHide(c('LitestandStream').getStreamRoot(),c('LitestandStream').getStoriesSelector());m=ta;m&&ia(false);},setPollerData:function(ta){if(ta){o=ta;ea();}},headLoadCompleted:function(ta){y=ta.newCursor;ea();var ua=ta.stories;if(ua&&ua.length>0){for(var va=ua.length-1;va>=0;va--)ua[va].setAttribute('data-insertion-position',--x);c('FeedErrorDetection').dedupe(c('LitestandStream').getStreamRoot(),c('LitestandStream').getStoriesSelector());c('Arbiter').inform('Stream/totalHeadLoadedStories',{count:-x});}},forceNewFetch:ka};f.exports=sa;},null);
__d('AsyncLayout',['AjaxPipeRequest','Arbiter','AsyncRequest','AsyncResponse','CSS','DOM','HTML','NavigationMessage','PageTransitionsRegistrar','URI','$','emptyFunction','ge','goURI','requireWeak'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h;c('requireWeak')('PageTransitions',function(j){h=j;});function i(j){'use strict';this.canvasID=j;if(c('ge')('rightCol'))this.auxiliaryID='rightCol';if(c('ge')('headerArea'))this.headerID='headerArea';if(c('ge')('toolbarContainer'))this.toolbarID='toolbarContainer';this.waitingForAux=false;c('PageTransitionsRegistrar').registerHandler(this.catchPageTransition.bind(this));this.subscription=c('Arbiter').subscribe(c('NavigationMessage').NAVIGATION_BEGIN,this.onNavigate.bind(this));c('Arbiter').inform('AsyncLayout/initialized',null,c('Arbiter').BEHAVIOR_STATE);}i.prototype.catchPageTransition=function(j){'use strict';this.subscription.unsubscribe();return false;};i.prototype.getCanvasID=function(j){'use strict';return j.sidecol?'contentCol':'contentArea';};i.prototype.onNavigate=function(j,k){'use strict';var l=k.useAjaxPipe;k=k.params;if(k.endpoint){if(this.request){this.request.setFinallyHandler(c('emptyFunction'));this.request.abort();}if(this.sideRequest)this.sideRequest.abort();if(l){this.request=new (c('AjaxPipeRequest'))().setURI(k.endpoint).setData(k).setCanvasId(this.getCanvasID(k)).setFinallyHandler(this.finallyHandler.bind(this)).setErrorHandler(this.errorHandler.bind(this)).setFirstResponseCallback(this.firstResponseCallback.bind(this)).send();}else{k.handled=true;this.waitingForAux=k.sidecol;var m=!!k.iframe,n=new (c('AsyncRequest'))().setOption('useIframeTransport',m).setURI(new (c('URI'))(k.endpoint)).setReadOnly(true).setMethod('GET').setData(k).setHandler(this.onResponse.bind(this)).setErrorHandler(this.errorHandler.bind(this)).setFinallyHandler(this.finallyHandler.bind(this));this.request=n;n.send();}}};i.prototype.onSideResponse=function(j){'use strict';var k=j.getPayload();if(k&&this.auxiliaryID)this.receivedAux(k);};i.prototype.receivedAux=function(j){'use strict';!this.waitingForAux;this.waitingForAux=false;c('DOM').setContent(c('$')(this.auxiliaryID),c('HTML')(j));};i.prototype.onResponse=function(j){'use strict';var k=j.getPayload();if(k.redirect){c('goURI')(k.redirect);}else{var l=k.html||k;c('DOM').setContent(c('$')(this.canvasID),c('HTML')(l));if(k.side_html&&this.auxiliaryID)this.receivedAux(k.side_html);if(this.headerID&&!k.keep_header){var m=c('$')(this.headerID);c('DOM').setContent(m,c('HTML')(k.header_html||''));c('CSS').conditionShow(m,k.header_html);}if(k.toolbar_html&&this.toolbarID)c('DOM').setContent(c('$')(this.toolbarID),c('HTML')(k.toolbar_html));if(k.js)new Function(k.js)();c('CSS').conditionClass('contentCol','hasRightCol',this.auxiliaryID&&!k.noRightSide);var n=c('ge')('rightCol');if(n&&k.noRightSide)c('DOM').empty(n);}var o=j.getRequest().getData();c('Arbiter').inform(c('NavigationMessage').NAVIGATION_COMPLETED,o.key);};i.prototype.errorHandler=function(j){'use strict';c('AsyncResponse').verboseErrorHandler(j);c('Arbiter').inform(c('NavigationMessage').NAVIGATION_FAILED);this.request=null;};i.prototype.firstResponseCallback=function(j){'use strict';window.scrollTo(0,0);c('Arbiter').inform(c('NavigationMessage').NAVIGATION_FIRST_RESPONSE);};i.prototype.finallyHandler=function(j){'use strict';this.request=null;if(h)h.transitionComplete(true);c('Arbiter').inform(c('NavigationMessage').NAVIGATION_COMPLETED);};f.exports=i;},null);
__d('PhotosUploadWaterfallMixin',['PhotosUploadWaterfall','emptyFunction'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('emptyFunction'),i={getUploaderApp:h,getWaterfallID:h,getAdditionalData:function(){return {};},logWaterfallStep:function(j,k,l){c('PhotosUploadWaterfall').sendSignal(babelHelpers['extends']({qn:this.getWaterfallID(),uploader:this.getUploaderApp(),step:j,ref:this.getWaterfallSource&&this.getWaterfallSource()},this.getAdditionalData(),k),l);},logWaterfallStepUsingBanzai:function(j,k,l){c('PhotosUploadWaterfall').sendBanzai(babelHelpers['extends']({qn:this.getWaterfallID(),uploader:this.getUploaderApp(),step:j,ref:this.getWaterfallSource&&this.getWaterfallSource()},this.getAdditionalData(),k),l);}};f.exports=i;},null);
__d('PhotoSourceTypes',['keyMirror'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports=c('keyMirror')({COMPUTER:null,POSTED_PHOTOS:null,SYNCED_PHOTOS:null,SUGGESTIONS:null,PAGES_POSTED_PHOTOS:null});},null);
__d('BaseSelectionContainer',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=0;function i(){'use strict';this.$BaseSelectionContainer1=(h++).toString();}i.prototype.getSelectionContainerID=function(){'use strict';return this.$BaseSelectionContainer1;};i.prototype.getSource=function(){'use strict';throw 'This must be implemented by the child class';};i.prototype.getName=function(){'use strict';return null;};i.prototype.getSize=function(){'use strict';return null;};i.prototype.hasPlaceholderUI=function(){'use strict';throw 'This must be implemented by the child class';};f.exports=i;},null);
__d('SelectionSource',['PhotoSourceTypes'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={FILE:'file',FLASH:'flash',VAULT:'vault',SUGGESTIONS:'suggestions',POSTED_PHOTOS:'posted_photos',PAGES_POSTED_PHOTOS:'pages_posted_photos',toPhotoSourceType:function(i){switch(i){case h.FILE:case h.FLASH:return c('PhotoSourceTypes').COMPUTER;case h.VAULT:return c('PhotoSourceTypes').SYNCED_PHOTOS;case h.SUGGESTIONS:return c('PhotoSourceTypes').SUGGESTIONS;case h.POSTED_PHOTOS:return c('PhotoSourceTypes').POSTED_PHOTOS;case h.PAGES_POSTED_PHOTOS:return c('PhotoSourceTypes').PAGES_POSTED_PHOTOS;default:throw 'No mapping for SelectionSource: '+i;}}};f.exports=h;},null);
__d('FileSelectionContainer',['BaseSelectionContainer','SelectionSource'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('BaseSelectionContainer'));i=h&&h.prototype;function j(k){'use strict';i.constructor.call(this);this.$FileSelectionContainer1=k;}j.prototype.getFile=function(){'use strict';return this.$FileSelectionContainer1;};j.prototype.getSource=function(){'use strict';return c('SelectionSource').FILE;};j.prototype.getName=function(){'use strict';return this.$FileSelectionContainer1.fileName||this.$FileSelectionContainer1.name;};j.prototype.getSize=function(){'use strict';return this.$FileSelectionContainer1.fileSize||this.$FileSelectionContainer1.size;};j.prototype.hasPlaceholderUI=function(){'use strict';return false;};f.exports=j;},null);
__d('FilePickerEvent',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports={BEGIN:'FilePickerEvent/BEGIN',SELECT_START:'FilePickerEvent/SELECT_START',SELECTED:'FilePickerEvent/SELECTED_FILES',ALBUM_LIMIT_EXCEEDED:'FilePickerEvent/ALBUM_LIMIT_EXCEEDED',SESSION_LIMIT_EXCEEDED:'FilePickerEvent/SESSION_LIMIT_EXCEEDED',SELECT_CANCELED:'FilePickerEvent/SELECT_CANCELED',FALLBACK:'FilePickerEvent/FALLBACK'};},null);
__d('HTML5FilePicker',['cx','ArbiterMixin','BrowserSupport','CSS','DOM','FilePickerEvent','FileSelectionContainer','Parent','PhotosUploadID','PhotosUploadWaterfall','PhotosUploadWaterfallMixin','PhotosUploadWaterfallXMixin','PUWApplications','PUWSteps','URI','getOrCreateDOMID'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(j,k){this._config=babelHelpers['extends']({accept:undefined,multiple:undefined},k);this._button=j;this._beginInformed=false;if(!c('BrowserSupport').hasFileAPI()){this.logStep(c('PUWSteps').CLIENT_PROCESS_UNAVAILABLE,{error:'no_file_api'});if(this._config.hasOwnProperty('fallbackFunction')){this._config.fallbackFunction.call(this);return;}return;}this._subscriptions=[];var l=this._config.input||c('DOM').create('input',{type:'file',className:"_n"});if(this._config.hasOwnProperty('accept'))l.accept=this._config.accept;if(this._config.hasOwnProperty('multiple'))l.multiple=this._config.multiple;if(this._config.hasOwnProperty('title'))l.title=this._config.title;var m=c('DOM').create('label',{className:'accessible_elem','for':c('getOrCreateDOMID')(l)},l.title),n=c('DOM').create('div',{className:"_3jk"},[m,l]);c('CSS').addClass(this._button,"_m");c('DOM').appendContent(this._button,n);this._button.setAttribute('rel','ignore');this._bindInput(l);var o=c('Parent').byClass(this._button,'addPhotosDisabled');if(o){c('CSS').removeClass(o,'addPhotosDisabled');c('CSS').addClass(o,'addPhotosEnabled');}}Object.assign(i.prototype,c('ArbiterMixin'),c('PhotosUploadWaterfallMixin'),c('PhotosUploadWaterfallXMixin'),{getUploaderApp:function(){return c('PhotosUploadWaterfall').APP_HTML5;},getWaterfallID:function(){return this._config.qn;},getWaterfallAppName:function(){return c('PUWApplications').WEB_HTML5;},getWaterfallSource:function(){return this._config.ref;},getSwfID:function(){return null;},_constructFileList:function(){var j=Array.from(this._input.files);j.forEach(function(k){k.uploadID=c('PhotosUploadID').getNewID();});return j;},_constructFileSelectionContainerList:function(){var j=Array.from(this._input.files);return j.map(function(k){return new (c('FileSelectionContainer'))(k);});},cleanup:function(){if(this._input){this._input.onclick=null;this._input.onchange=null;}},_bindInput:function(j){this.cleanup();j.onclick=function(){this.logWaterfallStep(c('PhotosUploadWaterfall').SELECT_START);if(!this._beginInformed){this._beginInformed=true;this.inform(c('FilePickerEvent').BEGIN||'FilePickerEvent/BEGIN');}this.inform(c('FilePickerEvent').SELECT_START);}.bind(this);j.onchange=function(){this.inform(c('FilePickerEvent').SELECTED,{sender:this,files:this._constructFileList(),selections:this._constructFileSelectionContainerList()});this._bindInput(this._input.cloneNode(false));}.bind(this);if(this._input)c('DOM').replace(this._input,j);this._input=j;}});f.exports=i;},null);
__d('UploadSession',['AsyncRequest','FilePickerEvent','PhotosUploadWaterfall','PUWSteps','URI','arrayContains'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={};function i(k){'use strict';this._sessionID=k;this._asyncBootstrapped=false;this._controller=null;this._overlay=null;this._pickers=[];this._pendingFileLists=[];this._beginLogged=false;this._albumLimitWasExceeded=false;this._sessionLimitWasExceeded=false;}i.prototype.addFilePicker=function(k){'use strict';if(!c('arrayContains')(this._pickers,k)){this._pickers.push(k);if(this._controller&&k.getSwfID&&k.getSwfID())this._controller.preregisterSwf&&this._controller.preregisterSwf(k.getSwfID());k.subscribe(c('FilePickerEvent').BEGIN,function(l,m){if(!this._beginLogged){this._beginLogged=true;k.logWaterfallStep(c('PhotosUploadWaterfall').BEGIN);k.logStep(c('PUWSteps').CLIENT_FLOW_BEGIN);}}.bind(this));k.subscribe(c('FilePickerEvent').SELECTED,function(l,m){k.logStep(c('PUWSteps').CLIENT_SELECT_SUCCESS,{volume:m.files.length});if(this._controller){this._controller.uploadFiles(m.files);}else this._pendingFileLists.push(m);if(this._asyncBootstrapped)return;var n=k._button,o=new (c('URI'))(n.getAttribute('ajaxify'));o.addQueryData('num_selected',m.files.length);c('AsyncRequest').bootstrap(o.toString(),n,true);this._asyncBootstrapped=true;}.bind(this));k.subscribe(c('FilePickerEvent').SELECT_START,function(){k.logStep(c('PUWSteps').CLIENT_SELECT_BEGIN);}.bind(this));k.subscribe(c('FilePickerEvent').SELECT_CANCELED,function(){k.logStep(c('PUWSteps').CLIENT_SELECT_CANCEL);if(!this._overlay){k.logStep(c('PUWSteps').CLIENT_FLOW_CANCEL);this._beginLogged=false;}}.bind(this));k.subscribe(c('FilePickerEvent').ALBUM_LIMIT_EXCEEDED,function(){if(this._controller){this._controller.albumLimitExceeded();}else this._albumLimitWasExceeded=true;}.bind(this));k.subscribe(c('FilePickerEvent').SESSION_LIMIT_EXCEEDED,function(){if(this._controller){this._controller.sessionLimitExceeded();}else this._sessionLimitWasExceeded=true;}.bind(this));}};i.prototype.addController=function(k){'use strict';this._controller=k;this._asyncBootstrapped=true;var l=this._controller.getWaterfallID?this._controller.getWaterfallID():this._controller.getWaterfallConfig().waterfallID,m=this._controller.getUploaderApp?this._controller.getUploaderApp():this._controller.getWaterfallConfig().waterfallApp;if(!this._beginLogged){this._beginLogged=true;c('PhotosUploadWaterfall').sendSignal({qn:l,step:c('PhotosUploadWaterfall').BEGIN,uploader:m});}if(this._pendingFileLists.length){var n=[];this._pendingFileLists.forEach(function(o){n=n.concat(o.files);});this._controller.uploadFiles(n);}else c('PhotosUploadWaterfall').sendSignal({qn:l,step:c('PhotosUploadWaterfall').OVERLAY_FIRST,uploader:m});if(this._albumLimitWasExceeded)this._controller.albumLimitExceeded();if(this._sessionLimitWasExceeded)this._controller.sessionLimitExceeded();};i.prototype.addOverlay=function(k){'use strict';this._overlay=k;};i.prototype.addOverlayAndController=function(k,l){'use strict';this.addOverlay(k);this.addController(l);};i.addFilePickerToSession=function(k,l){'use strict';j(k).addFilePicker(l);};i.addControllerToSession=function(k,l){'use strict';j(k).addController(l);};i.addOverlayToSession=function(k,l){'use strict';j(k).addOverlay(l);};i.addOverlayAndControllerToSession=function(k,l,m){'use strict';j(k).addOverlayAndController(l,m);};function j(k){if(!h[k])h[k]=new i(k);return h[k];}f.exports=i;},null);
__d('PrivacySelectorOptionNew',['csx','cx','fbt','invariant','CSS','DOM','DOMQuery','JSXDOM','MenuSelectableItem','PrivacyConst'],function a(b,c,d,e,f,g,h,i,j,k){var l,m;if(c.__markCompiled)c.__markCompiled();l=babelHelpers.inherits(n,c('MenuSelectableItem'));m=l&&l.prototype;function n(o){'use strict';m.constructor.call(this,o);this._origLabel=this.getLabel();this._origTriggerLabel=this.getTriggerLabel();}n.prototype._getData=function(){'use strict';return this._data;};n.prototype.getTooltip=function(){'use strict';return this._getData().tooltip;};n.prototype.getPostParam=function(){'use strict';return this._getData().postParam.toString();};n.prototype.getTriggerIcon=function(){'use strict';return this._getData().triggerIcon;};n.prototype.getTriggerLabel=function(){'use strict';return this._getData().triggerLabel;};n.prototype.isPublic=function(){'use strict';return this.getPostParam().toString()===c('PrivacyConst').PostParam.EVERYONE.toString();};n.prototype.isFriends=function(){'use strict';return this.getPostParam().toString()===c('PrivacyConst').PostParam.FRIENDS.toString();};n.prototype.isOnlyMe=function(){'use strict';return this.getPostParam().toString()===c('PrivacyConst').PostParam.ONLY_ME.toString();};n.prototype.isBasicOption=function(){'use strict';return true;};n.prototype.isCustomOption=function(){'use strict';return false;};n.prototype.getTagExpansionBehavior=function(){'use strict';return this._getData().tagExpansionBehavior;};n.prototype.getBaseValue=function(){'use strict';return this._getData().baseValue;};n.prototype.getIndex=function(){'use strict';return this._getData().value;};n.prototype.getLoggingEventName=function(){'use strict';switch(this.getPostParam()){case c('PrivacyConst').PostParam.FRIENDS:return 'click_friends';case c('PrivacyConst').PostParam.EVERYONE:return 'click_everyone';case c('PrivacyConst').PostParam.ONLY_ME:return 'click_only_me';case c('PrivacyConst').PostParam.FRIENDS_MINUS_ACQUAINTANCES:return 'click_friends_except_acquaintances';case c('PrivacyConst').PostParam.FB_ONLY:return 'click_fb_only';default:return 'click_other';}};n.prototype.updateAfterTagExpansion=function(o,p){'use strict';var q=this._origLabel,r=this._origTriggerLabel;if(o&&this._getData().showPlusOnTagExpansion){q=j._("{privacyLabel} (+)",[j.param('privacyLabel',q)]);if(p&&this.isFriends()){r=j._("Friends, Friends of Tagged");}else r=j._("{privacyLabel} (+)",[j.param('privacyLabel',r)]);}this._setLabel(q);this._getData().triggerLabel=r;var s=this._getExpansionType(o),t=this._getData().optionSubtitles||{};this._setSubtitle(t[s]);};n.prototype.isBelowFold=function(){'use strict';var o=c('CSS').matchesSelector(this.getRoot(),"._3ey_");return o;};n.prototype._setLabel=function(o){'use strict';if(!o)return;var p=c('DOMQuery').find(this.getRoot(),"._54nh");p&&c('DOM').setContent(p,o);this._getData().label=o;};n.prototype._setSubtitle=function(o){'use strict';if(!o)return;var p=c('DOMQuery').find(this.getRoot(),"._48u1");p&&c('DOM').setContent(p,o);};n.prototype._getExpansionType=function(o){'use strict';return o?c('PrivacyConst').ExpansionType.TAGS_ONLY:c('PrivacyConst').ExpansionType.NONE;};n.prototype.render=function(){'use strict';var o=m.render.call(this);if(!this._getData().isPrimaryOption)return o;var p=c('DOMQuery').find(o,"._54nc");p&&c('CSS').addClass(p,"_48t_");var q=c('DOM').find(o,"._54nh");q&&c('CSS').addClass(q,"_48u0");var r=c('JSXDOM').div({className:"_48u1"},this._getData().optionSubtitle);c('DOM').appendContent(p,r);return o;};f.exports=n;},null);
__d("XPrivacySelectorLoggingController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/privacy\/selector\/log\/",{event:{type:"Enum",required:true,enumType:1},render_location:{type:"Int",required:true},content_type:{type:"String",required:true}});},null);
__d('PrivacySelectorCustomOption',['AsyncDialog','AsyncRequest','DataStore','PrivacySelectorOptionNew','XPrivacySelectorLoggingController','XPrivacyCustomDialogController'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('PrivacySelectorOptionNew'));i=h&&h.prototype;function j(k){'use strict';i.constructor.call(this,k);}j.prototype.isBasicOption=function(){'use strict';return false;};j.prototype.isCustomOption=function(){'use strict';return true;};j.prototype.getSelector=function(){'use strict';return this._selector;};j.prototype.setPostParam=function(k){'use strict';this._data.postParam=k;};j.prototype.getLoggingEventName=function(){'use strict';return 'click_custom';};j.prototype.openDialog=function(k){'use strict';if(typeof this._selector==='undefined')this._selector=k;c('DataStore').set(this._data.id,'PrivacySelectorCustomOption',this);var l=c('XPrivacyCustomDialogController').getURIBuilder().setString('option_id',this._data.id).setString('id',this._data.privacyfbid.toString()).setString('post_param',k.getPostParam()).setString('content_type',k.getContentType()).setInt('render_location',k.getRenderLocation()).setIntVector('tags',k.getTags()).setBool('autosave',this._data.autosave).setBool('limit_community',this._data.limitcommunity).setBool('limit_facebook',this._data.limitfacebook).setBool('limit_fof',this._data.limitfof).setBool('limit_tagexpand',this._data.limittagexpand).setBool('is_new_privacy_selector',true).getURI(),m=new (c('AsyncRequest'))(l);m.setRelativeTo(k.getTriggerButtonElement());c('AsyncDialog').send(m,function(n){var o=function(p){var q=c('XPrivacySelectorLoggingController').getURIBuilder().setEnum('event',p).setInt('render_location',document.getElementsByName('render_location')[0].value).setString('content_type',document.getElementsByName('content_type')[0].value).getURI();new (c('AsyncRequest'))().setURI(q).send();};n.subscribe('hide',function(){k.inform('custom/hide');k.inform('selectorFinished');});n.subscribe('success',function(){k.inform('custom/success');o('custom_save');});n.subscribe('cancel',function(){k.inform('custom/cancel');o('custom_cancel');});});};j.customPrivacySave=function(k,l){'use strict';var m=c('DataStore').get(k,'PrivacySelectorCustomOption');m.getSelector().selectOption(l);c('DataStore').remove(k,'PrivacySelectorCustomOption');};f.exports=j;},null);
__d("XPrivacySelectorAsyncMoreController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/privacy\/selector\/async_more\/",{id:{type:"String",required:true},next_value:{type:"Int",required:true},render_location:{type:"Int",required:true}});},null);
__d('PrivacySelectableMenu',['csx','cx','Arbiter','AsyncRequest','CSS','DataStore','Ease','PrivacySelectorCustomOption','PrivacySelectorOptionNew','SelectableMenu','SelectableMenuUtils','XPrivacySelectorAsyncMoreController','XPrivacySelectorLoggingController'],function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();j=babelHelpers.inherits(l,c('SelectableMenu'));k=j&&j.prototype;function l(m,n){'use strict';k.constructor.call(this,m,n);c('DataStore').set('PrivacySelectableMenu',n.id,this);this._needsBootload=!!n.needsbootload;this.collapseMenu();this.updateOptionsAfterTagExpansion(n.hasTags);}l.prototype.cleanup=function(){'use strict';c('DataStore').remove('PrivacySelectableMenu',this._config.id);};l.prototype.getItemForIndex=function(m){'use strict';for(var n=0;n<this._items.length;n++){var o=this._items[n];if(o instanceof c('PrivacySelectorOptionNew')&&o.getIndex()==m)return o;}return null;};l.prototype.selectOption=function(m){'use strict';var n=null,o=false,p=false;for(var q=this._items,r=Array.isArray(q),s=0,q=r?q:q[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var t;if(r){if(s>=q.length)break;t=q[s++];}else{s=q.next();if(s.done)break;t=s.value;}var u=t;if(u instanceof c('PrivacySelectorCustomOption')){n=u;continue;}if(this._isMoreOption(u)){if(this._needsBootload){o=true;}else this.expandMenu();continue;}if(!o&&u instanceof c('PrivacySelectorOptionNew')&&u.getPostParam()==m){this.setValue(u.getIndex());p=true;break;}}if(!p&&n){n.setPostParam(m);this.setValue(n.getIndex());}if(o){this.subscribeOnce('expandMenu',function(){this.selectOption(m);}.bind(this));this.expandMenu();}else this.inform('selectOption');return !o;};l.prototype._isMoreOption=function(m){'use strict';return c('CSS').matchesSelector(m.getRoot(),"._po2");};l.prototype._handleItemClick=function(m,n){'use strict';if(!c('SelectableMenuUtils').doesItemSupportSelect(m))return k._handleItemClick.call(this,m,n);if(this._isMoreOption(m)){this._logMoreClick();this.expandMenu();return;}this._logOptionClick(m);var o=this.inform('itemclick',{item:m,event:n});if(o)return;if(!c('SelectableMenuUtils').isSelected(m)&&!m.isCustomOption()&&m.select()!==false){this._items.forEach(function(p){if(c('SelectableMenuUtils').isSelected(p)&&p!==m)p.deselect();});this.inform('change',this.getSelection());}c('Arbiter').inform('composerprivacy/aborteducation');this.done();return m.handleClick();};l.prototype._logMoreClick=function(){'use strict';var m=c('XPrivacySelectorLoggingController').getURIBuilder().setEnum('event','more_options').setInt('render_location',this._config.renderlocation).setString('content_type',this._config.contenttype).getURI();new (c('AsyncRequest'))().setURI(m).send();};l.prototype._logOptionClick=function(m){'use strict';var n=c('XPrivacySelectorLoggingController').getURIBuilder().setEnum('event',m.getLoggingEventName()).setInt('render_location',this._config.renderlocation).setString('content_type',this._config.contenttype).getURI();new (c('AsyncRequest'))().setURI(n).send();};l.prototype._getMoreOptionsItem=function(){'use strict';var m=null;this.forEachItem(function(n){if(this._isMoreOption(n))m=n;}.bind(this));return m;};l.prototype.expandMenu=function(){'use strict';if(this._expanded)return;this._expanded=true;if(!this._needsBootload){this.expandMenuAfterLoaded();return;}this._needsBootload=false;var m=this._getMoreOptionsItem();if(m){this._moreOptionsIcon=m.getIcon();m.setIcon(this._config.morespinner);}var n=c('XPrivacySelectorAsyncMoreController').getURIBuilder().setString('id',this._config.id).setInt('next_value',this._config.nextvalue).setInt('render_location',this._config.renderlocation).getURI();new (c('AsyncRequest'))().setURI(n).setRelativeTo(this.getRoot()).send();};l.prototype.expandMenuAfterLoaded=function(){'use strict';c('CSS').removeClass(this.getRoot(),"_po3");c('CSS').addClass(this.getRoot(),"_po4");if(this._moreOptionsIcon){this._getMoreOptionsItem().setIcon(this._moreOptionsIcon);this._moreOptionsIcon=undefined;}this.inform('expandMenu');};l.prototype.collapseMenu=function(){'use strict';c('CSS').removeClass(this.getRoot(),"_po4");c('CSS').addClass(this.getRoot(),"_po3");this._expanded=false;};l.prototype.updateOptionsAfterTagExpansion=function(m){'use strict';this.forEachItem(function(n){if(n instanceof c('PrivacySelectorOptionNew'))n.updateAfterTagExpansion(m,this._config.hasSimpleLabels);}.bind(this));};l.prototype.onPopoverOpen=function(m){'use strict';if(m&&m.isBelowFold()){this.expandMenu();}else this.collapseMenu();if(m&&this._items.indexOf(m)>=15)setTimeout(function(){this._scrollableArea.scrollToBottom(true,{duration:1000,ease:c('Ease').sineOut});}.bind(this),250);};f.exports=l;},null);
__d('PopoverButton',['csx','DOM','DOMQuery','isTextNode'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={setLabel:function(j,k){var l=c('DOMQuery').find(j,"._55pe"),m=l.childNodes;for(var n=0;n<m.length;n++)if(c('isTextNode')(m[n])){c('DOM').replace(m[n],k);return;}c('DOM').appendContent(l,k);}};f.exports=i;},null);
__d('PrivacySelectorDataStore',['ArbiterMixin','PrivacySelectorNewDispatcher','KeyedCallbackManager'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=new (c('KeyedCallbackManager'))(),i=babelHelpers['extends']({},c('ArbiterMixin'),{get:function(j,k){h.executeOrEnqueue(j,k);},hasValueChanged:function(j){return !!h.getResource(j);}});c('PrivacySelectorNewDispatcher').register(function(j){if(j.selector_type){var k={};k[j.selector_type]={post_param:j.post_param,unique_id:j.unique_id,reload:j.reload,is_error:j.is_error};h.addResourcesAndExecute(k);i.inform('change');}});f.exports=i;},null);
__d("XPrivacySelectorUpdateController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/privacy\/selector\/update\/",{privacy_fbid:{type:"String",required:true},post_param:{type:"String",required:true},tags:{type:"IntVector"},render_location:{type:"Int",required:true},is_saved_on_select:{type:"Bool",defaultValue:false},should_return_tooltip:{type:"Bool",defaultValue:false},replace_on_select:{type:"Bool",defaultValue:false},prefix_tooltip_with_app_privacy:{type:"Bool",defaultValue:false},ent_id:{type:"String",required:true},reload_selector:{type:"Bool",defaultValue:false}});},null);
__d('PrivacySelectorBase',['cx','fbt','Arbiter','ArbiterMixin','AsyncRequest','Animation','Button','CSS','CurrentUser','Focus','Input','MenuStaticItem','MenuSelectableItem','PopoverButton','PopoverLoadingMenu','DataStore','PrivacySelectorNewDispatcher','PrivacySelectorDataStore','PrivacySelectableMenu','Run','SubscriptionsHandler','TooltipData','XPrivacySelectorLoggingController','XPrivacySelectorUpdateController','XUIError','bind','mixin'],function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();var l=3;j=babelHelpers.inherits(m,c('mixin')(c('ArbiterMixin')));k=j&&j.prototype;function m(n,o,p,q,r,s){'use strict';k.constructor.call(this);c('DataStore').set(n,'selector',this);this._root=n;this._button=o;this._config=s;this._menu=p;this._popoverMenu=r;this._input=q;this._isSavedOnSelect=s.is_saved_on_select;this._privacyFBID=s.privacy_fbid;this._contentType=s.content_type;this._renderLocation=s.render_location;this._supportsTagExpansion=s.supports_tag_expansion;this._skipCleanup=s.skip_cleanup;this._prefixTooltipApps=s.should_prefix_tooltip_apps;this._shouldDisplayLabel=s.should_display_label;this._tags=s.tagged_uids;this._hasTags=this._tags.length>0;this._entID=s.ent_id;this._popover=this._popoverMenu.getPopover();this._receivingUpdate=false;this._selectorSyncKey=s.selector_sync_key;this._previousParam=null;this._listeners=new (c('SubscriptionsHandler'))();this._spinnerCount=0;if(s.use_async_menu){this._listeners.addSubscriptions(this._popoverMenu.subscribe('setMenu',function(){this._menu=this._popoverMenu.getMenu();if(!(this._menu instanceof c('PrivacySelectableMenu')))return;this._onMenuLoad();this._onPopoverOpen();this.inform('asyncMenuLoaded');}.bind(this)));}else this._onMenuLoad();if(this._selectorSyncKey)this._initSelectorSync();c('Run').onLeave(this._cleanup.bind(this));}m.prototype._cleanup=function(){'use strict';if(this._skipCleanup)return;if(this._menu instanceof c('PrivacySelectableMenu'))this._menu.cleanup();this._listeners&&this._listeners.release();this._listeners=null;};m.prototype._initSelectorSync=function(){'use strict';this._listeners.addSubscriptions(c('PrivacySelectorDataStore').subscribe('change',function(){c('PrivacySelectorDataStore').get(this._selectorSyncKey,function(n){if(n.unique_id!==this._menu._config.id){this._receivingUpdate=true;c('XUIError').clear(this._button);if(n.post_param)this.selectOption(n.post_param);n.reload&&this.reloadSelector();n.is_error&&this._displayErrorWithoutFocus();if(!n.post_param)this._receivingUpdate=false;}}.bind(this));}.bind(this)));this._listeners.addSubscriptions(this._menu.subscribe('change',function(){if(!this._shouldDisplaySuccessAndFailure())this._broadcastUpdate();}.bind(this)));};m.prototype._broadcastUpdate=function(){'use strict';this._broadcastUpdateImpl(false);};m.prototype._broadcastError=function(){'use strict';this._broadcastUpdateImpl(true);};m.prototype._broadcastUpdateImpl=function(n){'use strict';if(!this._receivingUpdate){var o={selector_type:this._selectorSyncKey,unique_id:this._menu._config.id};if(n){o.is_error=n;}else{var p=this._getSelectedOption();o.post_param=p.getPostParam().toString();}c('PrivacySelectorNewDispatcher').handleUpdateFromSelector(o);}};m.prototype.shouldReplaceOnPost=function(){'use strict';return this._config.replace_on_post;};m.prototype.getIsPublicSelected=function(){'use strict';return this._selectedOption&&this._selectedOption.isPublic();};m.prototype.getIsFriendsSelected=function(){'use strict';return this._selectedOption&&this._selectedOption.isFriends();};m.prototype.getIsOnlyMeSelected=function(){'use strict';return this._selectedOption&&this._selectedOption.isOnlyMe();};m.prototype.getSelectedBaseValue=function(){'use strict';return this._selectedOption&&this._selectedOption.getBaseValue();};m.prototype.getSelectedLabelString=function(){'use strict';return this._selectedOption&&this._selectedOption.getLabel();};m.prototype.getSelectedPostParam=function(){'use strict';return this._selectedOption&&this._selectedOption.getPostParam().toString();};m.prototype.getIsCustomOptionSelected=function(){'use strict';return this._selectedOption&&this._selectedOption.isCustomOption();};m.prototype.getIsSavedOnSelect=function(){'use strict';return this._isSavedOnSelect;};m.prototype.getPrivacyFBID=function(){'use strict';return this._privacyFBID;};m.prototype.setValue=function(n){'use strict';this._menu.setValue(n);};m.prototype.setIsSavedOnSelect=function(n){'use strict';this._isSavedOnSelect=n;};m.prototype.openSelectorExpanded=function(n){'use strict';this.openSelector(function(){this._menu.expandMenu();n&&n();}.bind(this));};m.prototype.openSelector=function(n){'use strict';if(this._menu instanceof c('PopoverLoadingMenu')){this.subscribeOnce('asyncMenuLoaded',function(){n&&n();}.bind(this));this._popover.showLayer();}else{this._popover.showLayer();n&&n();}};m.prototype.closeSelector=function(){'use strict';this._popover.hideLayer();};m.prototype.getPopover=function(){'use strict';return this._popover;};m.prototype.getPopoverMenu=function(){'use strict';return this._popoverMenu;};m.prototype.getTriggerButtonElement=function(){'use strict';return this._button;};m.prototype.getRoot=function(){'use strict';return this._root;};m.prototype.getMenuElement=function(){'use strict';return this._menu.getRoot();};m.prototype.selectOption=function(n){'use strict';if(!n)return;if(this._menu instanceof c('PopoverLoadingMenu')){this.subscribeOnce('asyncMenuLoaded',this._selectOptionImpl.bind(this,n));this._fetchAsyncMenu();}else this._selectOptionImpl(n);};m.prototype._selectOptionImpl=function(n){'use strict';var o=this._menu.selectOption(n);if(!o){this._menu.subscribeOnce('selectOption',function(){var p=this.getIsSavedOnSelect();this.setIsSavedOnSelect(false);this._updateMenu();this.setIsSavedOnSelect(p);this._finishSpinnerSuccess();}.bind(this));this._showSpinner();}this._updateMenu();};m.prototype._updateMenu=function(){'use strict';this._selectedOption=this._getSelectedOption();this.updateDataForItemIndex(this._selectedOption.getIndex(),this._selectedOption.getPostParam().toString());};m.prototype._fetchAsyncMenu=function(){'use strict';if(this._config.use_async_menu)this._popoverMenu.fetchMenu();};m.prototype._getSelectedOption=function(){'use strict';if(!(this._menu instanceof c('PrivacySelectableMenu')))return;var n;this._menu.forEachItem(function(o){if(o instanceof c('MenuSelectableItem')&&o.isSelected())n=o;}.bind(this));return n;};m.prototype._onItemClick=function(n,o){'use strict';var p=o.item;if(p instanceof c('MenuStaticItem'))return;if(p.isBasicOption()){this.updateDataForItemIndex(p.getIndex(),p.getPostParam().toString());}else if(p.isCustomOption()){this._closeForCustom=true;p.openDialog(this);}this.inform('click',{customSelected:p.isCustomOption()});};m.prototype.getContentType=function(){'use strict';return this._contentType;};m.prototype.getRenderLocation=function(){'use strict';return this._renderLocation;};m.prototype.getPostParam=function(){'use strict';return this._postParam;};m.prototype.getTags=function(){'use strict';return this._tags;};m.prototype.updateDataForItemIndex=function(n,o){'use strict';var p=this._menu.getItemForIndex(n);if(p.isCustomOption())p.setPostParam(o);this._selectedOption=p;this._previousParam=this._postParam;this._postParam=o;c('Input').setValue(this._input,o);this._updateTriggerButtonLabelAndIcon();this._updateTooltipAndSavePrivacyIfNeeded();this.inform('changed',{post_param:this._postParam,base_value:this.getSelectedBaseValue()});};m.prototype._shouldUpdateTooltips=function(){'use strict';return this._prefixTooltipApps||this._supportsTagExpansion||this.getIsCustomOptionSelected();};m.prototype._updateTooltip=function(){'use strict';this._updateTooltipAndSavePrivacyIfNeededImpl(false);};m.prototype._updateTooltipAndSavePrivacyIfNeeded=function(){'use strict';this._updateTooltipAndSavePrivacyIfNeededImpl(true);};m.prototype._updateTooltipAndSavePrivacyIfNeededImpl=function(n){'use strict';if(this._shouldUpdateTooltips())this._updateTooltipToLoading();this._sendUpdateRequest(n);if(!this._shouldUpdateTooltips())this._setTooltipValue(this._selectedOption.getTooltip());};m.prototype.reloadSelector=function(){'use strict';this._cleanup();var n=c('XPrivacySelectorUpdateController').getURIBuilder().setString('privacy_fbid',String(this._privacyFBID)).setString('post_param',this._postParam).setInt('render_location',this._renderLocation).setBool('reload_selector',true).setString('ent_id',String(this._entID)).getURI();new (c('AsyncRequest'))().setRelativeTo(this._root).setHandler(this.inform.bind(this,'reloaded')).setURI(n).send();};m.prototype._sendUpdateRequest=function(n){'use strict';n=n&&this._isSavedOnSelect&&!this._receivingUpdate;var o=this._shouldUpdateTooltips();if(!n&&!o){this._receivingUpdate=false;return;}n&&this._showSpinner();var p=c('XPrivacySelectorUpdateController').getURIBuilder().setString('privacy_fbid',String(this._privacyFBID)).setString('post_param',this._postParam).setIntVector('tags',this._tags).setInt('render_location',this._renderLocation).setBool('is_saved_on_select',n).setBool('should_return_tooltip',o).setBool('prefix_tooltip_with_app_privacy',this._prefixTooltipApps).setBool('replace_on_select',this._config.replace_on_select).setString('ent_id',String(this._entID)).getURI(),q=new (c('AsyncRequest'))().setRelativeTo(this._root).setHandler(c('bind')(this,function(r){if(n&&this._shouldDisplaySuccessAndFailure()){this._finishSpinnerSuccess();this._broadcastUpdate();}if(this._config.replace_on_select)this._cleanup();var s=r&&r.payload&&r.payload.tooltip;s&&this._setTooltipValue(r.payload.tooltip);this.inform('selector_updated');})).setFinallyHandler(c('bind')(this,function(r){this._receivingUpdate=false;})).setURI(p);if(n&&this._shouldDisplaySuccessAndFailure())q.setErrorHandler(c('bind')(this,function(r){if(this._receivingUpdate){this._displayErrorWithoutFocus();return;}this._menu.selectOption(this._previousParam);this._postParam=this._previousParam;this._displayError();this._broadcastError();}));q.send();};m.prototype._showSpinner=function(){'use strict';if(!this._shouldDisplaySuccessAndFailure())return;if(!this.getIsSavedOnSelect())return;if(this._spinnerCount===0){c('XUIError').clear(this._button);c('Button').setIcon(this._button,this._config.spinner);c('CSS').show(this._config.spinner);c('CSS').hide(this._config.checkmark);}this._spinnerCount++;};m.prototype._finishSpinnerSuccess=function(){'use strict';if(!this._shouldDisplaySuccessAndFailure())return;if(!this.getIsSavedOnSelect())return;this._spinnerCount--;if(this._spinnerCount===0){c('CSS').hide(this._config.spinner);this._updateTriggerButtonLabelAndIcon();if(this._config.checkmark){var n=c('Button').getIcon(this._button);c('CSS').hide(n);new (c('Animation'))(this._config.checkmark).show().from('opacity',0).to('opacity',1).duration(400).checkpoint().duration(200).checkpoint().from('opacity',1).to('opacity',0).duration(400).hide().ondone(function(){new (c('Animation'))(n).show().from('opacity',0).to('opacity',1).duration(300).go();}).go();}}};m.prototype._displayError=function(){'use strict';this._spinnerCount--;this._displayErrorImpl(true);};m.prototype._displayErrorWithoutFocus=function(){'use strict';this._displayErrorImpl(false);};m.prototype._displayErrorImpl=function(n){'use strict';if(this._shouldDisplaySuccessAndFailure()){c('PopoverButton').setLabel(this._button,i._("Select Audience"));c('Button').setIcon(this._button,this._config.error_icon);c('CSS').show(this._config.error_icon);c('TooltipData').remove(this._button);n&&c('Focus').setWithoutOutline(this._button);c('XUIError').set({target:this._button,message:i._("Your selection might not have been saved. We recommend trying again later.")});}};m.prototype.informTagsChanged=function(n){'use strict';var o=this._getTags(n);this.informTagsChangedWithIDs(o);};m.prototype.informTagsChangedWithIDs=function(n){'use strict';var o=!n.length;if(this._hasTags===o){this._hasTags=!!n.length;this._menu.updateOptionsAfterTagExpansion(this._showTagExpansion());this._updateTriggerButtonLabelAndIcon();}if(this._tags.length!==n.length){this._tags=n;this._updateTooltip();c('Arbiter').inform('PrivacySelectorBase/changed',this._getChangedData());}};m.prototype._getChangedData=function(){'use strict';return {tags:this._tags,privacy:this.getSelectedBaseValue()};};m.prototype._showTagExpansion=function(){'use strict';return this._hasTags;};m.prototype._getTags=function(n){'use strict';var o=[],p=c('CurrentUser').getID();if(n.withTags)for(var q=0;q<n.withTags.length;q++){var r=n.withTags[q].info;if(r.uid!=p)o.push(r.uid);}if(n.mention)for(var s in n.mention)if(n.mention[s].type=='user'&&n.mention[s].uid!=p)o.push(n.mention[s].uid);return o;};m.prototype._updateTriggerButtonLabelAndIcon=function(){'use strict';if(this._spinnerCount===0){var n=this._selectedOption.getTriggerIcon();if(this._config.trigger_no_icon)c('CSS').hide(n);c('Button').setIcon(this._button,n.cloneNode());}if(!this._shouldDisplayLabel)return;c('PopoverButton').setLabel(this._button,this._selectedOption.getTriggerLabel());if(this._config.trigger_style===l){c('CSS').conditionClass(this.getTriggerButtonElement(),"_mw-",this.getIsOnlyMeSelected());c('CSS').conditionClass(this.getTriggerButtonElement(),"_mw_",this.getIsPublicSelected());}};m.prototype._updateTooltipToLoading=function(){'use strict';var n=i._("Loading...");this._setTooltipValue(n);};m.prototype._setTooltipValue=function(n){'use strict';n&&c('TooltipData').set(this._button,n);};m.prototype._onPopoverClose=function(){'use strict';if(!this._getSelectedOption())return;if(this._closeForCustom){this._closeForCustom=false;}else this.inform('selectorFinished');this.inform('close');};m.prototype._onPopoverOpen=function(){'use strict';if(!(this._menu instanceof c('PrivacySelectableMenu')))return;this._menu.onPopoverOpen(this._getSelectedOption());var n=c('XPrivacySelectorLoggingController').getURIBuilder().setEnum('event','opened').setInt('render_location',this._renderLocation).setString('content_type',this._contentType).getURI();new (c('AsyncRequest'))().setURI(n).send();this.inform('open');};m.prototype._onMenuLoad=function(){'use strict';this._listeners.addSubscriptions(this._menu.subscribe('itemclick',this._onItemClick.bind(this)),this._popover.subscribe('hide',this._onPopoverClose.bind(this)),this._popover.subscribe('show',this._onPopoverOpen.bind(this)));this._listeners.addSubscriptions(this._menu.subscribe('expandMenu',function(){if(this._popover&&this._popover.getLayer())this._popover.getLayer().updatePosition();}.bind(this)));this._selectedOption=this._getSelectedOption();if(this._selectedOption){this._postParam=this._selectedOption.getPostParam().toString();this._previousParam=this._postParam;this._hasAudienceExpansion()&&this._updateTriggerButtonLabelAndIcon();}};m.prototype._hasAudienceExpansion=function(){'use strict';return this._hasTags;};m.prototype._shouldDisplaySuccessAndFailure=function(){'use strict';return this._config.spinner&&this._config.checkmark&&this._config.error_icon;};f.exports=m;},null);
__d('PubcontentFeedChainingControllerLoader',['Arbiter','Bootloader','PageLikeConstants','SubscriptionsHandler','UFIUIEvents','AttachmentRelatedShareConstants'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=[c('PageLikeConstants').LIKED,c('UFIUIEvents').ActionLinkLike,c('UFIUIEvents').ReactionButtonClicked,c('UFIUIEvents').Comment,c('UFIUIEvents').ActionAddComment,'composer/publish','LitestandComposer/publish',c('AttachmentRelatedShareConstants').ARTICLE_CLICK,c('AttachmentRelatedShareConstants').VIDEO_CLICK,c('AttachmentRelatedShareConstants').FBVIDEO_CLICK,c('AttachmentRelatedShareConstants').FBVIDEO_VIEW,c('AttachmentRelatedShareConstants').GAME_CLICK,c('AttachmentRelatedShareConstants').PHOTO_CLICK,c('AttachmentRelatedShareConstants').EVENT_JOIN,c('AttachmentRelatedShareConstants').PRODUCT_CLICK],i=null,j=false,k=null,l={init:function(){if(k){k.init({isLazy:false});}else this._startListening();},_startListening:function(){if(i)return;i=new (c('SubscriptionsHandler'))();i.addSubscriptions(c('Arbiter').subscribe(h,function(event,m){c('Arbiter').inform(event+'.lazy',m,c('Arbiter').BEHAVIOR_PERSISTENT);this._bootload();}.bind(this)));},_bootload:function(){if(j)return;j=true;c('Bootloader').loadModules(["PubcontentFeedChainingControllerX"],function(m){i&&i.release();k=m;k.init({isLazy:true});},'PubcontentFeedChainingControllerLoader');}};f.exports=l;},null);
__d('ReactFeedComposerXBody',['DOM','Event','SubscriptionsHandler'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i){this.$ReactFeedComposerXBody2=i.root;this.$ReactFeedComposerXBody4=c('DOM').find(this.$ReactFeedComposerXBody2,'textarea');this.$ReactFeedComposerXBody1=c('DOM').find(this.$ReactFeedComposerXBody2,'input[type="hidden"]');this.$ReactFeedComposerXBody3=new (c('SubscriptionsHandler'))();this.$ReactFeedComposerXBody3.addSubscriptions(c('Event').listen(this.$ReactFeedComposerXBody4,'change',this.$ReactFeedComposerXBody5.bind(this)));}h.prototype.$ReactFeedComposerXBody5=function(i){this.$ReactFeedComposerXBody1.value=i.target.value;};f.exports=h;},null);
__d('DirectionalDockingElement',['Arbiter','ArbiterMixin','DOM','DOMDimensions','Event','Run','Scroll','Style','SubscriptionsHandler','UITinyViewportAction','ViewportBounds','getElementPosition','mixin','queryThenMutateDOM','removeFromArray','onEnclosingPageletDestroy'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();var j=true,k=false,l='unfixed',m='fixed_top',n='fixed_middle',o,p=[];function q(){c('queryThenMutateDOM')(function(){return p.forEach(function(u){return u._queryDOM();});},function(){return p.forEach(function(u){return u._updateWithCache();});},'DirectionalDockingElement');}function r(u){p.push(u);if(!o){o=new (c('SubscriptionsHandler'))();o.addSubscriptions(c('Event').listen(window,'scroll',q),c('Event').listen(window,'resize',q),c('Run').onLeave(function(){while(p.length){p[0].destroy();s(p[0]);}}));}return o;}function s(u){c('removeFromArray')(p,u);if(!o||p.length)return;o.release();o=null;}h=babelHelpers.inherits(t,c('mixin')(c('ArbiterMixin')));i=h&&h.prototype;function t(u){'use strict';i.constructor.call(this);this.$DirectionalDockingElement1=u;this.$DirectionalDockingElement2=0;var v=r(this);this.$DirectionalDockingElement3=v.addSubscriptions(c('onEnclosingPageletDestroy')(u,function(){return this.destroy();}.bind(this)));this.$DirectionalDockingElement4=c('ViewportBounds').getTop();this.$DirectionalDockingElement5=m;c('Style').set(this.$DirectionalDockingElement1,'width',c('DOMDimensions').getElementDimensions(this.$DirectionalDockingElement1).width+'px');this.$DirectionalDockingElement6=c('DOM').create('div');c('Style').set(this.$DirectionalDockingElement6,'position','relative');c('DOM').replace(this.$DirectionalDockingElement1,this.$DirectionalDockingElement6);c('DOM').appendContent(this.$DirectionalDockingElement6,this.$DirectionalDockingElement1);this.update();}t.prototype.destroy=function(){'use strict';try{this.$DirectionalDockingElement3&&c('Arbiter').unsubscribe(this.$DirectionalDockingElement3);}catch(u){}finally{this.$DirectionalDockingElement3=null;}if(this.$DirectionalDockingElement6&&this.$DirectionalDockingElement6.parentNode){c('DOM').remove(this.$DirectionalDockingElement6);this.$DirectionalDockingElement6=null;}if(p.indexOf(this)===-1)return;s(this);};t.prototype.$DirectionalDockingElement7=function(){'use strict';var u=-c('getElementPosition')(this.$DirectionalDockingElement6).y;if(u!==this.$DirectionalDockingElement8){this.$DirectionalDockingElement9=u>this.$DirectionalDockingElement8?k:j;this.$DirectionalDockingElement8=u;}this.$DirectionalDockingElement10=c('DOMDimensions').getElementDimensions(this.$DirectionalDockingElement1);this.$DirectionalDockingElement11=c('Scroll').getTop(document.body)+document.documentElement.clientHeight>document.documentElement.scrollHeight;};t.prototype.$DirectionalDockingElement12=function(u,v){'use strict';if(this.$DirectionalDockingElement13!==u||this.$DirectionalDockingElement14!==v){c('Style').apply(this.$DirectionalDockingElement1,{position:u,top:v+'px'});this.$DirectionalDockingElement13=u;this.$DirectionalDockingElement14=v;}};t.prototype.$DirectionalDockingElement15=function(){'use strict';this.$DirectionalDockingElement5=m;this.$DirectionalDockingElement12('fixed',this.$DirectionalDockingElement4);};t.prototype.$DirectionalDockingElement16=function(){'use strict';this.$DirectionalDockingElement5=n;this.$DirectionalDockingElement12('fixed',this.$DirectionalDockingElement2);};t.prototype.$DirectionalDockingElement17=function(){'use strict';this.$DirectionalDockingElement5=l;this.$DirectionalDockingElement12('absolute',this.$DirectionalDockingElement18);};t.prototype.$DirectionalDockingElement19=function(){'use strict';var u=this.$DirectionalDockingElement10.height;if(u!==this.$DirectionalDockingElement20){c('Style').set(this.$DirectionalDockingElement6,'height',u+'px');this.$DirectionalDockingElement20=u;this.inform('changedheight');}if(this.$DirectionalDockingElement5===m){this.$DirectionalDockingElement18=this.$DirectionalDockingElement8+this.$DirectionalDockingElement4;}else if(this.$DirectionalDockingElement5===n)this.$DirectionalDockingElement18=this.$DirectionalDockingElement8+this.$DirectionalDockingElement2;if(this.$DirectionalDockingElement11)return;if(this.$DirectionalDockingElement8+this.$DirectionalDockingElement4<=0||c('UITinyViewportAction').isTiny()){this.$DirectionalDockingElement18=0;this.$DirectionalDockingElement17();return;}if(this.$DirectionalDockingElement9===k&&this.$DirectionalDockingElement8+this.$DirectionalDockingElement2>=this.$DirectionalDockingElement18){this.$DirectionalDockingElement16();}else if(this.$DirectionalDockingElement9===j&&this.$DirectionalDockingElement8+this.$DirectionalDockingElement4<=this.$DirectionalDockingElement18){this.$DirectionalDockingElement15();}else this.$DirectionalDockingElement17();};t.prototype.update=function(){'use strict';this.$DirectionalDockingElement7();this.$DirectionalDockingElement19();};t.prototype.setOffset=function(u){'use strict';this.$DirectionalDockingElement2=u;this.update();return this;};f.exports=t;},null);
__d('DockingElement',['Arbiter','ArbiterMixin','CSS','DOM','DOMDimensions','Event','Run','Style','SubscriptionsHandler','UITinyViewportAction','getElementPosition','mixin','queryThenMutateDOM','removeFromArray','onEnclosingPageletDestroy'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();var j,k=[];function l(){c('queryThenMutateDOM')(function(){return k.forEach(function(p){return p.getRect();});},function(){return k.forEach(function(p){return p.updateWithCache();});},'DockingElement');}function m(p){k.push(p);if(!j){j=new (c('SubscriptionsHandler'))();j.addSubscriptions(c('Event').listen(window,'scroll',l),c('Event').listen(window,'resize',l),c('Run').onLeave(function(){while(k.length){k[0].destroy();n(k[0]);}}));}return j;}function n(p){c('removeFromArray')(k,p);if(!j||k.length)return;j.release();j=null;}h=babelHelpers.inherits(o,c('mixin')(c('ArbiterMixin')));i=h&&h.prototype;function o(p){'use strict';i.constructor.call(this);this.$DockingElement11=p;this.$DockingElement6=0;this.update();var q=m(this);this.$DockingElement7=q.addSubscriptions(c('onEnclosingPageletDestroy')(p,function(){return this.destroy();}.bind(this)));}o.prototype.destroy=function(){'use strict';try{this.$DockingElement7&&c('Arbiter').unsubscribe(this.$DockingElement7);}catch(p){}finally{this.$DockingElement7=null;}if(this.$DockingElement8&&this.$DockingElement8.parentNode){c('DOM').remove(this.$DockingElement8);this.$DockingElement8=null;}n(this);};o.prototype.getRect=function(){'use strict';var p=this.$DockingElement5?this.getPlaceholder():this.$DockingElement11;this.$DockingElement10=c('getElementPosition')(p);this.$DockingElement3=c('DOMDimensions').getElementDimensions(p);};o.prototype.updateWithCache=function(){'use strict';var p=this.$DockingElement6,q=this.getPlaceholder();if(!c('UITinyViewportAction').isTiny()&&this.$DockingElement10.y<=p){if(!this.$DockingElement5&&this.$DockingElement11.parentNode){if(!this.$DockingElement4){c('DOM').insertAfter(this.$DockingElement11,q);this.$DockingElement4=true;}c('CSS').addClass(this.$DockingElement11,'fixed_elem');c('CSS').show(q);this.$DockingElement5=true;}var r;if(this.$DockingElement2!==p){r={};r.top=p+'px';this.$DockingElement2=p;}var s=this.$DockingElement3.width;if(s!==this.$DockingElement1){r=r||{};r.width=s+'px';this.$DockingElement1=s;}r&&c('Style').apply(this.$DockingElement11,r);var t=this.$DockingElement3.height;if(t!==this.$DockingElement9){c('Style').set(q,'height',t+'px');this.$DockingElement9=t;this.inform('changedheight');}}else if(this.$DockingElement5){c('Style').apply(this.$DockingElement11,{top:'',width:''});c('CSS').removeClass(this.$DockingElement11,'fixed_elem');c('CSS').hide(q);this.$DockingElement5=false;this.$DockingElement1=null;this.$DockingElement2=null;}};o.prototype.update=function(){'use strict';this.getRect();this.updateWithCache();};o.prototype.getPlaceholder=function(){'use strict';if(!this.$DockingElement8)this.$DockingElement8=c('DOM').create('div');return this.$DockingElement8;};o.prototype.setOffset=function(p){'use strict';this.$DockingElement6=p;this.update();return this;};f.exports=o;},null);
__d('StickyRHC',['csx','$','Arbiter','DirectionalDockingElement','DockingElement','DOMDimensions','DOMQuery','Event','Run','SubscriptionsHandler','ViewportBounds','ge','getElementPosition','getViewportDimensions','removeFromArray','throttle'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=35,j=[],k;function l(p,q){if(!q||!q.dom_id){j.forEach(m);return;}var r=c('$')(q.dom_id);for(var s=0;s<j.length;s++)if(c('DOMQuery').contains(j[s].getRoot(),r)){m(j[s]);return;}}function m(p){var q=p.getRoot(),r=p.updateOffset.bind(p),s=c('DOMQuery').scry(q,'img.img');s.forEach(function(t){if(t.complete||t.getAttribute('height')||typeof t.naturalHeight!=='undefined'&&t.naturalHeight!==0)return;var u=function(){r();v.remove();w.remove();x.remove();},v=c('Event').listen(t,'load',u),w=c('Event').listen(t,'error',u),x=c('Event').listen(t,'abort',u);});r();}function n(){j.forEach(function(p){p.updateOffset();});}function o(p,q){'use strict';this.$StickyRHC1=p;this.$StickyRHC2=q?new (c('DirectionalDockingElement'))(p):new (c('DockingElement'))(p);this.$StickyRHC3=0;this.$StickyRHC2.subscribe('changedheight',this.updateOffset.bind(this));this.updateOffset();m(this);if(!j.length){k=new (c('SubscriptionsHandler'))();k.addSubscriptions(c('Arbiter').subscribe('header_loaded',n),c('Arbiter').subscribe('netego_loaded',l),c('Arbiter').subscribe('pagelet_trending_tags_and_topics_displayed',n),c('Arbiter').subscribe('browse_top_filters_full_width_displayed',n),c('Arbiter').subscribe('takeover_survey_closed',n),c('Event').listen(window,'resize',c('throttle')(n)));}c('Run').onLeave(function(){return this.destroy;}.bind(this));j.push(this);}o.getInstances=function(){'use strict';return j;};o.prototype.getRoot=function(){'use strict';return this.$StickyRHC1;};o.prototype.destroy=function(){'use strict';this.$StickyRHC2=null;c('removeFromArray')(j,this);if(!j.length){k.release();k=null;}};o.prototype.updateOffset=function(){'use strict';var p=o.getNewOffset(this.$StickyRHC1,this.$StickyRHC4,this.$StickyRHC3);this.$StickyRHC2.setOffset(p+this.$StickyRHC3);};o.getNewOffset=function(p,q,r){'use strict';var s=c('DOMQuery').scry(p,"._4-u2"),t=c('DOMQuery').scry(p,"._4-u3"),u=c('DOMQuery').scry(p,'.uiHeader'),v=c('DOMQuery').scry(p,'.ego_unit'),w=c('ge')('pagelet_feed_switcher'),x=0;if(w){var y=c('DOMQuery').scry(w,"._381j");if(y.length>0)x=y[0].offsetHeight;}var z=[].concat(s,t,u,v),aa=[];z.forEach(function(ka){aa.push(c('getElementPosition')(ka).y);});aa.sort(function(ka,la){return ka-la;});var ba=c('getElementPosition')(p).y,ca=c('DOMDimensions').getElementDimensions(p).height;ca+=r;var da=c('ViewportBounds').getTop(),ea=c('getViewportDimensions')().height-da;ea-=i;if(typeof q==='undefined'){var fa=c('ge')('pageFooter');q=fa?c('DOMDimensions').getElementDimensions(fa).height:0;}ea-=q;var ga=ea-ca;if(ca<ea){ga=da;}else for(var ha=0,ia=aa.length;ha<ia;ha++){var ja=aa[ha]-ba;if(ca-ja<ea){ga=da-ja;break;}}return ga+x;};o.prototype.setOffset=function(p){'use strict';this.$StickyRHC3=p;this.updateOffset();};o.prototype.getOffset=function(p){'use strict';return this.$StickyRHC3;};f.exports=o;},null);
__d('FeedAdsGapRuleViolationDetection',['csx','cx','Banzai','CSS','DataAttributeUtils','DOM','ge','isEmpty'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j='ei',k='qid',l='gap rule violation',m='non violating ads gap',n='first position violation',o='feed load',p='first position invalidation',q='spacing invalidation',r=[],s=[],t=[],u={},v={},w={registerFeedStories:function(x,y){if(x.containerID=='substream_0'){r=[];s=[];}var z=c('ge')(x.containerID);if(!z)return;u=babelHelpers['extends']({},x.demoAdChecks,u);var aa=c('DOM').scry(z,"div._5jmm").map(this._convertStoryNodeToObject).filter(function(ca){return ca!==null;});if(x.isLoggingEnabled&&aa.length!==0)this._logFeedLoad();if(x.isNewerStories){r=aa.concat(r);}else r=r.concat(aa);for(var ba in x.minGaps)if(x.minGaps.hasOwnProperty(ba))v[ba]=x.minGaps[ba];if(c('isEmpty')(u)){if(x.isLoggingEnabled)this._checkFirstPosViolation(x,z);if(x.isLoggingEnabled||x.isGapRuleInvalidationEnabled)this._checkGapRuleViolation(x);}},_convertStoryNodeToObject:function(x){if(c('CSS').matchesSelector(x,"._170y"))return null;var y=x.getAttribute('data-dedupekey');if(u[y])return null;var z=c('DOM').scry(x,"div._hye"),aa=c('DOM').scry(x,"li._170x"),ba=[];if(z.length!==0){ba=z.map(function(ea){return c('DataAttributeUtils').getDataFt(ea);}).filter(function(ea){return ea!==null;});}else if(aa.length!==0){ba=aa.map(function(ea){return c('DataAttributeUtils').getDataFt(ea);}).filter(function(ea){return ea!==null;});}else if(c('DataAttributeUtils').getDataFt(x))ba=[c('DataAttributeUtils').getDataFt(x)];if(!ba.length)return null;var ca=JSON.parse(ba[0]),da={dataFTArray:ba,dedupKey:y,isSponsored:!!ca[j],height:x.offsetHeight,qid:parseInt(ca[k],10),nodeID:x.id};return da;},_checkFirstPosViolation:function(x,y){while(r.length>0&&r[0].isSponsored){var z={ftArray:r[0].dataFTArray,qid:r[0].qid,nodeid:r[0].nodeID,firstStoryType:x.firstStoryType},aa=c('DOM').scry(y,'.uiBoxRed')[0];if(aa){var ba=aa.textContent||aa.innerText;if(ba)z.error_msg=ba;}if(x.isLoggingEnabled&&!(r[0].dedupKey in t)){this._logFirstPosViolation(z);t[r[0].dedupKey]=z;}break;}},_getMinGap:function(x,y,z){var aa=Math.min(x?x:Number.MAX_VALUE,y?y:Number.MAX_VALUE);return aa!==Number.MAX_VALUE?aa:z;},_getStoryDedupKeysJSONString:function(x,y){var z=[];for(var aa=x;aa<=y;aa++)z.push(r[aa].dedupKey);return JSON.stringify(z);},_getIdxOfStoryToSwap:function(x,y){if(y>=r.length-x)return -1;for(var z=x+1;z<r.length&&y>0;z++){if(!r[z].isSponsored){y--;}else return -1;if(y===0)return z;}return -1;},_checkGapRuleViolation:function(x){var y=null,z=null,aa=0;for(var ba=0;ba<r.length;ba++){var ca=r[ba];aa+=ca.height;if(ca.isSponsored){aa-=ca.height;var da=false,ea=false;if(y!==null){var fa=ba-y,ga=null,ha=this._getMinGap(v[z.dedupKey],v[ca.dedupKey],x.defaultMinGap);if(fa<ha){ga=l;}else ga=m;var ia={ftArray_A:z.dataFTArray,ftArray_B:ca.dataFTArray,dist:fa,pdist:aa,pos:ba+1,qid_A:z.qid,qid_B:ca.qid,event_type:ga,nodeid:ca.nodeID,dedupKeys:this._getStoryDedupKeysJSONString(y,ba)};if(x.isLoggingEnabled)if(!(ca.dedupKey in s)||s[ca.dedupKey].event_type!==ga){this._logAdsGapEvent(ia);s[ca.dedupKey]=ia;}if(x.isGapRuleInvalidationEnabled&&ga==l){var ja=-1;if(x.isSwapOnGapRuleViolationEnabled)ja=this._getIdxOfStoryToSwap(ba,ha-fa);if(ja>0){this._shiftAdBelowOrganicStory(ca.nodeID,r[ja].nodeID);var ka=r[ba];r.splice(ba,1);r.splice(ja,0,ka);if(x.isLoggingEnabled){var la={ft:r[ja].dataFTArray[0],dist:ja-ba,qid:r[ja].qid,event_type:'ad_swap'};c('Banzai').post('feed_ads_gap_rule_violation',la);}ea=true;ca=r[ba];aa+=ca.height;}else if(x.isGapRuleInvalidationEnabled){this._invalidateGapRuleViolatedAd(ia);da=true;r.splice(ba--,1);}}}if(!da&&!ea){y=ba;z=ca;aa=0;}}}},_logFirstPosViolation:function(x){var y={ft:x.ftArray[0],event_type:n,intValues:{qid:x.qid},first_story_type:x.firstStoryType};if(x.error_msg)y.error_msg=x.error_msg;c('Banzai').post('feed_ads_gap_rule_violation',y);},_logAdsGapEvent:function(x){var y={ft_A:x.ftArray_A[0],ft_B:x.ftArray_B[0],event_type:x.event_type,intValues:{dist:x.dist,pdist:x.pdist,pos:x.pos,qid_A:x.qid_A,qid_B:x.qid_B},dedup_keys:x.dedupKeys};c('Banzai').post('feed_ads_gap_rule_violation',y);},_logFeedLoad:function(){var x={event_type:o};c('Banzai').post('feed_ads_gap_rule_violation',x);},_invalidateFirstPosAd:function(x){c('CSS').hide(c('ge')(x.nodeid));var y={ft_array:x.ftArray,event_type:p};c('Banzai').post('feed_ads_gap_rule_violation',y);},_invalidateGapRuleViolatedAd:function(x){var y=c('ge')(x.nodeid);y&&c('CSS').hide(y);var z={ft_array_A:x.ftArray_A,ft_array_B:x.ftArray_B,event_type:q};c('Banzai').post('feed_ads_gap_rule_violation',z);},_shiftAdBelowOrganicStory:function(x,y){var z=c('ge')(x),aa=c('ge')(y);z&&aa&&c('DOM').insertAfter(aa,z);}};f.exports=w;},null);
__d('StoryPositionTracking',['csx','DataAttributeUtils','DOM','LitestandStream','ge'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=0;function j(m,n){var o=JSON.parse(c('DataAttributeUtils').getDataFt(m));if(o){o.insertion_position=n;c('DataAttributeUtils').setDataFt(m,JSON.stringify(o));}}function k(m){return c('DOM').scry(m,"._5jmm");}var l={registerNewStories:function(m){if(m=='substream_0')i=0;var n=k(c('ge')(m)),o=n.length;for(var p=0;p<o;p++)j(n[p],i++);},updateAllStories:function(){var m=k(c('LitestandStream').getStreamRoot()),n=m.length;i=0;for(var o=0;o<n;o++)j(m[o],i++);}};f.exports=l;},null);
__d('FbFeedAttachmentRelatedShare',['csx','Arbiter','AttachmentRelatedShareConstants','DOMQuery','Event','tidyEvent'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={loadRelatedAttachment:function(j,k){c('tidyEvent')(c('Event').listen(j,'click',function(){c('Arbiter').inform(c('AttachmentRelatedShareConstants').ARTICLE_CLICK,{attachment:j,global_share_id:k});}));},loadRelatedGameAttachment:function(j,k){c('tidyEvent')(c('Event').listen(j,'click',function(){c('Arbiter').inform(c('AttachmentRelatedShareConstants').GAME_CLICK,{attachment:j,global_share_id:k});}));},loadRelatedAttachmentForStream:function(j){var k=function(event,l){var m=event.getTarget();if(m.getAttribute('target')!=='_blank')return;var n="^div._5pbx",o="^div._5pc9",p=c('DOMQuery').scry(m,n)[0]||c('DOMQuery').scry(m,o)[0];if(!p)return;c('Arbiter').inform(c('AttachmentRelatedShareConstants').ARTICLE_CLICK,{attachment:p,global_share_id:0,link_url:m.getAttribute('href'),is_right_click:l});};c('tidyEvent')(c('Event').listen(j,'click',function(event){k(event,false);}));c('tidyEvent')(c('Event').listen(j,'mousedown',function(event){if(event.which==3||event.button==2)k(event,true);}));}};f.exports=i;},null);
__d('FbFeedKeyboardController',['csx','cx','CSS','DOM','DOMQuery','FbFeedHighlight','FeedBaseKeyboardController','Focus','JSXDOM','Parent','ge','getActiveElement','isElementNode'],function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();function l(o){if(o.previousElementSibling)return o.previousElementSibling;o=o.previousSibling;while(o&&!c('isElementNode')(o))o=o.previousSibling;return o||null;}function m(o){if(o.nextElementSibling)return o.nextElementSibling;o=o.nextSibling;while(o&&!c('isElementNode')(o))o=o.nextSibling;return o||null;}j=babelHelpers.inherits(n,c('FeedBaseKeyboardController'));k=j&&j.prototype;n.prototype.getStories=function(o){'use strict';return c('DOMQuery').scry(o||this.root,"._5jmm");};n.prototype.isHoldoutStory=function(o){'use strict';return !!o&&c('CSS').hasClass(o,'holdoutAdStory');};n.prototype.isRelevantStory=function(o){'use strict';return c('isElementNode')(o)&&!this.isHoldoutStory(o);};n.prototype.isStory=function(o){'use strict';return c('CSS').matchesSelector(o,"._5jmm");};n.prototype.clickLike=function(){'use strict';var o=this.$FbFeedKeyboardController1();this.clickElement(o,'.UFILikeLink');if(o!==this.selected)return null;var p=this.getParentStory(c('getActiveElement')());if(p){var q=c('DOMQuery').scry(p,'.UFILikeLink');for(var r=0;r<q.length;r++)if(!c('CSS').hasClass(q[r],'accessible_elem'))c('Focus').setWithoutOutline(q[r]);}};n.prototype.clickComment=function(){'use strict';this.clickElement(this.$FbFeedKeyboardController1(),'.comment_link');};n.prototype.clickShare=function(){'use strict';this.click('.share_action_link');};n.prototype.clickSeeMore=function(){'use strict';this.click('.see_more_link');};n.prototype.clickLeft=function(){'use strict';this.click("._1mri");};n.prototype.clickRight=function(){'use strict';this.click("._2fu-");};n.prototype.openAttachment=function(){'use strict';this.click("._5dec","a._52c6","._4-eo",'.uiVideoThumb');};n.prototype.getHeadline=function(o){'use strict';return c('DOMQuery').scry(o,"h5._5pbw")[0];};n.prototype.$FbFeedKeyboardController2=function(o){'use strict';var p=c('Parent').bySelector(o,"._5pcb"),q=c('ge')('pagelet_soft_permalink_posts');return !!(p||q&&c('DOM').contains(q,o));};n.prototype.getPreviousSibling=function(o){'use strict';var p=l(o);if(p&&this.getParentStory(p))return p;p=null;if(this.$FbFeedKeyboardController2(o)){var q=this.getStories(this.root),r=q.indexOf(o);while(r>-1){if(r===0){p=c('ge')('pagelet_composer');p=p&&c('Parent').bySelector(p,"._5jmm");}else if(r>0){p=q[r-1];if(p.offsetHeight>0)break;}r--;}}return p||this.selected;};n.prototype.getPreviousStory=function(o){'use strict';var p=this.getPreviousSibling(o);while(p&&!this.isStory(p))p=this.getPreviousSibling(p);return p;};n.prototype.getParentStory=function(o){'use strict';return c('Parent').bySelector(o,"._5jmm");};n.prototype.getNextSibling=function(o){'use strict';var p=m(o);if(p&&this.getParentStory(p))return p;p=null;if(this.$FbFeedKeyboardController2(o)){var q=this.getStories(this.root),r=q.indexOf(o);if(r>-1){p=q[++r];while(p&&p.offsetHeight===0)p=q[++r];}}else if(c('ge')('pagelet_composer',o))p=c('DOMQuery').scry(document,"div._5pcb ._5jmm")[0];return p||this.selected;};n.prototype.getNextStory=function(o){'use strict';var p=this.getNextSibling(o);while(p&&!this.isStory(p))p=this.getNextSibling(p);return p;};n.prototype.setSelected=function(o,p){'use strict';if(o){var q="_5qdu",r=c('DOMQuery').scry(o,"._5qdu");if(!r.length&&p)c('DOM').prependContent(o,c('JSXDOM').div({className:q}));}if(p){this.selected&&this.setTabindexOnStory(this.selected,'-1');this.selected&&c('CSS').removeClass(this.selected,"_5qdv");this.selected=o;o&&this.setTabindexOnStory(o,'0');o&&c('CSS').addClass(o,"_5qdv");c('FbFeedHighlight').highlightSingle(o);}};n.prototype.$FbFeedKeyboardController1=function(){'use strict';var o=c('DOM').scry(this.selected,"._1qch");if(o.length>0)return c('DOM').scry(this.selected,"._3el7")[0];return this.selected;};n.init=function(o){'use strict';new n(o);};function n(){'use strict';j.apply(this,arguments);}f.exports=n;},null);
__d('FbFeedViewportTracking',['csx','Arbiter','LitestandMessages','LitestandStream','StreamViewportTracking'],function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();i=babelHelpers.inherits(k,c('StreamViewportTracking'));j=i&&i.prototype;k.prototype.initSubscriptions=function(){'use strict';this.subscriptions.addSubscriptions(c('Arbiter').subscribe([c('LitestandMessages').STORIES_INSERTED],this.invalidateAllStoriesCache.bind(this)),c('Arbiter').subscribe(c('LitestandMessages').LEAVE_HOME,this.updateTimeTrackingData.bind(this,true)));};k.prototype.getStorySelector=function(){'use strict';return "._5jmm";};k.prototype.getStream=function(){'use strict';return c('LitestandStream').getStreamRoot();};k.prototype.getSessionID=function(){'use strict';return c('LitestandStream').getFeedStreamID();};k.init=function(l){'use strict';k.instance=new k();k.instance.init(l);};k.getInstance=function(){'use strict';return k.instance;};function k(){'use strict';i.apply(this,arguments);}f.exports=k;},null);