if (self.CavalryLogger) { CavalryLogger.start_js(["uad1g"]); }

__d("ChatSidebarSections",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={MORE_ONLINE_FRIENDS:"more_online_friends",MORE_ONLINE_COWORKERS:"more_online_coworkers",OFFLINE_USERS:"offline_users",ORDERED_LIST:"ordered_list",ORDERED_COWORKERS:"ordered_coworkers",TYPEAHEAD:"typeahead",NOW_PINNED_LIST:"now_pinned_list"};},null);
__d("SidebarType",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={SIDEBAR:"sidebar",BUDDYLIST:"buddylist",BUDDYLIST_NUB:"buddylist_nub"};},null);
__d("XAYMTPanelSaveSettingsController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ads\/growth\/aymt\/homepage_panel\/save_settings\/",{time_range:{type:"Enum",enumType:1},ad_account_id:{type:"Int"},promoted_object:{type:"Int"},collapsed:{type:"Int"},dismiss_nux:{type:"Bool",defaultValue:false},flash_insights_dismiss_nux:{type:"Bool",defaultValue:false},refresh_panel:{type:"Bool",defaultValue:false}});},null);
__d('AdvertiserHomePagelet',['AsyncRequest','DOM','URI','XAYMTPanelSaveSettingsController','$'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={init:function(i,j){var k=c('XAYMTPanelSaveSettingsController').getURIBuilder().setBool('refresh_panel',true).getURI();k.addQueryData(c('URI').getRequestURI().getQueryData());new (c('AsyncRequest'))().setURI(k).setStatusElement(j).setErrorHandler(function(l){c('DOM').setContent(c('$')('pagelet_advertiser_panel_content'),'');}).send();}};f.exports=h;},null);
__d('AsyncLoader',['AsyncRequest','BaseAsyncLoader'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j){this._endpoint=i;this._type=j;}Object.assign(h.prototype,c('BaseAsyncLoader').prototype);h.prototype.send=function(i,j,k,l,m){new (c('AsyncRequest'))(i).setData({ids:j}).setHandler(l).setErrorHandler(m).setAllowCrossPageTransition(true).setMethod('GET').setReadOnly(true).send();};f.exports=h;},null);
__d('ChatHovercard',['Arbiter','AsyncLoader','Bootloader','JSLogger','debounce'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=5,i=new (c('AsyncLoader'))('/ajax/chat/hovercard/sidebar.php','hover'),j=c('JSLogger').create('chat_hovercard');c('Arbiter').subscribe('Hovercard/dirty',i.reset.bind(i));function k(o,p){i.get(o,function(q){setTimeout(function(){if(!q){j.error('fetch_failure',{id:o});return;}c('Bootloader').loadModules(["Hovercard"],function(r){var s=r.getDialog(q);if(!s){j.error('no_hovercard',{id:o,endpoint:q});return;}if(o==p.getActiveID())p.showHovercard(o,s);},'ChatHovercard');},0);});}function l(o,p){var q=[];function r(u){if(u>=0&&u<o.length)q.push(o[u]);}var s=o.indexOf(p);if(s>-1){r(s);for(var t=1;t<h;t++){r(s+t);r(s-t);}}return q.filter(function(u){return u;});}function m(o,p){var q=p.getActiveID();if(q){var r=o.getShowingUsers(),s=l(r,q);i.get(s,function(){});}}function n(o){var p=o.getHoverController();p.registerDefault(k);p.subscribe('hover',c('debounce')(m.bind(null,o,p),100));}f.exports=n;},null);
__d('Poller',['ArbiterMixin','AsyncRequest','CurrentUser','emptyFunction','mixin','setTimeoutAcrossTransitions','setTimeout'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('mixin')(c('ArbiterMixin')));i=h&&h.prototype;function j(l){'use strict';i.constructor.call(this);this._config=babelHelpers['extends']({clearOnQuicklingEvents:true,setupRequest:c('emptyFunction'),interval:null,maxRequests:Infinity,dontStart:false},l);this._handle=null;this._isSkipIndefinitely=false;this._hasSkippedRequest=false;this._requests=0;this._muted=false;this._polling=false;this._skip=false;this._cancelRequest=c('emptyFunction');if(!this._config.dontStart)this.start();}j.prototype.start=function(){'use strict';if(this._polling)return this;this._requests=0;this.request();return this;};j.prototype.stop=function(){'use strict';this._cancelRequest();return this;};j.prototype.mute=function(){'use strict';this._muted=true;return this;};j.prototype.resume=function(){'use strict';if(this._muted){this._muted=false;if(this._handle===null&&this._polling)return this.request();}if(this._isSkipIndefinitely){this._isSkipIndefinitely=false;return this.request();}return this;};j.prototype.skip=function(){'use strict';this._skip=true;return this;};j.prototype.startSkipIndefinitely=function(){'use strict';this._isSkipIndefinitely=true;return this;};j.prototype.stopSkipIndefinitely=function(){'use strict';this._isSkipIndefinitely=false;if(this._hasSkippedRequest){return this.request();}else return this;};j.prototype.isSkipIndefinitely=function(){'use strict';return this._isSkipIndefinitely;};j.prototype.reset=function(){'use strict';return this.stop().start();};j.prototype.request=function(){'use strict';this._cancelRequest();this._polling=true;if(!this._config.allowNotLoggedIn&&!k())return this._done();if(this._muted)return this;var l=false;this._cancelRequest=function(){l=true;this._cleanup();}.bind(this);if(this._isSkipIndefinitely){this._deferRequest();this._hasSkippedRequest=true;return this;}else this._hasSkippedRequest=false;if(++this._requests>this._config.maxRequests)return this._done();var m=new (c('AsyncRequest'))();m.setIsBackgroundRequest(true);m.setInitialHandler(function(){return !l;});m.setFinallyHandler(this._deferRequest.bind(this));m.setInitialHandler=c('emptyFunction');m.setFinallyHandler=c('emptyFunction');this._config.setupRequest(m,this);if(this._skip){this._skip=false;c('setTimeoutAcrossTransitions')(this._deferRequest.bind(this),0);}else m.send();return this;};j.prototype.isPolling=function(){'use strict';return this._polling;};j.prototype.isMuted=function(){'use strict';return this._muted;};j.prototype.setInterval=function(l){'use strict';if(l){this._config.interval=l;this.start();}};j.prototype.getInterval=function(){'use strict';return this._config.interval;};j.prototype._cleanup=function(){'use strict';if(this._handle!==null)clearTimeout(this._handle);this._handle=null;this._cancelRequest=c('emptyFunction');this._polling=false;};j.prototype._done=function(){'use strict';this._cleanup();this.inform('done',{sender:this});return this;};j.prototype._deferRequest=function(){'use strict';if(!this._polling)return;if(this._requests<this._config.maxRequests){var l=this._config.interval;l=typeof l==='function'?l(this._requests):l;l=l>j.MIN_INTERVAL?l:j.MIN_INTERVAL;if(this._config.clearOnQuicklingEvents){this._handle=c('setTimeout')(this.request.bind(this),l);}else this._handle=c('setTimeoutAcrossTransitions')(this.request.bind(this),l);}else this._done();};j.MIN_INTERVAL=2000;function k(){return c('CurrentUser').isLoggedInNow();}f.exports=j;},null);
__d('ChatImpressionLogger',['AsyncSignal','ChatConfig','ChatVisibility','Poller','PresencePrivacy','PresenceStatus','requireWeak','debounceAcrossTransitions'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=null;c('requireWeak')('AvailableList',function(n){return h=n;});var i=null;function j(){if(!i)return '';return Array.from(i.getSortedList()).toString();}function k(){if(!i||!h)return '';var n=[],o=Array.from(i.getSortedList());for(var p=0;p<o.length;p++)n[p]=h.get(o[p]);return n.toString();}function l(n){n.setURI('/ajax/chat/imps_logging.php').setData({list_availability:k(),sorted_list:j(),source:'periodical_imps'});}var m={init:function(n){i=n;var o=c('ChatConfig').get('chat_impression_logging_periodical',0);if(o){var p=c('ChatConfig').get('periodical_impression_logging_config.interval'),q=new (c('Poller'))({interval:p,setupRequest:l,clearOnQuicklingEvents:false,dontStart:true});c('PresencePrivacy').subscribe('privacy-user-presence-changed',c('debounceAcrossTransitions')(function(){if(c('ChatVisibility').isOnline()){q.start();}else q.stop();}));}this.init=function(){};},logImpression:function(n,o,p){var q=c('ChatConfig').get('chat_impression_logging_with_click'),r={list_availability:q?k():'',sorted_list:q?j():'',source:n,target:o,target_presence:c('PresenceStatus').get(o),viewport_width:document.body.clientWidth};new (c('AsyncSignal'))('/ajax/chat/ct.php',Object.assign(r,p)).send();}};f.exports=m;},null);
__d('ChatSidebarActionTypes',['keyMirror'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();f.exports=c('keyMirror')({INIT:null,LOADED:null,SET_ENABLED:null,SHOW:null,TOGGLE:null});},null);
__d('ChatSidebarStore',['ChatDispatcher','ChatOptionsInitialData','ChatSidebarActionTypes','FluxStore','SidebarType','performanceAbsoluteNow'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;function j(){i.constructor.call(this,c('ChatDispatcher'));this.$ChatSidebarStore2={initialized:false,initTime:c('performanceAbsoluteNow')(),loaded:false,enabled:!!c('ChatOptionsInitialData').sidebar_mode,visible:null};this.$ChatSidebarStore1={};}j.prototype.__onDispatch=function(k){var l=k.type;this.$ChatSidebarStore1=babelHelpers['extends']({},this.$ChatSidebarStore2);switch(l){case c('ChatSidebarActionTypes').INIT:if(!this.$ChatSidebarStore1.initialized)this.$ChatSidebarStore2.initTime=c('performanceAbsoluteNow')();this.$ChatSidebarStore2.initialized=true;break;case c('ChatSidebarActionTypes').LOADED:this.$ChatSidebarStore2.loaded=true;break;case c('ChatSidebarActionTypes').SHOW:this.$ChatSidebarStore2.visible=k.sidebarType;break;case c('ChatSidebarActionTypes').SET_ENABLED:this.$ChatSidebarStore2.enabled=k.enabled;this.$ChatSidebarStore2.visible=k.sidebarType;break;case c('ChatSidebarActionTypes').TOGGLE:this.$ChatSidebarStore2.enabled=!this.$ChatSidebarStore2.enabled;this.$ChatSidebarStore2.visible=this.$ChatSidebarStore2.enabled?k.visible:c('SidebarType').BUDDYLIST;break;}for(var m in this.$ChatSidebarStore2)if(this.$ChatSidebarStore2.hasOwnProperty(m))if(this.$ChatSidebarStore2[m]!==this.$ChatSidebarStore1[m]){this.__emitChange();break;}};j.prototype.getPrevState=function(){return this.$ChatSidebarStore1;};j.prototype.getState=function(){return this.$ChatSidebarStore2;};j.prototype.isInitialized=function(){return this.$ChatSidebarStore2.initialized;};j.prototype.isLoaded=function(){return this.$ChatSidebarStore2.loaded;};j.prototype.isEnabled=function(){return this.$ChatSidebarStore2.enabled;};j.prototype.getInitTime=function(){return this.$ChatSidebarStore2.initTime;};j.prototype.getVisibleType=function(){return this.$ChatSidebarStore2.visible;};f.exports=new j();},null);
__d('OrderedFriendsList',['AvailableListConstants','MercuryIDs','PresenceStatus','SearchableEntry','ShortProfiles','WorkModeConfig','createArrayFromMixed','isValidUniqueID','InitialChatFriendsList'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=[],i=[],j={},k=[],l={},m=[];function n(p){p=String(p);return c('MercuryIDs').isValid(p)?p:c('MercuryIDs').getParticipantIDFromUserID(p);}var o={contains:function(p){return p in j;},getList:function(){if(c('WorkModeConfig').is_work_user)return c('createArrayFromMixed')(h);o.reRank();var p=c('createArrayFromMixed')(h);p=p.filter(function(q){var r=c('ShortProfiles').getNow(q);return !r||r.type=='friend'||r.is_nonfriend_messenger_contact;});return p;},getSearchableEntries:function(p,q){var r=o.getList();c('ShortProfiles').getMulti(r.slice(0,p),function(s){var t=[];for(var u in s)t.push(o.normalizeProfileEntry(s[u],u));var v=o.getGroups().map(o.normalizeThreadEntry);q(t.concat(v).filter(function(w){return !!w;}).sort(function(w,x){return w.getOrder()-x.getOrder();}));});},normalizeProfileEntry:function(p,q){var r=p.searchTokens||[],s=p.name,t=null;if(p.threadNickname){s=p.threadNickname;t=p.name;}return new (c('SearchableEntry'))({uniqueID:p.id||q,keywordString:r.join(' '),order:o.getRank(p.id||q),photo:p.thumbSrc,title:s,subtitle:t,type:p.type,uri:p.uri,auxiliaryData:{isMessengerUser:p.is_messenger_user}});},normalizeThreadEntry:function(p,q){var r=p.mercury_thread,s=p.participants_to_render.map(function(x){return babelHelpers['extends']({},x,{id:n(x.id)});});r.participants=r.participants.map(n);var t=p.text,u=null;if(!t)t=r.name;var v=s.map(function(x){return x.name;}).join(', ');if(!t){t=v;}else u=v;var w=p.uid;if(!t||!c('isValidUniqueID')(w))return null;return new (c('SearchableEntry'))({uniqueID:w,order:q,photo:r.image_src,title:t,subtitle:u,type:'thread',auxiliaryData:{participantsToRender:s,thread:r}});},getRank:function(p){return p in j?j[p]:h.length;},getActiveList:function(){if(k.length>0)return k;return o.getList();},getActiveRank:function(p){return p in l?l[p]:o.getRank(p);},reRank:function(){h=[];var p=0;m.forEach(function(q){var r=q.slice(0,-2),s=q.slice(-1);if(c('PresenceStatus').get(r)==s){h[p]=r;j[r]=p++;}});},rankActive:function(){var p=0;m.forEach(function(q){var r=q.slice(0,-2),s=q.slice(-1);if(s==c('AvailableListConstants').ACTIVE){k[p]=r;l[r]=p++;}});},getGroups:function(){return i;}};(function(){var p=c('InitialChatFriendsList');h=p.list.length?p.list:[];i=p.groups||[];if(p.shortProfiles)c('ShortProfiles').setMulti(p.shortProfiles);if(!c('WorkModeConfig').is_work_user){m=h.slice();o.rankActive();o.reRank();}else{m=h;h=[];m.forEach(function(q,r){var s=q.slice(0,-2);h[r]=s;j[s]=r;});}})();f.exports=b.OrderedFriendsList||o;},null);
__d('ChatSidebarVisibility',['ChatConfig','ChatSidebarStore','OrderedFriendsList','SidebarType','getViewportDimensions'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('ChatConfig').get('sidebar.min_friends'),i=c('ChatConfig').get('sidebar.minimum_width'),j={getViewport:function(){return c('getViewportDimensions').withoutScrollbars();},hasLowFriendCount:function(){return c('OrderedFriendsList').getActiveList().length<=h;},isViewportCapable:function(k){k=k||j.getViewport();return k.width>i;},shouldShowSidebar:function(k){return c('ChatSidebarStore').isEnabled()&&j.shouldShowSidebarIgnoreEnabled(k);},shouldShowSidebarIgnoreEnabled:function(k){return j.isViewportCapable(k)&&!j.hasLowFriendCount();},isSidebarVisible:function(){return c('ChatSidebarStore').getVisibleType()===c('SidebarType').SIDEBAR;},isBuddyListVisible:function(){return c('ChatSidebarStore').getVisibleType()===c('SidebarType').BUDDYLIST;}};f.exports=j;},null);
__d('ChatSidebarActions',['ChatDispatcher','ChatSidebarActionTypes','ChatSidebarVisibility','SidebarType'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(k){if(c('ChatSidebarVisibility').shouldShowSidebar(k))return c('SidebarType').SIDEBAR;return c('SidebarType').BUDDYLIST;}function i(){if(c('ChatSidebarVisibility').shouldShowSidebarIgnoreEnabled())return c('SidebarType').SIDEBAR;return c('SidebarType').BUDDYLIST;}var j={init:function(){c('ChatDispatcher').dispatch({type:c('ChatSidebarActionTypes').INIT});},loaded:function(){c('ChatDispatcher').dispatch({type:c('ChatSidebarActionTypes').LOADED});},disable:function(){c('ChatDispatcher').dispatch({type:c('ChatSidebarActionTypes').SET_ENABLED,enabled:false,sidebarType:c('SidebarType').BUDDYLIST});},enable:function(){c('ChatDispatcher').dispatch({type:c('ChatSidebarActionTypes').SET_ENABLED,enabled:true,sidebarType:i()});},show:function(k){c('ChatDispatcher').dispatch({type:c('ChatSidebarActionTypes').SHOW,sidebarType:h(k)});},toggle:function(){c('ChatDispatcher').dispatch({type:c('ChatSidebarActionTypes').TOGGLE,sidebarType:h()});}};f.exports=j;},null);
__d('FBRTCStore',['FBRTCDispatcher','FluxStore'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;function j(){i.constructor.call(this,c('FBRTCDispatcher'));}j.prototype.__emitChange=function(){this.__emitter.emit(this.__changeEvent);};f.exports=j;},null);
__d('FBRTCCallBlockingStore',['Arbiter','AsyncRequest','BanzaiLogger','ChannelConstants','FBRTCDispatcher','FBRTCStore','setTimeoutAcrossTransitions'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=false,k=0,l=null,m='call_block_setting_changed';h=babelHelpers.inherits(n,c('FBRTCStore'));i=h&&h.prototype;n.prototype.init=function(o){this.$FBRTCCallBlockingStore1(o);c('Arbiter').subscribe(c('ChannelConstants').getArbiterType('videocall_block_setting'),this.$FBRTCCallBlockingStore2.bind(this));};n.prototype.__onDispatch=function(o){if(o.type!==m)return;this.$FBRTCCallBlockingStore1(o.data);};n.prototype.$FBRTCCallBlockingStore1=function(o){switch(o){case 0:j=false;this.$FBRTCCallBlockingStore3();break;case -1:j=true;this.$FBRTCCallBlockingStore3();break;default:j=true;this.$FBRTCCallBlockingStore4(o);}this.__emitChange();};n.prototype.$FBRTCCallBlockingStore4=function(o){if(l===null)l=c('setTimeoutAcrossTransitions')(this.turnOnVideoCalling.bind(this),o*1000);};n.prototype.getBlockingStatus=function(){return j;};n.prototype.turnOnVideoCalling=function(){new (c('AsyncRequest'))('/ajax/chat/settings.php').setHandler(this.$FBRTCCallBlockingStore5.bind(this)).setData({call_blocked_until:0}).send();};n.prototype.turnOffVideoCalling=function(o){k=o;new (c('AsyncRequest'))('/ajax/chat/settings.php').setHandler(this.$FBRTCCallBlockingStore6.bind(this)).setData({call_blocked_until:o}).send();};n.prototype.$FBRTCCallBlockingStore3=function(){if(l){clearTimeout(l);l=null;}};n.prototype.$FBRTCCallBlockingStore5=function(){c('FBRTCDispatcher').dispatch({type:m,data:0});c('BanzaiLogger').log('VideoCallLoggerConfig',{event:m,message:'enable'});};n.prototype.$FBRTCCallBlockingStore6=function(){c('FBRTCDispatcher').dispatch({type:m,data:k});c('BanzaiLogger').log('VideoCallLoggerConfig',{event:m,message:'disable_'+k});};n.prototype.$FBRTCCallBlockingStore2=function(o,p){c('FBRTCDispatcher').dispatch({type:m,data:p.obj.value});};function n(){h.apply(this,arguments);}f.exports=new n();},null);
__d('ChatOptions',['Arbiter','ChannelConstants','ChatSidebarActions','FBRTCCallBlockingStore','JSLogger','PresenceUtil','ChatOptionsInitialData'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('JSLogger').create('chat_options'),i={};(function(){var k=c('ChatOptionsInitialData');for(var l in k){var m=k[l];if(l==='call_blocked_until'){c('FBRTCCallBlockingStore').init(m);}else i[l]=!!m;}})();var j=Object.assign(new (c('Arbiter'))(),{getSetting:function(k){return i[k];},setSetting:function(k,l,m){if(k==='sidebar_mode'){l?c('ChatSidebarActions').enable():c('ChatSidebarActions').disable();return;}if(this.getSetting(k)==l)return;if(m){m='from_'+m;h.log(m,{name:k,new_value:l,old_value:this.getSetting(k)});}i[k]=!!l;c('Arbiter').inform('chat/option-changed',{name:k,value:l});}});c('Arbiter').subscribe(c('ChannelConstants').getArbiterType('setting'),function(k,l){var m=l.obj;if(m.window_id===c('PresenceUtil').getSessionID())return;j.setSetting(m.setting,!!m.value,'channel');});c('Arbiter').subscribe(c('JSLogger').DUMP_EVENT,function(k,l){l.chat_options=i;});f.exports=j;},null);
__d('ChatOrderedListHover',['csx','ArbiterMixin','CSS','ErrorUtils','Event','LayerHideOnBlur','Parent','mixin','setTimeoutAcrossTransitions','shield'],function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();function k(n){c('CSS').addClass(n,'fetching');}function l(n){c('CSS').removeClass(n,'fetching');}i=babelHelpers.inherits(m,c('mixin')(c('ArbiterMixin')));j=i&&i.prototype;function m(n){'use strict';j.constructor.call(this);this._orderedList=n;this._root=n.getRoot();c('Event').listen(this._root,'mouseover',this._mouseOver.bind(this));c('Event').listen(this._root,'mouseleave',this._mouseLeave.bind(this));n.subscribe('click',c('shield')(this._hide,this));}m.prototype._mouseOver=function(event){'use strict';if(this._paused)return;var n=event.getTarget(),o=c('Parent').bySelector(n,"._42fz")||c('Parent').bySelector(n,"._5a58");o&&this._setActiveItem(o);};m.prototype._mouseLeave=function(event){'use strict';this._setActiveItem(null);};m.prototype._clearTimeouts=function(){'use strict';this._showTimeout&&clearTimeout(this._showTimeout);this._showTimeout=null;this._hideTimeout&&clearTimeout(this._hideTimeout);this._hideTimeout=null;};m.prototype._hide=function(){'use strict';if(this._showingDialog){this._showingDialog.hide();this._showingDialog=null;this._showingID=null;}};m.prototype._show=function(){'use strict';var n=this.getActiveID(),o=false;if(this._defaultHandler){o=true;c('ErrorUtils').applyWithGuard(this._defaultHandler,{},[n,this]);}if(o&&this._showingID!=this.getActiveID())k(this._activeItem);};m.prototype._setActiveItem=function(n){'use strict';if(n!=this._activeItem){this._clearTimeouts();this._activeItem&&l(this._activeItem);if(n){this._activeItem=n;var o=this._showingDialog?0:600;this._showTimeout=c('setTimeoutAcrossTransitions')(function(){return this._show();}.bind(this),o);this.inform('hover');}else{this._activeItem=null;this._hideTimeout=c('setTimeoutAcrossTransitions')(function(){return this._hide();}.bind(this),10);this.inform('leave');}}};m.prototype.registerDefault=function(n){'use strict';this._defaultHandler=n;};m.prototype.getActiveID=function(){'use strict';var n=this._activeItem&&this._orderedList.getUserForNode(this._activeItem);return n||null;};m.prototype.showHovercard=function(n,o){'use strict';if(n==this.getActiveID()&&n!=this._showingID){this._clearTimeouts();l(this._activeItem);this._hide();this._showingDialog=o;this._showingID=n;var p=o.subscribe('mouseenter',this._setActiveItem.bind(this,this._activeItem)),q=o.subscribe('mouseleave',function(){p.unsubscribe();this._setActiveItem(null);}.bind(this)),r=o.subscribe('hide',function(){this.inform('hovercard_hide');p.unsubscribe();q.unsubscribe();r.unsubscribe();}.bind(this));o.enableBehavior(c('LayerHideOnBlur')).setContext(this._activeItem).setPosition('left').show();this.inform('hovercard_show');}};Object.assign(m.prototype,{_root:null,_activeItem:null,_hideTimeout:null,_showTimeout:null,_showingDialog:null,_showingID:null,_defaultHandler:null});f.exports=m;},null);
__d("ChatSidebarConstants",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={LITESTAND_CLASSIC_SIZE:32,IMAGE_SIZE:32};Object.assign(h,{getImageSize:function(i){if(i===false)return h.IMAGE_SIZE;return h.LITESTAND_CLASSIC_SIZE;},getItemHeight:function(){return h.IMAGE_SIZE+8;}});f.exports=h;},null);
__d('ChatQuietLinks',['DataStore','DOM','Event','Parent','UserAgent_DEPRECATED','getOrCreateDOMID'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={},i={silenceLinks:function(m){j(m,this.removeEmptyHrefs.bind(this));},nukeLinks:function(m){j(m,this.removeAllHrefs.bind(this));},removeEmptyHrefs:function(m){k(m,function(n){return !n||n==='#';});},removeAllHrefs:function(m){k(m);}};function j(m,n){var o=!!c('UserAgent_DEPRECATED').chrome(),p=!!c('UserAgent_DEPRECATED').chrome()||c('UserAgent_DEPRECATED').ie()>=9||c('UserAgent_DEPRECATED').firefox()>=4;if(h[c('getOrCreateDOMID')(m)])return;h[c('getOrCreateDOMID')(m)]=true;if(!p)return;if(!o){n&&n(m);return;}c('Event').listen(m,'mouseover',function q(r){var s=c('Parent').byTag(r.getTarget(),'a');if(s){var t=s.getAttribute('href');if(l(t)){c('DataStore').set(s,'stashedHref',s.getAttribute('href'));s.removeAttribute('href');}}});c('Event').listen(m,'mouseout',function q(r){var s=c('Parent').byTag(r.getTarget(),'a'),t=s&&c('DataStore').remove(s,'stashedHref');if(l(t))s.setAttribute('href',t);});c('Event').listen(m,'mousedown',function(q){if(!q.isDefaultRequested())return true;var r=c('Parent').byTag(q.getTarget(),'a'),s=r&&c('DataStore').get(r,'stashedHref');if(l(s))r.setAttribute('href',s);});}function k(m,n){var o=c('DOM').scry(m,'a');if(n)o=o.filter(function(p){return n(p.getAttribute('href'));});o.forEach(function(p){p.removeAttribute('href');if(!p.tabIndex)p.setAttribute('tabindex',0);});}function l(m){return m&&m!=='#';}f.exports=i;},null);
__d('BaseTextWithDecoration.react',['React','ReactFragment'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();function j(l,m,n,o){var p=l[m];if(!p){o.push(n);return;}p(n,function(q){o.push(q);},function(q){j(l,m+1,q,o);});}h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.prototype.render=function(){var l=this.props,m=l.decorators,n=l.text,o=[],p={};j(m,0,n,o);o.forEach(function(q,r){p['i'+r]=q;});return c('React').createElement('span',null,c('ReactFragment').create(p));};function k(){h.apply(this,arguments);}f.exports=k;},null);
__d('messengerIterateEmoji',['MessengerSupportedEmoji'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i,j,k){var l,m,n,o=String(i);while(o){var p=c('MessengerSupportedEmoji').findEmoji(o);if(p){l=o.substr(0,p.index);m=p[0];n=o.substr(p.index+m.length);k(l);j(m,p.emoji);o=n;}else break;}k(o);}f.exports=h;},null);
__d('messengerIterateEmoticons',['EmoticonEmojiList'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i,j,k){var l,m,n,o,p,q=String(i);while(q){var r=c('EmoticonEmojiList').regexp.exec(q);if(r){l=r.index+r[1].length;m=q.substr(0,l);n=r[2];o=q.substr(l+n.length);p=c('EmoticonEmojiList').names[n];k(m);j(n,p);q=o;}else break;}k(q);}f.exports=h;},null);
__d('MessengerTextWithEmoticons.react',['cx','fbt','BaseTextWithDecoration.react','EmojiImageURL','EmoticonEmojiList','Image.react','React','messengerIterateEmoticons','messengerIterateEmoji'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes;function k(p,q){var r=c('EmojiImageURL').getURL(q,16);return (c('React').createElement(c('Image.react'),{className:"_1ift _2560",src:r}));}function l(p,q){var r=i._("{emoticonName} emoticon",[i.param('emoticonName',q)]),s=c('EmoticonEmojiList').emote2emojis[q],t=s?c('EmojiImageURL').getURL(s,16):null,u=t?c('React').createElement(c('Image.react'),{className:"_1ift _2560",src:t,title:p}):c('React').createElement('span',{title:p});return (c('React').createElement('span',null,c('React').createElement('span',{className:'accessible_elem'},r),u));}function m(p,q){return function(r,s,t){var u=function(v,w){s(q(v,w));};p(String(r),u,t);};}var n=[m(c('messengerIterateEmoji'),k),m(c('messengerIterateEmoticons'),l)],o=c('React').createClass({displayName:'MessengerTextWithEmoticons',propTypes:{text:j.string},shouldComponentUpdate:function(p){return p.text!==this.props.text;},render:function(){return (c('React').createElement(c('BaseTextWithDecoration.react'),babelHelpers['extends']({},this.props,{text:this.props.text,decorators:n})));}});f.exports=o;},null);
__d('SplitImage.react',['cx','React','Image.react','joinClasses'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').createClass({displayName:'SplitImage',render:function(){var j=this.props.size;return (c('React').createElement('div',babelHelpers['extends']({},this.props,{className:c('joinClasses')(this.props.className,"_55lt"),style:babelHelpers['extends']({},this.props.style||{},{width:j,height:j})}),this.renderImages()));},renderImages:function(){if(!this.props.srcs)return null;var j=this.props.srcs,k=Array.isArray(j);if(k){j=j.filter(function(l){return l!==null;});if(!j.length)return null;}if(!k||j.length==1)return this.renderOne(k?j[0]:j);return j.length==2?this.renderTwo(j):this.renderThree(j);},renderOne:function(j){return (c('React').createElement(c('Image.react'),{src:j,width:this.props.size,height:this.props.size,alt:''}));},renderTwo:function(j){var k=this.props.size,l=Math.floor(k/2),m=-Math.floor(l/2),n="_55lu"+(this.props.border?' '+"_57xo":'');return (c('React').createElement('div',null,c('React').createElement('div',{className:"_55lu",style:{width:l}},c('React').createElement(c('Image.react'),{src:j[0],width:k,height:k,style:{marginLeft:m},alt:''})),c('React').createElement('div',{className:n,style:{width:l}},c('React').createElement(c('Image.react'),{src:j[1],width:k,height:k,style:{marginLeft:m},alt:''}))));},renderThree:function(j){var k=this.props.size,l=Math.floor(k/3*2),m=-Math.floor((k-l)/2),n=Math.floor(k/2),o=k-l,p=-Math.floor((n-o)/2),q="_55lu"+(this.props.border?' '+"_57pl":''),r="_55lu"+(this.props.border?' '+"_57pm":'');return (c('React').createElement('div',null,c('React').createElement('div',{className:q,style:{width:l}},c('React').createElement(c('Image.react'),{src:j[0],width:k,height:k,style:{marginLeft:m},alt:''})),c('React').createElement('div',{className:r,style:{width:o,height:n}},c('React').createElement(c('Image.react'),{src:j[1],width:n,height:n,style:{marginLeft:p},alt:''})),c('React').createElement('div',{className:"_55lu",style:{width:o,height:n}},c('React').createElement(c('Image.react'),{src:j[2],width:n,height:n,style:{marginLeft:p},alt:''}))));}});f.exports=i;},null);
__d('AbstractBadge.react',['cx','invariant','React','joinClasses'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes;function k(m){return parseInt(m,10)===m;}var l=c('React').createClass({displayName:'AbstractBadge',propTypes:{count:j.number.isRequired,maxcount:j.number},getDefaultProps:function(){return {maxcount:20};},render:function(){var m=this.props.count,n=this.props.maxcount;!k(m)?i(0):void 0;!k(n)?i(0):void 0;var o="_51lp"+(m>n?' '+"_51lr":'')+(m===0?' '+"hidden_elem":'');return (c('React').createElement('span',babelHelpers['extends']({},this.props,{className:c('joinClasses')(this.props.className,o)}),m>n?n+'+':m));}});f.exports=l;},null);
__d('XUIBadge.react',['cx','React','AbstractBadge.react','joinClasses'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'XUIBadge',propTypes:{type:i.oneOf(['regular','special'])},getDefaultProps:function(){return {type:'regular'};},render:function(){var k=this.props.type,l="_5ugh"+(k==='regular'?' '+"_5ugf":'')+(k==='special'?' '+"_5ugg":'');return (c('React').createElement(c('AbstractBadge.react'),babelHelpers['extends']({},this.props,{className:c('joinClasses')(this.props.className,l),type:null})));}});f.exports=j;},null);
__d('ChatSidebarItem.react',['cx','ix','xuiglyph','AvailableListConstants','XUIBadge.react','ChatConfig','ChatSidebarConstants','Image.react','Link.react','MercuryConfig','MessengerTextWithEmoticons.react','ReactComponentWithPureRenderMixin','React','SplitImage.react','TextWithEmoticons.react'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes,l=c('ChatConfig').get('divebar_rounded_profile',false),m=9,n=c('React').createClass({displayName:'ChatSidebarItem',mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{image:k.string,images:k.array,isPlayingGame:k.bool,birthday:k.bool,context:k.node,href:k.string,imageSize:k.number,name:k.node.isRequired,nameCanHaveEmoji:k.bool,onClick:k.func,status:k.number,statusTime:k.string,unreadCount:k.number,isMessengerOnlyContact:k.bool,profileBadge:k.string},render:function(){var w="_55ln"+(this.props.context?' '+"_55lo":'')+(l?' '+"_qhr":'');return (c('React').createElement(c('Link.react'),{className:w,href:{url:this.props.href},onClick:this.props.onClick,rel:'ignore'},c('React').createElement('div',{className:"_55lp"},c('React').createElement('div',{className:"_55lq"},c('React').createElement(c('SplitImage.react'),{size:this.props.imageSize||c('ChatSidebarConstants').IMAGE_SIZE,srcs:this.props.image||this.props.images})),c('React').createElement('div',{className:"_5bon"},this.renderProfileBadge(),this.renderPlayingGame(),this.renderBirthday(),this.renderUnreadCount(),this.renderStatus()),c('React').createElement('div',{className:"_55lr"},this.renderName()),c('React').createElement('div',{className:"_55ls"},this.props.context))));},renderName:function(){if(this.props.nameCanHaveEmoji){var w=c('React').createElement(c('TextWithEmoticons.react'),{renderEmoticons:true,renderEmoji:true,text:this.props.name});if(c('MercuryConfig').MessengerNewEmojiGK)w=c('React').createElement(c('MessengerTextWithEmoticons.react'),{renderEmoticons:true,renderEmoji:true,text:this.props.name});return w;}else return this.props.name;},renderUnreadCount:function(){var w=this.props.unreadCount;if(!w)return null;return (c('React').createElement(c('XUIBadge.react'),{count:w,maxcount:m,type:'regular'}));},renderStatus:function(){var w=this.getStatusSrc();if(!w&&!this.props.statusTime)return null;var x=w?c('React').createElement(c('Image.react'),{className:"_568_",src:w}):null,y=true;if(this.props.unreadCount&&this.props.unreadCount>0){x=this.props.statusTime?null:x;y=false;}return (c('React').createElement('div',{className:"_568z"},y?this.renderLastActiveTime():null,x));},renderLastActiveTime:function(){return (c('React').createElement('div',{className:"_568-"},this.props.statusTime));},renderBirthday:function(){if(!this.props.birthday)return null;return (c('React').createElement(c('Image.react'),{className:"_5dv3",src:s()}));},renderPlayingGame:function(){if(this.props.statusTime||this.props.birthday||!this.props.isPlayingGame)return null;return (c('React').createElement('div',{className:"_46b2"},c('React').createElement(c('Image.react'),{className:"_46b3",src:v()})));},renderProfileBadge:function(){if(this.props.statusTime||this.props.isPlayingGame||this.props.birthday||!this.props.profileBadge)return null;return (c('React').createElement('div',{className:"_46b2"},c('React').createElement(c('Image.react'),{className:"_g7p",src:this.props.profileBadge})));},getStatusSrc:function(){if(this.props.isMessengerOnlyContact)return u();return this.props.status===c('AvailableListConstants').ACTIVE?t():null;}}),o=void 0,p=void 0,q=void 0,r=void 0;function s(){if(!o)o=i('/images/gifts/icons/cake_icon.png');return o;}function t(){if(!q)q=i('/images/chat/sidebar/buddylist_nub/greenDot.png');return q;}function u(){if(!r)r=i('/images/chat/sidebar/buddylist_nub/phone.png');return r;}function v(){if(!p)p=j({name:'games',size:'small'});return p;}f.exports=n;},null);
__d('MercuryParticipantListRenderer',['fbt','MercuryIDs'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();function i(){this.$MercuryParticipantListRenderer1=false;this.$MercuryParticipantListRenderer2=false;this.$MercuryParticipantListRenderer3=false;this.$MercuryParticipantListRenderer4=0;this.$MercuryParticipantListRenderer5=null;this.$MercuryParticipantListRenderer6=function(s){if(this.$MercuryParticipantListRenderer5){var t=c('MercuryIDs').getUserIDFromParticipantID(s.id);if(this.$MercuryParticipantListRenderer5[t])return this.$MercuryParticipantListRenderer5[t];}return this.$MercuryParticipantListRenderer2?s.short_name:s.name;}.bind(this);}i.prototype.renderParticipantList=function(s){var t=s.map(this.$MercuryParticipantListRenderer6);switch(t.length){case 0:return j(this.$MercuryParticipantListRenderer1);case 1:return k(t);case 2:return this.$MercuryParticipantListRenderer3?m(t):l(t);case 3:return this.$MercuryParticipantListRenderer3?o(t):n(t);default:return this.$MercuryParticipantListRenderer3?q(t,this.$MercuryParticipantListRenderer4):p(t,this.$MercuryParticipantListRenderer4);}};i.prototype.setIsNewThread=function(s){this.$MercuryParticipantListRenderer1=s;return this;};i.prototype.setNameRenderer=function(s){this.$MercuryParticipantListRenderer6=s;return this;};i.prototype.setUseShortName=function(s){this.$MercuryParticipantListRenderer2=s;return this;};i.prototype.setNickname=function(s){this.$MercuryParticipantListRenderer5=s;return this;};i.prototype.setUseAndSeparator=function(s){this.$MercuryParticipantListRenderer3=s;return this;};i.prototype.setTotalParticipantCount=function(s){this.$MercuryParticipantListRenderer4=s;return this;};function j(s){if(s){return h._("New Message");}else return h._("No Participants");}function k(s){return s[0];}function l(s){return h._("{participant1}, {participant2}",[h.param('participant1',s[0]),h.param('participant2',s[1])]);}function m(s){return h._("{participant1} and {participant2}",[h.param('participant1',s[0]),h.param('participant2',s[1])]);}function n(s){return h._("{participant1}, {participant2}, {participant3}",[h.param('participant1',s[0]),h.param('participant2',s[1]),h.param('participant3',s[2])]);}function o(s){return h._("{participant1}, {participant2} and {participant3}",[h.param('participant1',s[0]),h.param('participant2',s[1]),h.param('participant3',s[2])]);}function p(s,t){return h._("{participant1}, {participant2}, {participant3}, {others_link}",[h.param('participant1',s[0]),h.param('participant2',s[1]),h.param('participant3',s[2]),h.param('others_link',r((t||s.length)-3))]);}function q(s,t){return h._("{participant1}, {participant2} and {others_link}",[h.param('participant1',s[0]),h.param('participant2',s[1]),h.param('others_link',r((t||s.length)-2))]);}function r(s){if(s>1){return h._({"*":"{others_count} others"},[h.param('others_count',s,[0])]);}else return h._("1 other");}f.exports=i;},null);
__d('ChatSidebarThread.react',['fbt','ChatSidebarItem.react','ChatOpenTab','MercuryParticipantListRenderer','WebMessengerPermalinkConstants','ReactComponentWithPureRenderMixin','React','TooltipData'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=10,k='\n',l=c('React').createClass({displayName:'ChatSidebarThread',mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{image:i.string,imageSize:i.number,name:i.string,participants:i.array.isRequired,numOtherParticipants:i.number.isRequired,referrer:i.string,status:i.number,threadFBID:i.string,unreadCount:i.number},getDefaultProps:function(){return {numOtherParticipants:j};},render:function(){var o=this.props.name,p=m(this.props.threadFBID,this.props.participants,this.props.numOtherParticipants),q=o?p:undefined,r=this.props.image?[]:n(this.props.participants),s=o?o:p;return (c('React').createElement('div',c('TooltipData').propsFor(this._renderParticipantsTooltip()),c('React').createElement(c('ChatSidebarItem.react'),{context:q,href:c('WebMessengerPermalinkConstants').getURIPathForThreadID(this.props.threadFBID),imageSize:this.props.imageSize,image:this.props.image,images:r,name:s,nameCanHaveEmoji:true,onClick:this._handleClick,referrer:this.props.referrer,status:this.props.status,unreadCount:this.props.unreadCount})));},_renderParticipantsTooltip:function(){var o=[],p=this.props.participants.length,q=this.props.numOtherParticipants,r=Math.min(j,p);if(q-r===1)r--;for(var s=0;s<r;s++)o.push(this.props.participants[s].name);if(r<q)o.push(h._("and {num} more...",[h.param('num',q-r)]));return o.join(k);},_handleClick:function(o){o.preventDefault();c('ChatOpenTab').openThread(this.props.threadFBID,this.props.referrer);}});function m(o,p,q){return new (c('MercuryParticipantListRenderer'))().setIsNewThread(!o).setUseShortName(true).setTotalParticipantCount(q).renderParticipantList(p);}function n(o){return o.map(function(p){return p.image_src;}).filter(function(p){return p;});}f.exports=l;},null);
__d('ChatSidebarGroupThreadsGroup.react',['cx','ChatSidebarThread.react','ChatSidebarSections','ChatSidebarConstants','PresencePrivacy','PresenceStatus','React'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'ChatSidebarGroupThreadsGroup',propTypes:{groups:i.array.isRequired,isDisconnected:i.bool},render:function(){return (c('React').createElement('ul',null,this.props.groups.map(this._renderGroup)));},_renderGroup:function(k){var l=k.mercury_thread.participants,m=this.props.isDisconnected||c('PresencePrivacy').isUserOffline();return (c('React').createElement('li',{className:"_42fz"+(m?' '+"_570-":''),'data-id':k.uid,key:k.uid},c('React').createElement(c('ChatSidebarThread.react'),{image:k.mercury_thread.image_src,imageSize:c('ChatSidebarConstants').getImageSize(),name:k.mercury_thread.name,participants:k.participants_to_render,numOtherParticipants:l.length-1,referrer:c('ChatSidebarSections').ORDERED_LIST,status:c('PresenceStatus').getGroup(l),threadFBID:k.uid})));}});f.exports=j;},null);
__d('ChatSidebarHeader.react',['cx','ReactComponentWithPureRenderMixin','React','joinClasses'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').createClass({displayName:'ReactChatSidebarHeader',mixins:[c('ReactComponentWithPureRenderMixin')],render:function(){return (c('React').createElement('div',babelHelpers['extends']({},this.props,{className:c('joinClasses')(this.props.className,"_55ob")}),c('React').createElement('div',{className:"_55oc"},this.props.children)));}});f.exports=i;},null);
__d('ChatSidebarUser.react',['ChatOpenTab','ChatSidebarItem.react','WebMessengerPermalinkConstants','ReactComponentWithPureRenderMixin','React'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'ChatSidebarUser',mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{birthday:h.bool,image:h.string,imageSize:h.number,isPlayingGame:h.bool,name:h.string,sectionName:h.string.isRequired,slot:h.number,status:h.number,statusTime:h.string,unreadCount:h.number,userID:h.string.isRequired,isMessengerOnlyContact:h.bool,profileBadge:h.string},render:function(){var j=c('WebMessengerPermalinkConstants').getURIPathForIDOrVanity(this.props.userID);return (c('React').createElement(c('ChatSidebarItem.react'),{onClick:this._openTab,href:j,imageSize:this.props.imageSize,image:this.props.image,isPlayingGame:this.props.isPlayingGame,name:this.props.name,nameCanHaveEmoji:false,status:this.props.status,birthday:this.props.birthday,statusTime:this.props.statusTime,context:this.props.context,unreadCount:this.props.unreadCount,isMessengerOnlyContact:this.props.isMessengerOnlyContact,profileBadge:this.props.profileBadge}));},_openTab:function(j){c('ChatOpenTab').openUserTab(this.props.userID,this.props.sectionName,{global_slot:this.props.slot});j.preventDefault();}});f.exports=i;},null);
__d('ChatUnreadCountActionTypes',['keyMirror'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();f.exports=c('keyMirror')({COUNT_UPDATED:null});},null);
__d('ChatUnreadCountStore',['ChatDispatcher','ChatUnreadCountActionTypes','FluxStore','ifRequired'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;function j(){i.constructor.call(this,c('ChatDispatcher'));}j.prototype.__onDispatch=function(k){var l=k.type;switch(l){case c('ChatUnreadCountActionTypes').COUNT_UPDATED:this.__emitChange();break;default:break;}};j.prototype.get=function(k){return c('ifRequired')('ChatUnreadCount',function(l){return l.get().getUnreadCountForUID(k);},function(){return 0;});};f.exports=new j();},null);
__d('PresenceStatusStore',['ChatDispatcher','FluxStore','PresenceStatus','PresenceStatusActionTypes'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;function j(){i.constructor.call(this,c('ChatDispatcher'));}j.prototype.__onDispatch=function(k){var l=k.type;switch(l){case c('PresenceStatusActionTypes').AVAILABILITY_CHANGED:this.__emitChange();break;default:break;}};j.prototype.get=function(k){return c('PresenceStatus').get(k);};j.prototype.getIsPlaying=function(k){return c('PresenceStatus').isPlayingCanvasGameUser(k);};f.exports=new j();},null);
__d('ShortProfilesActionTypes',['keyMirror'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();f.exports=c('keyMirror')({PROFILE_UPDATED:null});},null);
__d('ShortProfilesStore',['ChatDispatcher','FluxStore','ShortProfiles','ShortProfilesActionTypes'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;function j(){i.constructor.call(this,c('ChatDispatcher'));}j.prototype.__onDispatch=function(k){var l=k.type;switch(l){case c('ShortProfilesActionTypes').PROFILE_UPDATED:this.__emitChange();break;default:break;}};j.prototype.get=function(k){var l=c('ShortProfiles').getNow(k);if(!l)c('ShortProfiles').get(k,this.$ShortProfilesStore1);return l;};j.prototype.$ShortProfilesStore1=function(k){c('ChatDispatcher').dispatch({type:c('ShortProfilesActionTypes').PROFILE_UPDATED});};f.exports=new j();},null);
__d("XProfileBadgeAsyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/profile_badge\/async\/badges\/",{user_ids:{type:"StringVector",defaultValue:[]}});},null);
__d('ChatSidebarUserGroup.react',['cx','AsyncRequest','AvailableListConstants','ChatSidebarSections','ChatSidebarUser.react','ChatUnreadCountStore','LastActiveTimes','PresencePrivacy','PresenceStatusStore','ProfileBadgeConfig','React','ShortProfilesStore','StoreAndPropBasedStateMixin','SubscriptionsHandler','XProfileBadgeAsyncController','createCancelableFunction'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=Object.keys(c('ChatSidebarSections')).map(function(l){return c('ChatSidebarSections')[l];}),k=c('React').createClass({displayName:'ChatSidebarUserGroup',_subscriptions:null,_updateProfileBadges:null,mixins:[c('StoreAndPropBasedStateMixin')(c('ChatUnreadCountStore'),c('PresenceStatusStore'),c('ShortProfilesStore'))],propTypes:{ids:i.arrayOf(i.string).isRequired,isDisconnected:i.bool,loadExtras:i.bool,sectionName:i.oneOf(j).isRequired},statics:{calculateState:function(l){var m={},n={},o=[],p={};l.ids.forEach(function(q){var r=c('PresenceStatusStore').get(q);if(r===c('AvailableListConstants').ACTIVE)n[q]=r;var s=c('ShortProfilesStore').get(q);s&&o.push(s);p[q]=c('ChatUnreadCountStore').get(q);if(l.loadExtras)m[q]=c('PresenceStatusStore').getIsPlaying(q);});return {playingMap:m,statusMap:n,unreadCounts:p,userData:o};}},componentWillMount:function(){this._subscriptions=new (c('SubscriptionsHandler'))();this._updateProfileBadges=c('createCancelableFunction')(function(){var l=c('XProfileBadgeAsyncController').getURIBuilder().setStringVector('user_ids',this.props.ids).getURI();new (c('AsyncRequest'))().setURI(l).setHandler(function(m){this.setState({userIDToProfileBadge:m.payload});}.bind(this)).send();}.bind(this));this._subscriptions.addSubscriptions(this._updateProfileBadges);this.componentWillReceiveProps(this.props);},shouldComponentUpdate:function(l,m){var n=this.props,o=n.ids,p=babelHelpers.objectWithoutProperties(n,['ids']);for(var q in p)if(p.hasOwnProperty(q))if(p[q]!==l[q])return true;var r=m.userData,s=this.state?this.state.userData:[];if(r.length!==s.length)return true;for(var t=0;t<s.length;t++)if(s[t].id!==r[t].id)return true;for(var u in this.state.unreadCounts)if(this.state.unreadCounts[u]!==m.unreadCounts[u])return true;var v=this.state.statusMap,w=m.statusMap;for(var x in v)if(v.hasOwnProperty(x))if(v[x]!==w[x])return true;for(var y in w)if(w.hasOwnProperty(y))if(w[y]!==v[y])return true;return false;},componentWillUnmount:function(){this._subscriptions.release();},componentWillReceiveProps:function(l){if(this.props.loadExtras&&c('ProfileBadgeConfig').show_sidebar_badge)this._updateProfileBadges&&this._updateProfileBadges();},render:function(){return (c('React').createElement('ul',this.props,this.state.userData.map(this._renderProfile)));},_renderProfile:function(l,m){if(!l.id)return null;var n=this.state.statusMap[l.id],o=n!==c('AvailableListConstants').ACTIVE?c('LastActiveTimes').getShortDisplay(l.id):undefined,p=this.props.isDisconnected||!c('PresencePrivacy').allows(l.id),q=this.state.userIDToProfileBadge?this.state.userIDToProfileBadge[l.id]:undefined;return (c('React').createElement('li',{className:"_42fz"+(p?' '+"_570-":''),'data-id':l.id,key:l.id},c('React').createElement(c('ChatSidebarUser.react'),{birthday:l.is_birthday,image:l.thumbSrc,imageSize:this.props.imageSize,isPlayingGame:!!this.state.playingMap[l.id],name:l.name,sectionName:this.props.sectionName,slot:m,status:n,statusTime:o,userID:l.id,unreadCount:this.state.unreadCounts[l.id],isMessengerOnlyContact:l.is_messenger_only,profileBadge:q})));}});f.exports=k;},null);
__d('ChatSidebarOrderedList.react',['cx','fbt','Bootloader','ChatQuietLinks','ChatReliabilityInstrumentation','ChatSidebarConstants','ChatSidebarGroupThreadsGroup.react','ChatSidebarHeader.react','ChatSidebarSections','ChatSidebarUserGroup.react','PresencePrivacy','ReactComponentWithPureRenderMixin','React','ReactDOM','Run','Scroll','SubscriptionsHandler','ifRequired'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'ChatSidebarOrderedList',_subscriptions:null,mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{availableUsers:j.array.isRequired,groups:j.array.isRequired,isSidebar:j.bool.isRequired,scrollContainer:j.object,topUsers:j.array.isRequired},getInitialState:function(){return {isDisconnected:false,renderBelowFold:false};},componentDidMount:function(){c('ChatQuietLinks').nukeLinks(c('ReactDOM').findDOMNode(this));this._subscriptions=new (c('SubscriptionsHandler'))();c('Run').onAfterLoad(function(){this.setState({renderBelowFold:true});this._bootloadChannelSubscription();}.bind(this));},componentWillUnmount:function(){this._subscriptions.release();},render:function(){var l=c('PresencePrivacy').getOnlinePolicy()===c('PresencePrivacy').ONLINE_TO_WHITELIST&&c('PresencePrivacy').getVisibility()?this._renderOfflineSection():this._renderOnlineSection();return (c('React').createElement('div',null,this._renderFriendsSection(),this._renderGroupsSection(),l));},_scrollToSeparator:function(l){var m=this.props.scrollContainer;if(!m)return;var n=m.clientHeight,o=m.scrollHeight,p=c('Scroll').getTop(m),q=Math.min(l.offsetTop,o-n);if(p!==q)c('ifRequired')('Animation',function(r){var s=Math.abs(q-p)/m.clientHeight*500;new r(m).to('scrollTop',q).ease(r.ease.end).duration(s).go();},function(){c('Scroll').setTop(m,q);});},_renderOfflineSection:function(){var l=c('ChatSidebarConstants').getImageSize(this.props.isSidebar),m=this.props.topUsers.filter(function(o){return !c('PresencePrivacy').allows(o);});m.splice(-2);var n=c('React').createElement('a',{ajaxify:'/ajax/chat/privacy/settings_dialog.php?ref=whitelist_separator',href:'#',rel:'dialog'},i._("Edit"));return [c('React').createElement(c('ChatSidebarHeader.react'),{key:'usersSeparator1'},i._("MORE FRIENDS")),c('React').createElement(c('ChatSidebarHeader.react'),{className:"_5j9-",key:'usersSeparator2'},i._("These friends can't see you on chat. {=link}",[i.param('=link',n)])),c('React').createElement(c('ChatSidebarUserGroup.react'),{ids:m,isDisconnected:this.state.isDisconnected,imageSize:l,key:c('ChatSidebarSections').OFFLINE_USERS,loadExtras:this.state.renderBelowFold,sectionName:c('ChatSidebarSections').OFFLINE_USERS})];},_renderOnlineSection:function(){if(this.props.availableUsers.length===0)return null;if(!this.state.renderBelowFold){var l=c('ChatSidebarConstants').getItemHeight();return [c('React').createElement('div',{key:c('ChatSidebarSections').MORE_ONLINE_FRIENDS,style:{height:l*this.props.availableUsers.length}})];}var m=c('ChatSidebarConstants').getImageSize(this.props.isSidebar),n=i._("{MORE ONLINE FRIENDS} ({=count})",[i.param('MORE ONLINE FRIENDS',i._("MORE FRIENDS")),i.param('=count',this.props.availableUsers.length)]),o=c('React').createElement(c('ChatSidebarUserGroup.react'),{ids:this.props.availableUsers,imageSize:m,isDisconnected:this.state.isDisconnected,key:c('ChatSidebarSections').MORE_ONLINE_FRIENDS,loadExtras:this.state.renderBelowFold,sectionName:c('ChatSidebarSections').MORE_ONLINE_FRIENDS});return [c('React').createElement(c('ChatSidebarHeader.react'),{ref:'usersSeparator',key:'usersSeparator',onClick:function(){return this._scrollToSeparator(c('ReactDOM').findDOMNode(this.refs.usersSeparator));}.bind(this)},n),o];},_renderGroupsSection:function(){if(this.props.groups.length===0)return null;var l=this.state.isDisconnected||c('PresencePrivacy').isUserOffline();return [c('React').createElement(c('ChatSidebarHeader.react'),{ref:'groupSeparator',key:'groupSeparator',className:l?"_570-":'',onClick:function(){return this._scrollToSeparator(c('ReactDOM').findDOMNode(this.refs.groupSeparator));}.bind(this)},i._("GROUP CONVERSATIONS")),c('React').createElement(c('ChatSidebarGroupThreadsGroup.react'),{groups:this.props.groups,isDisconnected:this.state.isDisconnected,key:'group_threads_section',loadExtras:this.state.renderBelowFold})];},_renderFriendsSection:function(){var l=c('ChatSidebarConstants').getImageSize(this.props.isSidebar),m=this.props.topUsers;if(c('PresencePrivacy').getVisibility()==c('PresencePrivacy').ONLINE)m=this.props.topUsers.filter(function(n){return c('PresencePrivacy').allows(n);});return (c('React').createElement(c('ChatSidebarUserGroup.react'),{key:c('ChatSidebarSections').ORDERED_LIST,ids:m,isDisconnected:this.state.isDisconnected,imageSize:l,loadExtras:this.state.renderBelowFold,sectionName:c('ChatSidebarSections').ORDERED_LIST}));},_bootloadChannelSubscription:function(){c('Bootloader').loadModules(["ChannelConnection"],function(l){this._subscriptions.addSubscriptions(l.subscribe([l.CONNECTED,l.RECONNECTING,l.SHUTDOWN,l.MUTE_WARNING,l.UNMUTE_WARNING],function(){var m=l.disconnected();if(m!==this.state.isDisconnected){if(m){c('ChatReliabilityInstrumentation').logCHANNEL_DISCONNECT();}else c('ChatReliabilityInstrumentation').logCHANNEL_CONNECT();this.setState({isDisconnected:m});}}.bind(this)));}.bind(this),'ChatSidebarOrderedList.react');}});f.exports=k;},null);
__d('ChatSortUsers',['ShortProfiles','TokenizeUtil'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={};function i(k){if(h[k])return h[k];var l=(c('ShortProfiles').getNow(k)||{}).name;if(l)return h[k]=c('TokenizeUtil').flatten(l);return '~';}var j={sortAlphabetical:function(k,l){var m=i(k),n=i(l);if(m!==n)return m<n?-1:1;return 0;}};f.exports=j;},null);
__d('PresenceOrderedList',['ChatSortUsers','InitialChatFriendsList','PresencePrivacy','PresenceStatus'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(){'use strict';this.$PresenceOrderedList1=this.$PresenceOrderedList2();}h.prototype.getSorted=function(i){'use strict';var j=[];this.$PresenceOrderedList1.forEach(function(k){var l=k[0],m=k[1];if(j.length>=i)return false;if(c('PresencePrivacy').getFriendVisibility(l)==c('PresencePrivacy').BLACKLISTED)return true;if(m==c('PresenceStatus').get(l))j.push(l);});return j;};h.prototype.getAvailableSorted=function(i){'use strict';var j=c('PresenceStatus').getOnlineIDs();if(i)j=j.filter(function(k){return i&&i.indexOf(k)===-1;});return j.sort(c('ChatSortUsers').sortAlphabetical);};h.prototype.$PresenceOrderedList2=function(){'use strict';var i=c('InitialChatFriendsList').list||[];return i.map(function(j){var k=j.slice(0,-2),l=Number(j.slice(-1));return [k,l];});};f.exports=new h();},null);
__d('ChatOrderedList',['csx','Arbiter','ArbiterMixin','AvailableList','AvailableListConstants','CSS','ChatConfig','ChatHovercard','ChatOptions','ChatOrderedListHover','ChatSidebarConstants','ChatSidebarOrderedList.react','DOM','DataStore','Event','InitialChatFriendsList','JSLogger','Parent','PresenceOrderedList','PresencePrivacy','React','ReactDOM','debounceAcrossTransitions','mixin','shield'],function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();i=babelHelpers.inherits(k,c('mixin')(c('ArbiterMixin')));j=i&&i.prototype;function k(l,m){'use strict';j.constructor.call(this);this._isSidebar=l;this._root=m;this._isVisible=false;this._excludedIds={};this._numTopFriends=5;this._groups=[];this._hoverController=null;this._isHovering=false;this._topUsers=[];this._orderedList=c('DOM').find(this._root,'.fbChatOrderedList');c('Event').listen(this._orderedList,'mouseover',function(){this._isHovering=true;}.bind(this));c('Event').listen(this._orderedList,'mouseout',function(){this._isHovering=false;this._render();}.bind(this));this._scrollableOrderedList=c('Parent').byClass(this._root,'scrollableOrderedList');this._scrollableArea=c('Parent').byClass(this._root,'scrollable');if(this._isSidebar)new (c('ChatHovercard'))(this);c('Arbiter').subscribe(c('JSLogger').DUMP_EVENT,function(n,o){o.chat_lists=o.chat_lists||{sorted_list:this.getSortedList(),available_list:c('PresenceOrderedList').getAvailableSorted(),excluded_list:this._excludedIds};}.bind(this));c('PresencePrivacy').subscribe('privacy-user-presence-changed',c('shield')(this.updateTopUsers,this));c('AvailableList').subscribe(c('AvailableListConstants').ON_AVAILABILITY_CHANGED,c('shield')(this.updateTopUsers,this));}k.prototype.getShowingUsers=function(){'use strict';return c('DOM').scry(this._root,"li._42fz,li._5a58").map(this.getUserForNode);};k.prototype.getUserForNode=function(l){'use strict';return c('DataStore').get(l,'id')||c('DataStore').get(l,'serverthreadid');};k.prototype.getHoverController=function(){'use strict';if(!this._hoverController)this._hoverController=new (c('ChatOrderedListHover'))(this);return this._hoverController;};k.prototype.getItemHeight=function(){'use strict';return c('ChatSidebarConstants').getItemHeight();};k.prototype.getRoot=function(){'use strict';return this._root;};k.prototype.getSortedList=function(){'use strict';return this._topUsers=c('PresenceOrderedList').getSorted(this._numTopFriends);};k.prototype.updateTopUsers=function(){'use strict';this.getSortedList();this._render();};k.prototype.hide=function(){'use strict';if(!this._isVisible)return;this._isVisible=false;c('CSS').hide(this._scrollableOrderedList||this._root);this.inform('hide');};k.prototype.setNumTopFriends=function(l,m){'use strict';if(c('ChatConfig').get('web_messenger_divebar_show_more_groups')){this.setNumTopFriendsMoreGroups(l,m);return;}var n=this._getGroups(),o=l-n.length;if(o>c('ChatConfig').get('min_top_friends'))l=o;l--;if(l!==this._numTopFriends||n.length!==this._groups.length){this._groups=n;this._numTopFriends=l;this.getSortedList();if(m){this._renderOrderedList();}else this._render();}};k.prototype.setNumTopFriendsMoreGroups=function(l,m){'use strict';var n=this._getGroups(),o=Math.max(Math.min(Math.floor(l/5),n.length),2),p=n.length>o?o:n.length,q=Math.max(l-p,1);if(q>1)q--;n=n.slice(0,p);if(q!==this._numTopFriends||n.length!==this._groups.length){this._numTopFriends=q;this._groups=n;if(m){this._renderOrderedList();}else this._render();}};k.prototype._renderOrderedList=function(){'use strict';if(!this._isVisible||this._isHovering)return;var l=c('PresenceOrderedList').getAvailableSorted(this._topUsers);c('ReactDOM').render(c('React').createElement(c('ChatSidebarOrderedList.react'),{availableUsers:l,isSidebar:this._isSidebar,scrollContainer:this._scrollContainer,topUsers:this._topUsers,groups:this._groups}),this._orderedList);this.inform('render');};k.prototype._render=function(){'use strict';this._render=c('debounceAcrossTransitions')(this._renderOrderedList.bind(this),300);this._render();};k.prototype.show=function(){'use strict';if(this._isVisible)return;this._isVisible=true;c('CSS').show(this._scrollableOrderedList||this._root);this._render();this.inform('show');};k.prototype.isVisible=function(){'use strict';return this._isVisible;};k.prototype.setScrollContainer=function(l){'use strict';if(c('DOM').contains(l,this._root))this._scrollContainer=l;};k.prototype._getGroups=function(){'use strict';if(!c('ChatOptions').getSetting('hide_groups')){return c('InitialChatFriendsList').groups||[];}else return [];};f.exports=k;},null);
__d('LeftNavItemClassicDraggableContainer.react',['React','ReactDOM'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'LeftNavItemClassicDraggableContainer',propTypes:{itemID:h.oneOfType([h.string,h.number]).isRequired,section:h.object.isRequired,draggableBound:h.object,ItemDraggableBehavior:h.func},render:function(){return (c('React').createElement('div',{'data-itemid':this.props.itemID},this.props.children));},componentDidMount:function(){var j=this.props,k=j.section,l=j.itemID,m=j.draggableBound,n=j.ItemDraggableBehavior;if(n&&!this.draggable)this.draggable=new n(c('ReactDOM').findDOMNode(this),k,l,m);},componentWillUnmount:function(){this.draggable.destroy();this.draggable=null;}});f.exports=i;},null);
__d('LeftNavItem.react',['cx','fbt','Arbiter','BootloadedComponent.react','DOMContainer.react','Image.react','LeftNavItemClassicDraggableContainer.react','Link.react','JSResource','React','UnicodeBidi','XUISpinner.react','ifRequired'],function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').createElement('span',{className:"_upa"}),m=c('React').createElement(c('XUISpinner.react'),{className:'uiSideNavSpinner'});j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(o){k.constructor.call(this,o);var p=c('ifRequired')('EXHPLeftNavController',function(q){return q.consumeDidHaveClick(o.model.id);});this.state=babelHelpers['extends']({},this.$LeftNavItem1(o),{hasUsedPopoverMenu:p,showPopoverOnMount:p});}n.prototype.componentWillReceiveProps=function(o){var p=this.$LeftNavItem1(o);if(o.inEditMode)p.showPopoverOnMount=false;this.setState(p);};n.prototype.$LeftNavItem1=function(o){var p=o.model,q=o.section.props.id,r=p.count>0,s=q==='pinnedNav'&&p.sortable&&!p.suggestedInFav,t=q==='bookmarksSeeAllEntSection',u=p.keys.some(function(x){return x===o.selectedKey;}),v=p.keys.some(function(x){return x===o.loadingKey;}),w=s&&o.inEditMode;return {hasCount:r,hasSortableItems:s,inSeeAllSection:t,isSelected:u,isLoading:v,isSorting:w};};n.prototype.render=function(){var o=this.props.model,p=this.state;return (c('React').createElement('li',{className:"clearfix"+(' '+"sideNavItem")+(' '+"stat_elem")+(p.isSelected?' '+"selectedItem":'')+(p.isLoading?' '+"_5afd":''),'data-sortable':p.isSorting?o.sortable:null,id:'navItem_'+o.id},this.$LeftNavItem2(this.$LeftNavItem3())));};n.prototype.$LeftNavItem3=function(){var o=this.props.model,p=this.props.section,q=this.state,r=c('UnicodeBidi').isDirectionRTL(o.name)?'rtl':'ltr',s=c('React').createElement('a',{key:'link','data-testid':'left_nav_item_'+o.link.title,className:"_5afe"+(q.hasSortableItems?' '+"sortableItem":''),'data-gt':o.datagt,title:o.link.title,rel:o.link.rel,href:o.link.href,target:o.link.target,ajaxify:o.link.ajaxify,draggable:'false',onClick:function(){return this.$LeftNavItem4(o);}.bind(this)},this.$LeftNavItem5(o),this.$LeftNavItem6(o.image),c('React').createElement('div',{dir:r,className:(!this.props.suggestedIcon?"linkWrap":'')+(q.hasCount?' '+"hasCount":'')+(!q.hasCount?' '+"noCount":'')},c('React').createElement('span',{className:this.props.suggestedIcon?"suggestedWrap":''},o.name),this.props.suggestedIcon,q.inSeeAllSection?this.$LeftNavItem7(o.count):null));return [o.auxcontent?c('React').createElement(c('DOMContainer.react'),{key:'auxpopover'},o.auxcontent):null,this.$LeftNavItem8(o,p,this.props.loadDragDropModules,this.state.hasUsedPopoverMenu),s];};n.prototype.$LeftNavItem8=function(o,p,q,r){if(!o.editmenu)return null;var s=function(){this.setState({hasUsedPopoverMenu:true,showPopoverOnMount:true});q&&q();}.bind(this),t=i._("Edit {Link name} link",[i.param('Link name',o.name)]),u=c('React').createElement(c('Link.react'),{href:'#',title:t,'aria-label':t,onClick:r?null:s,className:"_1wc5"+(' '+"_26tg")+(!o.isProfile?' '+"_1iiv":'')+(o.isProfile?' '+"_1iiw":'')+(' '+"accessible_elem")});if(r)u=c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:u,bootloadLoader:c('JSResource')('BookmarkPopoverMenu.react').__setRef('LeftNavItem.react'),module:'BookmarkPopoverMenu.react',navSection:p,model:o,showOnMount:this.state.showPopoverOnMount},u);var v=this.state.inSeeAllSection?'bookmark_edit_button_see_all':'bookmark_edit_button';return (c('React').createElement('div',{className:'buttonWrap','data-testid':v,key:'popover'},c('React').createElement('div',{className:'uiSideNavEditButton'},u)));};n.prototype.$LeftNavItem6=function(o){return (c('React').createElement('span',{className:'imgWrap','data-testid':'bookmark_icon_'+(this.state.inSeeAllSection?'see_all':'left_nav')},c('React').createElement(c('Image.react'),{src:o,height:'16',width:'16',draggable:'false',alt:''})));};n.prototype.$LeftNavItem7=function(o){if(!this.state.hasCount)return null;return (c('React').createElement('span',{className:"countValue"+(' '+"_5aff")},o<=20?o:'20+'));};n.prototype.$LeftNavItem5=function(o){var p=this.state;if(p.inSeeAllSection)return null;var q=p.hasCount&&!p.isSorting;if(p.isLoading||q||p.isSorting)return (c('React').createElement('div',{className:'rfloat'},p.isLoading?m:null,q?this.$LeftNavItem7(o.count):null,p.isSorting?l:null));return null;};n.prototype.$LeftNavItem2=function(o){if(!this.state.isSorting)return o;return (c('React').createElement(c('LeftNavItemClassicDraggableContainer.react'),{itemID:this.props.model.id,section:this.props.section,draggableBound:this.props.draggableBound,ItemDraggableBehavior:this.props.ItemDraggableBehavior},o));};n.prototype.$LeftNavItem4=function(o){c('Arbiter').inform('LeftNavController/setItemCount',{item:o,count:0});if(o&&o.type==='type_explore_feed')c('Arbiter').inform('LeftNavController/topicFeedClick',o.id);};f.exports=n;},null);
__d('LeftNavItemPlaceholder.react',['cx','React'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').createClass({displayName:'LeftNavItemPlaceholder',render:function(){return (c('React').createElement('li',{className:'sideNavItem stat_elem'},c('React').createElement('a',{className:"_5afe clearfix sortableItem"})));}});f.exports=i;},null);
__d('LeftNavSection.react',['cx','ix','fbt','Arbiter','Bootloader','Image.react','InlineBlock.react','LeftNavItem.react','LeftNavItemPlaceholder.react','LeftRight.react','Link.react','React','ReactDOM','Tooltip.react'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k='more',l=c('React').createClass({displayName:'LeftNavSection',getInitialState:function(){return {inEditMode:false,draggableBound:null,placeholderIdx:-1,isCollapsed:true};},render:function(){var m=this,n=this.props,o=n.ItemDraggableBehavior,p=n.loadingKey,q=n.loadDragDropModules,r=n.model,s=n.selectedKey,t=r.items,u=this.state,v=u.inEditMode,w=u.draggableBound;if(t.length===0)return null;var x=t.map(function(ca){ca.datagt=this._getDataGT('item',this.props,ca.datagt);return (c('React').createElement(c('LeftNavItem.react'),{key:ca.id,model:ca,section:m,selectedKey:s,loadingKey:p,inEditMode:v,draggableBound:w,loadDragDropModules:q,ItemDraggableBehavior:o,suggestedIcon:ca.suggestedInFav?this._getSuggestedIconWithTooltip():null}));},this);if(this.state.placeholderIdx>=0)x.splice(this.state.placeholderIdx,0,c('React').createElement(c('LeftNavItemPlaceholder.react'),{key:'itemplaceholder',ref:'placeholder'}));var y="_bui"+(this._isPinnedSection()?' '+"droppableNav":'')+(!this._isPinnedSection()?' '+"nonDroppableNav":'')+(!v?' '+"_3-96":''),z=this._isPinnedSection()?c('React').createElement('div',{className:"_3hge _3hgf"},c('React').createElement(c('Link.react'),{className:'navEditDone',ref:'Donelink',onClick:function(){c('Bootloader').loadModules(["LeftNavDragController"],function(){c('Arbiter').inform('LeftNavDragController/toggleEditMode',{section:m});},'LeftNavSection.react');}},j._("Done"))):null,aa=this._getDataGT(k,this.props),ba=r.welcomebox?r.welcomebox:'left_nav_section_'+(r.title||'FAVORITES');return (c('React').createElement('div',{id:this.props.id,className:"homeSideNav",'data-ft':r.dataft,'data-testid':ba,ref:'sectionBody'},this._renderHeader(aa),c('React').createElement('ul',{className:y,'data-ft':r.dataft},x),z));},componentDidUpdate:function(m,n){if(this.state.inEditMode)c('ReactDOM').findDOMNode(this.refs.Donelink).focus();},_renderHeader:function(m){var n=this.props.model,o=void 0;if(n.title){var p=n.seeallhref?c('React').createElement(c('Link.react'),{href:n.seeallhref,'data-gt':m},c('React').createElement(c('LeftRight.react'),null,c('React').createElement('span',{className:'sectionDragHandle'},n.title),n.remainingcount?c('React').createElement(c('InlineBlock.react'),{className:"_3-91"},c('React').createElement('div',{'data-testid':"left_nav_section_MORE",className:"_1cwg _5ol3"},n.seealltext)):null)):c('React').createElement('span',{className:'sectionDragHandle'},n.title);o=c('React').createElement('h4',{className:'navHeader'},p);}else o=null;return o;},_isPinnedSection:function(){return this.props.id==='pinnedNav';},_isSuggestedSection:function(){return this.props.id==='suggestedNav';},_getSuggestedIcon:function(){return c('React').createElement(c('Image.react'),{alt:'suggested',className:"_hx7",src:i('/images/icons/friendlists/bolt.png')});},_getSuggestedIconWithTooltip:function(){var m=j._("Suggested based on your history");return c('React').createElement(c('Tooltip.react'),{tooltip:m},this._getSuggestedIcon());},_getDataGT:function(m,n,o){var p=n.id,q=n.model,r=n.total;o=o?JSON.parse(o):{};if(p!=='bookmarksSeeAllEntSection'){o.masher=m.toString();o.total=r.toString();}if(m===k){o.nav_section=q.id;o.nav_items_count=q.items?q.items.length:0;o.remaining_count=q.remainingcount;}o=JSON.stringify(o);return o;}});f.exports=l;},null);
__d('LeftNavSectionPlaceholder.react',['cx','React'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').createClass({displayName:'LeftNavSectionPlaceholder',render:function(){var j={height:this.props.height+'px',width:this.props.width+'px'};return (c('React').createElement('div',{className:'homeSideNav',style:j},c('React').createElement('ul',{className:"_bui"})));}});f.exports=i;},null);
__d('LeftNavContainer.react',['invariant','fbt','Arbiter','AsyncRequest','Bootloader','BootloadedComponent.react','JSResource','LeftNavSection.react','LeftNavSectionPlaceholder.react','React','ReactLayeredComponentMixin','XFeedNUXSaveSeenStateController','emptyFunction'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();function j(l){l.setState({loadDragDropModules:c('emptyFunction')});c('Bootloader').loadModules(["LeftNavDragController","LeftNavItemDraggableBehavior"],function(m,n){m.subscribe();l.setState({DragController:m,ItemDraggableBehavior:n});},'LeftNavContainer.react');}var k=c('React').createClass({displayName:'LeftNavContainer',mixins:[c('ReactLayeredComponentMixin')],getInitialState:function(){return {placeholderIdx:-1,placeholderWidth:0,placeholderHeight:0,loadDragDropModules:function(){return j(this);}.bind(this),DragController:null,ItemDraggableBehavior:null,topicFeedsNuxShown:false};},componentDidMount:function(){var l=this.state.DragController;if(l)l.subscribe();if(this.props.config.ShowTopicFeedNux)this.setState({topicFeedsNuxShown:true},function(){c('Arbiter').subscribe('LeftNavController/topicFeedClick',function(){return this.setState({topicFeedsNuxShown:false});}.bind(this));var m=c('XFeedNUXSaveSeenStateController').getURIBuilder().setString('key','topic_feed_bookmarks').setBool('seen',true).getURI();new (c('AsyncRequest'))(m).setMethod('POST').send();setTimeout(function(){return this.setState({topicFeedsNuxShown:false});}.bind(this),10000);}.bind(this));},componentWillUnmount:function(){var l=this.state.DragController;if(l)l.unsubscribe();},renderLayers:function(){if(!this.props.config.ShowTopicFeedNux||!this.refs)return null;return (c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('span',null),bootloadLoader:c('JSResource')('XUIAmbientNUX.react').__setRef('LeftNavContainer.react'),contextRef:function(){return this.refs.topicFeedsNav;}.bind(this),customwidth:270,hasActionableContext:true,onCloseButtonClick:function(){return this.setState({topicFeedsNuxShown:false});}.bind(this),position:'below',shown:this.state.topicFeedsNuxShown,width:'custom'},i._("See posts from friends and Pages around the topics that interest you.")));},render:function(){var l=this.props.model,m=c('React').createElement(c('LeftNavSection.react'),{selectedKey:l.selectedKey,loadingKey:l.loadingKey,model:l.userSection,key:'userNav',id:'userNav',ref:'userNav',total:l.total}),n=c('React').createElement(c('LeftNavSection.react'),{selectedKey:l.selectedKey,loadingKey:l.loadingKey,model:l.pinnedSection,key:'pinnedNav',id:'pinnedNav',ref:'pinnedNav',loadDragDropModules:this.state.loadDragDropModules,ItemDraggableBehavior:this.state.ItemDraggableBehavior,total:l.total}),o=[],p=[],q=void 0;l.sections.forEach(function(t){if(this.props.config.Hide&&this.props.config.Hide[t.id]){p.push(t);}else o.push(t);}.bind(this));if(p.length>0)q=c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('span',null),bootloadLoader:c('JSResource')('LeftNavSeeMoreContainer.react').__setRef('LeftNavContainer.react'),model:l,config:this.props.config,sections:p});var r=o.map(function(t){return (c('React').createElement(c('LeftNavSection.react'),{selectedKey:l.selectedKey,loadingKey:l.loadingKey,model:t,key:t.id,id:t.id,loadDragDropModules:this.state.loadDragDropModules,ItemDraggableBehavior:this.state.ItemDraggableBehavior,ref:t.id==='topicFeedsNav'?'topicFeedsNav':null,total:l.total}));}.bind(this)),s=void 0;if(l.suggestedSection)s=c('React').createElement(c('LeftNavSection.react'),{selectedKey:l.selectedKey,loadingKey:l.loadingKey,model:l.suggestedSection,key:'suggestedNav',id:'suggestedNav',ref:'suggestedNav',loadDragDropModules:this.state.loadDragDropModules,ItemDraggableBehavior:this.state.ItemDraggableBehavior,total:l.total});if(this.state.placeholderIdx>-1)r.splice(this.state.placeholderIdx,0,c('React').createElement(c('LeftNavSectionPlaceholder.react'),{key:'placeholder',width:this.state.placeholderWidth,height:this.state.placeholderHeight}));return (c('React').createElement('div',null,m,n,s,r,q));},getPinnedSection:function(){var l=this.refs.pinnedNav;!l?h(0):void 0;return l;}});f.exports=k;},null);
__d('LeftNavModel',['URI'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=void 0,i=null,j={init:function(k){h=k;},initAdditionalItems:function(k){i=k.items;},setSelectedKey:function(k){h.loadingKey=null;h.selectedKey=k||h.defaultKey;},setLoadingKey:function(k){h.loadingKey=k;},setItemCount:function(k,l){k.count=l||0;},updateItemCounts:function(k,l){var m=false;l.forEach(function(n){var o=void 0,p=j.findItemByKey(n.key);if(p){o=p.count;if(n.count!==undefined){p.count=n.count;}else if(n.increment!==undefined)p.count+=n.increment;m=m||o!=n.count;}});return m;},findItemByKey:function(k){return j.findItem(function(l){return l.keys.some(function(m){return m===k;});});},findItem:function(k){var l=void 0;if(h.pinnedSection){l=h.pinnedSection.items.find(k);if(l)return l;}if(h.suggestedSection){l=h.suggestedSection.items.find(k);if(l)return l;}if(h.pinnedSection.default_count>0){l=j._findItemInFlyout(k);if(l)return l;}for(var m=0;m<h.sections.length;m++){l=h.sections[m].items.find(k);if(l)return l;}if(i){l=i.find(k);if(l)return l;}return null;},findItemByURI:function(k){var l=k.getQueryData().sk;if(l){return j.findItemByKey(l);}else if(j._isHomePath(k)){return j.findItemByKey(h.defaultKey);}else return j.findItem(function(m){if(m.link&&new (c('URI'))(m.link.href).qualify().getSubdomain()!==k.getSubdomain())return false;return m.path&&m.path.some(function(n){if(typeof n==='object'&&n.regex)return k.getPath().match(n.regex);return n===k.getPath();});});},_isHomePath:function(k){var l=c('URI').getRequestURI();return (k.getDomain()===l.getDomain()&&(k.getPath()==='/'||k.getPath()==='/home.php'));},_findItemInFlyout:function(k){var l=void 0;h.pinnedSection.items.some(function(m){if(m&&m.flyout_items){l=m.flyout_items.find(k);if(l)return true;}return false;});return l;}};f.exports=j;},null);
__d("XFeedTopicRefreshLoadTimeController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/feed\/topic\/refresh\/loadtime\/",{});},null);
__d('LeftNavController',['cx','Arbiter','AsyncRequest','Bootloader','ChannelConstants','LeftNavConfig','LeftNavContainer.react','LeftNavModel','NavigationMessage','React','ReactDOM','Run','SubscriptionsHandler','XFeedTopicRefreshLoadTimeController','CSS'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=[],j=void 0,k=void 0,l=void 0,m=void 0,n={init:function(u,v){k=u;c('LeftNavModel').init(v);var w=function(y){c('Bootloader').loadModules(["LeftNavActions"],function(z){z.initModel(v);y(z);o();},'LeftNavController');};l=new (c('SubscriptionsHandler'))();l.addSubscriptions(c('Arbiter').subscribe('LeftNavController/toggleFavorite',function(y,z){return w(function(aa){return (aa.toggleFavorite(y,z,i));});}),c('Arbiter').subscribe('LeftNavController/keepInFavorite',function(y,z){return w(function(aa){return (aa.keepInFavorite(y,z));});}),c('Arbiter').subscribe('LeftNavController/updatePinnedSection',function(y,z){var aa=z.idOrder;return w(function(ba){return (ba.updatePinnedSection(y,aa));});}),c('Arbiter').subscribe('LeftNavController/setItemCount',function(y,z){var aa=z.item,ba=z.count;c('LeftNavModel').setItemCount(aa,ba);o();}),c('Arbiter').subscribe('LeftNavController/topicFeedClick',function(y,z){new (c('AsyncRequest'))(c('XFeedTopicRefreshLoadTimeController').getURIBuilder().getURI()).setData({topic_id:z}).setMethod('POST').send();}),c('Arbiter').subscribe(c('ChannelConstants').getArbiterType('nav_update_counts'),function(y,z){var aa=z.obj.items,ba=c('LeftNavModel').updateItemCounts(y,aa);if(ba)o();}),c('Arbiter').subscribeOnce('AsyncLayout/initialized',function(){return m=true;}),c('Arbiter').subscribe(c('NavigationMessage').NAVIGATION_ITEM_REMOVED,function(y,z){return w(function(aa){return (aa.removeItemByKey(y,z));});}),c('Arbiter').subscribe(c('NavigationMessage').NAVIGATION_COMPLETED,function(){c('LeftNavModel').setSelectedKey(v.loadingKey);o();}),c('Arbiter').subscribe(c('NavigationMessage').NAVIGATION_FAILED,function(){c('LeftNavModel').setLoadingKey(null);o();}),c('Arbiter').subscribe(c('NavigationMessage').NAVIGATION_COUNT_UPDATE,function(y,z){var aa=c('LeftNavModel').findItemByKey(z&&z.key);if(aa){var ba=aa.count,ca=z.count||0;c('LeftNavModel').setItemCount(aa,z.hide?0:ca);if(ca!==ba||z.hide&&ba>0)o();}}),c('Arbiter').subscribe(c('NavigationMessage').NAVIGATION_SELECT,function(y,z){var aa=z.sk;if(z.asLoading){c('LeftNavModel').setLoadingKey(aa);}else c('LeftNavModel').setSelectedKey(aa);}),c('Arbiter').subscribe('LeftNavDragController/toggleEditMode',function(){return c('CSS').toggleClass(k,"_2ryg");}),c('Arbiter').subscribe('LeftNavController/updateFoldPinnedSection',function(y,z){var aa=z.idOrder;return w(function(ba){return (ba.updateFoldPinnedSection(y,aa));});}));var x=c('LeftNavModel').findItemByKey(v.selectedKey);if(x)x.count=0;j=c('ReactDOM').render(c('React').createElement(c('LeftNavContainer.react'),{model:v,config:c('LeftNavConfig')}),k);c('Run').onLeave(this.uninstall.bind(this));},uninstall:function(){m=false;l.release();if(j.componentWillUnmount)j.componentWillUnmount();},initAdditionalItems:function(u){c('LeftNavModel').initAdditionalItems(u);},initPageTransitions:function(u){u.registerHandler(function(v){return m&&p(v);},6);},mountSeeAllPayload:function(u){i.push(u);}};function o(){j.forceUpdate();}function p(u){var v=c('LeftNavModel').findItemByURI(u);return v&&v.endpoint&&q(v,u);}function q(u,v){c('LeftNavModel').setLoadingKey(u.keys[0]);c('LeftNavModel').setItemCount(u,0);o();s(u.endpoint,babelHelpers['extends']({},r(u,v),v.getQueryData()));return true;}function r(u,v){var w={};w.sidecol=true;w.path=v.getPath();var x=t(u.keys);x=x.text?x.text:x.numeric;w.sk=x;w.key=x;return w;}function s(u,v){v.endpoint=u;c('Arbiter').inform(c('NavigationMessage').NAVIGATION_BEGIN,{useAjaxPipe:true,params:v});}function t(u){var v=/^(app|group|fl)_/,w={};for(var x=0;x<u.length;x++){var y=v.test(u[x]);if(y&&!w.numeric){w.numeric=u[x];}else if(!y&&!w.text)w.text=u[x];if(w.numeric&&w.text)break;}return w;}f.exports=n;},null);
__d('ChatPerfTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:ChatPerfLoggerConfig',this.$ChatPerfTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:ChatPerfLoggerConfig',this.$ChatPerfTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$ChatPerfTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$ChatPerfTypedLogger1=babelHelpers['extends']({},this.$ChatPerfTypedLogger1,j);return this;};h.prototype.setDuration=function(j){this.$ChatPerfTypedLogger1.duration=j;return this;};h.prototype.setEndpoint=function(j){this.$ChatPerfTypedLogger1.endpoint=j;return this;};h.prototype.setEvent=function(j){this.$ChatPerfTypedLogger1.event=j;return this;};h.prototype.setTabsOpen=function(j){this.$ChatPerfTypedLogger1.tabs_open=j;return this;};var i={duration:true,endpoint:true,event:true,tabs_open:true};f.exports=h;},null);
__d('ChatPerfInstrumentation',['Promise','BaseEventEmitter','ChatPerfEvent','ChatPerfTypedLogger','PresenceState','emptyFunction','performanceAbsoluteNow'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=void 0,i=c('PresenceState').getInitial()&&c('PresenceState').getInitial().t2?c('PresenceState').getInitial().t2.length:null,j={_startTime:(Number),_sidebarStartTime:(Number),init:function(){this._startTime=c('performanceAbsoluteNow')();return new (c('Promise'))(function(k){return k();});},initDivebar:function(){this._sidebarStartTime=c('performanceAbsoluteNow')();},_log:function(event,k){var l=c('performanceAbsoluteNow')()-(k||this._startTime);if(h)h.emit(event,l);var m=new (c('ChatPerfTypedLogger'))();m.setEvent(event).setDuration(l);if(i!==null)m.setTabsOpen(i);m.log();},addPerfTimingsListener:function(event,k){if(!h)h=new (c('BaseEventEmitter'))();return h.once(event,k);},logInitStores:function(){this.logInitStores=c('emptyFunction');this._log(c('ChatPerfEvent').CHAT_INIT_STORES);},logInitData:function(){this.logInitData=c('emptyFunction');this._log(c('ChatPerfEvent').CHAT_INIT_DATA);},logInitUI:function(){this.logInitUI=c('emptyFunction');this._log(c('ChatPerfEvent').CHAT_INIT_UI);},logInitSound:function(){this.logInitSound=c('emptyFunction');this._log(c('ChatPerfEvent').CHAT_INIT_SOUND);},logDisplayDone:function(){this.logDisplayDone=c('emptyFunction');this._log(c('ChatPerfEvent').CHAT_DISPLAY_DONE);},logTTI:function(){this.logTTI=c('emptyFunction');this._log(c('ChatPerfEvent').TTI);},logCHAT_CONVERSATION_TTI:function(){this.logCHAT_CONVERSATION_TTI=c('emptyFunction');this._log(c('ChatPerfEvent').CHAT_CONVERSATION_TTI);},logSIDEBAR_FROM_CLIENT_TTI:function(){this.logSIDEBAR_FROM_CLIENT_TTI=c('emptyFunction');this._log(c('ChatPerfEvent').SIDEBAR_FROM_CLIENT_TTI,this._sidebarStartTime);},logSIDEBAR_DISPLAY_DONE:function(){this.logSIDEBAR_DISPLAY_DONE=c('emptyFunction');this._log(c('ChatPerfEvent').SIDEBAR_DISPLAY_DONE,this._sidebarStartTime);}};f.exports=j;},null);
__d('ChatSidebar',['csx','Arbiter','AsyncRequest','Bootloader','ChatDispatcher','ChatImpressionLogger','ChatPerfInstrumentation','ChatSidebarActions','ChatSidebarStore','ChatSidebarVisibility','CSS','DOM','DOMDimensions','Event','LogHistory','JSLogger','KeyEventController','LitestandClassicPlaceHolders','Parent','PresencePrivacy','PresenceUtil','ScrollableArea','SidebarType','Style','TimeSlice','ViewportBounds','debounce','emptyFunction','ge'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i,j,k,l,m,n,o=false,p,q=true,r=null,s=c('LogHistory').getInstance('chat_sidebar');function t(){return c('ChatSidebarStore').getVisibleType()===c('SidebarType').SIDEBAR;}function u(ea,fa){if(!t())return;if(fa){m.hide();}else{m.show();x();}}function v(){return !t()||!l?0:206;}function w(){c('CSS').removeClass(document.documentElement,'sidebarMode');if(!c('ChatSidebarStore').isInitialized()){c('Arbiter').inform('reflow');c('ViewportBounds').inform('change');return;}m.hide();c('CSS').hide(l);c('CSS').hide(k);c('Arbiter').inform('sidebar/visibility',false,c('Arbiter').BEHAVIOR_STATE);c('Arbiter').inform('reflow');c('ViewportBounds').inform('change');}function x(ea){if(!ea||ea.width!==r.width)c('ChatSidebarActions').show(r);if(!ea||ea.height!==r.height)aa();}function y(ea){var fa=r||c('ChatSidebarVisibility').getViewport(),ga=fa.height;ea.forEach(function(ha){if(ha&&ha!==i&&!c('CSS').hasClass(ha,'hidden_elem'))ga-=c('DOMDimensions').getElementDimensions(ha).height;});if(p)ga-=p.getOffset();if(n)ga-=c('DOMDimensions').getElementDimensions(n).height;return Math.max(0,ga);}function z(){c('CSS').show(k);c('CSS').show(l);c('CSS').addClass(document.documentElement,'sidebarMode');m.show();s.log('sidebar_show','{}');c('Arbiter').inform('sidebar/visibility',true,c('Arbiter').BEHAVIOR_STATE);c('LitestandClassicPlaceHolders').destroy('sidebar');c('ViewportBounds').inform('change');if(!o){aa();o=true;}}function aa(){if(!t())return;var ea=da.getBodyHeight(),fa=m.getItemHeight(),ga=8;c('Style').set(i,'height',ea+'px');var ha=Math.floor((ea-ga)/fa);m.setNumTopFriends(ha,q);q=false;var ia=Math.floor(ea-ga);c('Arbiter').inform('sidebar/resized',ia,c('Arbiter').BEHAVIOR_STATE);c('Arbiter').inform('reflow');}function ba(){new (c('AsyncRequest'))('/ajax/chat/settings.php').setHandler(c('emptyFunction')).setErrorHandler(c('emptyFunction')).setData({sidebar_mode:c('ChatSidebarStore').isEnabled(),window_id:c('PresenceUtil').getSessionID()}).setAllowCrossPageTransition(true).send();}function ca(){var ea=true;if(!c('ChatSidebarStore').isEnabled()){s.log('state_not_enabled','{}');ea=false;}if(c('ChatSidebarVisibility').hasLowFriendCount()){s.log('state_not_shown_num_friends','{}');ea=false;}if(!c('ChatSidebarVisibility').isViewportCapable(r))ea=false;var fa=ea?'state_shown':'state_not_shown';s.log(fa,'{}');c('ChatPerfInstrumentation').logSIDEBAR_FROM_CLIENT_TTI();}var da={init:function(ea,fa){da.init=c('emptyFunction');c('ChatPerfInstrumentation').initDivebar();c('ChatDispatcher').explicitlyRegisterStore(c('ChatSidebarStore'));c('ChatSidebarActions').loaded();l=ea;m=fa;i=c('DOM').find(ea,'div.fbChatSidebarBody');k=c('DOM').find(ea,"._51x_");n=c('DOM').find(ea,"._5qqe");c('Event').listen(window,'resize',function(){var ga=babelHelpers['extends']({},r)||{};this._cacheViewport();x(ga);}.bind(this));c('KeyEventController').registerKey('q',function(event){if(c('ChatSidebarStore').getVisibleType()!==c('SidebarType').SIDEBAR)return;if(!j){var ga=c('DOM').scry(ea,"._3rhb input");if(ga.length>0)j=ga[0];}if(j){j.focus();event.prevent();}});m.setScrollContainer(c('Parent').byClass(m.getRoot(),'uiScrollableAreaWrap'));m.subscribe(['render','show','hide'],c('debounce')(function(ga){var ha=c('ScrollableArea').getInstance(m.getRoot());ha&&ha.adjustGripper();}));c('Arbiter').subscribe('chat/option-changed',function(ga,ha){if(ha.name==='hide_groups')aa();});c('Arbiter').subscribe(['AppsDivebar/show-apps','AppsDivebar/hide-apps','Ticker/resized'],aa);c('Arbiter').subscribe('sidebar/typeahead/active',u);c('PresencePrivacy').subscribe('privacy-user-presence-changed',x);c('ChatSidebarStore').addListener(function(){var ga=c('ChatSidebarStore').getState(),ha=c('ChatSidebarStore').getPrevState();if(ga.visible!==ha.visible)switch(ga.visible){case c('SidebarType').SIDEBAR:z();break;case c('SidebarType').BUDDYLIST:w();break;}if(ga.enabled!==ha.enabled)ba();});this._cacheViewport();x();c('ChatImpressionLogger').init(m);c('ViewportBounds').addPersistentRight(v);c('Arbiter').inform('sidebar/initialized',da,c('Arbiter').BEHAVIOR_STATE);c('ChatSidebarActions').init();ca();c('ChatPerfInstrumentation').logSIDEBAR_DISPLAY_DONE();},ensureLoaded:function(){if(!c('ChatSidebarStore').isEnabled())return;if(c('ChatSidebarStore').isLoaded())return;if(c('ge')('pagelet_sidebar'))return;c('Bootloader').loadModules(["UIPagelet"],function(ea){var fa=c('DOM').create('div',{id:'pagelet_sidebar'});c('DOM').appendContent(document.body,fa);ea.loadFromEndpoint('SidebarPagelet','pagelet_sidebar');},'ChatSidebar');c('ChatSidebarActions').loaded();},hide:function(){if(!c('ChatSidebarStore').isEnabled())return;c('ChatSidebarActions').disable();},unhide:function(){if(c('ChatSidebarStore').isEnabled())return;c('ChatSidebarActions').enable();},_cacheViewport:function(){r=c('ChatSidebarVisibility').getViewport();},getBodyHeight:function(){return y(Array.from(k.childNodes));}};c('Arbiter').subscribe(c('JSLogger').DUMP_EVENT,function(ea,fa){fa.sidebar_visible=t();});da.init=c('TimeSlice').guard(da.init,'ChatSidebar init');f.exports=da;},null);