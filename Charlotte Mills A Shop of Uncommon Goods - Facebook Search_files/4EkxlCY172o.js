if (self.CavalryLogger) { CavalryLogger.start_js(["g12nu"]); }

__d("P2PChannelType",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={CREDIT_CARD_CHANGED:"P2P\/CreditCardChanged",CREDIT_CARD_DELETED:"P2P\/CreditCardDeleted",TRANSFER_STATUS_CHANGED:"P2P\/TransferStatusChanged",PLATFORM_CONTEXT_NEW:"P2P\/PlatformContextNew",PLATFORM_CONTEXT_DISMISSED:"P2P\/PlatformContextDismissed",PLATFORM_CONTEXT_ELIGIBLE_ITEM_UPDATED:"P2P\/PlatformContextEligibleItemUpdated",PAYMENT_REQUEST_STATUS_CHANGED:"P2P\/PaymentRequestStateChanged"};},null);
__d("P2PPaymentMethodCategory",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={CREDIT_CARD:"credit_card",DEBIT_CARD:"debit_card",PREPAID_CARD:"prepaid_card"};},null);
__d('P2PNUXRendererUtils',['CurrentUser','ImmutableObject','MercuryAttachmentType','P2PTransferParam','P2PTransferStatus','StoryAttachmentStyle'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={getTransferFromMessage:function(i){var j=void 0,k=void 0;if(!i||!i.attachments||!i.attachments.length)return null;k=i.attachments[0];if(this.isShareAttachment(k))j=k.share.target;if(j)j=new (c('ImmutableObject'))(j);return j;},isSuccessfulReceivedTransfer:function(i){return (i&&i.receiver&&i.receiver.id===c('CurrentUser').getID()&&(i.status===c('P2PTransferStatus').COMPLETED||i.status===c('P2PTransferStatus').PENDING_RECIPIENT_NUX));},isShareAttachment:function(i){return !!(typeof i!=='string'&&i.attach_type==c('MercuryAttachmentType').SHARE&&i.share&&i.share.style_list&&i.share.style_list.indexOf(c('StoryAttachmentStyle').ORION)>=0);},doesNUXNeedCreditCards:function(i){var j=c('CurrentUser').getID()===i.sender.id;return (!j&&i[c('P2PTransferParam').STATUS]===c('P2PTransferStatus').PENDING_RECIPIENT_NUX);},isRecipientActionableStatus:function(i){var j=i[c('P2PTransferParam').STATUS],k=c('CurrentUser').getID()===i.sender.id;return (!k&&(j===c('P2PTransferStatus').PENDING_RECIPIENT_NUX||j===c('P2PTransferStatus').PENDING_RECIPIENT_VERIFICATION||j===c('P2PTransferStatus').PENDING_PUSH_FAIL));}};f.exports=h;},null);
__d('P2PFriendsListStore',['P2PActionConstants','EventEmitter','P2PAPI','P2PDispatcher'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=[],k='',l=25;h=babelHelpers.inherits(m,c('EventEmitter'));i=h&&h.prototype;function m(){i.constructor.call(this);c('P2PDispatcher').register(this.onEventDispatched.bind(this));}m.prototype.onEventDispatched=function(n){var o=n.data,p=n.type;switch(p){case c('P2PActionConstants').FRIENDS_LIST_UPDATED:this.handleFriendsListUpdated(o);this.emit('change');break;}};m.prototype.handleFriendsListUpdated=function(n){if(!k||k===n.query)j=n.friends;};m.prototype.searchFriends=function(n){k=n;this.fetchFriends(n);};m.prototype.fetchFriends=function(n){c('P2PAPI').getFriendsList(l,n);};m.prototype.getFriends=function(){return j;};f.exports=new m();},null);
__d('P2PFriendPicker.react',['cx','fbt','glyph','debounce','Image.react','Layout.react','MercuryIDs','P2PActions','P2PFriendsListStore','P2PLoadingMask.react','P2PLogger','P2PPaymentLoggerEvent','P2PText.react','React','ScrollableArea.react','XUIButton.react','XUITextInput.react'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=c('Layout.react').FillColumn,l=c('Layout.react').Column,m=c('React').PropTypes,n=c('React').createClass({displayName:'P2PFriendPicker',propTypes:{amount:m.string,buttonLabel:m.node,eventFlow:m.string.isRequired,height:m.number,onFriendSelected:m.func,referrer:m.string,sendMoneyNUXDismissed:m.bool,subTitle:m.node},getDefaultProps:function(){return {amount:'',buttonLabel:i._("Pay Friend"),height:350,title:i._("Select Friend"),subTitle:i._("These are your friends who are able to receive money.")};},getInitialState:function(){return {friends:c('P2PFriendsListStore').getFriends(),showLoader:true};},log:function(o,p){c('P2PLogger').log(o,babelHelpers['extends']({www_event_flow:this.props.eventFlow},p));},loggedSearch:null,friendPickerStoreSub:null,componentDidMount:function(){this.friendPickerStoreSub=c('P2PFriendsListStore').addListener('change',this.updateFriendsList);c('P2PFriendsListStore').searchFriends();this.log(c('P2PPaymentLoggerEvent').UI_ACTN_FRIEND_PICKER_SHOWN);},componentWillUnmount:function(){if(this.friendPickerStoreSub){this.friendPickerStoreSub.remove();this.friendPickerStoreSub=null;}},updateFriendsList:function(){this.setState({friends:c('P2PFriendsListStore').getFriends(),showLoader:false});},onFriendSelect:function(o){this.log(c('P2PPaymentLoggerEvent').UI_ACTN_FRIEND_PICKER_SELECT,{object_id:o.id});c('P2PActions').chatSendViewOpened({amount:this.props.amount,referrer:this.props.referrer,sendMoneyNUXDismissed:this.props.sendMoneyNUXDismissed,threadID:c('MercuryIDs').getThreadIDFromUserID(o.id)});this.props.onFriendSelected&&this.props.onFriendSelected();},getQuery:function(){return (this.refs.input_ref&&this.refs.input_ref.refs.textInput.getValue());},onSearchInputChange:function(){if(!this.loggedSearch){this.log(c('P2PPaymentLoggerEvent').UI_ACTN_FRIEND_PICKER_SEARCH);this.loggedSearch=true;}var o=this.getQuery();if(!o)this.setState({showLoader:true});c('P2PFriendsListStore').searchFriends(o);},renderTagLineRow:function(){if(this.state.showLoader)return null;return (c('React').createElement('li',{className:"_1px5"},c('React').createElement('div',{className:"_1px6"},this.props.subTitle)));},renderfriendRow:function(o){var p=void 0;if(this.props.buttonLabel)p=c('React').createElement(c('XUIButton.react'),{label:this.props.buttonLabel,size:'large'});return (c('React').createElement('li',{className:"_1px7",key:o.id,onClick:this.onFriendSelect.bind(this,o)},c('React').createElement(c('Layout.react'),null,c('React').createElement(k,null,c('React').createElement('div',{className:"_1px8"},c('React').createElement(c('Image.react'),{className:"_1px9",height:50,src:o.image_src,width:50})),c('React').createElement('div',{className:"_1pxa"},c('React').createElement(c('P2PText.react'),{className:"_1pxb",type:'primary'},o.full_name))),c('React').createElement(l,{className:"_1pxc"},p))));},renderFriendList:function(){var o=this.getQuery();if(!this.state.showLoader&&this.state.friends.length===0)if(o&&o.length){return (c('React').createElement('div',{className:"_1pxd"},i._("No results.")));}else return (c('React').createElement('div',{className:"_1pxd"},i._("You do not have any friends who are able to receive money.")));return (c('React').createElement('div',{className:"_1pxe"},c('React').createElement(c('P2PLoadingMask.react'),{visible:this.state.showLoader}),c('React').createElement(c('ScrollableArea.react'),{height:this.props.height},c('React').createElement('ul',null,this.state.friends.map(this.renderfriendRow),this.renderTagLineRow()))));},render:function(){return (c('React').createElement('div',null,c('React').createElement('div',{className:"_1pxf"},c('React').createElement('div',{className:"_1pxg"},c('React').createElement(c('XUITextInput.react'),{className:"_1pxn",height:'tall',onChange:c('debounce')(this.onSearchInputChange,150),placeholder:i._("Search friends"),ref:'input_ref'}),c('React').createElement(c('Image.react'),{className:"_1pxo",src:j('search')}))),this.renderFriendList()));}});f.exports=n;},null);
__d('P2PSendMoneyNUXListItems.react',['fbt','ix','Image.react','P2PListRow.react','P2PText.react','React'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'P2PSendMoneyNUXListItems',propTypes:{offset:j.oneOf(['small','medium'])},getDefaultProps:function(){return {size:'small'};},renderRow:function(l,m){return (c('React').createElement(c('P2PListRow.react'),{offset:this.props.size},c('React').createElement(c('Image.react'),l),c('React').createElement(c('P2PText.react'),{type:'primary'},m)));},render:function(){var l=this.props.size;return (c('React').createElement('div',null,this.renderRow(l==='small'?{height:18,src:i('/images/p2p/nux/nux_checkmark_small.png'),width:18}:{height:36,src:i('/images/p2p/nux/nux_checkmark_medium.png'),width:36},h._("It's FREE to send and receive money.")),this.renderRow(l==='small'?{height:27,src:i('/images/p2p/nux/nux_lock_small.png'),width:18}:{height:54,src:i('/images/p2p/nux/nux_lock_medium.png'),width:36},h._("Industry-leading security \u2014 password protection, anti-fraud team and more.")),this.renderRow(l==='small'?{height:13,src:i('/images/p2p/nux/nux_debitcard_small.png'),width:18}:{height:26,src:i('/images/p2p/nux/nux_debitcard_medium.png'),width:36},h._("Send money from your debit card to theirs."))));}});f.exports=k;},null);
__d('P2PSendMoneyNUXTitleText.react',['fbt','React'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();function i(){return (c('React').createElement('div',null,h._("Send Money to Anyone")));}f.exports=i;},null);
__d('P2PSendMoneyNUXDialog.react',['cx','CurrentEnvironment','P2PDialog.react','P2PDialogBody.react','P2PDialogFooter.react','P2PDialogTitle.react','P2PEncryptedText.react','P2PLogger','P2PNUXNextButton.react','P2PPaymentLoggerEvent','P2PSendMoneyNUXListItems.react','P2PSendMoneyNUXTitleText.react','React'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'P2PSendMoneyNUXDialog',propTypes:{eventFlow:i.string,onToggle:i.func.isRequired,onNextClick:i.func.isRequired,width:i.number},getDefaultProps:function(){return {width:c('CurrentEnvironment').messengerdotcom?400:350};},componentDidMount:function(){this._log(c('P2PPaymentLoggerEvent').UI_ACTN_SEND_MONEY_NUX_SHOWN);},render:function(){return (c('React').createElement(c('P2PDialog.react'),{onToggle:this.props.onToggle,width:this.props.width},c('React').createElement(c('P2PDialogTitle.react'),null,c('React').createElement(c('P2PSendMoneyNUXTitleText.react'),null)),c('React').createElement(c('P2PDialogBody.react'),{className:"_1ou5"},c('React').createElement(c('P2PSendMoneyNUXListItems.react'),{size:'large'})),c('React').createElement(c('P2PDialogFooter.react'),{leftContent:c('React').createElement('div',{className:"_1ou6"},c('React').createElement(c('P2PEncryptedText.react'),null))},c('React').createElement(c('P2PNUXNextButton.react'),{onNextClick:this._handleNextClick}))));},_handleNextClick:function(){this._log(c('P2PPaymentLoggerEvent').UI_ACTN_SEND_MONEY_NUX_NEXT_CLICK);this.props.onNextClick();},_log:function(k,l){c('P2PLogger').log(k,babelHelpers['extends']({www_event_flow:this.props.eventFlow},this.props.loggingData,l));}});f.exports=j;},null);
__d('P2PCreditCard',['fbt','ix','CreditCardFormParam','CreditCardTypeEnum','PaymentMethodUtils','P2PPaymentMethodCategory'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j={visa:{image:i('/images/payments/icons/visa.png'),imageLarge:i('/images/payments/icons/visa-lg.png'),name:'Visa'},mc:{image:i('/images/payments/icons/mc.png'),imageLarge:i('/images/payments/icons/mc-lg.png'),name:'MasterCard'},disc:{image:i('/images/payments/icons/disc.png'),imageLarge:i('/images/payments/icons/disc-lg.png'),name:'Discover'},jcb:{image:i('/images/payments/icons/jcb.png'),imageLarge:i('/images/payments/icons/jcb-lg.png'),name:'JCB'},amex:{image:i('/images/payments/icons/amex.png'),imageLarge:i('/images/payments/icons/amex-lg.png'),name:'American Express'},unknown:{image:i('/images/brands/credit_card/credit_32.png'),imageLarge:i('/images/brands/credit_card/credit_32.png'),name:h._("Unknown Card Type")}};function k(l){this.setCredentialId(l[c('CreditCardFormParam').CREDENTIAL_ID]);this.setCardType(l[c('CreditCardFormParam').CARD_TYPE]);this.setCreditCardNumber(l[c('CreditCardFormParam').CARD_NUMBER]);this.setSelected(l.selected);this.setZipCode(l[c('CreditCardFormParam').ZIP]);this.setCSC(l[c('CreditCardFormParam').CSC]);this.setExp(l[c('CreditCardFormParam').CARD_EXPIRATION]);this.setIsPreset(l.isPreset);this.setIsVerified(l.isVerified);this.setIsMobileVerified(l.isMobileVerified);this.setIsPersonalTransferEligible(l.isPersonalTransferEligible);this.setCategory(l.category);}k.prototype.getCreditCardNumber=function(){return this[c('CreditCardFormParam').CARD_NUMBER];};k.prototype.setCreditCardNumber=function(l){l=l.replace(/ /g,'');this.setCardProviderProps(this[c('CreditCardFormParam').CARD_TYPE],l);l=l.substr(l.length-4);this[c('CreditCardFormParam').CARD_NUMBER]=l;};k.prototype.setCardProviderProps=function(l,m){var n=this.$P2PCreditCard1(l,m);if(j[n]){this.setImage(j[n].image);this.setImageLarge(j[n].imageLarge);this.setName(j[n].name);}};k.prototype.getExp=function(){return this[c('CreditCardFormParam').CARD_EXPIRATION];};k.prototype.getExpFormatted=function(){var l=this[c('CreditCardFormParam').CARD_EXPIRATION];return l?l[c('CreditCardFormParam').MONTH]+'/'+l[c('CreditCardFormParam').YEAR]:'';};k.prototype.getExpFormattedShort=function(){var l=this[c('CreditCardFormParam').CARD_EXPIRATION],m='';if(l&&l[c('CreditCardFormParam').MONTH]&&l[c('CreditCardFormParam').YEAR]){m=l[c('CreditCardFormParam').MONTH]+'/';if(l[c('CreditCardFormParam').YEAR].length===4){m+=l[c('CreditCardFormParam').YEAR].substr(2);}else m+=l[c('CreditCardFormParam').YEAR];}return m;};k.prototype.setExp=function(l){if(!l)return;var m=void 0,n=void 0,o={};o[c('CreditCardFormParam').MONTH]=l[c('CreditCardFormParam').MONTH];o[c('CreditCardFormParam').YEAR]=l[c('CreditCardFormParam').YEAR];if(o[c('CreditCardFormParam').MONTH]&&o[c('CreditCardFormParam').MONTH].length===1)o[c('CreditCardFormParam').MONTH]='0'+o[c('CreditCardFormParam').MONTH];if(o[c('CreditCardFormParam').YEAR]&&o[c('CreditCardFormParam').YEAR].length===2){m=new Date().getFullYear()+'';n=m.substr(0,2);o[c('CreditCardFormParam').YEAR]=n+o[c('CreditCardFormParam').YEAR];}this[c('CreditCardFormParam').CARD_EXPIRATION]=o;};k.prototype.getCSC=function(){return this[c('CreditCardFormParam').CSC];};k.prototype.setCSC=function(l){this[c('CreditCardFormParam').CSC]=l;};k.prototype.getZipCode=function(){return this[c('CreditCardFormParam').ZIP];};k.prototype.setZipCode=function(l){this[c('CreditCardFormParam').ZIP]=l;};k.prototype.getSelected=function(){return this.$P2PCreditCard2;};k.prototype.setSelected=function(l){this.$P2PCreditCard2=l;};k.prototype.getCardType=function(){return this[c('CreditCardFormParam').CARD_TYPE];};k.prototype.setCardType=function(l){this[c('CreditCardFormParam').CARD_TYPE]=l;this.setCardProviderProps(l,this[c('CreditCardFormParam').CARD_NUMBER]);};k.prototype.getCredentialId=function(){return this[c('CreditCardFormParam').CREDENTIAL_ID];};k.prototype.setCredentialId=function(l){this[c('CreditCardFormParam').CREDENTIAL_ID]=l;};k.prototype.$P2PCreditCard1=function(l,m){var n='default',o=void 0,p=void 0;if(l){o=Object.keys(c('CreditCardTypeEnum')).filter(function(q){return c('CreditCardTypeEnum')[q]===l;})[0];n=this.$P2PCreditCard3(o);}else if(m){p=c('PaymentMethodUtils').getCardType(m);if(p)n=p.name;}return n;};k.prototype.getImage=function(){return this.$P2PCreditCard4||j.unknown.image;};k.prototype.setImage=function(l){this.$P2PCreditCard4=l;};k.prototype.getImageLarge=function(){return this.$P2PCreditCard5||j.unknown.imageLarge;};k.prototype.setImageLarge=function(l){this.$P2PCreditCard5=l;};k.prototype.getName=function(){return this.$P2PCreditCard6||j.unknown.name;};k.prototype.setName=function(l){this.$P2PCreditCard6=l;};k.prototype.getIsPreset=function(){return this.$P2PCreditCard7;};k.prototype.setIsPreset=function(l){this.$P2PCreditCard7=l||false;};k.prototype.$P2PCreditCard3=function(l){switch(l){case 'VISA':l='visa';break;case 'AMERICANEXPRESS':l='amex';break;case 'MASTERCARD':l='mc';break;case 'DISCOVER':l='disc';break;case 'JCB':l='jcb';break;default:l='unknown';break;}return l;};k.prototype.getCreditCardNumberFormatted=function(){return '*'+this[c('CreditCardFormParam').CARD_NUMBER];};k.prototype.getDetailsFormatted=function(){return (this.getName()+' '+this.getCreditCardNumberFormatted());};k.prototype.getCreditCardNumberMask=function(){return '**** **** **** '+this[c('CreditCardFormParam').CARD_NUMBER];};k.prototype.getMaxCSCLength=function(){var l=this.$P2PCreditCard1(this[c('CreditCardFormParam').CARD_TYPE],this[c('CreditCardFormParam').CARD_NUMBER]);return l==='amex'?4:3;};k.prototype.getIsVerified=function(){return this.$P2PCreditCard8||false;};k.prototype.setIsVerified=function(l){this.$P2PCreditCard8=l;};k.prototype.getIsMobileVerified=function(){return this.$P2PCreditCard9||false;};k.prototype.setIsMobileVerified=function(l){this.$P2PCreditCard9=l;};k.prototype.getIsPersonalTransferEligible=function(){return !!this.$P2PCreditCard10;};k.prototype.setIsPersonalTransferEligible=function(l){this.$P2PCreditCard10=l;};k.prototype.getCategory=function(){return this.$P2PCreditCard11;};k.prototype.setCategory=function(l){this.$P2PCreditCard11=l;};k.prototype.getCategoryName=function(){switch(this.$P2PCreditCard11){case c('P2PPaymentMethodCategory').DEBIT_CARD:return h._("Debit");case c('P2PPaymentMethodCategory').CREDIT_CARD:return h._("Credit");case c('P2PPaymentMethodCategory').PREPAID_CARD:return h._("Prepaid");default:return null;}};k.prototype.isExpired=function(){var l=this.getExp();if(!l)return false;var m=l.month,n=l.year,o=new Date(),p=o.getFullYear()+'',q=o.getMonth()+1+'';q=q.length===1?'0'+q:q;return n<p||p===n&&m<q;};f.exports=k;},null);
__d('P2PTransferStore',['Arbiter','P2PActionConstants','ChannelConstants','CurrentUser','CreditCardFormParam','EventEmitter','ImmutableObject','P2PActions','P2PAPI','P2PChannelType','P2PCreditCard','P2PDispatcher','P2PGKValues','P2PNUXRendererUtils','P2PTransferParam','P2PTransferStatus','Set','MercuryThreadInformer'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('MercuryThreadInformer').get(),k=false,l=void 0,m=[],n=void 0,o={},p=false,q=false,r=new (c('Set'))(),s=false;function t(w,x){if(x)o[x]=new (c('ImmutableObject'))(w);}function u(w,x){if(x)o[x]={error:w};}h=babelHelpers.inherits(v,c('EventEmitter'));i=h&&h.prototype;function v(){i.constructor.call(this);c('Arbiter').subscribe(c('ChannelConstants').getArbiterType(c('P2PChannelType').TRANSFER_STATUS_CHANGED),this.handleChannelTransferStatusChanged.bind(this));j.subscribe('messages-received',this.handleMessageReceived.bind(this));c('P2PDispatcher').register(this.onEventDispatched.bind(this));}v.prototype.onEventDispatched=function(w){var x=w.data,y=w.type;switch(y){case c('P2PActionConstants').TRANSFERS_UPDATED:this.handleTransfersUpdated(x);this.emit('change');break;case c('P2PActionConstants').TRANSFERS_UPDATED_ERROR:this.handleTransfersUpdatedError(x);this.emit('change');break;case c('P2PActionConstants').NUX_TRANSFERS_UPDATED:this.handleNUXTransfersUpdated(x);this.emit('change');break;case c('P2PActionConstants').TRANSFER_ADDED:this.handleTransferAdded(x);this.emit('change');break;case c('P2PActionConstants').TRANSFER_UPDATED:this.handleTransferUpdated(x);this.emit('change');break;case c('P2PActionConstants').TRANSFER_ACCEPTED:this.handleTransferAccepted();this.emit('change');break;case c('P2PActionConstants').TRANSFER_DECLINED:this.handleTransferDeclined(x);this.emit('change');break;case c('P2PActionConstants').EXTENSIVE_TRANSFER_DETAILS_UPDATED:this.handleTransferWithExtensiveDetails(x);this.emit('change');break;}};v.prototype.getAsyncRequestState=function(){return o;};v.prototype.handleTransfersUpdated=function(w){n=null;p=true;var x=[],y=w.map(function(aa){var ba={},ca=this.getTransferByID(aa[c('P2PTransferParam').TRANSFER_ID]),da={};if(aa.creditCard){ba[c('CreditCardFormParam').CREDENTIAL_ID]=aa.creditCard[c('CreditCardFormParam').CREDENTIAL_ID];ba[c('CreditCardFormParam').CARD_NUMBER]=aa.creditCard[c('CreditCardFormParam').CARD_NUMBER];ba[c('CreditCardFormParam').CARD_TYPE]=aa.creditCard[c('CreditCardFormParam').CARD_TYPE];aa.creditCard=new (c('P2PCreditCard'))(ba);}if(ca)for(var ea in ca)da[ea]=aa[ea]!==null?aa[ea]:ca[ea];x.push(aa[c('P2PTransferParam').TRANSFER_ID]);return new (c('ImmutableObject'))(aa,da);}.bind(this)),z=m.filter(function(aa){return x.indexOf(aa[c('P2PTransferParam').TRANSFER_ID])===-1;});m=y.concat(z);m=m.sort(function(aa,ba){return ba.creationTime-aa.creationTime;});};v.prototype.handleTransfersUpdatedError=function(w){n=w.error;u(w.requestID,w.error);};v.prototype.handleNUXTransfersUpdated=function(w){if(!p)this.handleTransfersUpdated(w);};v.prototype.handleTransferAdded=function(w){var x=null;t(w,w.requestID);if(w&&w.sender&&w.sender.id===c('CurrentUser').getID())s=true;x=m.filter(function(y){return (y[c('P2PTransferParam').TRANSFER_ID]===w[c('P2PTransferParam').TRANSFER_ID]);})[0];if(x)return;m.push(new (c('ImmutableObject'))(w));m=m.sort(function(y,z){return z.creationTime-y.creationTime;});};v.prototype.handleTransferAddedError=function(w){u(w.requestID,w.errors);};v.prototype.handleChannelTransferStatusChanged=function(w,x){x=x.obj;c('P2PActions').transferUpdated(x);};v.prototype.handleMessageReceived=function(w,x){for(var y in x)if(x.hasOwnProperty(y)){var z=x[y];for(var aa=0;aa<z.length;aa++)if(z[aa].attachments&&z[aa].attachments.length){var ba=c('P2PNUXRendererUtils').getTransferFromMessage(z[aa]);if(ba){if(!this.hasReceived()&&ba.receiver.id===c('CurrentUser').getID())c('P2PAPI').getBannerStates();c('P2PActions').transferAdded(ba);return;}}}};v.prototype.handleTransferUpdated=function(w){for(var x=0,y=m.length;x<y;x++)if(m[x][c('P2PTransferParam').TRANSFER_ID]===w[c('P2PTransferParam').TRANSFER_ID])m[x]=c('ImmutableObject').set(m[x],w);};v.prototype.handleTransferAccepted=function(){var w=void 0;for(var x=0,y=m.length;x<y;x++)if(m[x][c('P2PTransferParam').STATUS]===c('P2PTransferStatus').PENDING_RECIPIENT_NUX){w={};w[c('P2PTransferParam').STATUS]=c('P2PTransferStatus').COMPLETED;m[x]=c('ImmutableObject').set(m[x],w);}q=true;};v.prototype.handleTransferDeclined=function(w){var x=void 0;for(var y=0,z=m.length;y<z;y++)if(m[y][c('P2PTransferParam').TRANSFER_ID]===w[c('P2PTransferParam').TRANSFER_ID]&&m[y][c('P2PTransferParam').STATUS]===c('P2PTransferStatus').PENDING_RECIPIENT_NUX){x={};x[c('P2PTransferParam').STATUS]=c('P2PTransferStatus').CANCELED_DECLINED;m[y]=c('ImmutableObject').set(m[y],x);break;}};v.prototype.handleTransferUpdatedError=function(w){u(w.requestID,w.errors);};v.prototype.getTransferByID=function(w){return m.filter(function(x){return w===x[c('P2PTransferParam').TRANSFER_ID];})[0];};v.prototype.getAll=function(w){if(!k){k=true;c('P2PAPI').getTransactions(w);}return m;};v.prototype.getNUXTransfer=function(){var w=m.filter(function(x){return c('P2PNUXRendererUtils').isRecipientActionableStatus(x);})[0];if(!w&&!l&&!k){l=true;c('P2PAPI').getNUXTransactions();}return w;};v.prototype.hasTransfers=function(){return m.length>0;};v.prototype.hasAccepted=function(){return q;};v.prototype.hasReceivedFromSender=function(w){for(var x=0,y=m.length;x<y;x++)if(m[x].sender.id===w)return true;return false;};v.prototype.hasReceived=function(){for(var w=0,x=m.length;w<x;w++)if(m[w].receiver.id===c('CurrentUser').getID())return true;return false;};v.prototype.getTransferFetchError=function(){return n;};v.prototype.getTransferWithExtensiveDetailsByID=function(w){if(!r.has(w)){r.add(w);c('P2PAPI').getExtensiveTransferDetailsByID(w);}};v.prototype.handleTransferWithExtensiveDetails=function(w){if(this.getTransferByID(w.transfer_id)){this.handleTransferUpdated(w);}else this.handleTransferAdded(w);};v.prototype.getAllLocal=function(){return m;};v.prototype.hasSentDuringSession=function(){return s;};v.prototype.shouldShowSenderNUX=function(){return (!c('P2PGKValues').P2PUserAddedCredentialBefore&&!this.hasSentDuringSession());};f.exports=new v();},null);
__d('P2PFriendPickerDialog.react',['cx','fbt','P2PActions','P2PDialog.react','P2PDialogBody.react','P2PDialogTitle.react','P2PFriendPicker.react','P2PSendMoneyNUXDialog.react','P2PTransferStore','React'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'P2PFriendPickerDialog',propTypes:{amount:j.string,buttonLabel:j.node,eventFlow:j.string.isRequired,onClose:j.func.isRequired,referrer:j.string,subTitle:j.node,title:j.node},getDefaultProps:function(){return {amount:'',title:i._("Select Friend"),subTitle:i._("These are your friends who are able to receive money.")};},getInitialState:function(){return {sendMoneyNUXDismissed:false};},handleToggle:function(l){if(!l)this.props.onClose();},handleNUXNextClick:function(){this.setState({sendMoneyNUXDismissed:true});},render:function(){var l=445;if(!this.state.sendMoneyNUXDismissed&&c('P2PTransferStore').shouldShowSenderNUX())return (c('React').createElement(c('P2PSendMoneyNUXDialog.react'),{eventFlow:this.props.eventFlow,onToggle:this.handleToggle,onNextClick:this.handleNUXNextClick,width:l}));return (c('React').createElement(c('P2PDialog.react'),{onToggle:this.handleToggle,width:l},c('React').createElement(c('P2PDialogTitle.react'),null,c('React').createElement('div',{className:"_4ia-"},this.props.title)),c('React').createElement(c('P2PDialogBody.react'),{className:"_4ib0"},c('React').createElement(c('P2PFriendPicker.react'),{amount:this.props.amount,buttonLabel:this.props.buttonLabel,eventFlow:this.props.eventFlow,onFriendSelected:this.props.onClose,referrer:this.props.referrer,sendMoneyNUXDismissed:this.state.sendMoneyNUXDismissed,subTitle:this.props.subTitle}))));}});f.exports={module:k,render:function(l){c('P2PActions').showDialog(k,babelHelpers['extends']({title:i._("Send Money to Friends")},l,{onClose:c('P2PActions').hideDialog}));}};},null);
__d('P2PSendMoneyHelper',['fbt','MercuryIDs','P2PActions','P2PLogger','P2PFriendPickerDialog.react','P2PPaymentLoggerEvent','P2PPaymentLoggerEventFlow'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('P2PFriendPickerDialog.react').module,j={bindProfileSendMoneyAction:function(k,l){k.subscribe('itemclick',function(m,n){if(n.item.getValue()==='send_money')c('P2PActions').chatSendViewOpened({referrer:'profile_action',threadID:c('MercuryIDs').getThreadIDFromUserID(l)});});},initPaymentsBluebarMenuItems:function(k){k.subscribe('itemclick',function(l,m){var n=m.item.getValue();if(n==='send_money'){c('P2PActions').showDialog(i,{eventFlow:c('P2PPaymentLoggerEventFlow').UI_FLOW_SEND_MONEY_BLUEBAR,onClose:c('P2PActions').hideDialog,referrer:'bluebar',title:h._("Send Money to Friends")});}else if(n==='payments_history')c('P2PLogger').log(c('P2PPaymentLoggerEvent').UI_ACTN_PAYMENTS_HISTORY_BLUEBAR_CLICK,{www_event_flow:c('P2PPaymentLoggerEventFlow').UI_FLOW_PAYMENTS_MENU_BLUEBAR});});}};f.exports=j;},null);