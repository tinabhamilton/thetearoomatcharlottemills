if (self.CavalryLogger) { CavalryLogger.start_js(["MJ5rC"]); }

__d("VideoPlayerStreamSwitchReasons",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={BANDWIDTH:"bandwidth",FORCED:"forced",PREFER_HIGH_QUALITY:"prefer_high_quality",USER:"user"};},null);
__d("VideoQualityClassInternal",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={orderedValues:["sd","hd","uhd"]};},null);
__d('TaggedTimeRanges',['sprintf'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){'use strict';this.$TaggedTimeRanges1=[];this.$TaggedTimeRanges2=0;this.$TaggedTimeRanges3=0;this.$TaggedTimeRanges4=i?i:function(j,k){return j===k;};}h.prototype.add=function(i,j,k){'use strict';if(j<i)return;if(j===i)return;if(this.$TaggedTimeRanges1.length===0){this.$TaggedTimeRanges1.push({start:i,end:j,tag:k});return;}var l=0,m=0;for(var n=0;n<this.$TaggedTimeRanges1.length;n++){if(i>=this.$TaggedTimeRanges1[n].start)l=n+1;if(j<=this.$TaggedTimeRanges1[n].end)m=n;if(j<this.$TaggedTimeRanges1[n].start)break;}this.$TaggedTimeRanges1.splice(l,m-l,{start:i,end:j,tag:k});this.$TaggedTimeRanges5(l);};h.prototype.$TaggedTimeRanges5=function(i){'use strict';var j=this.$TaggedTimeRanges1[i],k=null;if(i!==0)k=this.$TaggedTimeRanges1[i-1];if(k!==null)if(this.$TaggedTimeRanges4(k.tag,j.tag)){if(k.end>=j.start){this.$TaggedTimeRanges1.splice(i-1,2,{start:k.start,end:Math.max(j.end,k.end),tag:j.tag});i--;}}else{if(k.end>=j.start)this.$TaggedTimeRanges1.splice(i-1,1,{start:k.start,end:j.start,tag:k.tag});if(k.end>j.end)this.$TaggedTimeRanges1.splice(i+1,0,{start:j.end,end:k.end,tag:k.tag});}var l=null;if(i!==this.$TaggedTimeRanges1.length-1)l=this.$TaggedTimeRanges1[i+1];if(l)if(this.$TaggedTimeRanges4(l.tag,j.tag)){if(l.start<=j.end)this.$TaggedTimeRanges1.splice(i,2,{start:j.start,end:Math.max(l.end,j.end),tag:j.tag});}else if(l.start<=j.end)if(l.end<j.end){this.$TaggedTimeRanges1.splice(i,1,{start:j.start,end:l.start,tag:j.tag});this.$TaggedTimeRanges1.push({start:l.end,end:j.end,tag:j.tag});}else this.$TaggedTimeRanges1.splice(i+1,1,{start:j.end,end:l.end,tag:l.tag});};h.prototype.get=function(i){'use strict';var j=i>=this.$TaggedTimeRanges3?this.$TaggedTimeRanges2:0,k=null;for(var l=j;l<this.$TaggedTimeRanges1.length;l++)if(this.$TaggedTimeRanges1[l].start<=i&&i<this.$TaggedTimeRanges1[l].end){k=l;break;}this.$TaggedTimeRanges2=k===null?0:k;this.$TaggedTimeRanges3=i;return k===null?null:this.$TaggedTimeRanges1[k].tag;};h.prototype.getLength=function(){'use strict';return this.$TaggedTimeRanges1.length;};f.exports=h;},null);
__d("Shaka",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();var h={};(function(i){var j,k=this;function l(bm,cm){var dm=bm.split("."),em=k;dm[0] in em||!em.execScript||em.execScript("var "+dm[0]);for(var fm;dm.length&&(fm=dm.shift());)dm.length||void 0===cm?em[fm]?em=em[fm]:em=em[fm]={}:em[fm]=cm;}function m(bm,cm){function dm(){}dm.prototype=cm.prototype;bm.Tb=cm.prototype;bm.prototype=new dm();bm.prototype.constructor=bm;bm.Sb=function(em,fm,gm){return cm.prototype[fm].apply(em,Array.prototype.slice.call(arguments,2));};}function n(){}function o(bm){var cm=console[bm];cm?cm.bind||(console[bm]=function(){cm.apply(console,arguments);}):console[bm]=function(){};}o("error");o("warn");o("info");o("log");o("debug");function p(bm){t[bm]={ga:s(),end:NaN};}function q(bm){if(bm=t[bm])bm.end=s();}function r(bm){return (bm=t[bm])&&bm.end?bm.end-bm.ga:NaN;}var s=i.performance&&i.performance.now?i.performance.now.bind(i.performance):Date.now,t={};function u(bm,cm,dm,em){this.id=bm;this.bandwidth=cm||0;this.lang=dm||"unknown";this.streamInfoID=em;this.active=false;}l("shaka.player.AudioTrack.compare",function(bm,cm){return bm.lang<cm.lang?-1:bm.lang>cm.lang?1:bm.bandwidth<cm.bandwidth?-1:bm.bandwidth>cm.bandwidth?1:0;});function v(){this.minBandwidth=this.maxBandwidth=this.maxWidth=this.minHeight=this.maxHeight=null;}v.prototype.clone=function(){var bm=new v();bm.maxHeight=this.maxHeight;bm.minHeight=this.minHeight;bm.maxWidth=this.maxWidth;bm.maxBandwidth=this.maxBandwidth;bm.minBandwidth=this.minBandwidth;return bm;};function w(){this.fontSize="100%";this.fontColor=z;this.fontOpacity=ba;this.backgroundColor=aa;this.backgroundOpacity=ba;this.fontEdge=ca;}l("shaka.player.TextStyle",w);function x(bm){var cm=[];cm.push("font-size: "+bm.fontSize);cm.push("color: "+y(bm.fontColor,bm.fontOpacity));cm.push("background-color: "+y(bm.backgroundColor,bm.backgroundOpacity));for(var dm=[],em=0;em<bm.fontEdge.length;++em){var fm=bm.fontEdge[em].slice(3,6);dm.push(y(bm.fontEdge[em].slice(0,3),bm.fontOpacity)+" "+fm.join("px ")+"px");}cm.push("text-shadow: "+dm.join(","));return cm.join("; ");}function y(bm,cm){return "rgba("+bm.concat(cm).join(",")+")";}var z=[255,255,255],aa=[0,0,0];w.StandardColors={WHITE:z,BLACK:aa,RED:[255,0,0],GREEN:[0,255,0],BLUE:[0,0,255],YELLOW:[255,255,0],MAGENTA:[255,0,255],CYAN:[0,255,255]};var ba=1;w.StandardOpacities={OPAQUE:ba,SEMI_HIGH:.75,SEMI_LOW:.25,TRANSPARENT:0};var ca=[];w.EdgeStyles={NONE:ca,RAISED:[[34,34,34,1,1,0],[34,34,34,2,2,0],[34,34,34,3,3,0]],DEPRESSED:[[204,204,204,1,1,0],[204,204,204,0,1,0],[34,34,34,-1,-1,0],[34,34,34,0,-1,0]],UNIFORM:[[34,34,34,0,0,4],[34,34,34,0,0,4],[34,34,34,0,0,4],[34,34,34,0,0,4]],DROP:[[34,34,34,2,2,3],[34,34,34,2,2,4],[34,34,34,2,2,5]]};function da(bm,cm){this.id=bm;this.lang=cm||"unknown";this.enabled=this.active=false;}l("shaka.player.TextTrack.compare",function(bm,cm){return bm.lang<cm.lang?-1:bm.lang>cm.lang?1:0;});function ea(bm,cm,dm,em,fm,gm,hm){this.id=bm;this.bandwidth=cm||0;this.width=dm||0;this.height=em||0;this.streamInfoID=fm;this.fbQualityLabel=gm;this.fbQualityClass=hm;this.active=false;}function fa(bm,cm){var dm=bm.width*bm.height,em=cm.width*cm.height;return dm<em?-1:dm>em?1:bm.bandwidth<cm.bandwidth?-1:bm.bandwidth>cm.bandwidth?1:0;}l("shaka.player.VideoTrack.compare",fa);function ga(){var bm="CustomEvent" in i;if(bm)try{new CustomEvent("");}catch(cm){bm=false;}bm||(i.CustomEvent=ha);}l("shaka.polyfill.CustomEvent.install",ga);function ha(bm,cm){var dm=document.createEvent("CustomEvent"),em=cm||{bubbles:false,cancelable:false,detail:null};dm.initCustomEvent(bm,!!em.bubbles,!!em.cancelable,em.detail);return dm;}function ia(){var bm=Element.prototype;bm.requestFullscreen=bm.requestFullscreen||bm.mozRequestFullScreen||bm.msRequestFullscreen||bm.webkitRequestFullscreen;bm=Document.prototype;bm.exitFullscreen=bm.exitFullscreen||bm.mozCancelFullScreen||bm.msExitFullscreen||bm.webkitExitFullscreen;"fullscreenElement" in document||Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement;}});document.addEventListener("webkitfullscreenchange",ja);document.addEventListener("webkitfullscreenerror",ja);document.addEventListener("mozfullscreenchange",ja);document.addEventListener("mozfullscreenerror",ja);document.addEventListener("MSFullscreenChange",ja);document.addEventListener("MSFullscreenError",ja);}l("shaka.polyfill.Fullscreen.install",ia);function ja(bm){var cm=bm.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),cm=new Event(cm,bm);bm.target.dispatchEvent(cm);}function ka(){return Promise.reject(Error("The key system specified is not supported."));}function la(bm){return null==bm?Promise.resolve():Promise.reject(Error("MediaKeys not supported."));}function ma(){throw new TypeError("Illegal constructor.");}ma.prototype.createSession=function(){};ma.prototype.setServerCertificate=function(){};function na(){throw new TypeError("Illegal constructor.");}na.prototype.getConfiguration=function(){};na.prototype.createMediaKeys=function(){};function oa(bm){this.c=[];this.b=[];this.Y=pa;if(bm)try{bm(this.W.bind(this),this.a.bind(this));}catch(cm){this.a(cm);}}var pa=0;function qa(){i.Promise||(i.Promise=oa,i.Promise.resolve=ra,i.Promise.reject=sa,i.Promise.all=ta,i.Promise.race=ua,i.setImmediate?(xa=function(bm){return i.setImmediate(bm);},ya=function(bm){return i.clearImmediate(bm);}):(xa=function(bm){return i.setTimeout(bm,0);},ya=function(bm){return i.clearTimeout(bm);}));}l("shaka.polyfill.Promise.install",qa);function ra(bm){var cm=new oa();cm.W(bm);return cm;}function sa(bm){var cm=new oa();cm.a(bm);return cm;}function ta(bm){function cm(im,jm,km){im.Y==pa&&(fm[jm]=km,em++,em==fm.length&&im.W(fm));}var dm=new oa();if(!bm.length)return dm.W([]),dm;for(var em=0,fm=Array(bm.length),gm=dm.a.bind(dm),hm=0;hm<bm.length;++hm)bm[hm]&&bm[hm].then?bm[hm].then(cm.bind(null,dm,hm),gm):cm(dm,hm,bm[hm]);return dm;}function ua(bm){for(var cm=new oa(),dm=cm.W.bind(cm),em=cm.a.bind(cm),fm=0;fm<bm.length;++fm)bm[fm]&&bm[fm].then?bm[fm].then(dm,em):dm(bm[fm]);return cm;}oa.prototype.then=function(bm,cm){var dm=new oa();switch(this.Y){case 1:va(this,dm,bm);break;case 2:va(this,dm,cm);break;case pa:this.c.push({Fa:dm,xa:bm}),this.b.push({Fa:dm,xa:cm});}return dm;};oa.prototype.then=oa.prototype.then;oa.prototype.catch=function(bm){return this.then(void 0,bm);};oa.prototype["catch"]=oa.prototype.catch;oa.prototype.W=function(bm){if(this.Y==pa){this.ta=bm;this.Y=1;for(bm=0;bm<this.c.length;++bm)va(this,this.c[bm].Fa,this.c[bm].xa);this.c=[];this.b=[];}};oa.prototype.a=function(bm){if(this.Y==pa){this.ta=bm;this.Y=2;for(bm=0;bm<this.b.length;++bm)va(this,this.b[bm].Fa,this.b[bm].xa);this.c=[];this.b=[];}};function va(bm,cm,dm){ab.push(function(){if(dm&&"function"==typeof dm){try{var fm=dm(this.ta);}catch(em){cm.a(em);return;}fm instanceof oa?fm==cm?cm.a(new TypeError("Chaining cycle detected")):fm.then(cm.W.bind(cm),cm.a.bind(cm)):cm.W(fm);}else 1==this.Y?cm.W(this.ta):cm.a(this.ta);}.bind(bm));null==za&&(za=xa(wa));}function wa(){for(;ab.length;){null!=za&&(ya(za),za=null);var bm=ab;ab=[];for(var cm=0;cm<bm.length;++cm)bm[cm]();}}function xa(){return 0;}function ya(){}var za=null,ab=[];function bb(){var bm=HTMLVideoElement.prototype;!bm.getVideoPlaybackQuality&&"webkitDroppedFrameCount" in bm&&(bm.getVideoPlaybackQuality=cb);}l("shaka.polyfill.VideoPlaybackQuality.install",bb);function cb(){return {droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0};}function db(bm,cm){for(var dm=[],em=0;em<bm.length;++em){for(var fm=false,gm=0;gm<dm.length&&!(fm=cm?cm(bm[em],dm[gm]):bm[em]===dm[gm]);++gm);fm||dm.push(bm[em]);}return dm;}function eb(){return Date.now()+fb;}var fb=0;function gb(bm){this.b=bm;this.c=0==hb;this.a=0;}var hb=1;function ib(bm){return bm.a<bm.b.byteLength;}function jb(bm){var cm=bm.b.getUint8(bm.a);bm.a+=1;return cm;}function kb(bm){var cm=bm.b.getUint32(bm.a,bm.c);bm.a+=4;return cm;}function lb(bm){var cm,dm;bm.c?(cm=bm.b.getUint32(bm.a,true),dm=bm.b.getUint32(bm.a+4,true)):(dm=bm.b.getUint32(bm.a,false),cm=bm.b.getUint32(bm.a+4,false));if(2097151<dm)throw new RangeError("DataViewReader: Overflow reading 64-bit value.");bm.a+=8;return dm*Math.pow(2,32)+cm;}function mb(bm){if(bm.a+16>bm.b.byteLength)throw new RangeError("DataViewReader: Read past end of DataView.");var cm=new Uint8Array(bm.b.buffer,bm.a,16);bm.a+=16;return cm;}function nb(bm,cm){if(bm.a+cm>bm.b.byteLength)throw new RangeError("DataViewReader: Skip past end of DataView.");bm.a+=cm;}function ob(bm){this.b=bm;this.a=new gb(bm);pb||(pb=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])]);}var pb;function qb(bm){var cm;cm=rb(bm);if(7<cm.length)throw new RangeError("EbmlParser: EBML ID must be at most 7 bytes.");for(var dm=0,em=0;em<cm.length;em++)dm=256*dm+cm[em];cm=dm;dm=rb(bm);bm:{for(em=0;em<pb.length;em++)if(td(dm,pb[em])){em=true;break bm;}em=false;};if(em){dm=bm.b.byteLength-bm.a.a;}else{if(8==dm.length&&dm[1]&224)throw new RangeError("EbmlParser: Variable sized integer value must be at most 53 bits.");for(var em=dm[0]&(1<<8-dm.length)-1,fm=1;fm<dm.length;fm++)em=256*em+dm[fm];dm=em;}dm=bm.a.a+dm<=bm.b.byteLength?dm:bm.b.byteLength-bm.a.a;em=new DataView(bm.b.buffer,bm.b.byteOffset+bm.a.a,dm);nb(bm.a,dm);return new sb(cm,em);}function rb(bm){var cm=jb(bm.a),dm;for(dm=1;8>=dm&&!(cm&1<<8-dm);dm++);if(8<dm)throw new RangeError("EbmlParser: Variable sized integer must fit within 8 bytes.");var em=new Uint8Array(dm);em[0]=cm;for(cm=1;cm<dm;cm++)em[cm]=jb(bm.a);return em;}function sb(bm,cm){this.id=bm;this.a=cm;}function tb(bm){if(8<bm.a.byteLength)throw new RangeError("EbmlElement: Unsigned integer has too many bytes.");if(8==bm.a.byteLength&&bm.a.getUint8(0)&224)throw new RangeError("EbmlParser: Unsigned integer must be at most 53 bits.");for(var cm=0,dm=0;dm<bm.a.byteLength;dm++)var em=bm.a.getUint8(dm),cm=256*cm+em;return cm;}var ub={"output-restricted":"The required output protection is not available.","output-not-allowed":"The required output protection is not available.",expired:"The decryption key has expired.","internal-error":"The key system has encountered an unspecified error."};function vb(bm){this.c=Math.exp(Math.log(.5)/bm);this.a=this.b=0;}vb.prototype.sample=function(bm,cm){var dm=Math.pow(this.c,bm);this.b=cm*(1-dm)+dm*this.b;this.a+=bm;};function wb(bm){return bm.b/(1-Math.pow(bm.c,bm.a));}function xb(bm){var cm=new CustomEvent(bm.type,{detail:bm.detail,bubbles:!!bm.bubbles}),dm;for(dm in bm)dm in cm||(cm[dm]=bm[dm]);return cm;}function yb(bm){return new CustomEvent("error",{detail:bm,bubbles:true});}function zb(bm,cm,dm){cc(cm);cc(dm);return dm==cm||bm>=ac&&dm==cm.split("-")[0]||bm>=bc&&dm.split("-")[0]==cm.split("-")[0]?true:false;}var ac=1,bc=2;function cc(bm){bm=bm.toLowerCase().split("-");var cm=dc[bm[0]];cm&&(bm[0]=cm);return bm.join("-");}var dc={aar:"aa",abk:"ab",afr:"af",aka:"ak",alb:"sq",amh:"am",ara:"ar",arg:"an",arm:"hy",asm:"as",ava:"av",ave:"ae",aym:"ay",aze:"az",bak:"ba",bam:"bm",baq:"eu",bel:"be",ben:"bn",bih:"bh",bis:"bi",bod:"bo",bos:"bs",bre:"br",bul:"bg",bur:"my",cat:"ca",ces:"cs",cha:"ch",che:"ce",chi:"zh",chu:"cu",chv:"cv",cor:"kw",cos:"co",cre:"cr",cym:"cy",cze:"cs",dan:"da",deu:"de",div:"dv",dut:"nl",dzo:"dz",ell:"el",eng:"en",epo:"eo",est:"et",eus:"eu",ewe:"ee",fao:"fo",fas:"fa",fij:"fj",fin:"fi",fra:"fr",fre:"fr",fry:"fy",ful:"ff",geo:"ka",ger:"de",gla:"gd",gle:"ga",glg:"gl",glv:"gv",gre:"el",grn:"gn",guj:"gu",hat:"ht",hau:"ha",heb:"he",her:"hz",hin:"hi",hmo:"ho",hrv:"hr",hun:"hu",hye:"hy",ibo:"ig",ice:"is",ido:"io",iii:"ii",iku:"iu",ile:"ie",ina:"ia",ind:"id",ipk:"ik",isl:"is",ita:"it",jav:"jv",jpn:"ja",kal:"kl",kan:"kn",kas:"ks",kat:"ka",kau:"kr",kaz:"kk",khm:"km",kik:"ki",kin:"rw",kir:"ky",kom:"kv",kon:"kg",kor:"ko",kua:"kj",kur:"ku",lao:"lo",lat:"la",lav:"lv",lim:"li",lin:"ln",lit:"lt",ltz:"lb",lub:"lu",lug:"lg",mac:"mk",mah:"mh",mal:"ml",mao:"mi",mar:"mr",may:"ms",mkd:"mk",mlg:"mg",mlt:"mt",mon:"mn",mri:"mi",msa:"ms",mya:"my",nau:"na",nav:"nv",nbl:"nr",nde:"nd",ndo:"ng",nep:"ne",nld:"nl",nno:"nn",nob:"nb",nor:"no",nya:"ny",oci:"oc",oji:"oj",ori:"or",orm:"om",oss:"os",pan:"pa",per:"fa",pli:"pi",pol:"pl",por:"pt",pus:"ps",que:"qu",roh:"rm",ron:"ro",rum:"ro",run:"rn",rus:"ru",sag:"sg",san:"sa",sin:"si",slk:"sk",slo:"sk",slv:"sl",sme:"se",smo:"sm",sna:"sn",snd:"sd",som:"so",sot:"st",spa:"es",sqi:"sq",srd:"sc",srp:"sr",ssw:"ss",sun:"su",swa:"sw",swe:"sv",tah:"ty",tam:"ta",tat:"tt",tel:"te",tgk:"tg",tgl:"tl",tha:"th",tib:"bo",tir:"ti",ton:"to",tsn:"tn",tso:"ts",tuk:"tk",tur:"tr",twi:"tw",uig:"ug",ukr:"uk",urd:"ur",uzb:"uz",ven:"ve",vie:"vi",vol:"vo",wel:"cy",wln:"wa",wol:"wo",xho:"xh",yid:"yi",yor:"yo",zha:"za",zho:"zh",zul:"zu"};function ec(bm){return Object.keys(bm).map(function(cm){return bm[cm];});}function fc(bm,cm){return ic(bm,cm,"boolean");}function gc(bm,cm,dm){bm=ic(bm,cm,"number");if(null==bm)return null;if(isNaN(bm)||bm==Number.NEGATIVE_INFINITY||bm==Number.POSITIVE_INFINITY)throw new RangeError("'"+cm+"' must be finite.");if(null!=dm&&bm<dm)throw new RangeError("'"+cm+"' must be >= "+dm);return bm;}function hc(bm,cm){return ic(bm,cm,"string");}function ic(bm,cm,dm){bm=bm[cm];if(null==bm)return null;if(typeof bm!=dm)throw new TypeError("'"+cm+"' must be a "+dm+".");return bm;}function jc(bm,cm,dm){bm=bm[cm];if(null==bm)return null;if(!(bm instanceof dm))throw new TypeError("'"+cm+"' must be an instance of "+dm.name+".");return bm;}function kc(){this.a={};}kc.prototype.push=function(bm,cm){this.a.hasOwnProperty(bm)?this.a[bm].push(cm):this.a[bm]=[cm];};kc.prototype.set=function(bm,cm){this.a[bm]=cm;};kc.prototype.get=function(bm){return (bm=this.a[bm])?bm.slice():null;};function lc(bm){var cm=[],dm;for(dm in bm.a)cm.push.apply(cm,bm.a[dm]);return cm;}function mc(bm,cm,dm){if(bm=bm.a[cm])for(cm=0;cm<bm.length;++cm)bm[cm]==dm&&(bm.splice(cm,1),--cm);}function nc(bm){var cm=[],dm;for(dm in bm.a)cm.push(dm);return cm;}function oc(){this.a=new kc();}oc.prototype.destroy=function(){qc(this);this.a=null;};function pc(bm,cm,dm,em){cm=new rc(cm,dm,em);bm.a.push(dm,cm);}oc.prototype.qa=function(bm,cm){for(var dm=this.a.get(cm)||[],em=0;em<dm.length;++em){var fm=dm[em];fm.target==bm&&(fm.qa(),mc(this.a,cm,fm));}};function qc(bm){for(var cm=lc(bm.a),dm=0;dm<cm.length;++dm)cm[dm].qa();bm.a.a={};}function rc(bm,cm,dm){this.target=bm;this.type=cm;this.a=dm;this.target.addEventListener(cm,dm,false);}rc.prototype.qa=function(){this.target&&(this.target.removeEventListener(this.type,this.a,false),this.a=this.target=null);};function sc(bm){this.ua=new kc();this.S=bm;}l("shaka.util.FakeEventTarget",sc);sc.prototype.addEventListener=function(bm,cm,dm){dm||this.ua.push(bm,cm);};sc.prototype.removeEventListener=function(bm,cm,dm){dm||mc(this.ua,bm,cm);};sc.prototype.dispatchEvent=function(bm){bm.hasOwnProperty("srcElement")||(delete bm.srcElement,Object.defineProperty(bm,"srcElement",{get:function(){return null;}}));if(bm.hasOwnProperty("target")){bm.target=this;}else{delete bm.target;var cm=this;Object.defineProperty(bm,"target",{get:function(){return cm;},set:function(em){cm=em;}});}if(bm.hasOwnProperty("currentTarget")){bm.currentTarget=null;}else{delete bm.currentTarget;var dm=null;Object.defineProperty(bm,"currentTarget",{get:function(){return dm;},set:function(em){dm=em;}});}return tc(this,bm);};function tc(bm,cm){cm.currentTarget=bm;for(var dm=bm.ua.get(cm.type)||[],em=0;em<dm.length;++em){var fm=dm[em];try{fm.handleEvent?fm.handleEvent(cm):fm.call(bm,cm);}catch(gm){}}bm.S&&cm.bubbles&&tc(bm.S,cm);return cm.defaultPrevented;}function uc(bm){sc.call(this,null);this.a=new vb(3);this.g=new vb(10);this.h=bm||500000;this.f=0;}m(uc,sc);l("shaka.util.EWMABandwidthEstimator",uc);uc.prototype.sample=function(bm,cm){if(!(65536>cm)){bm=Math.max(bm,50);var dm=8000*cm/bm,em=bm/1000;this.a.sample(em,dm);this.g.sample(em,dm);this.dispatchEvent(xb({type:"bandwidth"}));this.f=Date.now();}};uc.prototype.getBandwidth=function(){return .5>this.a.a?this.h:Math.min(wb(this.a),wb(this.g));};uc.prototype.getDataAge=function(){return (Date.now()-this.f)/1000;};uc.prototype.supportsCaching=function(){return false;};function vc(bm,cm,dm){uc.call(this,dm);this.c=bm||0;this.b=void 0===cm?Infinity:cm;}m(vc,uc);l("shaka.util.EWMACacheBandwidthEstimator",vc);vc.prototype.sample=function(bm,cm){bm<=this.c&&8000*cm/bm>this.b||uc.prototype.sample.call(this,bm,cm);};vc.prototype.supportsCaching=function(){return Infinity!==this.b&&!!this.c;};function wc(){uc.call(this);}m(wc,uc);l("shaka.util.EWMASignedURLBandwidthEstimator",wc);wc.prototype.supportsCaching=function(){return true;};function xc(){var bm,cm,dm=new Promise(function(em,fm){bm=em;cm=fm;});dm.resolve=bm;dm.reject=cm;dm.destroy=xc.prototype.destroy;return dm;}xc.prototype.destroy=function(){this.catch(function(){});var bm=Error("Destroyed!");bm.type="destroy";this.reject(bm);};function yc(bm){bm.split("").reduce(function(cm,dm,em){return cm+(em&&0==em%4?" "+dm:dm);});}function zc(){this.g=new xc();this.f=false;this.a=null;this.b=[];this.c=null;}function ad(bm,cm){if(bm.f)throw Error("Cannot append to a running task!");bm.b.push(cm);}zc.prototype.start=function(){if(this.f)throw Error("Task already started!");this.f=true;this.b.unshift(function(){});bd(this,void 0);};zc.prototype.end=function(){this.b.splice(1);};function bd(bm,cm){var dm=bm.b[0](cm),em;dm?(em=dm[0],bm.c=dm[1]):(em=Promise.resolve(),bm.c=null);em.then(dd(bm,function(fm){this.a?(this.b=[],this.c=null,cd(this)):(this.b.shift(),this.b.length?bd(this,fm):(this.g.resolve(fm),this.c=null));})).catch(dd(bm,function(fm){this.b=[];this.c=null;this.a?cd(this):this.g.reject(fm);}));}function cd(bm){var cm=Error("Task aborted.");cm.type="aborted";bm.g.reject(cm);i.setTimeout(function(){this.a.resolve();this.a=null;}.bind(bm),5);}function dd(bm,cm){return cm.bind(bm);}function ed(bm,cm,dm){MediaSource.isTypeSupported(cm);cm=bm.addSourceBuffer(cm);this.h=bm;this.c=cm;this.l=dm;this.i=new oc();this.v=null;this.b=[];this.o=0;this.f=this.a=null;this.m=0;pc(this.i,this.c,"updateend",this.A.bind(this));}var fd=1/60;ed.prototype.destroy=function(){ld(this).catch(function(){});this.f&&this.f.destroy();this.b=this.a=this.f=null;this.i.destroy();this.h=this.c=this.i=null;};function gd(bm,cm){for(var dm=bm.c.buffered,em=0;em<dm.length;++em){var fm=dm.start(em)-fd,gm=dm.end(em)+fd;if(cm>=fm&&cm<=gm)return dm.end(em)-cm;}return 0;}function hd(bm,cm,dm){cm=cm.a?cm.a-cm.b:1;var em=new ah();em.a=3;em.j=1000*cm;em.c=1000*bm.m;em.o=bm.v;em.l=dm;return em;}function id(bm,cm,dm,em,fm){if(bm.a)return bm=Error("Cannot fetch ("+bm.j+"): previous operation not complete."),bm.type="stream",Promise.reject(bm);bm.a=new zc();dm!=bm.c.timestampOffset&&(bm.c.timestampOffset=dm);dm=hd(bm,cm,fm);var gm=kh(cm.url,dm,bm.l),hm=hh.prototype.f.bind(cm.url),im=0;em&&ad(bm.a,function(){return [em.then(function(lm){lm.ia>im&&(im=lm.ia);return nd(this,lm);}.bind(this)),this.g.bind(this)];}.bind(bm));ad(bm.a,dd(bm,function(){return [gm.then(function(lm){lm.ia>im&&(im=lm.ia);this.l.getBandwidth();return nd(this,lm);}.bind(this)),function(){hm();this.g();}.bind(this)];}));var jm=0==bm.c.buffered.length&&0==bm.b.length,km=null;ad(bm.a,function(){if(0==this.c.buffered.length){var lm=Error("Failed to buffer segment ("+this.j+").");lm.type="stream";return [Promise.reject(lm)];}jm&&(lm=cm.b,km=this.c.buffered.start(0)-lm);lm=vh(this.b,cm.b);0<=lm?this.b.splice(lm+1,0,cm):this.b.push(cm);}.bind(bm));return md(bm).then(function(){return Promise.resolve({V:km,ob:im});}.bind(bm));}function jd(bm){if(bm.a)return bm=Error("Cannot clear ("+bm.j+"): previous operation not complete."),bm.type="stream",Promise.reject(bm);bm.a=new zc();ad(bm.a,function(){var cm;cm:if(0==this.c.buffered.length){cm=Promise.resolve();}else{try{this.c.remove(0,this.h.duration);}catch(dm){cm=Promise.reject(dm);break cm;}this.b=[];cm=this.f=new xc();};return [cm,this.g.bind(this)];}.bind(bm));return md(bm);}function kd(bm,cm){if(bm.a){var dm=Error("Cannot clearAfter ("+bm.j+"): previous operation not complete.");dm.type="stream";return Promise.reject(dm);}bm.a=new zc();ad(bm.a,function(){return [od(this,cm),this.g.bind(this)];}.bind(bm));return md(bm);}function ld(bm){bm.a?(bm=bm.a,bm.a?bm=bm.a:bm.f?(bm.c&&bm.c(),bm.a=new xc(),bm=bm.a):(bm.f=true,bm=Promise.resolve())):bm=Promise.resolve();return bm;}function md(bm){bm.a.start();return bm.a.g.then(dd(bm,function(){this.a=null;})).catch(dd(bm,function(cm){this.a=null;return Promise.reject(cm);}));}function nd(bm,cm){try{bm.c.appendBuffer(cm);}catch(dm){return Promise.reject(dm);}bm.f=new xc();return bm.f;}function od(bm,cm){if(0==bm.c.buffered.length)return Promise.resolve();var dm=vh(bm.b,cm);if(-1==dm||dm==bm.b.length-1)return Promise.resolve();try{bm.c.remove(bm.b[dm+1].b,bm.h.duration);}catch(em){return Promise.reject(em);}bm.b=bm.b.slice(0,dm+1);bm.f=new xc();return bm.f;}ed.prototype.g=function(){this.f&&"open"==this.h.readyState&&this.c.abort();};ed.prototype.A=function(){this.f&&(this.f.resolve(),this.f=null);};function pd(bm){return String.fromCharCode.apply(null,bm);}l("shaka.util.Uint8ArrayUtils.toString",pd);function qd(bm){for(var cm=new Uint8Array(bm.length),dm=0;dm<bm.length;++dm)cm[dm]=bm.charCodeAt(dm);return cm;}l("shaka.util.Uint8ArrayUtils.fromString",qd);l("shaka.util.Uint8ArrayUtils.toBase64",function(bm,cm){var dm=void 0==cm?true:cm,em=i.btoa(pd(bm)).replace(/\+/g,"-").replace(/\//g,"_");return dm?em:em.replace(/=*$/,"");});function rd(bm){return qd(i.atob(bm.replace(/-/g,"+").replace(/_/g,"/")));}l("shaka.util.Uint8ArrayUtils.fromBase64",rd);l("shaka.util.Uint8ArrayUtils.fromHex",function(bm){for(var cm=new Uint8Array(bm.length/2),dm=0;dm<bm.length;dm+=2)cm[dm/2]=i.parseInt(bm.substr(dm,2),16);return cm;});function sd(bm){for(var cm="",dm=0;dm<bm.length;++dm){var em=bm[dm].toString(16);1==em.length&&(em="0"+em);cm+=em;}return cm;}l("shaka.util.Uint8ArrayUtils.toHex",sd);function td(bm,cm){if(!bm&&!cm)return true;if(!bm||!cm||bm.length!=cm.length)return false;for(var dm=0;dm<bm.length;++dm)if(bm[dm]!=cm[dm])return false;return true;}function ud(){this.h=this.a="";this.l=false;this.o=this.m=null;this.i=this.g=false;this.j=this.f="";this.c=null;this.b=[];}function vd(bm,cm){var dm=new ud();dm.a=bm.a;dm.h=bm.h;dm.l=bm.l;dm.m=bm.m;dm.o=bm.o;dm.g=bm.g;dm.i=bm.i;dm.f=bm.f;dm.j=bm.j;dm.c=bm.c?new Uint8Array(bm.c.buffer):null;wd(dm,bm.b);wd(dm,cm.b);return dm;}function wd(bm,cm){var dm=bm.b.concat(cm.map(function(em){return {initData:new Uint8Array(em.initData.buffer),initDataType:em.initDataType};}));bm.b=db(dm,xd);}function xd(bm,cm){return bm.initDataType==cm.initDataType&&td(bm.initData,cm.initData);}function yd(bm,cm,dm,em){this.a=[];em&&this.a.push(em);}l("shaka.player.DrmSchemeInfo",yd);yd.DistinctiveIdentifier={OPTIONAL:0,REQUIRED:1};yd.PersistentState={OPTIONAL:0,REQUIRED:1};yd.createUnencrypted=function(){return new yd(0,0,0,null);};function zd(bm,cm){try{var em=new be(bm,cm);return Promise.resolve(em);}catch(dm){return Promise.reject(dm);}}function ae(bm){var cm=this.mediaKeys;cm&&cm!=bm&&de(cm,null);delete this.mediaKeys;(this.mediaKeys=bm)&&de(bm,this);return Promise.resolve();}function be(bm,cm){this.a=this.keySystem=bm;var dm=true;"org.w3.clearkey"==bm&&(this.a="webkit-org.w3.clearkey",dm=false);var em=false,fm;fm=document.getElementsByTagName("video");fm=fm.length?fm[0]:document.createElement("video");for(var gm=0;gm<cm.length;++gm){var hm=cm[gm],im={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:hm.initDataTypes,sessionTypes:["temporary"]},jm=false;if(hm.audioCapabilities)for(var km=0;km<hm.audioCapabilities.length;++km){var lm=hm.audioCapabilities[km];lm.contentType&&(jm=true,fm.canPlayType(lm.contentType.split(";")[0],this.a)&&(im.audioCapabilities.push(lm),em=true));}if(hm.videoCapabilities)for(km=0;km<hm.videoCapabilities.length;++km)lm=hm.videoCapabilities[km],lm.contentType&&(jm=true,fm.canPlayType(lm.contentType,this.a)&&(im.videoCapabilities.push(lm),em=true));jm||(em=fm.canPlayType("video/mp4",this.a)||fm.canPlayType("video/webm",this.a));"required"==hm.persistentState&&(dm?(im.persistentState="required",im.sessionTypes=["persistent-license"]):em=false);if(em){this.b=im;return;}}dm="Unsupported keySystem";if("org.w3.clearkey"==bm||"com.widevine.alpha"==bm)dm="None of the requested configurations were supported.";dm=Error(dm);dm.name="NotSupportedError";dm.code=DOMException.NOT_SUPPORTED_ERR;throw dm;}be.prototype.createMediaKeys=function(){var bm=new ce(this.a);return Promise.resolve(bm);};be.prototype.getConfiguration=function(){return this.b;};function ce(bm){this.g=bm;this.b=null;this.a=new oc();this.c=[];this.f={};}function de(bm,cm){bm.b=cm;qc(bm.a);cm&&(pc(bm.a,cm,"webkitneedkey",bm.Jb.bind(bm)),pc(bm.a,cm,"webkitkeymessage",bm.Ib.bind(bm)),pc(bm.a,cm,"webkitkeyadded",bm.Gb.bind(bm)),pc(bm.a,cm,"webkitkeyerror",bm.Hb.bind(bm)));}j=ce.prototype;j.createSession=function(bm){var cm=bm||"temporary";if("temporary"!=cm&&"persistent-license"!=cm)throw new TypeError("Session type "+bm+" is unsupported on this platform.");bm=this.b||document.createElement("video");bm.src||(bm.src="about:blank");cm=new fe(bm,this.g,cm);this.c.push(cm);return cm;};j.setServerCertificate=function(){return Promise.reject(Error("setServerCertificate not supported on this platform."));};j.Jb=function(bm){bm=xb({type:"encrypted",initDataType:"webm",initData:bm.initData});this.b.dispatchEvent(bm);};j.Ib=function(bm){var cm=ee(this,bm.sessionId);cm&&(bm=xb({type:"message",messageType:void 0==cm.keyStatuses.Ca()?"licenserequest":"licenserenewal",message:bm.message}),cm.b&&(cm.b.resolve(),cm.b=null),cm.dispatchEvent(bm));};j.Gb=function(bm){if(bm=ee(this,bm.sessionId))he(bm,"usable"),bm.a&&bm.a.resolve(),bm.a=null;};j.Hb=function(bm){var cm=ee(this,bm.sessionId);if(cm){var dm=Error("EME v0.1b key error");dm.errorCode=bm.errorCode;dm.errorCode.systemCode=bm.systemCode;!bm.sessionId&&cm.b?(dm.method="generateRequest",45==bm.systemCode&&(dm.message="Unsupported session type."),cm.b.reject(dm),cm.b=null):bm.sessionId&&cm.a?(dm.method="update",cm.a.reject(dm),cm.a=null):(dm=bm.systemCode,bm.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?he(cm,"output-restricted"):1==dm?he(cm,"expired"):he(cm,"internal-error"));}};function ee(bm,cm){var dm=bm.f[cm];return dm?dm:(dm=bm.c.shift())?(dm.sessionId=cm,bm.f[cm]=dm):null;}function fe(bm,cm,dm){sc.call(this,null);this.f=bm;this.h=false;this.a=this.b=null;this.c=cm;this.g=dm;this.sessionId="";this.expiration=NaN;this.closed=new xc();this.keyStatuses=new ie();}m(fe,sc);function ge(bm,cm,dm){if(bm.h)return Promise.reject(Error("The session is already initialized."));bm.h=true;var em;try{if("persistent-license"==bm.g){if(dm){em=qd("LOAD_SESSION|"+dm);}else{var gm=new Uint8Array(cm);em=qd("PERSISTENT|"+pd(gm));}}else em=new Uint8Array(cm);}catch(fm){return Promise.reject(fm);}bm.b=new xc();try{bm.f.webkitGenerateKeyRequest(bm.c,em);}catch(hm){if("InvalidStateError"!=hm.name)return bm.b=null,Promise.reject(hm);setTimeout(function(){try{this.f.webkitGenerateKeyRequest(this.c,em);}catch(im){this.b.reject(im),this.b=null;}}.bind(bm),10);}return bm.b;}j=fe.prototype;j.Ka=function(bm,cm){if(this.a){this.a.then(this.Ka.bind(this,bm,cm)).catch(this.Ka.bind(this,bm,cm));}else{this.a=bm;var dm,em;"webkit-org.w3.clearkey"==this.c?(dm=pd(new Uint8Array(cm)),em=JSON.parse(dm),"oct"!=em.keys[0].kty&&(this.a.reject(Error("Response is not a valid JSON Web Key Set.")),this.a=null),dm=rd(em.keys[0].k),em=rd(em.keys[0].kid)):(dm=new Uint8Array(cm),em=null);try{this.f.webkitAddKey(this.c,dm,em,this.sessionId);}catch(fm){this.a.reject(fm),this.a=null;}}};function he(bm,cm){bm.keyStatuses.Ha(cm);var dm=xb({type:"keystatuseschange"});bm.dispatchEvent(dm);}j.generateRequest=function(bm,cm){return ge(this,cm,null);};j.load=function(bm){return "persistent-license"==this.g?ge(this,null,bm):Promise.reject(Error("Not a persistent session."));};j.update=function(bm){var cm=new xc();this.Ka(cm,bm);return cm;};j.close=function(){if("persistent-license"!=this.g){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;this.f.webkitCancelKeyRequest(this.c,this.sessionId);}this.closed.resolve();return this.closed;};j.remove=function(){return "persistent-license"!=this.g?Promise.reject(Error("Not a persistent session.")):this.close();};function ie(){this.size=0;this.a=void 0;}var je;j=ie.prototype;j.Ha=function(bm){this.size=void 0==bm?0:1;this.a=bm;};j.Ca=function(){return this.a;};j.forEach=function(bm){this.a&&bm(je,this.a);};j.get=function(bm){if(this.has(bm))return this.a;};j.has=function(bm){var cm=je;return this.a&&td(new Uint8Array(bm),new Uint8Array(cm))?true:false;};function ke(bm){this.systemIds=[];this.cencKeyIds=[];this.a=[];bm=new gb(new DataView(bm.buffer));try{for(;ib(bm);){var dm=bm.a,em=kb(bm),fm=kb(bm);1==em?em=lb(bm):0==em&&(em=bm.b.byteLength-dm);if(1886614376!=fm){nb(bm,em-(bm.a-dm));}else{var gm=jb(bm);if(1<gm){nb(bm,em-(bm.a-dm));}else{nb(bm,3);var hm=sd(mb(bm)),im=[];if(0<gm)for(var jm=kb(bm),km=0;km<jm;++km){var lm=sd(mb(bm));im.push(lm);}var mm=kb(bm);nb(bm,mm);this.cencKeyIds.push.apply(this.cencKeyIds,im);this.systemIds.push(hm);this.a.push({start:dm,end:bm.a-1});bm.a!=dm+em&&nb(bm,em-(bm.a-dm));}}}}catch(cm){}}function le(bm,cm){try{var em=new me(bm,cm);return Promise.resolve(em);}catch(dm){return Promise.reject(dm);}}function me(bm,cm){this.keySystem=bm;for(var dm=false,em=0;em<cm.length;++em){var fm=cm[em],gm={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:fm.initDataTypes,sessionTypes:["temporary"]},hm=false;if(fm.audioCapabilities)for(var im=0;im<fm.audioCapabilities.length;++im){var jm=fm.audioCapabilities[im];if(jm.contentType){var hm=true,km=jm.contentType.split(";")[0];MSMediaKeys.isTypeSupported(this.keySystem,km)&&(gm.audioCapabilities.push(jm),dm=true);}}if(fm.videoCapabilities)for(im=0;im<fm.videoCapabilities.length;++im)jm=fm.videoCapabilities[im],jm.contentType&&(hm=true,km=jm.contentType.split(";")[0],MSMediaKeys.isTypeSupported(this.keySystem,km)&&(gm.videoCapabilities.push(jm),dm=true));hm||(dm=MSMediaKeys.isTypeSupported(this.keySystem,"video/mp4"));"required"==fm.persistentState&&(gm.persistentState="required",gm.sessionTypes=["persistent-license"]);if(dm){this.a=gm;return;}}dm=Error("Unsupported keySystem");dm.name="NotSupportedError";dm.code=DOMException.NOT_SUPPORTED_ERR;throw dm;}me.prototype.createMediaKeys=function(){var bm=new oe(this.keySystem);return Promise.resolve(bm);};me.prototype.getConfiguration=function(){return this.a;};function ne(bm){var cm=this.mediaKeys;cm&&cm!=bm&&pe(cm,null);delete this.mediaKeys;return (this.mediaKeys=bm)?pe(bm,this):Promise.resolve();}function oe(bm){this.a=new MSMediaKeys(bm);this.b=new oc();}oe.prototype.createSession=function(bm){if("temporary"!=(bm||"temporary"))throw new TypeError("Session type "+bm+" is unsupported on this platform.");return new qe(this.a);};oe.prototype.setServerCertificate=function(){return Promise.reject(Error("setServerCertificate not supported on this platform."));};function pe(bm,cm){function dm(){cm.msSetMediaKeys(em.a);cm.removeEventListener("loadedmetadata",dm);}qc(bm.b);if(!cm)return Promise.resolve();pc(bm.b,cm,"msneedkey",re);var em=bm;try{return 1<=cm.readyState?cm.msSetMediaKeys(bm.a):cm.addEventListener("loadedmetadata",dm),Promise.resolve();}catch(fm){return Promise.reject(fm);}}function qe(bm){sc.call(this,null);this.c=null;this.g=bm;this.b=this.a=null;this.f=new oc();this.sessionId="";this.expiration=NaN;this.closed=new xc();this.keyStatuses=new ue();}m(qe,sc);j=qe.prototype;j.generateRequest=function(bm,cm){this.a=new xc();try{this.c=this.g.createSession("video/mp4",new Uint8Array(cm),null),pc(this.f,this.c,"mskeymessage",this.yb.bind(this)),pc(this.f,this.c,"mskeyadded",this.wb.bind(this)),pc(this.f,this.c,"mskeyerror",this.xb.bind(this)),te(this,"status-pending");}catch(dm){this.a.reject(dm);}return this.a;};j.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"));};j.update=function(bm){this.b=new xc();try{this.c.update(new Uint8Array(bm));}catch(cm){this.b.reject(cm);}return this.b;};j.close=function(){try{this.c.close(),this.closed.resolve(),qc(this.f);}catch(bm){this.closed.reject(bm);}return this.closed;};j.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"));};function re(bm){var cm=bm.initData;if(cm){var dm=new ke(cm);if(1>=dm.a.length){bm=cm;}else{var em=[];for(bm=0;bm<dm.a.length;bm++)em.push(cm.subarray(dm.a[bm].start,dm.a[bm].end+1));cm=db(em,se);for(bm=dm=0;bm<cm.length;bm++)dm+=cm[bm].length;dm=new Uint8Array(dm);for(bm=em=0;bm<cm.length;bm++)dm.set(cm[bm],em),em+=cm[bm].length;bm=dm;}}else bm=cm;bm=xb({type:"encrypted",initDataType:"cenc",initData:bm});this.dispatchEvent(bm);}function se(bm,cm){return td(bm,cm);}j.yb=function(bm){this.a&&(this.a.resolve(),this.a=null);bm=xb({type:"message",messageType:void 0==this.keyStatuses.Ca()?"licenserequest":"licenserenewal",message:bm.message.buffer});this.dispatchEvent(bm);};j.wb=function(){this.a?(this.a.resolve(),this.a=null):this.b&&(te(this,"usable"),this.b.resolve(),this.b=null);};j.xb=function(){var bm=Error("EME v20140218 key error");bm.errorCode=this.c.error;if(null!=this.a){this.a.reject(bm),this.a=null;}else if(null!=this.b){this.b.reject(bm),this.b=null;}else switch(this.c.error.code){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:te(this,"output-not-allowed");default:te(this,"internal-error");}};function te(bm,cm){bm.keyStatuses.Ha(cm);var dm=xb({type:"keystatuseschange"});bm.dispatchEvent(dm);}function ue(){this.size=0;this.a=void 0;}var ve;j=ue.prototype;j.Ha=function(bm){this.size=void 0==bm?0:1;this.a=bm;};j.Ca=function(){return this.a;};j.forEach=function(bm){this.a&&bm(ve,this.a);};j.get=function(bm){if(this.has(bm))return this.a;};j.has=function(bm){var cm=ve;return this.a&&td(new Uint8Array(bm),new Uint8Array(cm))?true:false;};function we(){Navigator.prototype.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(HTMLMediaElement.prototype.webkitGenerateKeyRequest?(je=(new Uint8Array([0])).buffer,Navigator.prototype.requestMediaKeySystemAccess=zd,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=ae,i.MediaKeys=ce,i.MediaKeySystemAccess=be):i.MSMediaKeys?(ve=(new Uint8Array([0])).buffer,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=ne,i.MediaKeys=oe,i.MediaKeySystemAccess=me,Navigator.prototype.requestMediaKeySystemAccess=le):(Navigator.prototype.requestMediaKeySystemAccess=ka,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=la,i.MediaKeys=ma,i.MediaKeySystemAccess=na));}l("shaka.polyfill.MediaKeys.install",we);l("shaka.polyfill.installAll",function(){ga();ia();bb();qa();we();});var xe=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function ye(bm){var cm;bm instanceof ye?(ze(this,bm.U),this.Z=bm.Z,this.P=bm.P,af(this,bm.ha),this.R=bm.R,bf(this,bm.a.clone()),this.X=bm.X):bm&&(cm=String(bm).match(xe))?(ze(this,cm[1]||"",true),this.Z=cf(cm[2]||""),this.P=cf(cm[3]||"",true),af(this,cm[4]),this.R=cf(cm[5]||"",true),bf(this,cm[6]||"",true),this.X=cf(cm[7]||"")):this.a=new lf(null);}j=ye.prototype;j.U="";j.Z="";j.P="";j.ha=null;j.R="";j.X="";j.toString=function(){var bm=[],cm=this.U;cm&&bm.push(df(cm,ff,true),":");if(cm=this.P){bm.push("//");var dm=this.Z;dm&&bm.push(df(dm,ff,true),"@");bm.push(encodeURIComponent(cm).replace(/%25([0-9a-fA-F]{2})/g,"%$1"));cm=this.ha;null!=cm&&bm.push(":",String(cm));}if(cm=this.R)this.P&&"/"!=cm.charAt(0)&&bm.push("/"),bm.push(df(cm,"/"==cm.charAt(0)?hf:gf,true));(cm=this.a.toString())&&bm.push("?",cm);(cm=this.X)&&bm.push("#",df(cm,kf));return bm.join("");};j.resolve=function(bm){var cm=this.clone();"data"===cm.U&&(cm=new ye());var dm=!!bm.U;dm?ze(cm,bm.U):dm=!!bm.Z;dm?cm.Z=bm.Z:dm=!!bm.P;dm?cm.P=bm.P:dm=null!=bm.ha;var em=bm.R;if(dm){af(cm,bm.ha);}else if(dm=!!bm.R){if("/"!=em.charAt(0))if(this.P&&!this.R){em="/"+em;}else{var fm=cm.R.lastIndexOf("/");-1!=fm&&(em=cm.R.substr(0,fm+1)+em);}if(".."==em||"."==em){em="";}else if(-1!=em.indexOf("./")||-1!=em.indexOf("/.")){for(var fm=0==em.lastIndexOf("/",0),em=em.split("/"),gm=[],hm=0;hm<em.length;){var im=em[hm++];"."==im?fm&&hm==em.length&&gm.push(""):".."==im?((1<gm.length||1==gm.length&&""!=gm[0])&&gm.pop(),fm&&hm==em.length&&gm.push("")):(gm.push(im),fm=true);}em=gm.join("/");}}dm?cm.R=em:dm=""!==bm.a.toString();dm?bf(cm,bm.a.clone()):dm=!!bm.X;dm&&(cm.X=bm.X);return cm;};j.clone=function(){return new ye(this);};function ze(bm,cm,dm){bm.U=dm?cf(cm,true):cm;bm.U&&(bm.U=bm.U.replace(/:$/,""));}function af(bm,cm){if(cm){cm=Number(cm);if(isNaN(cm)||0>cm)throw Error("Bad port number "+cm);bm.ha=cm;}else bm.ha=null;}function bf(bm,cm,dm){cm instanceof lf?bm.a=cm:(dm||(cm=df(cm,jf)),bm.a=new lf(cm));}function cf(bm,cm){return bm?cm?decodeURI(bm):decodeURIComponent(bm):"";}function df(bm,cm,dm){return "string"==typeof bm?(bm=encodeURI(bm).replace(cm,ef),dm&&(bm=bm.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),bm):null;}function ef(bm){bm=bm.charCodeAt(0);return "%"+(bm>>4&15).toString(16)+(bm&15).toString(16);}var ff=/[#\/\?@]/g,gf=/[\#\?:]/g,hf=/[\#\?]/g,jf=/[\#\?@]/g,kf=/#/g;function lf(bm){this.b=bm||null;}lf.prototype.a=null;lf.prototype.c=null;function mf(bm,cm,dm){if(!bm.a&&(bm.a={},bm.c=0,bm.b))for(var em=bm.b.split("&"),fm=0;fm<em.length;fm++){var gm=em[fm].indexOf("="),hm=null,im=null;0<=gm?(hm=em[fm].substring(0,gm),im=em[fm].substring(gm+1)):hm=em[fm];hm=decodeURIComponent(hm.replace(/\+/g," "));im=im||"";mf(bm,hm,decodeURIComponent(im.replace(/\+/g," ")));}bm.b=null;(em=bm.a.hasOwnProperty(cm)&&bm.a[cm])||(bm.a[cm]=em=[]);em.push(dm);bm.c++;}lf.prototype.toString=function(){if(this.b)return this.b;if(!this.a)return "";var bm=[],cm;for(cm in this.a)for(var dm=encodeURIComponent(cm),em=this.a[cm],fm=0;fm<em.length;fm++){var gm=dm;""!==em[fm]&&(gm+="="+encodeURIComponent(em[fm]));bm.push(gm);}return this.b=bm.join("&");};lf.prototype.clone=function(){var bm=new lf();bm.b=this.b;if(this.a){var cm={},dm;for(dm in this.a)cm[dm]=this.a[dm].concat();bm.a=cm;bm.c=this.c;}return bm;};function nf(bm,cm,dm){bm=(new DOMParser()).parseFromString(bm,"text/xml");if(!bm)return null;cm=cm||[new ye("")];dm=dm||[new ye("")];return lg({gb:cm,u:dm},bm,of);}l("shaka.dash.mpd.parseMpd",nf);function of(){this.id=this.url=null;this.type="static";this.b=this.j=this.u=this.gb=null;this.h=5;this.f=this.c=this.g=null;this.i=1;this.a=[];}function pf(){this.g=this.f=this.c=this.u=this.a=this.start=this.id=null;this.b=[];}function qf(){this.i=this.b=this.height=this.width=this.contentType=this.lang=this.group=this.id=null;this.c=false;this.h=this.g=this.f=this.u=null;this.j=[];this.a=[];}function rf(){this.value=null;}function sf(){this.contentType=this.lang=this.id=null;}function tf(){this.a=this.b=this.g=this.u=this.fbQualityClass=this.fbQualityLabel=this.h=this.f=this.height=this.width=this.bandwidth=this.lang=this.id=null;this.c=[];}function uf(){this.b=this.a=this.c=this.f=null;}function vf(){this.parsedPssh=this.psshBox=null;}function wf(){this.url=null;}function xf(){this.url=null;}function yf(){this.u=null;this.h=1;this.c=this.b=this.f=this.a=this.g=null;}yf.prototype.clone=function(){var bm=new yf();bm.u=pg(this.u);bm.h=this.h;bm.g=this.g;bm.a=qg(this.a);bm.f=qg(this.f);bm.b=qg(this.b);bm.c=qg(this.c);return bm;};function zf(){this.a=this.url=null;}zf.prototype.clone=function(){var bm=new zf();bm.url=pg(this.url);bm.a=qg(this.a);return bm;};function ag(){this.a=this.url=null;}ag.prototype.clone=function(){var bm=new ag();bm.url=pg(this.url);bm.a=qg(this.a);return bm;};function bg(){this.u=null;this.a=1;this.c=this.g=null;this.i=0;this.h=null;this.b=[];this.f=null;}bg.prototype.clone=function(){var bm=new bg();bm.u=pg(this.u);bm.a=this.a;bm.g=this.g;bm.c=this.c;bm.i=this.i;bm.h=qg(this.h);bm.b=pg(this.b)||[];bm.f=qg(this.f);return bm;};function cg(){this.a=this.b=null;}cg.prototype.clone=function(){var bm=new cg();bm.b=pg(this.b);bm.a=qg(this.a);return bm;};function dg(){this.a=1;this.b=this.i=null;this.j=0;this.c=this.g=this.f=this.h=null;}dg.prototype.clone=function(){var bm=new dg();bm.a=this.a;bm.i=this.i;bm.b=this.b;bm.j=this.j;bm.h=this.h;bm.f=this.f;bm.g=this.g;bm.c=qg(this.c);return bm;};function eg(){this.a=[];}eg.prototype.clone=function(){var bm=new eg();bm.a=pg(this.a)||[];return bm;};function fg(){this.c=this.a=this.b=null;}fg.prototype.clone=function(){var bm=new fg();bm.b=this.b;bm.a=this.a;bm.c=this.c;return bm;};function gg(bm,cm){this.ga=bm;this.end=cm;}gg.prototype.clone=function(){return new gg(this.ga,this.end);};of.TAG_NAME="MPD";pf.TAG_NAME="Period";qf.TAG_NAME="AdaptationSet";rf.TAG_NAME="Role";sf.TAG_NAME="ContentComponent";tf.TAG_NAME="Representation";uf.TAG_NAME="ContentProtection";vf.TAG_NAME="cenc:pssh";wf.TAG_NAME="BaseURL";xf.TAG_NAME="Location";yf.TAG_NAME="SegmentBase";zf.TAG_NAME="RepresentationIndex";ag.TAG_NAME="Initialization";bg.TAG_NAME="SegmentList";cg.TAG_NAME="SegmentURL";dg.TAG_NAME="SegmentTemplate";eg.TAG_NAME="SegmentTimeline";fg.TAG_NAME="S";of.prototype.parse=function(bm,cm){this.url=bm.gb;this.id=rg(cm,"id",yg);this.type=rg(cm,"type",yg)||"static";this.b=rg(cm,"mediaPresentationDuration",tg);this.h=rg(cm,"minBufferTime",tg,this.h);this.g=rg(cm,"minimumUpdatePeriod",tg,this.g);this.c=rg(cm,"availabilityStartTime",sg,this.c);this.f=rg(cm,"timeShiftBufferDepth",tg,this.f);this.f=null;this.i=rg(cm,"suggestedPresentationDelay",tg,this.i);var dm=bm.u,em=ng(this,cm,wf);this.u=ig(dm,em);if(em=lg(this,cm,xf))this.j=jg(dm,em.url);this.a=ng(this,cm,pf);};pf.prototype.parse=function(bm,cm){this.id=rg(cm,"id",yg);this.start=rg(cm,"start",tg);this.a=rg(cm,"duration",tg);var dm=ng(this,cm,wf);this.u=ig(bm.u,dm);this.c=lg(this,cm,yf);this.f=lg(this,cm,bg);this.g=lg(this,cm,dg);this.b=ng(this,cm,qf);hg(this);};function hg(bm){for(var cm=[],dm=0;dm<bm.b.length;++dm){var em=bm.b[dm];null!=em.group&&(cm[em.group]=true);}for(dm=0;dm<bm.b.length;++dm)if(em=bm.b[dm],null==em.group){for(var fm=1;1==cm[fm];)++fm;cm[fm]=true;em.group=fm;}}qf.prototype.parse=function(bm,cm){var dm=lg(this,cm,sf)||{},em=lg(this,cm,rf);this.id=rg(cm,"id",yg);this.group=rg(cm,"group",xg);this.lang=rg(cm,"lang",yg,dm.lang);this.contentType=rg(cm,"contentType",yg,dm.contentType);this.width=rg(cm,"width",wg);this.height=rg(cm,"height",wg);this.b=rg(cm,"mimeType",yg);this.i=rg(cm,"codecs",yg);this.c=em&&"main"==em.value;this.lang&&(this.lang=cc(this.lang));dm=ng(this,cm,wf);this.u=ig(bm.u,dm);this.j=ng(this,cm,uf);!this.contentType&&this.b&&(this.contentType=this.b.split("/")[0]);this.f=bm.c?kg(this,cm,bm.c):lg(this,cm,yf);this.g=bm.f?kg(this,cm,bm.f):lg(this,cm,bg);this.h=bm.g?kg(this,cm,bm.g):lg(this,cm,dg);this.a=ng(this,cm,tf);!this.b&&this.a.length&&(this.b=this.a[0].f,!this.contentType&&this.b&&(this.contentType=this.b.split("/")[0]));};rf.prototype.parse=function(bm,cm){this.value=rg(cm,"value",yg);};sf.prototype.parse=function(bm,cm){this.id=rg(cm,"id",yg);this.lang=rg(cm,"lang",yg);this.contentType=rg(cm,"contentType",yg);this.lang&&(this.lang=cc(this.lang));};tf.prototype.parse=function(bm,cm){this.id=rg(cm,"id",yg);this.bandwidth=rg(cm,"bandwidth",wg);this.width=rg(cm,"width",wg,bm.width);this.height=rg(cm,"height",wg,bm.height);this.f=rg(cm,"mimeType",yg,bm.b);this.h=rg(cm,"codecs",yg,bm.i);this.fbQualityLabel=rg(cm,"FBQualityLabel",yg);this.fbQualityClass=rg(cm,"FBQualityClass",yg);this.lang=bm.lang;var dm=ng(this,cm,wf);this.u=ig(bm.u,dm);this.c=ng(this,cm,uf);this.g=bm.f?kg(this,cm,bm.f):lg(this,cm,yf);this.b=bm.g?kg(this,cm,bm.g):lg(this,cm,bg);this.a=bm.h?kg(this,cm,bm.h):lg(this,cm,dg);this.c=this.c.concat(bm.j);};uf.prototype.parse=function(bm,cm){this.f=cm;this.c=rg(cm,"schemeIdUri",yg);var dm=rg(cm,"cenc:default_KID",yg);dm&&(this.b=dm.replace(/[-]/g,""));this.a=lg(this,cm,vf);};vf.prototype.parse=function(bm,cm){var dm=og(cm);if(dm){this.psshBox=rd(dm);try{this.parsedPssh=new ke(this.psshBox);}catch(em){if(!(em instanceof RangeError))throw em;}}};wf.prototype.parse=function(bm,cm){this.url=og(cm);};xf.prototype.parse=function(bm,cm){this.url=og(cm);};yf.prototype.parse=function(bm,cm){this.u=bm.u||this.u;this.h=rg(cm,"timescale",wg,this.h);this.g=rg(cm,"presentationTimeOffset",xg,this.g);this.a=rg(cm,"indexRange",ug,this.a);this.f=rg(cm,"FBFirstSegmentRange",ug,this.f);this.b=lg(this,cm,zf)||this.b;this.c=lg(this,cm,ag)||this.c;};zf.prototype.parse=function(bm,cm){var dm=rg(cm,"sourceURL",yg);this.url=jg(bm.u,dm);this.a=rg(cm,"range",ug,qg(bm.a));};ag.prototype.parse=function(bm,cm){var dm=rg(cm,"sourceURL",yg);this.url=jg(bm.u,dm);this.a=rg(cm,"range",ug);};bg.prototype.parse=function(bm,cm){this.u=bm.u||this.u;this.a=rg(cm,"timescale",wg,this.a);this.g=rg(cm,"presentationTimeOffset",xg,this.g);this.c=rg(cm,"duration",wg,this.c);var dm=rg(cm,"startNumber",wg);null!=dm&&(this.i=dm);this.h=lg(this,cm,ag)||this.h;this.b=(dm=ng(this,cm,cg))&&0<dm.length?dm:this.b;this.f=lg(this,cm,eg)||this.f;};cg.prototype.parse=function(bm,cm){var dm=rg(cm,"media",yg);this.b=jg(bm.u,dm);this.a=rg(cm,"mediaRange",ug);};dg.prototype.parse=function(bm,cm){this.a=rg(cm,"timescale",wg,this.a);this.i=rg(cm,"presentationTimeOffset",xg,this.i);this.b=rg(cm,"duration",wg,this.b);var dm=rg(cm,"startNumber",xg);null!=dm&&(this.j=dm);this.h=rg(cm,"media",yg,this.h);this.f=rg(cm,"index",yg,this.f);this.g=rg(cm,"initialization",yg,this.g);this.c=lg(this,cm,eg)||this.c;};eg.prototype.parse=function(bm,cm){this.a=ng(this,cm,fg);};fg.prototype.parse=function(bm,cm){this.b=rg(cm,"t",xg);this.a=rg(cm,"d",xg);this.c=rg(cm,"r",vg);};function ig(bm,cm){if(!cm||0===cm.length)return bm;for(var dm=[],em=0;em<cm.length;em++){var fm=cm[em].url;null==bm||0===bm.length?dm.push(new ye(fm)):(fm=jg(bm.slice(0,1),fm),dm.push(fm[0]));}return dm;}function jg(bm,cm){if(!cm)return bm;var dm=new ye(cm);return bm?bm.map(function(em){return em.resolve(dm);}):[dm];}function kg(bm,cm,dm){var em=qg(dm);(cm=mg(cm,dm.constructor.TAG_NAME))&&em.parse(bm,cm);return em;}function lg(bm,cm,dm){var em=null;if(cm=mg(cm,dm.TAG_NAME))em=new dm(),em.parse(bm,cm);return em;}function mg(bm,cm){for(var dm=null,em=0;em<bm.childNodes.length;em++)if(bm.childNodes[em].tagName==cm){if(dm)return null;dm=bm.childNodes[em];}return dm;}function ng(bm,cm,dm){for(var em=[],fm=0;fm<cm.childNodes.length;fm++)if(cm.childNodes[fm].tagName==dm.TAG_NAME){var gm=new dm();gm.parse.call(gm,bm,cm.childNodes[fm]);em.push(gm);}return em;}function og(bm){bm=bm.firstChild;return bm.nodeType!=Node.TEXT_NODE?null:bm.nodeValue;}function pg(bm){return bm?bm.map(function(cm){return cm.clone();}):null;}function qg(bm){return bm?bm.clone():null;}function rg(bm,cm,dm,em){bm=dm(bm.getAttribute(cm));return null!=bm?bm:void 0!==em?em:null;}function sg(bm){if(!bm)return null;bm=Date.parse(bm);return isNaN(bm)?null:Math.floor(bm/1000);}function tg(bm){if(!bm)return null;var cm=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(bm);if(!cm)return null;bm=0;var dm=xg(cm[1]);dm&&(bm+=31536000*dm);(dm=xg(cm[2]))&&(bm+=2592000*dm);(dm=xg(cm[3]))&&(bm+=86400*dm);(dm=xg(cm[4]))&&(bm+=3600*dm);(dm=xg(cm[5]))&&(bm+=60*dm);cm=i.parseFloat(cm[6]);(cm=isNaN(cm)?null:cm)&&(bm+=cm);return bm;}function ug(bm){var cm=/([0-9]+)-([0-9]+)/.exec(bm);if(!cm)return null;bm=xg(cm[1]);if(null==bm)return null;cm=xg(cm[2]);return null==cm?null:new gg(bm,cm);}function vg(bm){bm=i.parseInt(bm,10);return isNaN(bm)?null:bm;}function wg(bm){bm=i.parseInt(bm,10);return 0<bm?bm:null;}function xg(bm){bm=i.parseInt(bm,10);return 0<=bm?bm:null;}function yg(bm){return bm;}function zg(bm,cm){this.url=bm;this.b=cm||new ah();this.g=this.j=this.h=0;this.a=null;this.c=new xc();this.f=null;}l("shaka.util.AjaxRequest",zg);function ah(){this.body=null;this.a=1;this.j=1000;this.c=0;this.method="GET";this.h="arraybuffer";this.b={};this.i=this.m=false;this.g=this.f=this.o=null;this.l=false;}var bh=true;function ch(bm){dh(bm);bm.b.body=null;bm.c.destroy();bm.c=null;bm.f=null;}function dh(bm){bm.a&&(bm.a.onload=null,bm.a.onreadystatechange=null,bm.a.onerror=null,bm.a.ontimeout=null);bm.a=null;}var eh=/(.*)\.(xx|fna)\.fbcdn\.net/;zg.prototype.i=function(){if(this.a)return this.c;if(0==this.url.lastIndexOf("data:",0)){var bm=this.url.split(":")[1].split(";").pop().split(","),cm=bm.pop(),cm="base64"==bm.pop()?i.atob(cm.replace(/-/g,"+").replace(/_/g,"/")):i.decodeURIComponent(cm);"arraybuffer"==this.b.h&&(cm=qd(cm).buffer);bm=JSON.parse(JSON.stringify(new XMLHttpRequest()));bm.response=cm;bm.responseText=cm.toString();cm=this.c;cm.resolve(bm);ch(this);return cm;}if(0==this.url.lastIndexOf("idb:",0))return this.A();this.h++;this.j=Date.now();this.g||(this.g=this.b.j);this.a=new XMLHttpRequest();var dm=this.url,cm=new ye(dm);bh&&(this.f&&!this.f.supportsCaching()||this.b.i)&&mf(cm.a,"_",Date.now());dm=eh.test(dm);null!=this.b.g&&dm&&mf(cm.a,"x-fb-dash-push-segments",this.b.g);null!=this.b.f&&dm&&mf(cm.a,"x-fb-dash-latest-segment-start-time",this.b.f);1==this.b.l&&mf(cm.a,"_nc_playing",1);dm=cm.toString();this.a.open(this.b.method,dm,true);this.a.responseType=this.b.h;this.a.timeout=this.b.c;this.a.withCredentials=this.b.m;this.a.onload=this.l.bind(this);this.a.onreadystatechange=this.m.bind(this);this.a.onerror=this.v.bind(this);this.a.ontimeout=this.o.bind(this);for(bm in this.b.b)this.a.setRequestHeader(bm,this.b.b[bm]);this.a.send(this.b.body);return this.c;};zg.prototype.send=zg.prototype.i;function fh(bm,cm,dm){cm=Error(cm);cm.type=dm;cm.status=bm.a.status;cm.url=bm.url;cm.method=bm.b.method;cm.body=bm.b.body;cm.Rb=bm.a;return cm;}zg.prototype.l=function(bm){this.f&&this.f.sample(Date.now()-this.j,bm.loaded);bm=[403];200<=this.a.status&&299>=this.a.status?(this.c.resolve(this.a),ch(this)):this.h<this.b.a&&-1===bm.indexOf(this.a.status)?gh(this):(bm=fh(this,"HTTP error.","net"),this.c.reject(bm),ch(this));};zg.prototype.m=function(){if(this.a.readyState==XMLHttpRequest.HEADERS_RECEIVED&&(this.a.ia=Date.now()-this.j,this.b.i)){var bm=Date.parse(this.a.getResponseHeader("Date"));bm&&(fb=bm-Date.now());}};zg.prototype.v=function(){var bm=fh(this,"Network failure.","net");this.c.reject(bm);ch(this);};zg.prototype.o=function(){if(this.h<this.b.a){gh(this);}else{var bm=fh(this,"Request timed out.","net");this.c.reject(bm);ch(this);}};function gh(bm){dh(bm);i.setTimeout(bm.i.bind(bm),bm.g*(1+.5*(2*Math.random()-1)));bm.g*=2;}function hh(bm,cm,dm,em){this.b=cm;this.h=dm||0;this.g=null!=em?em:null;this.c=this.a=null;this.j=bm;this.i=null;}var ih;l("shaka.util.FailoverUri",hh);function jh(bm,cm){return bm&&0!==bm.length?bm.map(function(dm){return dm.resolve(cm);}):[cm];}hh.setPrefetchCacheValueGetter=function(bm){ih=bm;};function kh(bm,cm,dm){if(bm.a)return bm.a;bm.a=lh(bm,0,cm||new ah(),dm);return bm.a;}hh.prototype.f=function(){if(this.c){this.a=null;var bm=this.c;if(bm.a&&bm.a.readyState!=XMLHttpRequest.DONE){bm.a.abort();var cm=fh(bm,"Request aborted.","aborted");bm.c.reject(cm);ch(bm);}this.i=this.c=null;}};function lh(bm,cm,dm,em){var fm=bm.b[cm].toString();if(bm.h||bm.g){var gm=bm.b[cm].P;!gm.endsWith("fbcdn.net")||gm.startsWith("interncache")||gm.endsWith("ak.fbcdn.net")?dm.b.Range="bytes="+(bm.h+"-"+(null!=bm.g?bm.g:"")):fm+="&bytestart="+bm.h+"&byteend="+bm.g;}bm.j&&(fm=bm.j(fm,dm.b)||fm);gm=null;ih&&(gm=ih(fm));gm||(bm.c=new zg(fm,dm),em&&(bm.c.f=em),gm=bm.c.i());fm=gm.then(dd(bm,function(hm){this.i=this.c=this.a=null;this.i=hm.a?new ye(hm.a):this.b[cm];hm.response.ia=hm.ia;return Promise.resolve(hm.response);}));return fm=fm.catch(dd(bm,function(hm){if(this.a&&cm+1<this.b.length)return this.a=lh(this,cm+1,dm,em);this.a=this.c=null;return Promise.reject(hm);}));}hh.prototype.clone=function(){return new hh(this.j,this.b.map(function(bm){return bm.clone();}),this.h,this.g);};hh.prototype.toString=function(){return this.b[0].toString();};function mh(bm,cm,dm,em){this.a=new ah();this.a.h="text";this.a.a=3;this.a.c=1000*(null!=cm?cm:0);this.a.g=null!=dm?dm:null;this.a.f=null!=em?em:null;this.a.i=true;this.b=bm;}function nh(bm){var cm=bm.b;return kh(cm,bm.a).then(function(dm){if(dm=nf(dm,cm.b,[cm.i]))return Promise.resolve(dm);dm=Error("MPD parse failure.");dm.type="dash";return Promise.reject(dm);});}function oh(bm,cm,dm,em){for(var fm=cm.a,gm=[],hm=0;hm<em;++hm){var im=hm+dm,jm=(im-1)*fm.b,km=jm/fm.a,lm=(jm+fm.b)/fm.a,im=ph(bm,cm,fm.j+im-1,jm);if(!im)return null;gm.push(new th(km,lm,im,jm));}return gm;}function ph(bm,cm,dm,em){if(!cm.a)return null;var fm=cm.a.h;if(!fm)return cm.u?new hh(bm,cm.u,0,null):null;dm=qh(fm,cm.id,dm,cm.bandwidth,em);if(!dm)return null;cm=jh(cm.u,dm);return new hh(bm,cm,0,null);}function qh(bm,cm,dm,em,fm){var gm={RepresentationID:cm,Number:dm,Bandwidth:em,Time:fm};bm=bm.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)d)?\$/g,function(im,jm,km){if("$$"==im)return "$";var lm=gm[jm];if(null==lm)return im;"RepresentationID"==jm&&km&&(km=void 0);im=lm.toString();km=i.parseInt(km,10)||1;km=Math.max(0,km-im.length);return Array(km+1).join("0")+im;});try{return new ye(bm);}catch(hm){if(hm instanceof URIError)return null;throw hm;}}function rh(bm,cm,dm){var em=0;cm*=dm;bm=bm.a;dm=[];for(var fm=0;fm<bm.length&&bm[fm].a;++fm){var gm=bm[fm].b,gm=null!=gm?gm:em,hm=bm[fm].c||0;0>hm&&(hm=bm[fm].a,hm=fm+1===bm.length?Math.ceil((bm[0].b+cm-gm)/hm)-1:Math.ceil((bm[fm+1].b-gm)/hm)-1);0<dm.length&&gm!=em&&(dm[dm.length-1].end=gm);for(var im=0;im<=hm;++im)em=gm+bm[fm].a,dm.push({start:gm,end:em}),gm=em;}return dm;}function sh(bm,cm){this.a=bm;this.b=cm||null;}sh.prototype.destroy=function(){this.a&&(this.a.f(),this.a=null);this.b=null;};sh.prototype.create=function(){return this.a?kh(this.a):Promise.resolve(this.b);};function th(bm,cm,dm,em){this.b=bm;this.a=cm;this.url=dm;this.c=null!=em?em:null;}function uh(bm,cm,dm){return new th(cm,dm,bm.url,null!=bm.c?bm.c:void 0);}function vh(bm,cm){for(var dm=bm.length-1;0<=dm;--dm){var em=bm[dm];if(cm>=em.b&&(null==em.a||cm<em.a))return dm;}return -1;}function wh(bm,cm){return bm.map(function(dm){return uh(dm,dm.b+cm,null!=dm.a?dm.a+cm:null);});}function xh(){}xh.prototype.parse=function(bm,cm,dm,em,fm){var gm=null;try{bm:{var im=[],jm=new gb(bm),km=kb(jm);if(1936286840!=kb(jm)){gm=null;}else{1==km&&(km=lb(jm));var lm=jb(jm);nb(jm,3);nb(jm,4);var mm=kb(jm);if(0==mm){gm=null;}else{var nm,om;0==lm?(nm=kb(jm),om=kb(jm)):(nm=lb(jm),om=lb(jm));nb(jm,2);var pm=jm.b.getUint16(jm.a,jm.c);jm.a+=2;bm=nm;cm=cm+km+om;for(om=km=0;om<pm;om++){var qm=kb(jm);nm=(qm&2147483648)>>>31;var lm=qm&2147483647,rm=kb(jm);kb(jm);if(1==nm){gm=null;break bm;}var sm;sm=0==om&&fm?fm:new hh(em,dm,cm,cm+lm-1);nm=bm/mm;var tm=(bm+rm)/mm;0===om&&(km=nm);im.push(new th(nm-km,tm-km,sm));bm+=rm;cm+=lm;}gm=im;}}};}catch(hm){if(!(hm instanceof RangeError))throw hm;}return gm;};function yh(bm){this.a=bm;this.V=0;this.j=[];}yh.prototype.S=function(){return Math.floor((this.j.length-1-this.j.lastIndexOf(true))/2);};yh.prototype.getConsecutiveUpdatesWithoutChanges=yh.prototype.S;yh.prototype.A=function(){return this.j.length-1-this.j.lastIndexOf(false);};yh.prototype.getConsecutiveUpdatesWithChanges=yh.prototype.A;yh.prototype.destroy=function(){this.a=null;};j=yh.prototype;j.length=function(){return this.a.length;};function zh(bm){if(0==bm.a.length)throw new RangeError("SegmentIndex: There is no first SegmentReference.");return bm.a[0];}j.w=function(){if(0==this.a.length)throw new RangeError("SegmentIndex: There is no last SegmentReference.");return this.a[this.a.length-1];};j.get=function(bm){if(0>bm||bm>=this.a.length)throw new RangeError("SegmentIndex: The specified index is out of range.");return this.a[bm];};j.ka=function(bm){bm=vh(this.a,bm);return 0<=bm?this.a[bm]:null;};j.Ea=function(bm){ai(this,bm);return true;};function ai(bm,cm){bm.V!=cm.V&&(cm=new yh(wh(cm.a,bm.V-cm.V)));if(0==bm.length()){bm.a=cm.a.slice(0);}else if(0!=cm.length()&&null!=bm.w().a&&!(null!=cm.w().a&&cm.w().a<bm.w().a)){if(bm.w().a<=zh(cm).b){var dm=uh(bm.w(),bm.w().b,zh(cm).b),dm=bm.a.slice(0,-1).concat([dm]);}else{var em;for(em=0;em<bm.a.length&&!(bm.a[em].a>=zh(cm).b);++em);bm.a[em].b<zh(cm).b?(dm=uh(bm.a[em],bm.a[em].b,zh(cm).b),dm=bm.a.slice(0,em).concat([dm])):(zh(bm).b>zh(cm).b||zh(cm),dm=bm.a.slice(0,em));}bm.a=dm.concat(cm.a);}}j.ja=function(bm){var cm=bm-this.V;if(0==cm)return 0;this.a=wh(this.a,cm);this.V=bm;return cm;};j.Aa=function(){return 0<this.length()?{start:zh(this).b,end:this.w().a}:{start:0,end:0};};function bi(bm,cm,dm,em){yh.call(this,bm);this.h=cm;this.B=dm;this.g=em;this.i=this.h.b||this.h.a.reduce(function(fm,gm){return null==gm.a?NaN:fm+gm.a;},0)||0;this.b=this.o=this.f=null;ci(this);}m(bi,yh);bi.prototype.destroy=function(){this.B=this.h=null;yh.prototype.destroy.call(this);};bi.prototype.ka=function(bm){ei(this,eb()/1000);return yh.prototype.ka.call(this,bm);};bi.prototype.Ea=function(bm){if(!(bm instanceof bi))return false;ai(this,bm);this.i=Math.max(this.i,bm.i);null==this.f?(this.g=bm.g,ci(this)):fi(this);return true;};function ci(bm){fi(bm);if(0!=bm.length()){bm.length();var cm=null!=bm.w().a?bm.w().a:bm.w().b;if(bm.h.c>bm.g){bm.f=cm;}else{var dm=bm.g-(bm.h.c+bm.B.start);0>dm?bm.f=cm:dm<Math.max(bm.w().b,bm.w().a||0)?(bm.w(),bm.f=cm):bm.f=dm;}bm.o=bm.w().b;bm.b=zh(bm).b;}}bi.prototype.ja=function(bm){bm=yh.prototype.ja.call(this,bm);Math.min.apply(null,this.a.filter(function(cm){return null!=cm.a;}).map(function(cm){return cm.a-cm.b;}));null!=this.f&&(this.o+=bm,this.b+=bm,this.f+=bm);return bm;};bi.prototype.Aa=function(){return di(this,eb()/1000);};function di(bm,cm){ei(bm,cm);if(null==bm.f||null==bm.o||null==bm.b)return {start:0,end:0};var dm=Number.POSITIVE_INFINITY;bm.i&&(dm=bm.i);var em=cm-bm.g,fm=bm.f+em;null!=bm.h.f&&(fm=fm-bm.b-bm.h.f,0<fm&&(bm.b+=fm));bm.b=Math.min(bm.b,dm);em=bm.o+em;if(em<bm.b)return {start:bm.b,end:bm.b};em=0<bm.length()?null!=bm.w().a?Math.min(em,bm.w().a):em:bm.b;em=Math.max(em,bm.b);em=Math.min(em,dm);return {start:bm.b,end:em};}function ei(bm,cm){fi(bm);if(null!=bm.h.f)if(null==bm.f){bm.length();}else{for(var dm=bm.f+(cm-bm.g),em=0,fm=0;fm<bm.a.length;++fm){var gm=null;fm<bm.a.length-1?gm=bm.a[fm+1].a:(gm=bm.a[fm],gm=null!=gm.a?gm.a+(gm.a-gm.b):null);if(null!=gm&&gm<dm-bm.h.f){++em;}else break;}0<em&&bm.a.splice(0,em);}}function fi(bm){if(bm.i){for(var cm=0,dm=bm.a.length-1;0<=dm;--dm)if(bm.a[dm].b>bm.i){++cm;}else break;0<cm&&bm.a.splice(-cm);}}function gi(bm,cm,dm,em,fm){var gm=1,hm=0,im;if(bm.c>em){im=null;}else{var jm=bm.i||0,km=bm.f||0;im=dm.a;im=im.b/im.a;var lm=em-(bm.c+cm.start);0>lm?im=null:(km=lm-2*im-km,0>km&&(km=0),km=Math.ceil(km/im)*im,lm-=im,0>lm?im=null:(jm=Math.floor(lm/im)*im-jm,0>jm&&(jm=0),jm=Math.floor(jm/im)*im,im={Wa:km/im+1,current:(jm>=km?jm:km)/im+1}));}im&&(gm=im.Wa,hm=im.current-im.Wa+1);gm=oh(fm,dm,gm,hm);if(null==gm)throw bm=Error("Failed to generate SegmentReferences."),bm.type="stream",bm;bi.call(this,gm,bm,cm,em);this.v=dm;this.m=this.c=0<this.length()?bm.c+cm.start+this.w().a:null;this.l=im?im.current+1:null;this.C=fm;}m(gi,bi);gi.prototype.destroy=function(){this.C=this.v=null;bi.prototype.destroy.call(this);};gi.prototype.ka=function(bm){var cm=eb()/1000;hi(this,cm);ei(this,cm);return yh.prototype.ka.call(this,bm);};gi.prototype.Ea=function(bm){if(null!=this.c||!(bm instanceof gi)||null==bm.c)return false;this.c=bm.c;this.m=bm.m;this.l=bm.l;this.g=bm.g;this.i=bm.i;ai(this,bm);hi(this,eb()/1000);ci(this);return true;};gi.prototype.ja=function(bm){bm=bi.prototype.ja.call(this,bm);null!=this.c&&(this.c+=bm,this.m+=bm);return bm;};gi.prototype.Aa=function(){var bm=eb()/1000;hi(this,bm);return di(this,bm);};function hi(bm,cm){if(null!=bm.c&&null!=bm.m&&null!=bm.l){var dm=bm.v.a,dm=dm.b/dm.a,em=Math.floor((bm.m+(cm-bm.g)-bm.c)/dm);if(0!=em){var fm=oh(bm.C,bm.v,bm.l,em);Array.prototype.push.apply(bm.a,wh(fm,bm.V));bm.c+=em*dm;bm.l+=em;}}}function ii(bm,cm,dm,em,fm){this.f=bm;this.b=cm;this.c=dm;this.h=em;this.a=null;this.g=fm;}ii.prototype.destroy=function(){this.g=this.c=this.b=this.f=null;this.a&&(this.a.destroy(),this.a=null);};ii.prototype.create=function(){if(this.a)return Promise.resolve(this.a);if("dynamic"==this.f.type){try{this.a=new gi(this.f,this.b,this.c,this.h,this.g);}catch(bm){return Promise.reject(bm);}}else{var cm;cm=this.c.a;if(cm=oh(this.g,this.c,1,Math.ceil(this.b.a/(cm.b/cm.a)))){if(0<cm.length){var dm=cm[cm.length-1];cm[cm.length-1]=uh(dm,dm.b,this.b.a);}cm=new yh(cm);}else cm=null;this.a=cm;if(!this.a)return cm=Error("Failed to generate SegmentReferences"),cm.type="stream",Promise.reject(cm);}return Promise.resolve(this.a);};function ji(bm,cm,dm,em,fm){this.c=bm;this.b=cm;this.g=dm;this.a=null;this.h=em;this.f=fm;}ji.prototype.destroy=function(){this.f=this.g=this.b=this.c=null;this.a&&(this.a.destroy(),this.a=null);};ji.prototype.create=function(){if(this.a)return Promise.resolve(this.a);var bm=this.g.b,cm=[];bm.f&&(cm=rh(bm.f,bm.a||1,this.b.a||0));var dm=0;bm.c&&bm.i?dm=(bm.i-1)*bm.c:0<cm.length&&(dm=cm[0].start-(bm.g||0));var em=dm,fm=bm.b.length;0<cm.length&&cm.length!=bm.b.length&&(fm=Math.min(cm.length,bm.b.length));for(var gm=[],hm=0;hm<fm;++hm){var im=bm.b[hm],jm=dm/bm.a,km=null,lm=null;bm.c?(km=dm+bm.c,lm=km/bm.a):0<cm.length?(km=cm[hm].end-(bm.g||0),lm=km/bm.a):(lm=jm+this.b.a,km=lm*bm.a);var dm=km,km=0,mm=null;im.a&&(km=im.a.ga,mm=im.a.end);lm=Math.min(this.b.a+em/bm.a,lm);gm.push(new th(jm,lm,new hh(this.f,im.b,km,mm)));}"dynamic"==this.c.type?this.a=new bi(gm,this.c,this.b,this.h):this.a=new yh(gm);return Promise.resolve(this.a);};function ki(bm,cm,dm,em,fm){this.b=bm;this.c=cm;this.f=dm;this.h=em;this.a=null;this.g=fm;}ki.prototype.destroy=function(){this.g=this.f=this.c=this.b=null;this.a&&(this.a.destroy(),this.a=null);};ki.prototype.create=function(){if(this.a)return Promise.resolve(this.a);for(var bm=this.f.a,cm=rh(bm.c,bm.a||1,this.c.a||0),dm=[],em=0;em<cm.length;++em){var fm=cm[em].start,gm=fm/bm.a,hm=cm[em].end/bm.a,im=ph(this.g,this.f,em+bm.j,fm);if(!im)return bm=Error("Failed to generate media URL."),bm.type="dash",Promise.reject(bm);var jm=(bm.i||0)/bm.a;dm.push(new th(gm-jm,hm-jm,im,fm));}"dynamic"==this.b.type?this.a=new bi(dm,this.b,this.c,this.h):this.a=new yh(dm);return Promise.resolve(this.a);};function li(){this.D=mi++;this.id=this.J=this.I=null;this.b=0;this.height=this.width=this.bandwidth=null;this.c=this.a="";this.switchReason=this.fbQualityClass=this.fbQualityLabel=null;this.f=[];this.O=false;this.H=true;}var mi=0;li.prototype.destroy=function(){this.I&&(this.I.destroy(),this.I=null);this.J&&(this.J.destroy(),this.J=null);};function ni(bm){var cm=bm.a||"";bm.c&&(cm+='; codecs="'+bm.c+'"');return cm;}function oi(){this.D=pi++;this.id=null;this.contentType=this.lang="";this.b=false;this.s=[];this.a=[];}var pi=0;oi.prototype.destroy=function(){for(var bm=0;bm<this.s.length;++bm)this.s[bm].destroy();this.a=this.s=null;};function qi(bm){for(var cm=[],dm=0;dm<bm.a.length;++dm){var em=new ti();em.id=bm.D;em.a=bm.a[dm];em.contentType=bm.contentType;em.b=bm.s.length?ni(bm.s[0]):"";cm.push(em);}return cm;}function ri(){this.id=null;this.start=0;this.b=null;this.a=[];}ri.prototype.destroy=function(){for(var bm=0;bm<this.a.length;++bm)this.a[bm].destroy();this.a=null;};function si(){this.b=false;this.i=this.g=this.f=null;this.c=0;this.a=[];this.h=false;}si.prototype.destroy=function(){for(var bm=0;bm<this.a.length;++bm)this.a[bm].destroy();this.a=null;};function ti(){this.id=0;this.a=null;this.b=this.contentType="";}function ui(bm,cm,dm,em,fm,gm){sc.call(this,bm);this.b=cm;this.a=new ed(dm,em,fm);this.M=0;this.A=this.F=this.c=null;this.G=false;this.g=this.v=null;this.m=false;this.j=null;this.i=false;this.h=new xc();this.l=this.f=false;this.o=0;this.L=15;this.T=this.K=false;this.N=gm;this.B=false;}m(ui,sc);ui.prototype.C=function(bm){null!=bm.initialStreamBufferSize&&(this.o=Number(bm.initialStreamBufferSize));null!=bm.streamBufferSize&&(this.L=Number(bm.streamBufferSize));null!=bm.addCdnDebugQueryParameters&&(this.K=Boolean(bm.addCdnDebugQueryParameters));null!=bm.useInitialBufferSizeWhenPaused&&(this.T=Boolean(bm.useInitialBufferSizeWhenPaused));null!=bm.segmentRequestTimeout&&(this.a.m=Number(bm.segmentRequestTimeout));};ui.prototype.destroy=function(){cj(this);this.h.destroy();this.c=this.h=null;this.a.destroy();this.S=this.b=this.a=null;};j=ui.prototype;j.oa=function(){return this.c;};j.Ba=function(){return this.F;};j.kb=function(bm){this.f||bm.then(function(){this.f=true;this.g||bj(this,0);}.bind(this)).catch(function(){});return this.h;};j.Da=function(){return this.l;};j.pa=function(bm,cm,dm,em){bm!=this.c&&(this.A=bm.J.create(),bm.I.create().then(dd(this,function(fm){if(this.b){var gm=this.c;this.c=bm;this.F=fm;this.G=true;this.v=em?em:null;this.m||(gm?cm&&vi(this,true,dm):bj(this,0));}})).catch(dd(this,function(fm){"aborted"!=fm.type&&(this.f?(fm=yb(fm),this.dispatchEvent(fm)):this.h.reject(fm));})));};j.hb=function(){return vi(this,false);};function vi(bm,cm,dm){bm.c&&!bm.m&&(bm.m=true,cj(bm),ld(bm.a).then(dd(bm,function(){var em=this.b.currentTime;if(!cm&&0<gd(this.a,em)&&0<=vh(this.a.b,em))return Promise.resolve();if(dm)return kd(this.a,this.b.currentTime+dm);this.B=true;return jd(this.a);})).then(dd(bm,function(){this.m=false;bj(this,0);})).catch(dd(bm,function(em){this.m=false;this.f?(em=yb(em),this.dispatchEvent(em)):this.h.reject(em);})));}j.ib=function(bm){return 0<gd(this.a,bm)&&0<=vh(this.a.b,bm);};j.sa=function(){};j.ya=function(){return true;};function wi(bm){var cm=bm.T&&bm.b.paused?bm.o:bm.L;return bm.i?Math.max(bm.o,cm):bm.o;}j.Fb=function(){if(this.i&&!this.f){this.g=null;}else{var bm;if(bm=this.f&&!this.l)bm=1<this.a.c.buffered.length?true:false;if(bm){vi(this,true);}else{this.g=null;bm=this.c;var cm=this.F,dm=this.b.currentTime;if(gd(this.a,this.i?dm:dm+(this.j||0))>=wi(this)){yi(this),bj(this,1000/(5*(Math.abs(this.b.playbackRate)||1)));}else{var em=xi(this,dm,cm);em?(cm=id(this.a,em,bm.b,this.A,this.K&&!this.b.paused),this.N&&"video"===bm.a.split("/")[0]&&this.N(em.b,em.a,{id:bm.id,reason:this.v}),this.A=null,this.G&&(this.G=false,em=this.v,this.v=null,zi(this,bm,em)),this.l=false,cm.then(dd(this,function(fm){var gm=fm.V;fm=fm.ob;this.i||(this.M=fm);null==this.j&&(this.j=gm);this.B&&0<gd(this.a,dm)&&(this.B=false,this.b.currentTime+=.001);bj(this,0);})).catch(dd(this,function(fm){if("aborted"!=fm.type){var gm=[0,404,410,502,503,504];"net"==fm.type&&-1!=gm.indexOf(fm.Rb.status)&&this.c&&bj(this,1000);fm=yb(fm);this.dispatchEvent(fm);}}))):(yi(this),this.f&&!this.l&&(this.l=true,aj(this)),bj(this,200));}}}};function xi(bm,cm,dm){bm=bm.a;var em=bm.b.length;bm=0<em?bm.b[em-1]:null;return null!=bm?null!=bm.a?dm.ka(bm.a):null:dm.ka(cm)||(dm.length()?dm.w():null);}function yi(bm){if(!bm.i&&null!=bm.j){bm.i=true;var cm=bm.a,dm=bm.j,em=dm-cm.o;0!=em&&(cm.b=wh(cm.b,em),cm.o=dm);bm.h.resolve(bm.j);}}function zi(bm,cm,dm){var em=cm.a.split("/")[0];cm=xb({type:"adaptation",bubbles:true,contentType:em,size:"video"!=em?null:{width:cm.width,height:cm.height},bandwidth:cm.bandwidth,reason:dm});bm.dispatchEvent(cm);}function aj(bm){var cm=xb({type:"ended"});bm.dispatchEvent(cm);}function bj(bm,cm){bm.g=i.setTimeout(bm.Fb.bind(bm),cm);}function cj(bm){null!=bm.g&&(i.clearTimeout(bm.g),bm.g=null);}j.za=function(){return this.M;};function dj(bm){this.b=bm;this.a=null;}dj.prototype.destroy=function(){this.a&&(this.a.destroy(),this.a=null);};dj.prototype.create=function(){if(this.a)return Promise.resolve(this.a);var bm=new th(0,null,this.b);this.a=new yh([bm]);return Promise.resolve(this.a);};function ej(bm,cm){sc.call(this,bm);this.b=cm;this.g=true;this.h=this.f=null;this.c=new xc();this.a=null;}m(ej,sc);ej.prototype.C=function(){};ej.prototype.destroy=function(){this.a&&this.b.removeChild(this.a);this.c.destroy();this.S=this.b=this.f=this.h=this.a=this.c=null;};j=ej.prototype;j.oa=function(){return this.f;};j.Ba=function(){return this.h;};j.kb=function(){return this.c;};j.Da=function(){return true;};j.pa=function(bm){bm.I.create().then(dd(this,function(cm){if(this.b){if(0==cm.length())return Promise.reject(Error("No subtitles URL available."));var dm=this.f;this.f=bm;this.h=cm;cm=zh(cm).url.b[0].toString();var em=this.ya();this.a&&(this.sa(false),this.b.removeChild(this.a));this.a=document.createElement("track");this.b.appendChild(this.a);this.a.src=cm;this.sa(em);cm=xb({type:"adaptation",bubbles:true,contentType:"text",size:null,bandwidth:bm.bandwidth});this.dispatchEvent(cm);dm||this.c.resolve(0);}}));};j.hb=function(){};j.ib=function(){return true;};j.sa=function(bm){this.g=bm;this.a&&(this.a.track.mode=bm?"showing":"disabled");};j.ya=function(){this.a&&(this.g="showing"==this.a.track.mode);return this.g;};function fj(){}fj.prototype.parse=function(bm,cm,dm,em){var fm=null;try{var hm,im=new ob(cm);if(440786851!=qb(im).id){hm=null;}else{var jm=qb(im);if(408125543!=jm.id){hm=null;}else{var km=jm.a.byteOffset,lm,mm=new ob(jm.a);for(cm=null;ib(mm.a);){var nm=qb(mm);if(357149030==nm.id){cm=nm;break;}}if(cm){for(var om=new ob(cm.a),mm=1e+06;ib(om.a);){var pm=qb(om);if(2807729==pm.id){mm=tb(pm);break;}}lm=mm/1e+09;}else lm=null;hm=lm?{Lb:km,Pb:lm}:null;}}if(hm){var qm=qb(new ob(bm));if(475249515!=qm.id){fm=null;}else{var rm=hm.Lb,sm=hm.Pb;bm=[];var tm=new ob(qm.a);for(hm=qm=-1;ib(tm.a);){var um=qb(tm);if(187==um.id){var vm,wm=new ob(um.a),xm=qb(wm);if(179!=xm.id){vm=null;}else{var ym=tb(xm),zm=qb(wm);if(183!=zm.id){vm=null;}else{for(var an=new ob(zm.a),km=0;ib(an.a);){var bn=qb(an);if(241==bn.id){km=tb(bn);break;}}vm={Qb:ym,Kb:km};}}if(vm){var cn=sm*vm.Qb,dn=rm+vm.Kb;if(0<=qm){var en=new hh(em,dm,hm,dn-1);bm.push(new th(qm,cn,en));}qm=cn;hm=dn;}}}0<=qm&&(en=new hh(em,dm,hm,null),bm.push(new th(qm,null,en)));fm=bm;}}else fm=null;}catch(gm){if(!(gm instanceof RangeError))throw gm;}return fm;};function gj(bm,cm,dm,em,fm,gm,hm,im){this.h=bm;this.j=cm;this.f=dm;this.a=em;this.g=fm;this.b=gm;this.l=hm;this.c=null;this.i=im;}gj.prototype.destroy=function(){this.i=this.j=this.h=null;this.a.f();this.a=null;this.b&&(this.b.f(),this.b=null);this.g&&(this.g.f(),this.g=null);this.c=null;};gj.prototype.create=function(){if("webm"==this.f){var bm=Error("WebM is not supported in this build configuration.");bm.type="app";return Promise.reject(bm);}if(this.c)return this.c;bm=[kh(this.a)];"webm"==this.f&&bm.push(kh(this.g));this.b&&kh(this.b);return this.c=Promise.all(bm).then(dd(this,function(cm){var dm=cm[0];cm=cm[1]||null;var em=null;"mp4"==this.f?(em=new xh(),em=em.parse(new DataView(dm),this.a.h,this.a.b,this.i,this.b)):"webm"==this.f&&(em=new fj(),em=em.parse(new DataView(dm),new DataView(cm),this.a.b,this.i));if(!em)return dm=Error("Failed to parse SegmentReferences from "+this.a.toString()+" (or one of its fallbacks)."),dm.type="stream",Promise.reject(dm);var fm;"dynamic"==this.h.type?fm=new bi(em,this.h,this.j,this.l):fm=new yh(em);return Promise.resolve(fm);}));};function hj(bm){this.a=bm;}function ij(bm,cm,dm){for(var em=eb()/1000,fm=0;fm<cm.a.length;++fm)for(var gm=cm.a[fm],hm=0;hm<gm.b.length;++hm){var im=gm.b[hm];if("text"!=im.contentType)for(var jm=0;jm<im.a.length;++jm){var km=im.a[jm],lm=0,lm=lm+(km.g?1:0),lm=lm+(km.b?1:0),lm=lm+(km.a?1:0);0==lm?(im.a.splice(jm,1),--jm):1!=lm&&(km.g?(km.b=null,km.a=null):km.b&&(km.a=null));}}jj(cm);for(fm=0;fm<cm.a.length;++fm)for(gm=cm.a[fm],hm=0;hm<gm.b.length;++hm){jm=im=gm.b[hm];km=null;for(lm=0;lm<jm.a.length;++lm){var mm=jm.a[lm].f||"";km?mm!=km&&(jm.a.splice(lm,1),--lm):km=mm;}0==im.a.length&&(gm.b.splice(hm,1),--hm);}"dynamic"==cm.type&&null==cm.c&&(cm.c=em);fm=new si();"dynamic"==cm.type&&(fm.b=true,fm.f=cm.g,fm.g=new hh(dm,cm.j||cm.url),fm.i=cm.c);fm.c=cm.h||5;for(gm=0;gm<cm.a.length;++gm){hm=cm.a[gm];if(null==hm.start)break;hm=kj(bm,cm,hm,em,dm);fm.a.push(hm);}return fm;}function jj(bm){if(bm.a.length){null==bm.a[0].start&&(bm.a[0].start=0);var cm=function(jm){return 0==jm||!!jm;};"dynamic"==bm.type&&(bm.b=null);cm(bm.b)&&1==bm.a.length&&!cm(bm.a[0].a)&&(bm.a[0].a=bm.b);for(var dm=0,em=true,fm=0;fm<bm.a.length;++fm){var gm=bm.a[fm-1],hm=bm.a[fm],im=bm.a[fm+1]||{start:bm.b};!cm(hm.start)&&gm&&cm(gm.start)&&cm(gm.a)&&(hm.start=gm.start+gm.a);!cm(hm.a)&&cm(im.start)&&(hm.a=im.start-hm.start);null!=hm.start&&null!=hm.a?dm+=hm.a:em=false;}cm(bm.b)||(fm=bm.a[bm.a.length-1],em?bm.b=dm:cm(fm.start)&&cm(fm.a)?bm.b=fm.start+fm.a:"dynamic"!=bm.type&&(bm.b=dm));}}function kj(bm,cm,dm,em,fm){var gm=new ri();gm.id=dm.id;gm.start=dm.start;gm.b=dm.a;var hm=new kc();dm.b.forEach(function(rm){hm.push(rm.contentType||"",rm);});for(var im=nc(hm),jm=0;jm<im.length;++jm){var km=new kc();hm.get(im[jm]).forEach(function(rm){km.push(rm.group,rm);});for(var lm=nc(km),mm=0;mm<lm.length;++mm){var nm=new kc();km.get(lm[mm]).forEach(function(rm){nm.push(rm.lang,rm);});for(var om=nc(nm),pm=0;pm<om.length;++pm){var qm=nm.get(om[pm]),qm=lj(bm,cm,dm,qm,em,fm);gm.a.push(qm);}}}return gm;}function lj(bm,cm,dm,em,fm,gm){n(em.every(function(pm){return pm.group==em[0].group&&(pm.lang||"")==(em[0].lang||"")&&(pm.contentType||"")==(em[0].contentType||"");}));var hm=new oi(),im=em.filter(function(pm){return null!=pm.id;});im.length==em.length&&(hm.id=im.map(function(pm){return pm.id;}).sort().reduce(function(pm,qm){return pm+","+qm;}));hm.lang=em[0].lang||"";hm.contentType=em[0].contentType||"";hm.b=em.some(function(pm){return pm.c;});for(var im={},jm=0;jm<em.length;++jm)for(var km=em[jm],lm=0;lm<km.a.length;++lm){var mm=km.a[lm],nm=oj(bm,mm),om=hm.a.slice(0);nj(nm,om);0==om.length&&0<hm.a.length||!(mm=qj(cm,dm,mm,fm,gm))||(hm.s.push(mm),hm.a=om,im[mm.D]=km);}if(hm.a.some(function(pm){return ""==pm.a;}))return hm.s.forEach(function(pm){pm.O=true;}),hm;bm=mj(em);for(jm=0;jm<hm.s.length;++jm)mm=hm.s[jm],km=im[mm.D],km==bm&&(mm.O=true);return hm;}function mj(bm){for(var cm=null,dm=null,em=0;em<bm.length;++em)for(var fm=bm[em],gm=0;gm<fm.a.length;++gm){var hm=fm.a[gm],hm=(hm.width||1)*(hm.height||1)*(hm.bandwidth||1);if(null==cm||hm<cm)cm=hm,dm=fm;}return dm;}function nj(bm,cm){if(0==cm.length){Array.prototype.push.apply(cm,bm);}else for(var dm=0;dm<cm.length;++dm){for(var em=false,fm=0;fm<bm.length;++fm){var gm=cm[dm],hm=bm[fm];if(gm.a==hm.a&&gm.h==hm.h&&gm.l==hm.l&&gm.g==hm.g&&gm.i==hm.i&&gm.f==hm.f&&gm.j==hm.j&&td(gm.c,hm.c)){em=true;wd(cm[dm],bm[fm].b);break;}}em||(cm.splice(dm,1),--dm);}}function oj(bm,cm){var dm=[];if(0==cm.c.length){dm.push(new ud());}else if(bm.a)for(var em=0;em<cm.c.length;++em)dm.push.apply(dm,pj(bm,cm.c[em]));return dm;}function pj(bm,cm){var dm=[];if(2!=bm.a.length)return [];var em=bm.a(cm.c||"",cm.f);if(!(em&&em instanceof Array))return [];for(var fm=0;fm<em.length;++fm){var gm,hm=em[fm];gm=new ud();if(hm){var im=hc(hm,"keySystem");if(null!=im){gm.a=im;}else throw Error("'keySystem' cannot be null.");var jm=hc(hm,"licenseServerUrl");if(null!=jm){gm.h=jm;}else if(im)throw Error("For encrypted streaming content, 'licenseServerUrl' cannot be null or empty.");im=fc(hm,"withCredentials");null!=im&&(gm.l=im);im=jc(hm,"licensePostProcessor",Function);null!=im&&(gm.m=im);im=jc(hm,"licensePreProcessor",Function);null!=im&&(gm.o=im);im=fc(hm,"distinctiveIdentifierRequired");null!=im&&(gm.g=im);im=fc(hm,"persistentStateRequired");null!=im&&(gm.i=im);im=hc(hm,"audioRobustness");null!=im&&(gm.f=im);im=hc(hm,"videoRobustness");null!=im&&(gm.j=im);im=jc(hm,"serverCertificate",Uint8Array);null!=im&&(gm.c=im);if(im=jc(hm,"initData",Object)){hm=jc(im,"initData",Uint8Array);if(null==hm)throw Error("'initData.initData' cannot be null.");im=hc(im,"initDataType");if(null==im)throw Error("'initData.initDataType' cannot be null.");gm.b.push({initData:new Uint8Array(hm.buffer),initDataType:im});}}0==gm.b.length&&cm.a&&cm.a.psshBox&&wd(gm,[{initData:cm.a.psshBox,initDataType:"cenc"}]);dm.push(gm);}return dm;}function qj(bm,cm,dm,em,fm){if(!dm.u||0===dm.u.length)return null;var gm=null,hm=1,im=0;if(dm.g){gm=dm.f.split("/")[1];if("mp4"!=gm&&"webm"!=gm){gm=null;}else{var jm=dm.g;"webm"!=gm||jm.c?jm.a||jm.b&&jm.b.a?(hm=jm.b,hm||(hm=new zf(),hm.url=dm.u,hm.a=jm.a?jm.a.clone():null),im=sj(hm,fm),hm=jm.c?sj(jm.c,fm):null,jm.f?(jm=jm.f,jm=new hh(fm,dm.u,jm.ga,jm.end)):jm=null,bm=new gj(bm,cm,gm,im,hm,jm,em,fm),cm=new sh(hm),em=new li(),em.I=bm,em.J=cm,gm=em):gm=null:gm=null;}hm=dm.g.h;im=dm.g.g;}else if(dm.b){gm=dm.b,!gm.c&&!gm.f&&1<gm.b.length?gm=null:gm.c||cm.a||gm.f||1!=gm.b.length?gm.f&&0===gm.f.a.length?gm=null:(gm=gm.h?sj(gm.h,fm):null,bm=new ji(bm,cm,dm,em,fm),cm=new sh(gm),em=new li(),em.I=bm,em.J=cm,gm=em):gm=null,hm=dm.b.a,im=dm.b.g;}else if(dm.a){bm:if(gm=dm.a,hm=0+(gm.f?1:0),hm+=gm.c?1:0,hm+=gm.b?1:0,0==hm?hm=false:(1!=hm&&(gm.f?(gm.c=null,gm.b=null):gm.c&&(gm.b=null)),hm=true),hm){hm=null;if(gm.g&&(hm=(gm=dm.a.g)?rj(dm,gm,ag):null,!hm)){gm=null;break bm;}gm=hm?sj(hm,fm):null;hm=dm.a;hm.f?(hm=dm.f.split("/")[1],"mp4"!=hm&&"webm"!=hm?bm=null:"webm"!=hm||gm?ph(fm,dm,1,0)?(im=(im=dm.a.f)?rj(dm,im,zf):null)?(im=sj(im,fm),bm=new gj(bm,cm,hm,im,gm,null,em,fm)):bm=null:bm=null:bm=null):bm=hm.h?hm.c?new ki(bm,cm,dm,em,fm):hm.b?"dynamic"!=bm.type&&null==cm.a?null:new ii(bm,cm,dm,em,fm):null:null;bm?(cm=new sh(gm),em=new li(),em.I=bm,em.J=cm,gm=em):gm=null;}else gm=null;;hm=dm.a.a;im=dm.a.i;}else "text"==dm.f.split("/")[0]&&(gm=new li(),gm.I=new dj(new hh(fm,dm.u)));if(!gm)return null;gm.id=dm.id;im&&(gm.b=-1*im/hm);gm.bandwidth=dm.bandwidth;gm.width=dm.width;gm.height=dm.height;gm.a=dm.f||"";gm.c=dm.h||"";gm.fbQualityLabel=dm.fbQualityLabel||null;gm.fbQualityClass=dm.fbQualityClass||null;for(bm=0;bm<dm.c.length;++bm)cm=dm.c[bm],cm.b&&gm.f.push(cm.b);return gm;}function rj(bm,cm,dm){cm=qh(cm,bm.id,null,bm.bandwidth,null);if(!cm)return null;dm=new dm();dm.url=jh(bm.u,cm);return dm;}function sj(bm,cm){var dm=bm.url,em=0,fm=null;bm.a&&(em=bm.a.ga,fm=bm.a.end);return new hh(cm,dm,em,fm);}function tj(){this.streamStats=null;this.droppedFrames=this.decodedFrames=NaN;this.bufferingTime=this.playTime=this.estimatedBandwidth=0;this.playbackLatency=NaN;this.bufferingHistory=[];this.bandwidthHistory=[];this.streamHistory=[];}function uj(bm,cm){var dm=new vj(cm);bm.streamHistory.push(new wj(dm));if(dm.videoHeight||!bm.streamStats)bm.streamStats=dm;}function vj(bm){this.videoWidth=bm.width;this.videoHeight=bm.height;this.videoMimeType=bm.a;this.videoBandwidth=bm.bandwidth;}function wj(bm){this.timestamp=eb()/1000;this.value=bm;}function xj(bm,cm,dm,em,fm){this.b=new hh(null,[new ye(bm)]);this.a=new ah();this.a.body=cm;this.a.method=dm;this.a.a=3;this.a.m=em;this.a.c=0;bm=fm||{};for(var gm in bm)this.a.b[gm]=bm[gm];}function yj(bm){return kh(bm.b,bm.a).then(function(cm){return Promise.resolve(new Uint8Array(cm));});}function zj(bm,cm,dm){sc.call(this,bm);this.c=cm;this.j=dm;this.a=this.h=null;this.i=new oc();this.b=[];this.f=[];this.m=0;this.g=new xc();this.l=null;}m(zj,sc);zj.prototype.destroy=function(){this.S=null;for(var bm=0;bm<this.f.length;++bm)this.f[bm].close().catch(function(){});this.f=[];this.b=this.a=this.h=null;this.g.destroy();this.g=null;this.i.destroy();this.i=null;this.l&&(i.clearTimeout(this.l),this.l=null);this.c=this.j=null;};zj.prototype.initialize=function(){var bm=new kc(),cm;cm=this.j;if(cm.C){cm=cm.a.a[0];for(var dm=[],em=0;em<cm.a.length;++em)dm.push.apply(dm,qi(cm.a[em]));cm=dm;}else cm=[];for(dm=0;dm<cm.length;++dm)em=cm[dm],em.a.a||em.b&&!hk(em.b)||bm.push(em.contentType,em);for(var dm={},em=false,fm=0;fm<cm.length;++fm){var gm=cm[fm];if(gm.a.a&&!bm.a.hasOwnProperty(gm.contentType)){var hm=gm.a.a,im=dm[hm];im||(im=gm.a,im={audioCapabilities:void 0,videoCapabilities:void 0,initDataTypes:void 0,distinctiveIdentifier:im.g?"required":"optional",persistentState:im.i?"required":"optional",sessionTypes:["temporary"]},dm[hm]=im);if(gm.b&&(hm=gm.contentType+"Capabilities",hm in im)){em=true;im[hm]||(im[hm]=[]);var jm;"audio"==gm.contentType?jm=gm.a.f:"video"==gm.contentType&&(jm=gm.a.j);im[hm].push({contentType:gm.b,robustness:jm});}}}if(!em)if(cm.length){this.a=cm[0].a;}else throw bm=Error("No DrmInfo exists!"),bm.type="drm",bm;if(0==Object.keys(dm).length)return gl(this.j,bm),this.g.resolve(),Promise.resolve();jm=new xc();dm=ak(dm,jm);dm=dm.then(this.v.bind(this,cm,bm));jm.reject(null);return dm;};function ak(bm,cm){for(var dm in bm)cm=cm.catch(function(em,fm){return navigator.requestMediaKeySystemAccess(em,[fm]);}.bind(null,dm,bm[dm]));return cm;}zj.prototype.v=function(bm,cm,dm){if(!this.c)return ck();for(var em=dm.keySystem,fm=dm.getConfiguration(),gm=["audio","video"],hm=0;hm<gm.length;++hm){var im=gm[hm];if(!cm.a.hasOwnProperty(im)){var jm=fm[im+"Capabilities"];if(jm){for(var jm=jm[0],km=[],lm={},mm=0;mm<bm.length;++mm){var nm=bm[mm],om=jm?nm.b==jm.contentType:nm.contentType==im;nm.a.a!=em||!om||nm.id in lm||(km.push(nm),lm[nm.id]=true,this.a=this.a?vd(this.a,nm.a):nm.a);}cm.set(im,km);}}}gl(this.j,cm);return dm.createMediaKeys().then(function(pm){this.h=pm;}.bind(this));};function bk(bm){return bm.c?bm.h?bm.c.setMediaKeys(bm.h).then(dd(bm,function(){return this.c?this.a.c?this.h.setServerCertificate(this.a.c):Promise.resolve():ck();})).then(dd(bm,function(){if(!this.c)return ck();for(var cm=0;cm<this.a.b.length;++cm){var dm=this.a.b[cm];this.o({type:"encrypted",initDataType:dm.initDataType,initData:dm.initData});}0==this.a.b.length&&pc(this.i,this.c,"encrypted",this.o.bind(this));})):Promise.resolve():ck();}function ck(){var bm=Error("EmeManager destroyed");bm.type="destroy";return Promise.reject(bm);}zj.prototype.o=function(bm){for(var cm=new Uint8Array(bm.initData),dm=0;dm<this.b.length;++dm)if(td(cm,this.b[dm].data))return;try{var fm=dk(this);}catch(em){cm=yb(em);this.dispatchEvent(cm);this.g.reject(em);return;}bm=fm.generateRequest(bm.initDataType,bm.initData);this.b.push({data:cm,Ga:fm});bm.catch(dd(this,function(gm){if(this.c){for(var hm=0;hm<this.b.length;++hm)if(this.b[hm].Ga==fm){this.b.splice(hm,1);break;}hm=yb(gm);this.dispatchEvent(hm);this.g.reject(gm);}}));this.f.push(fm);};function dk(bm){var cm=null,cm=bm.h.createSession();pc(bm.i,cm,"message",bm.B.bind(bm));pc(bm.i,cm,"keystatuseschange",bm.A.bind(bm));return cm;}zj.prototype.B=function(bm){ek(this,bm.target,this.a,bm.message);};zj.prototype.A=function(bm){bm=bm.target;var cm={};bm.keyStatuses.forEach(function(em,fm){if("string"==typeof em){var gm=em;em=fm;fm=gm;}if("com.microsoft.playready"==this.a.a&&16==em.byteLength){var gm=new DataView(em),hm=gm.getUint32(0,true),im=gm.getUint16(4,true),jm=gm.getUint16(6,true);gm.setUint32(0,hm,false);gm.setUint16(4,im,false);gm.setUint16(6,jm,false);}gm=sd(new Uint8Array(em));cm[gm]=fm;}.bind(this));if(bm.expiration<Date.now()){for(var dm=0;dm<this.b.length;++dm)if(this.b[dm].Ga==bm){this.b.splice(dm,1);break;}bm.close();this.f.splice(this.f.indexOf(bm),1);}jl(this.j,cm);};function ek(bm,cm,dm,em){em=fk(dm,em);yj(new xj(em.url,em.body,em.method,dm.l,em.headers)).then(dd(bm,function(fm){dm.m&&(fm=dm.m(fm));return cm.update(fm);})).then(dd(bm,function(){var fm=xb({type:"sessionReady",detail:cm});this.dispatchEvent(fm);this.m++;this.m>=this.f.length&&this.g.resolve();})).catch(dd(bm,function(fm){fm.Ga=cm;fm=yb(fm);this.dispatchEvent(fm);}));}function fk(bm,cm){var dm={url:bm.h,body:cm.slice(0),method:"POST",headers:{}};if("com.microsoft.playready"===bm.a){for(var em=String.fromCharCode.apply(null,new Uint16Array(dm.body)),em=(new DOMParser()).parseFromString(em,"application/xml"),fm=em.getElementsByTagName("name"),gm=em.getElementsByTagName("value"),hm=0;hm<fm.length;hm++)dm.headers[fm[hm].childNodes[0].nodeValue]=gm[hm].childNodes[0].nodeValue;dm.body=i.atob(em.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue);}if(!bm.o)return dm;bm.o(dm);dm.url=hc(dm,"url");if(null==dm.url)throw Error("'url' cannot be null.");if(!(dm.body instanceof ArrayBuffer||"string"==typeof dm.body||null==dm.body))throw new TypeError("'body' must be an ArrayBuffer, a string, or null.");dm.method=hc(dm,"method");if("GET"!=dm.method&&"POST"!=dm.method)throw Error("'method' must be either 'GET' or 'POST'.");dm.headers=jc(dm,"headers",Object);if(null==dm.headers)throw Error("'headers' cannot be null.");return dm;}function gk(bm){sc.call(this,null);this.a=bm;this.b=null;this.f=new oc();this.i=this.h=null;this.B=0;this.v=null;this.j=false;this.F=true;this.g=new tj();this.c={enableAdaptation:true,streamBufferSize:15,liveStreamEndTimeout:15,licenseRequestTimeout:0,mpdRequestTimeout:0,segmentRequestTimeout:0,preferredLanguage:"en",restrictions:new v()};this.l=1;this.C=null;this.o=false;}m(gk,sc);l("shaka.player.Player",gk);gk.version="v1.6.4-fb";gk.isBrowserSupported=function(){return !!i.MediaSource&&!!i.Promise&&!!Element.prototype.requestFullscreen&&!!document.exitFullscreen&&"fullscreenElement" in document&&!!i.Uint8Array;};gk.prototype.T=function(bm){this.F=bm;};gk.prototype.setResumeAfterBuffering=gk.prototype.T;function hk(bm){return "text/vtt"==bm?!!i.VTTCue:MediaSource.isTypeSupported(bm);}gk.isTypeSupported=hk;gk.setTextStyle=function(bm){var cm=document.getElementById("ShakaPlayerTextStyle");cm||(cm=document.createElement("style"),cm.id="ShakaPlayerTextStyle",document.head.appendChild(cm));for(cm=cm.sheet;cm.cssRules.length;)cm.deleteRule(0);cm.insertRule("::cue { "+x(bm)+" }",0);};gk.prototype.destroy=function(){return this.m().then(dd(this,function(){this.f.destroy();this.a=this.f=null;})).catch(function(){});};gk.prototype.destroy=gk.prototype.destroy;gk.prototype.m=function(){if(!this.b)return Promise.resolve();this.j&&nk(this);this.a.pause();qc(this.f);mk(this);kk(this);this.h&&(this.h.destroy(),this.h=null);this.a.src="";var bm=this.a.setMediaKeys(null);this.b&&(this.b.destroy(),this.b=null);this.j=false;this.g=new tj();return bm;};gk.prototype.unload=gk.prototype.m;gk.prototype.fa=function(bm){return ik(this,bm,false);};gk.prototype.load=gk.prototype.fa;gk.prototype.L=function(bm){return ik(this,bm,true);};gk.prototype.loadWithSilencedErrors=gk.prototype.L;function ik(bm,cm,dm){bl(cm,bm.a);var em=bm.m();bm.a.autoplay&&(p("load"),pc(bm.f,bm.a,"timeupdate",bm.ub.bind(bm)));cm.Ya(bm.c);cm.N=bm.C;bm.C=null;em=em.then(dd(bm,function(){return cm.Ia();}));em.catch(dd(bm,function(fm){cm.destroy();return Promise.reject(fm);}));return em.then(dd(bm,function(){if(!this.a)return jk();this.b=cm;pc(this.f,this.b,"seekrangechanged",this.Bb.bind(this));this.h=new zj(this,this.a,this.b);return this.h.initialize();})).then(dd(bm,function(){if(!this.a)return jk();pc(this.f,this.a,"error",this.Nb.bind(this));pc(this.f,this.a,"playing",this.Ab.bind(this));pc(this.f,this.a,"pause",this.zb.bind(this));return cl(this.b,this,this.a);})).then(dd(bm,function(){return this.a?bk(this.h):jk();})).then(dd(bm,function(){if(!this.a)return jk();lk(this);})).catch(dd(bm,function(fm){if(!this.a)return jk();if(true!==dm&&"destroy"!=fm.type){var gm=yb(fm);this.dispatchEvent(gm);}return this.m().then(function(){return Promise.reject(fm);});}));}function jk(){var bm=Error("Player destroyed");bm.type="destroy";return Promise.reject(bm);}j=gk.prototype;j.ub=function(){q("load");this.g.playbackLatency=r("load")/1000;this.f.qa(this.a,"timeupdate");};j.Nb=function(){if(this.a.error){var bm=this.a.error.code;bm!=MediaError.MEDIA_ERR_ABORTED&&(bm=Error(ok[bm]||"Unknown playback error."),bm.type="playback",bm=yb(bm),this.dispatchEvent(bm));}};j.Ab=function(){p("playing");!this.i&&0>this.l&&(this.a.playbackRate=0,this.A(this.a.currentTime,Date.now(),this.l));this.j&&nk(this);};j.zb=function(){q("playing");var bm=r("playing");if(!isNaN(bm)){var cm=this.g;cm.playTime+=bm/1000;}kk(this);};j.Bb=function(bm){this.B=bm.start;};j.jb=function(){if(!this.a.paused){q("playing");var bm=r("playing");if(!isNaN(bm)){var cm=this.g;cm.playTime+=bm/1000;p("playing");}}bm=this.g;cm=this.a;cm.getVideoPlaybackQuality&&(cm=cm.getVideoPlaybackQuality(),bm.decodedFrames=cm.totalVideoFrames,bm.droppedFrames=cm.droppedVideoFrames);return this.g;};gk.prototype.getStats=gk.prototype.jb;gk.prototype.ea=function(){return this.b?this.b.M():[];};gk.prototype.getVideoTracks=gk.prototype.ea;gk.prototype.ba=function(){return this.b?this.b.ca():[];};gk.prototype.getAudioTracks=gk.prototype.ba;gk.prototype.da=function(){return this.b?this.b.Za():[];};gk.prototype.getTextTracks=gk.prototype.da;gk.prototype.selectVideoTrack=function(bm,cm){return this.b?this.b.selectVideoTrack(bm,void 0==cm?true:cm):false;};gk.prototype.selectVideoTrack=gk.prototype.selectVideoTrack;gk.prototype.la=function(bm,cm,dm){return this.b?ll(this.b,"audio",bm,void 0==cm?true:cm,dm):false;};gk.prototype.selectAudioTrack=gk.prototype.la;gk.prototype.ma=function(bm){return this.b?ll(this.b,"text",bm,false):false;};gk.prototype.selectTextTrack=gk.prototype.ma;gk.prototype.aa=function(bm){this.b&&hl(this.b,bm);};gk.prototype.enableTextTrack=gk.prototype.aa;gk.prototype.N=function(bm){kk(this);0<=bm?this.a.playbackRate=bm:this.a.paused||(this.a.playbackRate=0,this.A(this.a.currentTime,Date.now(),bm));this.l=bm;};gk.prototype.setPlaybackRate=gk.prototype.N;gk.prototype.K=function(){return this.l;};gk.prototype.getPlaybackRate=gk.prototype.K;gk.prototype.na=function(bm){this.C=bm;};gk.prototype.setPlaybackStartTime=gk.prototype.na;gk.prototype.G=function(){return this.b?this.b.$a():false;};gk.prototype.isLive=gk.prototype.G;gk.prototype.$=function(bm){if(bm){var cm=fc(bm,"enableAdaptation");null!=cm&&(this.c.enableAdaptation=cm);cm=fc(bm,"usePlaybackRateForBuffering");null!=cm&&(this.o=cm);cm=gc(bm,"streamBufferSize",0);null!=cm&&(this.c.streamBufferSize=cm);cm=fc(bm,"addCdnDebugQueryParameters");null!=cm&&(this.c.addCdnDebugQueryParameters=cm);cm=gc(bm,"initialStreamBufferSize",0);null!=cm&&(this.c.initialStreamBufferSize=cm);cm=fc(bm,"includeStreamBufferSizeInStartOffset");null!=cm&&(this.c.includeStreamBufferSizeInStartOffset=cm);cm=gc(bm,"liveStreamEndTimeout",0);null!=cm&&(this.c.liveStreamEndTimeout=cm);cm=gc(bm,"licenseRequestTimeout",0);null!=cm&&(this.c.licenseRequestTimeout=cm);cm=gc(bm,"mpdRequestTimeout",0);null!=cm&&(this.c.mpdRequestTimeout=cm);cm=gc(bm,"minMpdRefreshInterval",0);null!=cm&&(this.c.minMpdRefreshInterval=cm);cm=fc(bm,"enableLiveInterruptionDetection");null!=cm&&(this.c.enableLiveInterruptionDetection=cm);cm=gc(bm,"liveInterruptionConsecutiveUpdatesWithoutChange");null!=cm&&(this.c.liveInterruptionConsecutiveUpdatesWithoutChange=cm);cm=gc(bm,"liveInterruptionConsecutiveUpdatesWithChange");null!=cm&&(this.c.liveInterruptionConsecutiveUpdatesWithChange=cm);cm=fc(bm,"liveSendPushHeaders");null!=cm&&(this.c.liveSendPushHeaders=cm);cm=gc(bm,"segmentRequestTimeout",0);null!=cm&&(this.c.segmentRequestTimeout=cm);cm=hc(bm,"preferredLanguage");null!=cm&&(this.c.preferredLanguage=cm);cm=jc(bm,"restrictions",v);null!=cm&&(this.c.restrictions=cm.clone());bm=fc(bm,"disableCacheBustingEvenThoughItMayAffectBandwidthEstimation");null!=bm&&(bh=!bm);this.b&&this.b.Ya(this.c);}};gk.prototype.configure=gk.prototype.$;gk.prototype.ca=function(){return this.c;};gk.prototype.getConfiguration=gk.prototype.ca;function kk(bm){bm.i&&(i.clearTimeout(bm.i),bm.i=null);}function lk(bm){mk(bm);bm.v=i.setTimeout(bm.M.bind(bm),100);}function mk(bm){bm.v&&(i.clearTimeout(bm.v),bm.v=null);}gk.prototype.A=function(bm,cm,dm){this.i=null;var em=(Date.now()-cm)/1000*dm;this.a.currentTime<this.B+(this.G()?1:.05)?this.a.pause():(em=Math.max(this.B,bm+em),this.a.currentTime=em,this.i=i.setTimeout(this.A.bind(this,bm,cm,dm),250));};function nk(bm){q("buffering");var cm=bm.g;cm.bufferingTime+=r("buffering")/1000;bm.o&&(bm.a.playbackRate=bm.l);bm.j=false;bm.dispatchEvent(xb({type:"bufferingEnd"}));}gk.prototype.M=function(){lk(this);if(!this.a.ended&&!this.a.seeking){var bm=this.a.buffered,cm=bm.length?bm.end(bm.length-1):0,bm=Math.max(cm-this.a.currentTime,0),dm=this.a.duration,em=this.a.currentTime;if(this.j){if(cm=Number(this.b.i.initialStreamBufferSize),dm=Math.max(dm-em-.05,0),fm||bm>cm||bm>dm)nk(this),this.F&&!this.o&&this.a.play();}else{var dm=isNaN(dm)?0:Math.max(dm-.05,0),fm;!(this.a.paused||cm>=dm||em>=dm)&&.5>bm&&(this.j=true,this.o?this.a.playbackRate=0:this.a.pause(),this.g.bufferingHistory.push(eb()/1000),p("buffering"),this.dispatchEvent(xb({type:"bufferingStart"})));}}};var ok={2:"A network failure occured while loading media content.",3:"The browser failed to decode the media content.",4:"The browser does not support the media content."};function pk(bm){for(var cm=0;cm<bm.length;++cm)for(var dm=bm[cm],em=0;em<dm.a.length;++em){for(var fm=dm.a[em],gm=fm,hm=0;hm<gm.s.length;++hm)hk(ni(gm.s[hm]))||(gm.s.splice(hm,1),--hm);0==fm.s.length&&(dm.a.splice(em,1),--em);}}function qk(bm){for(var cm=0;cm<bm.length;++cm)for(var dm=bm[cm],em=0;em<dm.a.length;++em)dm.a[em].s.sort(rk);}function rk(bm,cm){var dm=bm.bandwidth||Number.MAX_VALUE,em=cm.bandwidth||Number.MAX_VALUE;return dm<em?-1:dm>em?1:0;}function sk(bm){this.a=bm;}sk.prototype.destroy=function(){this.a.destroy();this.a=null;};sk.prototype.update=function(bm){var cm=tk(bm),dm=tk(this.a);return Promise.all([cm,dm]).then(dd(this,function(em){var fm=em[0];em=em[1];var gm=this.a.a;pk(gm);qk(gm);bm.b&&!this.a.b&&(bm.h=true);bm.f=this.a.f;bm.g=this.a.g?this.a.g.clone():null;bm.c=this.a.c;gm=[];uk(bm,this.a,fm,em,gm);fm=bm.a;pk(fm);qk(fm);return Promise.resolve(gm);}));};function tk(bm){function cm(em,fm){return em.concat(fm);}var dm=bm.a.map(function(em){return em.a;}).reduce(cm,[]).map(function(em){return em.s;}).reduce(cm,[]);bm=dm.map(function(em){return em.I.create();});return Promise.all(bm).then(function(em){for(var fm={},gm=0;gm<dm.length;++gm)fm[dm[gm].D]=em[gm];return Promise.resolve(fm);});}function uk(bm,cm,dm,em,fm){var gm=new kc();bm.a.forEach(function(km,lm){gm.push(km.id||""+lm,km);});var hm=new kc();cm.a.forEach(function(km,lm){hm.push(km.id||""+lm,km);});bm=nc(gm);for(cm=0;cm<bm.length;++cm){var im=bm[cm],jm=gm.get(im);1<jm.length||(im=hm.get(im))&&0!=im.length&&1==im.length&&(vk(jm[0],im[0],dm,em,fm),jm[0].b=im[0].b);}}function vk(bm,cm,dm,em,fm){var gm=new kc();bm.a.forEach(function(km,lm){gm.push(km.id||""+lm,km);});var hm=new kc();cm.a.forEach(function(km,lm){hm.push(km.id||""+lm,km);});bm=nc(gm);for(cm=0;cm<bm.length;++cm){var im=bm[cm],jm=gm.get(im);1<jm.length||(im=hm.get(im))&&0!=im.length&&1==im.length&&wk(jm[0],im[0],dm,em,fm);}}function wk(bm,cm,dm,em,fm){var gm=new kc();bm.s.forEach(function(mm,nm){gm.push(mm.id||""+nm,mm);});var hm=new kc();cm.s.forEach(function(mm,nm){hm.push(mm.id||""+nm,mm);});cm={};for(var im=nc(gm),jm=0;jm<im.length;++jm){var km=im[jm];cm[km]=km;var lm=gm.get(km);1<lm.length||((km=hm.get(km))&&0!=km.length?1==km.length&&(xk(lm[0],km[0],dm,em),lm[0].J=km[0].J,km[0].J=null,lm[0].b=km[0].b):(fm.push(lm[0]),bm.s.splice(bm.s.indexOf(lm[0]),1)));}im=nc(hm);for(jm=0;jm<im.length;++jm)km=im[jm],cm[km]||(cm[km]=km,km=hm.get(km),bm.s.push(km[0]));}function xk(bm,cm,dm,em){bm=dm[bm.D];em=em[cm.D];cm=bm.length();bm.Ea(em)&&(em=bm.length(),bm.j.push(cm!==em),50<bm.j.length&&bm.j.shift());}function yk(){this.a=this.b=null;this.f=new oc();this.c=Number.POSITIVE_INFINITY;this.i=true;this.g=false;}l("shaka.media.SimpleAbrManager",yk);yk.prototype.destroy=function(){this.f.destroy();this.a=this.b=this.f=null;};yk.prototype.initialize=function(bm,cm){this.b||this.a||(this.b=bm,this.a=cm);};yk.prototype.start=function(){this.b&&this.a&&!this.g&&(this.c=Date.now()+4000,pc(this.f,this.b,"bandwidth",this.l.bind(this)),pc(this.f,this.a,"adaptation",this.j.bind(this)),pc(this.f,this.a,"trackschanged",this.h.bind(this)),this.g=true);};yk.prototype.enable=function(bm){this.i=bm;};yk.prototype.getInitialVideoTrackId=function(){if(!this.b||!this.a)return null;var bm=zk(this);return bm?bm.id:null;};yk.prototype.getInitialSwitchReason=function(){return null;};yk.prototype.getInitialAudioTrackId=function(){return null;};yk.prototype.selectVideoTrack=function(bm,cm,dm){this.g&&this.a.selectVideoTrack(bm.id,cm,dm);};yk.prototype.l=function(){Date.now()<this.c||this.h();};yk.prototype.h=function(){if(this.i){var bm=zk(this);if(bm){if(bm.active){this.c=Date.now()+3000;return;}this.selectVideoTrack(bm,false);}this.c=Number.POSITIVE_INFINITY;}};yk.prototype.j=function(){this.c==Number.POSITIVE_INFINITY&&(this.c=Date.now()+30000);};function zk(bm){var cm=bm.a.M();if(0==cm.length)return null;cm.sort(fa);var dm;bm:{dm=bm.a.ca();for(var em=0;em<dm.length;++em)if(dm[em].active){dm=dm[em];break bm;}dm=null;};dm=dm?dm.bandwidth:0;bm=bm.b.getBandwidth();for(var em=cm[0],fm=0;fm<cm.length;++fm){var gm=cm[fm],hm=fm+1<cm.length?cm[fm+1]:{bandwidth:Number.POSITIVE_INFINITY};if(gm.bandwidth&&(hm=(hm.bandwidth+dm)/.85,bm>=(gm.bandwidth+dm)/.95&&bm<=hm&&(em=gm,em.active)))break;}return em;}function al(bm,cm,dm){sc.call(this,null);this.a=bm;this.ea=cm;this.j=new oc();this.g=new MediaSource();this.f=null;this.wa=0;this.La=false;this.va=0;this.Qa=this.Ra=this.na=3;this.ma=false;this.c=new kc();this.l=dm;this.l.initialize(cm,this);this.C=false;this.B="en";this.fa=false;this.G=null;this.v=new xc();this.bb=new xc();this.h=new v();this.A=null;this.Va=1;this.b={};this.aa=new xc();this.T=0;this.Ua=15;this.o=null;this.Ma=this.Pa=false;this.m={};this.N=this.L=this.K=null;this.i={};this.da=false;this.ab=null;}m(al,sc);l("shaka.player.StreamVideoSource",al);al.prototype.Ya=function(bm){null!=bm.streamBufferSize&&(this.i.streamBufferSize=bm.streamBufferSize);null!=bm.initialStreamBufferSize&&(this.i.initialStreamBufferSize=bm.initialStreamBufferSize);null!=bm.addCdnDebugQueryParameters&&(this.i.addCdnDebugQueryParameters=bm.addCdnDebugQueryParameters);null!=bm.segmentRequestTimeout&&(this.i.segmentRequestTimeout=bm.segmentRequestTimeout);zl(this);null!=bm.includeStreamBufferSizeInStartOffset&&(this.La=Boolean(bm.includeStreamBufferSizeInStartOffset));null!=bm.enableAdaptation&&this.l.enable(Boolean(bm.enableAdaptation));null!=bm.mpdRequestTimeout&&(this.va=Number(bm.mpdRequestTimeout));null!=bm.minMpdRefreshInterval&&(this.na=Number(bm.minMpdRefreshInterval)/1000);null!=bm.liveInterruptionConsecutiveUpdatesWithoutChange&&(this.Ra=Number(bm.liveInterruptionConsecutiveUpdatesWithoutChange));null!=bm.liveInterruptionConsecutiveUpdatesWithChange&&(this.Qa=Number(bm.liveInterruptionConsecutiveUpdatesWithChange));null!=bm.liveStreamEndTimeout&&(this.Ua=Number(bm.liveStreamEndTimeout));null!=bm.preferredLanguage&&(this.B=cc(String(bm.preferredLanguage)));null!=bm.liveSendPushHeaders&&(this.ma=Boolean(bm.liveSendPushHeaders));null!=bm.restrictions&&(this.h=bm.restrictions,this.C&&il(this));};al.prototype.destroy=function(){this.v.destroy();this.aa.destroy();this.aa=this.v=null;this.L&&(i.clearTimeout(this.L),this.L=null);this.K&&(i.clearTimeout(this.K),this.K=null);this.m=null;this.j.destroy();this.j=null;ec(this.b).forEach(function(bm){bm.destroy();});this.c=this.b=null;this.a&&(this.a.destroy(),this.a=null);this.l.destroy();this.S=this.h=this.G=this.f=this.g=this.ea=this.l=null;};function bl(bm,cm){pc(bm.j,bm.g,"sourceopen",bm.vb.bind(bm));cm.src=i.URL.createObjectURL(bm.g);}function cl(bm,cm,dm){if(!bm.C)return bm=Error("Cannot call attach() right now."),bm.type="app",Promise.reject(bm);bm.S=cm;bm.f=dm;bm.G=cm.jb();pc(bm.j,bm.ea,"bandwidth",bm.Ob.bind(bm));bm.a.b&&(pc(bm.j,cm,"bufferingStart",bm.tb.bind(bm)),pc(bm.j,cm,"bufferingEnd",bm.sb.bind(bm)));cm=bm.f.setMediaKeys(bm.f.mediaKeys);bm.bb.then(dd(bm,function(){nl(this).then(dd(this,function(){this.v&&this.v.resolve();})).catch(dd(this,function(em){this.v&&this.v.reject(em);}));}));return Promise.all([bm.v,cm]);}j=al.prototype;j.Ia=function(){if(this.C){var bm=Error("Cannot call load() right now.");bm.type="app";return Promise.reject(bm);}if(!this.a||0==this.a.a.length)return bm=Error("The manifest does not specify any content."),bm.type="stream",Promise.reject(bm);bm=this.a.a;pk(bm);qk(bm);if(0==this.a.a.length||0==this.a.a[0].a.length)return bm=Error("The manifest specifies content that cannot be displayed on this browser/platform."),bm.type="stream",Promise.reject(bm);this.C=true;this.i.initialStreamBufferSize=Math.max(this.i.initialStreamBufferSize||0,this.a.c);zl(this);il(this);return Promise.resolve();};function dl(bm){var cm=xb({type:"manifestIsUpdating",bubbles:true});bm.dispatchEvent(cm);}j.lb=function(bm){return bm.S()>=this.Ra;};j.mb=function(bm){return bm.A()>=this.Qa;};j.fb=function(bm){var cm=Date.now(),dm=this.K=null,em,fm;if(this.ma){em=2;var gm=this.b.video;if(gm=gm?gm.Ba():null)gm=gm.w(),null!=gm.c&&(fm=gm.c);}gm=this.a.g;(bm?this.cb():this.eb(gm,em,fm)).then(dd(this,function(hm){dm=new sk(hm);return dm.update(this.a);})).then(dd(this,function(hm){dm.destroy();dm=null;if(this.a.h){dl(this);}else if(this.da&&wl(this).some(this.lb.bind(this))){var im=xb({type:"manifestNotUpdating",bubbles:true});this.dispatchEvent(im);}else wl(this).every(this.mb.bind(this))&&dl(this);(im=xl(this,wl(this)))&&this.f.paused&&im.end>this.f.currentTime+10&&(this.f.currentTime=im.end);if(this.a.h&&this.f.currentTime+.5>this.T)return this.ra();for(im=0;im<hm.length;++im)fl(this,hm[im]);this.i.initialStreamBufferSize=Math.max(this.i.initialStreamBufferSize||0,this.a.c);this.i.useInitialBufferSizeWhenPaused=this.a.b;zl(this);il(this);0==Object.keys(this.b).length?nl(this):el(this,(Date.now()-cm)/1000);})).catch(dd(this,function(hm){dm&&(dm.destroy(),dm=null);"aborted"!=hm.type&&(hm=yb(hm),this.dispatchEvent(hm),this.a&&el(this,0));}));};j.eb=function(){return Promise.reject("Cannot update manifest with this VideoSource implementation.");};j.cb=function(){return Promise.reject("Cannot update manifest with this VideoSource implementation.");};function el(bm,cm){if(null!=bm.a.f){var dm=Math.max(bm.a.f,bm.na),dm=Math.max(dm-cm,0);bm.K=i.setTimeout(bm.fb.bind(bm,false),1000*dm);}}function fl(bm,cm){var dm=cm.a.split("/")[0],em=bm.b[dm];if(em&&em.oa()==cm){var fm=bm.c.get(cm.a.split("/")[0]).map(function(gm){return gm.s;}).reduce(function(gm,hm){return gm.concat(hm);},[]).filter(function(gm){return gm.O&&gm.H;});if(0==fm.length){dm=Error("All usable streams have been removed from the manifest.");dm.type="app";dm=yb(dm);bm.dispatchEvent(dm);return;}bm.m[dm].Ja==cm&&delete bm.m[dm];em.pa(fm[0],true);cm.destroy();}cm.destroy();}j.Mb=function(bm){this.ab=bm;};al.prototype.setTaggedTimeRangesEntryAdder=al.prototype.Mb;al.prototype.M=function(){if(!this.c.a.hasOwnProperty("video"))return [];for(var bm=this.b.video,bm=(bm=bm?bm.oa():null)?bm.D:0,cm=[],dm=this.c.get("video"),em=0;em<dm.length;++em)for(var fm=dm[em],gm=0;gm<fm.s.length;++gm){var hm=fm.s[gm];if(hm.O&&hm.H){var im=hm.D,hm=new ea(im,hm.bandwidth,hm.width,hm.height,hm.id,hm.fbQualityLabel,hm.fbQualityClass);im==bm&&(hm.active=true);cm.push(hm);}}return cm;};al.prototype.getVideoTracks=al.prototype.M;al.prototype.ca=function(){if(!this.c.a.hasOwnProperty("audio"))return [];for(var bm=this.b.audio,bm=(bm=bm?bm.oa():null)?bm.D:0,cm=[],dm=this.c.get("audio"),em=0;em<dm.length;++em)for(var fm=dm[em],gm=fm.lang,hm=0;hm<fm.s.length;++hm){var im=fm.s[hm];if(im.O&&im.H){var jm=im.D,im=new u(jm,im.bandwidth,gm,im.id);jm==bm&&(im.active=true);cm.push(im);}}return cm;};al.prototype.getAudioTracks=al.prototype.ca;al.prototype.Za=function(){if(!this.c.a.hasOwnProperty("text"))return [];for(var bm=this.b.text,cm=bm?bm.oa():null,cm=cm?cm.D:0,dm=[],em=this.c.get("text"),fm=0;fm<em.length;++fm)for(var gm=em[fm],hm=gm.lang,im=0;im<gm.s.length;++im){var jm=gm.s[im].D,km=new da(jm,hm);jm==cm&&(km.active=true,km.enabled=bm.ya());dm.push(km);}return dm;};al.prototype.getTextTracks=al.prototype.Za;function gl(bm,cm){if(bm.C){for(var dm={},em=bm.a.a[0],fm=0;fm<em.a.length;++fm){var gm=em.a[fm];dm[gm.D]=gm;}bm.c.a={};em=nc(cm);for(fm=0;fm<em.length;++fm){var gm=em[fm],hm=cm.get(gm);if("video"==gm){var im=hm[0].id;bm.c.push(gm,dm[im]);}else if("audio"==gm){for(var im=hm[0].b.split(";")[0],jm=0;jm<hm.length;++jm){var km=hm[jm];km.b.split(";")[0]==im&&bm.c.push(gm,dm[km.id]);}}else for(jm=0;jm<hm.length;++jm)im=hm[jm].id,bm.c.push(gm,dm[im]);}bm.fa=true;if(dm=bm.c.get("audio"))ml(bm,dm),bm.c.set("audio",dm),dm=dm[0].lang||bm.B,zb(2,bm.B,dm)&&(bm.fa=false);if(dm=bm.c.get("text"))ml(bm,dm),bm.c.set("text",dm),dm=dm[0].lang||bm.B,zb(2,bm.B,dm)||(bm.fa=false);}}al.prototype.selectVideoTrack=function(bm,cm,dm,em){return ll(this,"video",bm,cm,dm,em);};function hl(bm,cm){var dm=bm.b.text;dm&&dm.sa(cm);}function il(bm){if(bm.h){for(var cm=false,dm=0;dm<bm.a.a.length;++dm)for(var em=bm.a.a[dm],fm=0;fm<em.a.length;++fm){var gm=em.a[fm];if("video"==gm.contentType)for(var hm=0;hm<gm.s.length;++hm){var im=gm.s[hm],jm=im.H;im.H=true;bm.h.maxWidth&&im.width>bm.h.maxWidth&&(im.H=false);bm.h.maxHeight&&im.height>bm.h.maxHeight&&(im.H=false);bm.h.minHeight&&im.height<bm.h.minHeight&&(im.H=false);bm.h.maxBandwidth&&im.bandwidth>bm.h.maxBandwidth&&(im.H=false);bm.h.minBandwidth&&im.bandwidth<bm.h.minBandwidth&&(im.H=false);jm!=im.H&&(cm=true);}}0!=lc(bm.c).length&&cm&&(kl(bm),0<bm.M().length||(cm=Error("The application has restricted all video tracks!"),cm.type="app",cm=yb(cm),bm.dispatchEvent(cm)));}}al.prototype.$a=function(){return this.a?this.a.b:false;};al.prototype.isLive=al.prototype.$a;function jl(bm,cm){for(var dm,em=false,fm=new kc(),gm=lc(bm.c),hm=0;hm<gm.length;++hm)for(var im=gm[hm],jm=0;jm<im.s.length;++jm){var km=im.s[jm];km.f.forEach(function(lm){fm.push(lm,km);});}for(dm in cm)if(gm=ub[cm[dm]]||null,im=fm.get(dm)){for(hm=0;hm<im.length;++hm)km=im[hm],jm=km.O,km.O=!gm,jm!=km.O&&(em=true);}else yc(dm);em&&(kl(bm),em=bm.ca(),dm=bm.M(),em=bm.c.a.hasOwnProperty("audio")&&0==em.length,dm=bm.c.a.hasOwnProperty("video")&&0==dm.length,em||dm)&&(dm=Error("The key system has restricted all "+(em&&dm?"audio and video tracks.":em?"audio tracks.":"video tracks.")),dm.type="drm",dm=yb(dm),bm.dispatchEvent(dm));}function kl(bm){var cm=xb({type:"trackschanged",bubbles:true});bm.dispatchEvent(cm);}function ll(bm,cm,dm,em,fm,gm){if(!bm.c.a.hasOwnProperty(cm)||!bm.b[cm])return false;for(var hm=bm.c.get(cm),im=0;im<hm.length;++im)for(var jm=hm[im],km=0;km<jm.s.length;++km){var lm=jm.s[km];if(lm.D==dm){if(!lm.O||!lm.H)return false;if("text"!=cm&&!bm.Ma)return dm=bm.m[cm],bm.m[cm]={Ja:lm,Sa:null!=dm&&dm.Sa||em,Ta:null!=dm&&dm.Ta||fm,switchReason:gm},true;uj(bm.G,lm);bm.b[cm].pa(lm,em,fm,gm);return true;}}return false;}function ml(bm,cm){for(var dm=0;2>=dm;++dm)for(var em=0;em<cm.length;++em){var fm=cm[em];if(zb(dm,bm.B,fm.lang)){cm.splice(em,1);cm.splice(0,0,fm);return;}}for(em=0;em<cm.length;++em)if(fm=cm[em],fm.b){cm.splice(em,1);cm.splice(0,0,fm);break;}}j=al.prototype;j.vb=function(){this.j.qa(this.g,"sourceopen");this.bb.resolve();};function nl(bm){for(var cm=[],dm=["audio","video","text"],em=0;em<dm.length;++em){var fm=dm[em];bm.c.a.hasOwnProperty(fm)&&cm.push(bm.c.get(fm)[0]);}for(var gm=ol(bm,cm),em=0;em<dm.length;++em)if(fm=dm[em],bm.c.a.hasOwnProperty(fm)&&!gm[fm])return bm=Error("Unable to select an initial "+fm+" stream: all "+fm+" streams have been restricted (by the application or by the key system)."),bm.type="stream",Promise.reject(bm);cm=ec(gm).map(function(hm){return hm.I.create();});return Promise.all(cm).then(dd(bm,function(hm){if(!hm.every(function(im){return im.length();}))return hm=Error("Some streams are not available."),hm.type="stream",Promise.reject(hm);hm=xl(this,hm);if(!hm)return hm=Error("Some streams are not available."),hm.type="stream",Promise.reject(hm);if(!pl(this,gm))return hm=Error("Failed to create Stream objects."),hm.type="stream",Promise.reject(hm);this.l.start();rl(this,gm,hm);return Promise.resolve();})).catch(dd(bm,function(hm){if("aborted"!=hm.type)return Object.keys(this.b),this.a.b?(eb()<this.a.i?(hm=Math.max(this.a.i-Date.now()/1000,this.na),this.K=i.setTimeout(this.fb.bind(this,true),1000*hm)):el(this,0),Promise.resolve()):Promise.reject(hm);}));}function ol(bm,cm){for(var dm={},em=0;em<cm.length;++em){var fm=cm[em],gm=null;if("video"==fm.contentType){var hm=bm.l.getInitialVideoTrackId();if(null==hm)continue;gm=fm.s.filter(function(im){return im.D==hm;});if(0==gm.length)continue;gm=gm[0];}else if("audio"==fm.contentType){if(hm=bm.l.getInitialAudioTrackId(),gm=fm.s.filter(function(im){return im.D==hm;}),0==gm.length){gm=fm.s.filter(function(im){return im.O&&im.H;});if(0==gm.length)continue;gm=fm.s[Math.floor(gm.length/2)];}else gm=gm[0];}else 0<fm.s.length&&(gm=fm.s[0]);dm[fm.contentType]=gm;}return dm;}function pl(bm,cm){var dm={},em;for(em in cm){var fm=cm[em],fm="text"==em?new ej(bm,bm.f):ql(bm,fm);if(!fm)return ec(dm).forEach(function(gm){gm.destroy();}),false;dm[em]=fm;}bm.b=dm;return true;}function ql(bm,cm){var dm=new ui(bm,bm.f,bm.g,ni(cm),bm.ea,bm.ab);dm.C(bm.i);return dm;}function rl(bm,cm,dm){bm.Va=bm.f.playbackRate;bm.f.playbackRate=0;tl(bm,dm);var em;bm.N&&bm.N<=dm.end&&bm.N>=dm.start?em=bm.N:bm.a.b?(em=dm.end,bm.Pa=true):em=dm.start;pc(bm.j,bm.f,"seeking",bm.Cb.bind(bm));bm.f.currentTime!=em&&(bm.f.currentTime=em,bm.A=em);ul(bm,dm.start,dm.end);var fm=[],gm;for(gm in bm.b){dm=bm.b[gm];dd(bm,function(im){fm.push(im.kb(this.aa).then(dd(this,function(jm){var km=im.za();km>this.wa&&(this.wa=km);return jm;})));})(dm);pc(bm.j,dm,"ended",bm.Db.bind(bm));em=cm[gm];uj(bm.G,em);var hm=bm.l.getInitialSwitchReason()||void 0;dm.pa(em,false,void 0,hm);}Promise.all(fm).then(bm.rb.bind(bm)).catch(dd(bm,function(im){"destroy"!=im.type&&(im=yb(im),this.dispatchEvent(im));}));hl(bm,bm.fa);}j.rb=function(bm){n(bm&&bm.length==Object.keys(this.b).length);for(var cm=Number.POSITIVE_INFINITY,dm=Number.NEGATIVE_INFINITY,em=0;em<bm.length;++em)var fm=bm[em],cm=Math.min(cm,fm),dm=Math.max(dm,fm);bm=wl(this);for(em=0;em<bm.length;++em)bm[em].ja(dm);sl(this,bm,dm);em=lc(this.c).map(function(gm){return gm.s;}).reduce(function(gm,hm){return gm.concat(hm);},[]).map(function(gm){var hm=[gm.I.create()];gm.J&&hm.push(gm.J.create());return Promise.all(hm);});Promise.all(em).then(dd(this,function(gm){for(var hm=0;hm<gm.length;++hm)gm[hm][0].ja(dm);this.Ma=true;for(var im in this.m)gm=this.m[im],hm=this.b[im],uj(this.G,gm.Ja),hm.pa(gm.Ja,gm.Sa,gm.Ta,gm.switchReason);this.m={};})).catch(dd(this,function(gm){"aborted"!=gm.type&&(gm=yb(gm),this.dispatchEvent(gm));}));};function sl(bm,cm,dm){if(cm=xl(bm,cm))tl(bm,cm),ul(bm,cm.start,cm.end);0!=dm&&(dm=bm.f.currentTime+dm,bm.f.currentTime=dm,bm.A=dm);bm.Pa&&cm&&(bm.f.currentTime=cm.end);bm.f.playbackRate=bm.Va;bm.a.b&&null!=bm.a.f&&el(bm,0);yl(bm);bm.aa.resolve();}function tl(bm,cm){if(bm.a.b){isNaN(bm.g.duration)&&(bm.g.duration=cm.end+2592000);}else if(isNaN(bm.g.duration)||cm.end>bm.g.duration){bm.g.duration=cm.end;for(var dm=0;dm<bm.g.sourceBuffers.length;++dm)bm.g.sourceBuffers[dm].appendWindowEnd=cm.end;}}j.Eb=function(){this.L=null;yl(this);var bm=xl(this,wl(this));bm&&(this.a.b&&this.T!=bm.w&&(this.T=bm.w,null!=this.o&&(i.clearTimeout(this.o),this.o=null)),ul(this,bm.start,bm.end),this.f.paused||vl(this,this.f.currentTime,bm.start,bm.end));};function ul(bm,cm,dm){cm=xb({type:"seekrangechanged",bubbles:true,start:cm,end:dm});bm.dispatchEvent(cm);}j.Cb=function(){var bm=this.f.currentTime;if(null!=this.A){if(bm>=this.A-.01&&bm<=this.A+.01){this.A=null;return;}this.A=null;}var cm=xl(this,wl(this));if(cm){var dm=cm.end;(cm=vl(this,bm,cm.start,dm))||(bm<=dm+.01?cm=false:(this.f.currentTime=dm,cm=true));if(!cm)for(var em in this.b)this.b[em].hb();}};function vl(bm,cm,dm,em){if(cm>=dm-.01)return false;cm=0;if(bm.a.b){cm=.5;for(var fm in bm.b)if(!bm.b[fm].ib(dm+cm)){cm=bm.a.c;break;}}bm.f.currentTime=Math.min(dm+cm,em);return true;}j.Db=function(){if(!this.a.b){for(var bm in this.b)if(!this.b[bm].Da())return;this.ra();}};j.tb=function(){this.da=true;if(this.a.h&&this.f.currentTime+.5>this.T)return this.ra();ec(this.b).every(function(bm){return bm.Da();})&&(this.o=i.setTimeout(this.ra.bind(this),1000*this.Ua));};j.sb=function(){this.da=false;null!=this.o&&(i.clearTimeout(this.o),this.o=null);};j.Ob=function(){var bm=this.G,cm=this.ea.getBandwidth();bm.estimatedBandwidth=cm;bm.bandwidthHistory.push(new wj(cm));};j.ra=function(){this.da=false;this.o=null;this.g.endOfStream();};function wl(bm){return ec(bm.b).map(function(cm){return cm.Ba();}).filter(function(cm){return null!=cm;});}function xl(bm,cm){for(var dm=0,em=Number.POSITIVE_INFINITY,fm=Number.POSITIVE_INFINITY,gm=0;gm<cm.length;++gm){var hm=cm[gm].Aa(),dm=Math.max(dm,hm.start);null!=hm.end&&(em=Math.min(em,hm.end));cm[gm].length()&&(fm=Math.min(fm,cm[gm].w().a));}if(em==Number.POSITIVE_INFINITY)if(em=bm.a.a[0],em.b){em=(em.start||0)+em.b;}else return null;bm.a.b&&(gm=Math.max(bm.a.c,bm.La?bm.i.streamBufferSize||0:0),em=Math.max(em-gm,dm));if(dm>em)return null;em=Math.floor(100000*em)/100000;return {start:dm,end:em,w:fm};}function yl(bm){bm.a.b&&(bm.L=i.setTimeout(bm.Eb.bind(bm),1000));}function zl(bm){for(var cm in bm.b)bm.b[cm].C(bm.i);}j.za=function(){return this.wa;};al.prototype.getLongestInitResponseTime=al.prototype.za;function am(bm,cm,dm,em){dm||(dm=new uc());em||(em=new yk());al.call(this,null,dm,em);"string"===typeof bm?this.nb=bm:this.Xa=bm;this.$=null;this.ba=cm;this.la=[];this.Na=[];this.Oa=[];this.F=null;}m(am,al);l("shaka.player.DashVideoSource",am);am.prototype.pb=function(bm,cm,dm){this.la.push(bm);this.Na.push(cm||"");this.Oa.push(dm||"");};am.prototype.addExternalCaptions=am.prototype.pb;am.prototype.qb=function(bm){this.F=bm;};am.prototype.setNetworkCallback=am.prototype.qb;am.prototype.destroy=function(){this.$=this.F=this.ba=null;al.prototype.destroy.call(this);};am.prototype.Ia=function(){var bm=dd(this,function(em){this.$=em;for(var fm=0;fm<this.la.length;fm++){var gm=em,hm=this.la[fm],im=this.Na[fm],jm=this.Oa[fm];if(0!==gm.a.length){var km=new qf();km.contentType="text";km.lang=im||"en";km.c=true;im=new tf();im.bandwidth=0;im.f=jm||"text/vtt";im.u=[new ye(hm)];km.a.push(im);gm.a[0].b.push(km);hg(gm.a[0]);}}this.a=ij(new hj(this.ba),em,this.F);return al.prototype.Ia.call(this);});if(this.Xa)return bm(this.Xa);var cm=[new ye(this.nb)],dm;this.ma&&(dm=3);cm=new hh(this.F,cm);return nh(new mh(cm,this.va,dm)).then(bm);};am.prototype.eb=function(bm,cm,dm){return nh(new mh(bm,this.va,cm,dm)).then(dd(this,function(em){this.$=em;em=ij(new hj(this.ba),em,this.F);return Promise.resolve(em);}));};am.prototype.cb=function(){var bm=ij(new hj(this.ba),this.$,this.F);return Promise.resolve(bm);};}.bind(h,b))();f.exports=h.shaka;},null);
__d('VideoQualityClasses',['VideoQualityClassInternal'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports=c('VideoQualityClassInternal').orderedValues;},null);
__d('CustomAbrManager',['EventListener','SubscriptionsHandler','Shaka','VideoPlayerStreamSwitchReasons','VideoQualityClasses','VideoPlayerShakaExperiments'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('Shaka').player.VideoTrack;i.FIRST_SWITCH_INTERVAL=c('VideoPlayerShakaExperiments').firstSwitchInterval;i.MIN_SWITCH_INTERVAL=c('VideoPlayerShakaExperiments').minSwitchInterval;i.MIN_EVAL_INTERVAL=c('VideoPlayerShakaExperiments').minEvalInterval;i.BANDWIDTH_UPGRADE_TARGET=c('VideoPlayerShakaExperiments').bandwidthUpgradeTarget||.85;i.BANDWIDTH_DOWNGRADE_TARGET=c('VideoPlayerShakaExperiments').bandwidthDowngradeTarget||.95;function i(j){'use strict';this.$CustomAbrManager1=null;this.$CustomAbrManager2=null;this.$CustomAbrManager3=new (c('SubscriptionsHandler'))();this.$CustomAbrManager4=Number.POSITIVE_INFINITY;this.$CustomAbrManager5=true;this.$CustomAbrManager6=false;this.$CustomAbrManager7=j.maxWidth;this.$CustomAbrManager8=j.maxHeight;this.$CustomAbrManager9=j.forceHighQualityDefault;this.$CustomAbrManager10=j.initiallyForcedRepresentations;this.$CustomAbrManager11=null;this.$CustomAbrManager12=null;this.$CustomAbrManager13=null;}i.prototype.destroy=function(){'use strict';this.$CustomAbrManager3.release();this.$CustomAbrManager3.engage();this.$CustomAbrManager1=null;this.$CustomAbrManager2=null;this.$CustomAbrManager5=false;};i.prototype.setResolutionConstraint=function(j,k){'use strict';this.$CustomAbrManager7=j;this.$CustomAbrManager8=k;this.$CustomAbrManager14();};i.prototype.initialize=function(j,k){'use strict';if(this.$CustomAbrManager1||this.$CustomAbrManager2)return;this.$CustomAbrManager1=j;this.$CustomAbrManager2=k;};i.prototype.start=function(){'use strict';if(!this.$CustomAbrManager1||!this.$CustomAbrManager2||this.$CustomAbrManager6)return;this.$CustomAbrManager4=Date.now()+i.FIRST_SWITCH_INTERVAL;this.$CustomAbrManager3.addSubscriptions(c('EventListener').listen(this.$CustomAbrManager1,'bandwidth',this.$CustomAbrManager15.bind(this)),c('EventListener').listen(this.$CustomAbrManager2,'adaptation',this.$CustomAbrManager16.bind(this)),c('EventListener').listen(this.$CustomAbrManager2,'trackschanged',this.$CustomAbrManager17.bind(this)));this.$CustomAbrManager6=true;};i.prototype.$CustomAbrManager17=function(){'use strict';this.$CustomAbrManager14();};i.prototype.setPreferredVideoTrack=function(j){'use strict';var k=i.$CustomAbrManager18(this.$CustomAbrManager2.getVideoTracks()),l=k?h.compare(k,j)<0:false;this.$CustomAbrManager11=j;this.$CustomAbrManager14(null,l);};i.prototype.unsetPreferredVideoTrack=function(){'use strict';this.$CustomAbrManager11=null;this.$CustomAbrManager14(null,false);};i.prototype.enable=function(j){'use strict';this.$CustomAbrManager5=j;};i.prototype.getInitialVideoTrackId=function(){'use strict';if(!this.$CustomAbrManager1||!this.$CustomAbrManager2)return null;var j=this.$CustomAbrManager19();return j?j.id:null;};i.prototype.getInitialSwitchReason=function(){'use strict';return this.$CustomAbrManager13;};i.prototype.getInitialAudioTrackId=function(){'use strict';if(!this.$CustomAbrManager1||!this.$CustomAbrManager2)return null;var j=this.$CustomAbrManager20();return j?j.id:null;};i.prototype.selectVideoTrack=function(j,k,l,m){'use strict';if(!this.$CustomAbrManager6)return;this.$CustomAbrManager2.selectVideoTrack(j.id,k,l,m);};i.$CustomAbrManager18=function(j){'use strict';for(var k=0;k<j.length;++k)if(j[k].active)return j[k];return null;};i.prototype.$CustomAbrManager15=function(event){'use strict';if(Date.now()<this.$CustomAbrManager4)return;this.$CustomAbrManager14(event);};i.prototype.$CustomAbrManager14=function(event,j){'use strict';if(!this.$CustomAbrManager5)return;var k=this.$CustomAbrManager19();if(k){if(k.active){this.$CustomAbrManager4=Date.now()+i.MIN_EVAL_INTERVAL;return;}this.selectVideoTrack(k,!!j,0,this.$CustomAbrManager12);}this.$CustomAbrManager4=Number.POSITIVE_INFINITY;};i.prototype.$CustomAbrManager16=function(event){'use strict';if(this.$CustomAbrManager4==Number.POSITIVE_INFINITY)this.$CustomAbrManager4=Date.now()+i.MIN_SWITCH_INTERVAL;};i.prototype.$CustomAbrManager19=function(){var j=this;'use strict';var k=this.$CustomAbrManager2.getVideoTracks();if(k.length==0)return null;if(!this.$CustomAbrManager6)for(var l=0;l<k.length;l++)if(this.$CustomAbrManager10&&this.$CustomAbrManager10.includes(k[l].streamInfoID)){this.$CustomAbrManager12=c('VideoPlayerStreamSwitchReasons').FORCED;this.$CustomAbrManager13=c('VideoPlayerStreamSwitchReasons').FORCED;return k[l];}if(this.$CustomAbrManager11){var m=k.find(function(y){return y.id===this.$CustomAbrManager11.id;}.bind(this));if(m){this.$CustomAbrManager12=c('VideoPlayerStreamSwitchReasons').USER;return m;}}k.sort(h.compare);if(this.$CustomAbrManager9){var n=function(){var y=c('VideoQualityClasses').indexOf('hd'),z=k.filter(function(aa){return c('VideoQualityClasses').indexOf(aa.fbQualityClass)>=y;});j.$CustomAbrManager12=c('VideoPlayerStreamSwitchReasons').PREFER_HIGH_QUALITY;if(!z.length)return {v:k[k.length-1]};k=z;}();if(typeof n==="object")return n.v;}var o=k[0],p=this.$CustomAbrManager8,q=this.$CustomAbrManager7;k=k.filter(function(y){return y.width<=q||y.height<=p;});var r=i.$CustomAbrManager18(this.$CustomAbrManager2.getAudioTracks()),s=r?r.bandwidth:0,t=this.$CustomAbrManager1.getBandwidth();for(var l=0;l<k.length;l++){var u=k[l],v=l+1<k.length?k[l+1]:{bandwidth:Number.POSITIVE_INFINITY};if(!u.bandwidth)continue;var w=(u.bandwidth+s)/i.BANDWIDTH_DOWNGRADE_TARGET,x=(v.bandwidth+s)/i.BANDWIDTH_UPGRADE_TARGET;if(t>=w&&t<=x){o=u;if(o.active)break;}}this.$CustomAbrManager12=c('VideoPlayerStreamSwitchReasons').BANDWIDTH;return o;};i.prototype.$CustomAbrManager20=function(){'use strict';var j=this.$CustomAbrManager2.getAudioTracks();if(j.length==0)return null;if(!this.$CustomAbrManager6)for(var k=0;k<j.length;k++)if(this.$CustomAbrManager10&&this.$CustomAbrManager10.includes(j[k].streamInfoID))return j[k];return null;};f.exports=i;},null);
__d('VideoPlayerLiveStreamState',['RTISubscriptionManager','EventEmitter'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('EventEmitter'));i=h&&h.prototype;function j(k){'use strict';i.constructor.call(this);this.$VideoPlayerLiveStreamState1=c('RTISubscriptionManager').subscribe('video_broadcast/interrupt_'+k,this.$VideoPlayerLiveStreamState3.bind(this));this.$VideoPlayerLiveStreamState2=c('RTISubscriptionManager').subscribe('video_broadcast/ended_'+k,this.$VideoPlayerLiveStreamState4.bind(this));}j.prototype.unsubscribe=function(){'use strict';this.$VideoPlayerLiveStreamState2.unsubscribe();this.$VideoPlayerLiveStreamState1.unsubscribe();};j.prototype.$VideoPlayerLiveStreamState3=function(k){'use strict';var l=JSON.parse(k.payload||'{}')||{},m=l.time_position;if(m)m/=1000;this.emit('streamInterruptAt',m);};j.prototype.$VideoPlayerLiveStreamState4=function(k){'use strict';var l=JSON.parse(k.payload||'{}')||{},m=l.time_position;if(m)m/=1000;this.emit('streamEndedAt',m);};f.exports=j;},null);
__d('VideoPlayerHTML5Shaka',['invariant','Promise','BlobFactory','CacheStorage','CustomAbrManager','EventEmitter','EventListener','Event','Run','TaggedTimeRanges','VideoDashPrefetchCache','VideoPlayerLiveStreamState','VideoPlayerShakaExperiments','dispatchEvent','Shaka'],function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('Shaka').player,l=k.Player,m=k.DashVideoSource,n=k.VideoTrack,o=c('Shaka').dash.mpd.parseMpd,p=c('Shaka').util,q=p.EWMACacheBandwidthEstimator,r=p.EWMASignedURLBandwidthEstimator,s=p.FailoverUri,t=window.devicePixelRatio||1,u=new (c('CacheStorage'))('localstorage','_video_'),v=c('VideoPlayerShakaExperiments').enableAdaptation?new q(c('VideoPlayerShakaExperiments').cacheDelay,c('VideoPlayerShakaExperiments').cacheBandwidth,c('VideoPlayerShakaExperiments').useStoredBandwidthEstimate?u.get('bandwidthEstimate'):undefined):new r();s.setPrefetchCacheValueGetter(c('VideoDashPrefetchCache').getCacheValue);c('Run').onUnload(function(){return u.set('bandwidthEstimate',v.getBandwidth());});c('Shaka').polyfill.Fullscreen.install();function w(ca){var da=ca.getVideoTracks();da.sort(n.compare);var ea=da.reduce(function(fa,ga){return ga.fbQualityLabel=='hd'?ga:fa;});if(!ea)return da.pop().id;return ea.id;}function x(ca){var da=ca.getVideoTracks();da.sort(n.compare);return da.shift().id;}function y(ca){var da=c('BlobFactory').getBlob([ca]);return URL.createObjectURL(da);}function z(ca,event){var da=c('EventListener').capture(ca.parentNode,event,function(ea){if(ea.target!=ca)return;da.remove();c('Event').kill(ea);});}function aa(ca,da){'use strict';this.$DisabledAbrManager1=ca;this.$DisabledAbrManager2=da;}aa.prototype.initialize=function(ca,da){'use strict';this.$DisabledAbrManager3=da;};aa.prototype.start=function(){'use strict';if(this.$DisabledAbrManager4)return;this.$DisabledAbrManager4=true;if(this.$DisabledAbrManager2&&this.$DisabledAbrManager1)this.$DisabledAbrManager3.selectVideoTrack(w(this.$DisabledAbrManager3),false);};aa.prototype.enable=function(){'use strict';};aa.prototype.getInitialVideoTrackId=function(){'use strict';if(this.$DisabledAbrManager2)return x(this.$DisabledAbrManager3);var ca=this.$DisabledAbrManager1?w(this.$DisabledAbrManager3):x(this.$DisabledAbrManager3);return ca;};aa.prototype.setPreferredVideoTrack=function(ca){'use strict';if(this.$DisabledAbrManager4)this.$DisabledAbrManager3.selectVideoTrack(ca.id,true);};aa.prototype.unsetPreferredVideoTrack=function(){'use strict';};aa.prototype.destroy=function(){'use strict';this.$DisabledAbrManager3=null;};i=babelHelpers.inherits(ba,c('EventEmitter'));j=i&&i.prototype;function ba(ca,da,ea){var fa=this,ga=ea.videoID,ha=ea.width,ia=ea.height,ja=ea.manifest,ka=ea.manifestUrl,la=ea.isLive,ma=ea.playHighQualityTrack;'use strict';j.constructor.call(this);this.$VideoPlayerHTML5Shaka1=ma;this.$VideoPlayerHTML5Shaka2=false;this.$VideoPlayerHTML5Shaka3=false;this.$VideoPlayerHTML5Shaka4=null;this.$VideoPlayerHTML5Shaka5=1;this.$VideoPlayerHTML5Shaka6=false;this.$VideoPlayerHTML5Shaka7=ha;this.$VideoPlayerHTML5Shaka8=ia;if(!c('VideoPlayerShakaExperiments').improveRebufferLogging)(function(){fa.$VideoPlayerHTML5Shaka9=true;var na=c('EventListener').listen(ca,'playing',function(){this.$VideoPlayerHTML5Shaka9=false;na.remove();}.bind(fa));})();c('EventListener').listen(ca,'timeupdate',function(na){this.$VideoPlayerHTML5Shaka10(na.target.currentTime);}.bind(this));this.$VideoPlayerHTML5Shaka11=null;this.$VideoPlayerHTML5Shaka12=null;this.$VideoPlayerHTML5Shaka13=null;this.$VideoPlayerHTML5Shaka14=new l(ca);this.$VideoPlayerHTML5Shaka14.addEventListener('bufferingStart',function(){return this.$VideoPlayerHTML5Shaka15();}.bind(this));this.$VideoPlayerHTML5Shaka14.addEventListener('bufferingEnd',function(){return this.$VideoPlayerHTML5Shaka16();}.bind(this));this.$VideoPlayerHTML5Shaka14.addEventListener('error',function(na){return this.$VideoPlayerHTML5Shaka17(na);}.bind(this));this.$VideoPlayerHTML5Shaka14.addEventListener('adaptation',this.$VideoPlayerHTML5Shaka18.bind(this));this.$VideoPlayerHTML5Shaka14.addEventListener('trackschanged',this.$VideoPlayerHTML5Shaka19.bind(this));if(c('VideoPlayerShakaExperiments').enableLiveInterruptionDetection)this.$VideoPlayerHTML5Shaka14.addEventListener('manifestIsUpdating',this.$VideoPlayerHTML5Shaka20.bind(this));this.$VideoPlayerHTML5Shaka21=da;this.$VideoPlayerHTML5Shaka22=null;if(ja){this.$VideoPlayerHTML5Shaka23=o(ja);}else this.$VideoPlayerHTML5Shaka23=ka;this.$VideoPlayerHTML5Shaka24=this.$VideoPlayerHTML5Shaka25();this.$VideoPlayerHTML5Shaka26=this.$VideoPlayerHTML5Shaka27();this.$VideoPlayerHTML5Shaka28=new (c('TaggedTimeRanges'))(function(na,oa){return (na.id===oa.id&&na.reason===oa.reason);});this.$VideoPlayerHTML5Shaka26.setTaggedTimeRangesEntryAdder(function(na,oa,pa){this.$VideoPlayerHTML5Shaka28.add(na,oa,pa);}.bind(this));this.$VideoPlayerHTML5Shaka29=ca;this.$VideoPlayerHTML5Shaka14.configure({enableAdaptation:c('VideoPlayerShakaExperiments').enableAdaptation,appendPlayingQueryParam:c('VideoPlayerShakaExperiments').addCdnDebugQueryParameters,usePlaybackRateForBuffering:c('VideoPlayerShakaExperiments').improveRebufferLogging,streamBufferSize:la?c('VideoPlayerShakaExperiments').liveStreamBufferSize:c('VideoPlayerShakaExperiments').streamBufferSize,initialStreamBufferSize:la?c('VideoPlayerShakaExperiments').liveInitialStreamBufferSize:c('VideoPlayerShakaExperiments').initialStreamBufferSize,includeStreamBufferSizeInStartOffset:c('VideoPlayerShakaExperiments').includeStreamBufferSizeInStartOffset,minMpdRefreshInterval:c('VideoPlayerShakaExperiments').minMpdRefreshInterval,disableCacheBustingEvenThoughItMayAffectBandwidthEstimation:true,liveStreamEndTimeout:c('VideoPlayerShakaExperiments').liveStreamEndTimeout/1000,enableLiveInterruptionDetection:c('VideoPlayerShakaExperiments').enableLiveInterruptionDetection,liveInterruptionConsecutiveUpdatesWithoutChange:c('VideoPlayerShakaExperiments').liveInterruptionConsecutiveUpdatesWithoutChange,liveInterruptionConsecutiveUpdatesWithChange:c('VideoPlayerShakaExperiments').liveInterruptionConsecutiveUpdatesWithChange,liveSendPushHeaders:c('VideoPlayerShakaExperiments').liveSendPushHeaders});if(la&&c('VideoPlayerShakaExperiments').enableLiveInterruptionDetection){this.$VideoPlayerHTML5Shaka30=new (c('VideoPlayerLiveStreamState'))(ga);this.$VideoPlayerHTML5Shaka30.addListener('streamInterruptAt',this.$VideoPlayerHTML5Shaka31.bind(this));}this.$VideoPlayerHTML5Shaka14.load(this.$VideoPlayerHTML5Shaka26);}ba.prototype.getEstimatedBandwidth=function(){'use strict';return v.getBandwidth();};ba.prototype.$VideoPlayerHTML5Shaka10=function(ca){'use strict';var da=this.$VideoPlayerHTML5Shaka28.get(ca);if(!da)return;var ea=da.id,fa=da.reason;if(this.$VideoPlayerHTML5Shaka22!==ea){var ga=this.$VideoPlayerHTML5Shaka22;this.$VideoPlayerHTML5Shaka22=ea;this.emit('representation_ended',{representationID:ga,nextRepresentationID:ea,streamSwitchReason:fa});}};ba.prototype.getStreamInfoIDForTimePosition=function(ca){'use strict';var da=this.$VideoPlayerHTML5Shaka28.get(ca),ea=null;if(da)ea=da.id;return ea;};ba.prototype.getAvailableVideoQualities=function(){'use strict';if(this.$VideoPlayerHTML5Shaka2)return this.$VideoPlayerHTML5Shaka11;var ca=this.$VideoPlayerHTML5Shaka26.getVideoTracks();ca.sort(n.compare);return ca.map(function(da){return da.fbQualityLabel;});};ba.prototype.getSelectedVideoQuality=function(){'use strict';if(this.$VideoPlayerHTML5Shaka2)return this.$VideoPlayerHTML5Shaka12;var ca=this.$VideoPlayerHTML5Shaka26.getVideoTracks(),da=ca.find(function(ea){return ea.active;});return da?da.fbQualityLabel:null;};ba.prototype.canAutoSelectVideoQuality=function(){'use strict';return c('VideoPlayerShakaExperiments').enableAdaptation;};ba.prototype.setPreferredVideoQuality=function(ca){'use strict';var da=this.$VideoPlayerHTML5Shaka26.getVideoTracks().find(function(ea){return ca==ea.fbQualityLabel;});if(da){this.$VideoPlayerHTML5Shaka13=ca;this.$VideoPlayerHTML5Shaka24.setPreferredVideoTrack(da);}};ba.prototype.unsetPreferredVideoQuality=function(){'use strict';this.$VideoPlayerHTML5Shaka13=null;this.$VideoPlayerHTML5Shaka24.unsetPreferredVideoTrack();};ba.prototype.pause=function(){'use strict';if(this.$VideoPlayerHTML5Shaka32&&!c('VideoPlayerShakaExperiments').improveRebufferLogging){this.$VideoPlayerHTML5Shaka33=true;this.$VideoPlayerHTML5Shaka34=true;c('dispatchEvent')(this.$VideoPlayerHTML5Shaka29,'pause');this.$VideoPlayerHTML5Shaka14.setResumeAfterBuffering(false);}else this.$VideoPlayerHTML5Shaka29.pause();};ba.prototype.play=function(){'use strict';if(this.$VideoPlayerHTML5Shaka32&&!c('VideoPlayerShakaExperiments').improveRebufferLogging){this.$VideoPlayerHTML5Shaka33=false;this.$VideoPlayerHTML5Shaka34=true;c('dispatchEvent')(this.$VideoPlayerHTML5Shaka29,'play');c('dispatchEvent')(this.$VideoPlayerHTML5Shaka29,'waiting');this.$VideoPlayerHTML5Shaka14.setResumeAfterBuffering(true);return c('Promise').resolve();}else return this.$VideoPlayerHTML5Shaka29.play();};ba.prototype.$VideoPlayerHTML5Shaka35=function(){'use strict';var ca=this.$VideoPlayerHTML5Shaka4;if(ca){var da=this.$VideoPlayerHTML5Shaka29.currentTime,ea=4,fa=da>ca-ea,ga=da>ca;if(ga){this.$VideoPlayerHTML5Shaka4=null;}else if(this.$VideoPlayerHTML5Shaka32)this.$VideoPlayerHTML5Shaka6=fa;}return this.$VideoPlayerHTML5Shaka6;};ba.prototype.$VideoPlayerHTML5Shaka15=function(){'use strict';if(!c('VideoPlayerShakaExperiments').improveRebufferLogging){z(this.$VideoPlayerHTML5Shaka29,'pause');this.$VideoPlayerHTML5Shaka33=false;this.$VideoPlayerHTML5Shaka34=false;}this.$VideoPlayerHTML5Shaka32=true;if(this.$VideoPlayerHTML5Shaka35()){this.$VideoPlayerHTML5Shaka29.playbackRate=0;this.emit('streamInterrupted');}else{this.$VideoPlayerHTML5Shaka14.setResumeAfterBuffering(true);this.emit('bufferingStart');}};ba.prototype.$VideoPlayerHTML5Shaka16=function(){var ca=this;'use strict';if(!c('VideoPlayerShakaExperiments').improveRebufferLogging){if(!this.$VideoPlayerHTML5Shaka33)z(this.$VideoPlayerHTML5Shaka29,'play');if(!this.$VideoPlayerHTML5Shaka34)(function(){var da=c('EventListener').capture(ca.$VideoPlayerHTML5Shaka29.parentNode,'playing',function(ea){if(ea.target!=this.$VideoPlayerHTML5Shaka29)return;da.remove();if(this.$VideoPlayerHTML5Shaka9){this.$VideoPlayerHTML5Shaka9=false;return;}c('Event').kill(ea);}.bind(ca));})();}this.$VideoPlayerHTML5Shaka32=false;this.emit('bufferingEnd');};ba.prototype.$VideoPlayerHTML5Shaka17=function(ca){'use strict';var da=ca.detail||{},ea=da.type||'undefined';if(this.$VideoPlayerHTML5Shaka3&&this.$VideoPlayerHTML5Shaka2&&ea=='net')return;this.emit('error',{error:'SHAKA_'+ea.toUpperCase(),message:da.message,httpStatus:da.status||null,url:da.url||null});};ba.prototype.hasSelectableVideoTracks=function(){'use strict';var ca=this.$VideoPlayerHTML5Shaka14.getVideoTracks();return ca.length>1;};ba.prototype.unload=function(){'use strict';this.$VideoPlayerHTML5Shaka12=this.getSelectedVideoQuality();this.$VideoPlayerHTML5Shaka11=this.getAvailableVideoQualities();this.$VideoPlayerHTML5Shaka3=this.$VideoPlayerHTML5Shaka26&&this.$VideoPlayerHTML5Shaka26.isLive();this.$VideoPlayerHTML5Shaka14.unload();this.$VideoPlayerHTML5Shaka2=true;};ba.prototype.$VideoPlayerHTML5Shaka25=function(){'use strict';var ca=this.$VideoPlayerHTML5Shaka1,da={forceHighQualityDefault:ca,maxWidth:this.$VideoPlayerHTML5Shaka36(),maxHeight:this.$VideoPlayerHTML5Shaka37(),initiallyForcedRepresentations:this.$VideoPlayerHTML5Shaka21};return c('VideoPlayerShakaExperiments').enableAdaptation?new (c('CustomAbrManager'))(da):new aa(ca,c('VideoPlayerShakaExperiments').switchFromLowQuality);};ba.prototype.$VideoPlayerHTML5Shaka27=function(){'use strict';!this.$VideoPlayerHTML5Shaka24?h(0):void 0;!this.$VideoPlayerHTML5Shaka23?h(0):void 0;var ca=new m(this.$VideoPlayerHTML5Shaka23,null,v,this.$VideoPlayerHTML5Shaka24);return ca;};ba.prototype.reload=function(ca){'use strict';if(!this.$VideoPlayerHTML5Shaka2)return;this.$VideoPlayerHTML5Shaka24=this.$VideoPlayerHTML5Shaka25();this.$VideoPlayerHTML5Shaka26=this.$VideoPlayerHTML5Shaka27();if(this.$VideoPlayerHTML5Shaka35()){this.$VideoPlayerHTML5Shaka29.playbackRate=0;this.emit('streamInterrupted');}this.$VideoPlayerHTML5Shaka14.setPlaybackStartTime(ca);return this.$VideoPlayerHTML5Shaka14.loadWithSilencedErrors(this.$VideoPlayerHTML5Shaka26).then(function(){if(this.$VideoPlayerHTML5Shaka3!=this.$VideoPlayerHTML5Shaka26.isLive())return this.$VideoPlayerHTML5Shaka38();if(this.$VideoPlayerHTML5Shaka13)this.setPreferredVideoQuality(this.$VideoPlayerHTML5Shaka13);this.$VideoPlayerHTML5Shaka12=null;this.$VideoPlayerHTML5Shaka39=null;this.$VideoPlayerHTML5Shaka2=false;}.bind(this))['catch'](function(da){if(this.$VideoPlayerHTML5Shaka3)return this.$VideoPlayerHTML5Shaka38();da.detail=da.detail||{};da.detail.type=da.detail.type||'LOAD_FAILURE';this.$VideoPlayerHTML5Shaka17(da);}.bind(this));};ba.prototype.$VideoPlayerHTML5Shaka38=function(){'use strict';c('dispatchEvent')(this.$VideoPlayerHTML5Shaka29,'seeked');c('dispatchEvent')(this.$VideoPlayerHTML5Shaka29,'playing');c('dispatchEvent')(this.$VideoPlayerHTML5Shaka29,'ended');this.emit('streamResumed');this.$VideoPlayerHTML5Shaka30.unsubscribe();this.unload();};ba.prototype.getLongestInitResponseTime=function(){'use strict';return this.$VideoPlayerHTML5Shaka26.getLongestInitResponseTime();};ba.$VideoPlayerHTML5Shaka40=function(){'use strict';return (c('VideoPlayerShakaExperiments').resolutionConstraintFactor*t);};ba.prototype.$VideoPlayerHTML5Shaka36=function(){'use strict';if(!c('VideoPlayerShakaExperiments').useResolutionConstraints)return Infinity;return this.$VideoPlayerHTML5Shaka7*ba.$VideoPlayerHTML5Shaka40();};ba.prototype.$VideoPlayerHTML5Shaka37=function(){'use strict';if(!c('VideoPlayerShakaExperiments').useResolutionConstraints)return Infinity;return this.$VideoPlayerHTML5Shaka8*ba.$VideoPlayerHTML5Shaka40();};ba.prototype.setDimensions=function(ca,da){'use strict';this.$VideoPlayerHTML5Shaka7=ca;this.$VideoPlayerHTML5Shaka8=da;this.$VideoPlayerHTML5Shaka24.setResolutionConstraint(this.$VideoPlayerHTML5Shaka36(),this.$VideoPlayerHTML5Shaka37());};ba.isSupported=function(){'use strict';return l.isBrowserSupported();};ba.prototype.$VideoPlayerHTML5Shaka19=function(){'use strict';this.emit('tracksChanged');};ba.prototype.$VideoPlayerHTML5Shaka18=function(event){'use strict';if(event.contentType==='video')this.emit('adaptation',{reason:event.reason});};ba.prototype.$VideoPlayerHTML5Shaka31=function(ca){'use strict';this.$VideoPlayerHTML5Shaka4=ca;};ba.prototype.$VideoPlayerHTML5Shaka20=function(){'use strict';if(this.$VideoPlayerHTML5Shaka35()){this.$VideoPlayerHTML5Shaka6=false;this.$VideoPlayerHTML5Shaka29.playbackRate=this.$VideoPlayerHTML5Shaka5;this.emit('streamResumed');}};f.exports=ba;},null);