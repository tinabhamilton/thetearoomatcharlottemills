if (self.CavalryLogger) { CavalryLogger.start_js(["Cg91o"]); }

__d("BrandedContentTaggerNuxAction",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={LOG_VIEW:"log_view",DISMISS:"dismiss"};},null);
__d("ModalPhotoEditorTabName",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={CROP:"crop",FILTERS:"filters",FRAMES:"frames",PRODUCT_TAG:"product_tag",STICKERS:"stickers",TAG:"tag",TEXT:"text"};},null);
__d("PagesComposerCarouselPostNuxType",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={MEDIA_ATTACHEMENT_URL_INPUT_AREA_NUX:"media_attachment_url_input_area_nux"};},null);
__d("PagesComposerExtraAttachmentIcons",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={CAUSE_ICON:"CAUSE_ICON",COUPONS_ICON:"COUPONS_ICON",EVENTS_ICON:"EVENTS_ICON",FINCH_COUPONS_ICON:"FINCH_COUPONS_ICON",FINCH_EVENTS_ICON:"FINCH_EVENTS_ICON",OFFERS_ICON:"OFFERS_ICON",PRODUCT_ICON:"PRODUCT_ICON",Q_AND_A_ICON:"Q_AND_A_ICON"};},null);
__d("PhotoEditorLoggingConstants",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={COMPOSER_IMAGE_STICKER:"composer_sticker",COMPOSER_IMAGE_TEXT_OVERLAY:"composer_text_overlay",COMPOSER_IMAGE_HAS_CROP:"composer_has_crop",COMPOSER_IMAGE_HAS_FILTER:"composer_has_filter"};},null);
__d("PlaceAttachmentSetting",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={HIDE_ATTACHMENT:1,SHOW_ATTACHMENT:2};},null);
__d("StorySurfaces",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={HOMEPAGE:1,TIMELINE:2,PERMALINK:3,ENTSTREAM:4,GROUP:5};},null);
__d('LoadingImageBox.react',['cssVar','CenteredContainer.react','React','XUISpinner.react'],function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){var l=this.props,m=l.className,n=l.height,o=l.width;return (c('React').createElement(c('CenteredContainer.react'),{className:m,style:{backgroundColor:"#000000",height:n,width:o},vertical:true},c('React').createElement(c('XUISpinner.react'),{background:'dark',size:'large'})));};function k(){i.apply(this,arguments);}f.exports=k;},null);
__d('CountryCodeMap',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={US:'United States',CA:'Canada',GB:'United Kingdom',AR:'Argentina',AU:'Australia',AT:'Austria',BE:'Belgium',BR:'Brazil',CL:'Chile',CN:'China',CO:'Colombia',HR:'Croatia',DK:'Denmark',DO:'Dominican Republic',EG:'Egypt',FI:'Finland',FR:'France',DE:'Germany',GR:'Greece',HK:'Hong Kong',IN:'India',ID:'Indonesia',IE:'Ireland',IL:'Israel',IT:'Italy',JP:'Japan',JO:'Jordan',KW:'Kuwait',LB:'Lebanon',MY:'Malaysia',MX:'Mexico',NL:'Netherlands',NZ:'New Zealand',NG:'Nigeria',NO:'Norway',PK:'Pakistan',PA:'Panama',PE:'Peru',PH:'Philippines',PL:'Poland',RU:'Russia',SA:'Saudi Arabia',RS:'Serbia',SG:'Singapore',ZA:'South Africa',KR:'South Korea',ES:'Spain',SE:'Sweden',CH:'Switzerland',TW:'Taiwan',TH:'Thailand',TR:'Turkey',AE:'United Arab Emirates',VE:'Venezuela',PT:'Portugal',LU:'Luxembourg',BG:'Bulgaria',CZ:'Czech Republic',SI:'Slovenia',IS:'Iceland',SK:'Slovakia',LT:'Lithuania',TT:'Trinidad and Tobago',BD:'Bangladesh',LK:'Sri Lanka',KE:'Kenya',HU:'Hungary',MA:'Morocco',CY:'Cyprus',JM:'Jamaica',EC:'Ecuador',RO:'Romania',BO:'Bolivia',GT:'Guatemala',CR:'Costa Rica',QA:'Qatar',SV:'El Salvador',HN:'Honduras',NI:'Nicaragua',PY:'Paraguay',UY:'Uruguay',PR:'Puerto Rico',BA:'Bosnia and Herzegovina',PS:'Palestine',TN:'Tunisia',BH:'Bahrain',VN:'Vietnam',GH:'Ghana',MU:'Mauritius',UA:'Ukraine',MT:'Malta',BS:'The Bahamas',MV:'Maldives',OM:'Oman',MK:'Macedonia',LV:'Latvia',EE:'Estonia',IQ:'Iraq',DZ:'Algeria',AL:'Albania',NP:'Nepal',MO:'Macau',ME:'Montenegro',SN:'Senegal',GE:'Georgia',BN:'Brunei',UG:'Uganda',GP:'Guadeloupe',BB:'Barbados',AZ:'Azerbaijan',TZ:'Tanzania',LY:'Libya',MQ:'Martinique',CM:'Cameroon',BW:'Botswana',ET:'Ethiopia',KZ:'Kazakhstan',NA:'Namibia',MG:'Madagascar',NC:'New Caledonia',MD:'Moldova',FJ:'Fiji',BY:'Belarus',JE:'Jersey',GU:'Guam',YE:'Yemen',ZM:'Zambia',IM:'Isle Of Man',HT:'Haiti',KH:'Cambodia',AW:'Aruba',PF:'French Polynesia',AF:'Afghanistan',BM:'Bermuda',GY:'Guyana',AM:'Armenia',MW:'Malawi',AG:'Antigua',RW:'Rwanda',GG:'Guernsey',GM:'The Gambia',FO:'Faroe Islands',LC:'St. Lucia',KY:'Cayman Islands',BJ:'Benin',AD:'Andorra',GD:'Grenada',VI:'US Virgin Islands',BZ:'Belize',VC:'Saint Vincent and the Grenadines',MN:'Mongolia',MZ:'Mozambique',ML:'Mali',AO:'Angola',GF:'French Guiana',UZ:'Uzbekistan',DJ:'Djibouti',BF:'Burkina Faso',MC:'Monaco',TG:'Togo',GL:'Greenland',GA:'Gabon',GI:'Gibraltar',CD:'Democratic Republic of the Congo',KG:'Kyrgyzstan',PG:'Papua New Guinea',BT:'Bhutan',KN:'Saint Kitts and Nevis',SZ:'Swaziland',LS:'Lesotho',LA:'Laos',LI:'Liechtenstein',MP:'Northern Mariana Islands',SR:'Suriname',SC:'Seychelles',VG:'British Virgin Islands',TC:'Turks and Caicos Islands',DM:'Dominica',MR:'Mauritania',AX:'Aland Islands',SM:'San Marino',SL:'Sierra Leone',NE:'Niger',CG:'Republic of the Congo',AI:'Anguilla',YT:'Mayotte',CV:'Cape Verde',GN:'Guinea',TM:'Turkmenistan',BI:'Burundi',TJ:'Tajikistan',VU:'Vanuatu',SB:'Solomon Islands',ER:'Eritrea',WS:'Samoa',AS:'American Samoa',FK:'Falkland Islands',GQ:'Equatorial Guinea',TO:'Tonga',KM:'Comoros',PW:'Palau',FM:'Federated States of Micronesia',CF:'Central African Republic',SO:'Somalia',MH:'Marshall Islands',VA:'Vatican City',TD:'Chad',KI:'Kiribati',ST:'Sao Tome and Principe',TV:'Tuvalu',NR:'Nauru',RE:'R\u00e9union',LR:'Liberia',ZW:'Zimbabwe',CI:'C\u00f4te d\'Ivoire',MM:'Myanmar'};f.exports=h;},null);
__d('TokenizerExampleSearchSource',['AbstractSearchSource','CountryCodeMap','SearchableEntry','filterObject','forEachObject'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('AbstractSearchSource'));i=h&&h.prototype;j.prototype.searchImpl=function(k,l,m){'use strict';var n=[];m=m||{};if(k){var o=k.toLowerCase(),p=c('filterObject')(c('CountryCodeMap'),function(r){return r.toLowerCase().startsWith(o);}),q=0;c('forEachObject')(p,function(r,s){return n.push(new (c('SearchableEntry'))({order:q++,photo:'/images/mobile/glyph/book_blue_s.png',subtitle:r,title:r,uniqueID:s}));});}l(n,k);};function j(){'use strict';h.apply(this,arguments);}f.exports=j;},null);
__d('SlideshowFrameImage.react',['Image.react','React'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.prototype.$SlideshowFrameImage5=function(){if(this.props.croppingSpec){this.$SlideshowFrameImage3={width:this.props.imageWidth,height:this.props.imageHeight};this.$SlideshowFrameImage4={x:-this.props.croppingSpec.topLeft[0],y:-this.props.croppingSpec.topLeft[1]};this.$SlideshowFrameImage1={width:this.props.croppingSpec.bottomRight[0]+this.$SlideshowFrameImage4.x,height:this.props.croppingSpec.bottomRight[1]+this.$SlideshowFrameImage4.y};}else{this.$SlideshowFrameImage3={width:this.props.imageWidth,height:this.props.imageHeight};this.$SlideshowFrameImage4={x:0,y:0};this.$SlideshowFrameImage1={width:this.props.imageWidth,height:this.props.imageHeight};}var k=Math.min(this.props.maxWidth/this.$SlideshowFrameImage1.width,this.props.maxHeight/this.$SlideshowFrameImage1.height);this.$SlideshowFrameImage3.width*=k;this.$SlideshowFrameImage3.height*=k;this.$SlideshowFrameImage4.x*=k;this.$SlideshowFrameImage4.y*=k;this.$SlideshowFrameImage1.width*=k;this.$SlideshowFrameImage1.height*=k;this.$SlideshowFrameImage2={x:(this.props.maxWidth-this.$SlideshowFrameImage1.width)/2,y:(this.props.maxHeight-this.$SlideshowFrameImage1.height)/2};};j.prototype.render=function(){this.$SlideshowFrameImage5();return (c('React').createElement('div',{className:this.props.className,style:{position:this.props.positionStyle,width:this.$SlideshowFrameImage1.width,height:this.$SlideshowFrameImage1.height,left:this.$SlideshowFrameImage2.x,top:this.$SlideshowFrameImage2.y,overflow:'hidden'}},c('React').createElement(c('Image.react'),{src:this.props.imageSrc,width:this.$SlideshowFrameImage3.width,height:this.$SlideshowFrameImage3.height,style:{position:'absolute',left:this.$SlideshowFrameImage4.x,top:this.$SlideshowFrameImage4.y}})));};function j(){h.apply(this,arguments);}j.defaultProps={className:null,croppingSpec:null,positionStyle:'absolute'};f.exports=j;},null);
__d('ReactComposerBoostedPostLazyButton.react',['Bootloader','React','ReactDOM'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('React').createClass({displayName:'ReactComposerBoostedPostLazyButton',componentDidMount:function(){c('Bootloader').loadModules(["BoostedPostDialogButton.react"],function(i){c('ReactDOM').render(c('React').createElement(i,this.props),c('ReactDOM').findDOMNode(this.refs.boostButtonContainer));}.bind(this),'ReactComposerBoostedPostLazyButton.react');},render:function(){return (c('React').createElement('span',{ref:'boostButtonContainer'}));}});f.exports=h;},null);
__d('ReactComposerPagesBootloader',['Bootloader'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={statusAttachment:function(i){c('Bootloader').loadModules(["ReactComposerStatusAttachmentContainer.react","PagesComposerPostButton.react"],i,'ReactComposerPagesBootloader');},mediaAttachment:function(i){c('Bootloader').loadModules(["ReactComposerMediaAttachmentContainer.react","PagesComposerPostButton.react"],i,'ReactComposerPagesBootloader');},qandaAttachment:function(i){c('Bootloader').loadModules(["ReactComposerQAndAAttachmentContainer.react","PagesComposerPostButton.react"],i,'ReactComposerPagesBootloader');},questionAttachment:function(i){c('Bootloader').loadModules(["ReactComposerQuestionAttachmentContainer.react","PagesComposerPostButton.react"],i,'ReactComposerPagesBootloader');},extraAttachment:function(i){c('Bootloader').loadModules(["PagesComposerExtraAttachmentContainer.react","PagesComposerPostButton.react"],i,'ReactComposerPagesBootloader');}};f.exports=h;},null);
__d('ReactComposerAsyncRequest',['ReactComposerActions','ReactComposerPostUtilsCore','AsyncRequest'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('AsyncRequest'));i=h&&h.prototype;function j(k,l){'use strict';i.constructor.call(this,l);this.$ReactComposerAsyncRequest1=k;i.setHandler.call(this,this.$ReactComposerAsyncRequest4.bind(this));i.setErrorHandler.call(this,this.$ReactComposerAsyncRequest5.bind(this));i.setFinallyHandler.call(this,this.$ReactComposerAsyncRequest6.bind(this));}j.prototype.setHandler=function(k){'use strict';this.$ReactComposerAsyncRequest2=k;return this;};j.prototype.setErrorHandler=function(k){'use strict';this.$ReactComposerAsyncRequest3=k;return this;};j.prototype.$ReactComposerAsyncRequest4=function(k){'use strict';setTimeout(function(){var l=k.payload&&k.payload.isPostPending;if(!l)c('ReactComposerPostUtilsCore').handlePostSucceeded(this.$ReactComposerAsyncRequest1);this.$ReactComposerAsyncRequest2&&this.$ReactComposerAsyncRequest2(k);}.bind(this),0);};j.prototype.$ReactComposerAsyncRequest5=function(k){'use strict';setTimeout(function(){c('ReactComposerActions').postError(this.$ReactComposerAsyncRequest1,k);this.$ReactComposerAsyncRequest3&&this.$ReactComposerAsyncRequest3(k);}.bind(this),0);};j.prototype.$ReactComposerAsyncRequest6=function(k){'use strict';setTimeout(function(){return c('ReactComposerActions').postFinally(this.$ReactComposerAsyncRequest1,k);}.bind(this),0);};f.exports=j;},null);
__d('ReactComposerAutosSellActionType',['keyMirrorRecursive'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports=c('keyMirrorRecursive')({REGISTER_AUTOS_COMPOSER:null,SAVE_YEAR:null,SAVE_ODOMETER:null,SAVE_MAKE:null,SAVE_MODEL:null,SAVE_VIN:null,SELECT_TYPEAHEAD:null,SAVE_ODOMETER_UNIT:null,SET_SELL_CONFIG:null},'ReactComposerAutosSellActionType');},null);
__d('ReactComposerAutosSellStore.react',['Assert','ReactComposerAutosSellActionType','ReactComposerStoreBase','ReactComposerSellStore'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();var j=['807311116002614','1558493264400524'],k=4,l=8,m=255,n=255,o=17;h=babelHelpers.inherits(p,c('ReactComposerStoreBase'));i=h&&h.prototype;function p(){'use strict';var q;i.constructor.call(this,function(){return {showAutosForSellOptions:false,year:'',odometer:'',odometerUnits:'kilometers',make:'',model:'',vin:''};},function(r){switch(r.type){case c('ReactComposerAutosSellActionType').SAVE_YEAR:q&&q.$ReactComposerAutosSellStore1(r);break;case c('ReactComposerAutosSellActionType').SAVE_ODOMETER:q&&q.$ReactComposerAutosSellStore2(r);break;case c('ReactComposerAutosSellActionType').SAVE_ODOMETER_UNIT:q&&q.$ReactComposerAutosSellStore3(r);break;case c('ReactComposerAutosSellActionType').SAVE_MAKE:q&&q.$ReactComposerAutosSellStore4(r);break;case c('ReactComposerAutosSellActionType').SAVE_MODEL:q&&q.$ReactComposerAutosSellStore5(r);break;case c('ReactComposerAutosSellActionType').SAVE_VIN:q&&q.$ReactComposerAutosSellStore6(r);break;case c('ReactComposerAutosSellActionType').SET_SELL_CONFIG:q&&q.$ReactComposerAutosSellStore7(r);break;}});q=this;}p.prototype.getMaxCharactersForYear=function(q){'use strict';return k;};p.prototype.getMaxCharactersForOdometer=function(q){'use strict';return l;};p.prototype.getMaxCharactersForMake=function(q){'use strict';return m;};p.prototype.getMaxCharactersForModel=function(q){'use strict';return n;};p.prototype.getNumCharactersForVIN=function(q){'use strict';return o;};p.prototype.getYear=function(q){'use strict';return this.getComposerData(q).year;};p.prototype.getOdometerValue=function(q){'use strict';return this.getComposerData(q).odometer;};p.prototype.getMake=function(q){'use strict';return this.getComposerData(q).make;};p.prototype.getModel=function(q){'use strict';return this.getComposerData(q).model;};p.prototype.getVIN=function(q){'use strict';return this.getComposerData(q).vin;};p.prototype.getCategoryInfo=function(q){'use strict';c('Assert').isTruthy(j.length>0,'Constant has an unexpected value');var r=j[0],s=c('ReactComposerSellStore').getCategoryTextForID(q,r);if(s&&s.length>0)return [r,s];return null;};p.prototype.getOdometerUnits=function(q){'use strict';return this.getComposerData(q).odometerUnits;};p.prototype.isUnitSelected=function(q){'use strict';return !!this.getComposerData(q).saveOdometerUnit;};p.prototype.isYearSelected=function(q){'use strict';return !!this.getComposerData(q).saveYear;};p.prototype.showAutosSpecificFields=function(q){'use strict';var r=c('ReactComposerSellStore').getCategoryID(q);return r!==null&&j.indexOf(r)!==-1&&c('ReactComposerSellStore').showAutosForSellOptions(q);};p.prototype.$ReactComposerAutosSellStore2=function(q){'use strict';var r=this.validateAction(q,['composerID','odometer']),s=r[0],t=r[1];if(/^\d*$/.test(t)&&t.length<=l){var u=this.getComposerData(s),v=parseInt(t.substring(0,l),10);u.odometer=v>0?v+'':'';this.emitChange(s);}};p.prototype.$ReactComposerAutosSellStore1=function(q){'use strict';var r=this.validateAction(q,['composerID','year']),s=r[0],t=r[1];if(t===''||/^[1-2][0-9]{0,3}$/.test(t)){var u=this.getComposerData(s);u.year=t;this.emitChange(s);}};p.prototype.$ReactComposerAutosSellStore4=function(q){'use strict';var r=this.validateAction(q,['composerID','make']),s=r[0],t=r[1],u=this.getComposerData(s);u.make=t.substring(0,m);this.emitChange(s);};p.prototype.$ReactComposerAutosSellStore5=function(q){'use strict';var r=this.validateAction(q,['composerID','model']),s=r[0],t=r[1],u=this.getComposerData(s);u.model=t.substring(0,n);this.emitChange(s);};p.prototype.$ReactComposerAutosSellStore6=function(q){'use strict';var r=this.validateAction(q,['composerID','vin']),s=r[0],t=r[1];if(/^[0-9a-zA-Z]*$/.test(t)&&t.length<=o){var u=this.getComposerData(s);u.vin=t.toUpperCase();this.emitChange(s);}};p.prototype.$ReactComposerAutosSellStore3=function(q){'use strict';var r=this.validateAction(q,['composerID','odometerUnit']),s=r[0],t=r[1],u=this.getComposerData(s);u.odometerUnit=t;this.emitChange(s);};p.prototype.$ReactComposerAutosSellStore7=function(q){'use strict';var r=this.validateAction(q,['composerID','config']),s=r[0],t=r[1],u=this.getComposerData(s),v=t.autosCategory;u.showAutosForSellOptions=v.showAutosForSellOptions;u.odometerUnits=v.autosOdometerUnits;this.emitChange(s);};f.exports=new p();},null);
__d('ReactComposerFileActionType',['keyMirrorRecursive'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports=c('keyMirrorRecursive')({RESET:null,SAVE_DROPBOX_FILE:null,SAVE_FILE:null,SET_FILE_CONFIG:null},'ReactComposerFileActionType');},null);
__d('ReactComposerFileStore',['fbt','ReactComposerFileActionType','ReactComposerStoreBase'],function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();i=babelHelpers.inherits(k,c('ReactComposerStoreBase'));j=i&&i.prototype;function k(){'use strict';var l;j.constructor.call(this,function(){return {dialogAppURL:null,dropboxActionEndpoint:null,dropboxAppID:null,dropboxEnabled:null,dropboxFileID:null,file:null,maxFileUploadString:null,selectedDropboxFileName:l&&l.$ReactComposerFileStore1(),selectedFileName:l&&l.$ReactComposerFileStore1()};},function(m){switch(m.type){case c('ReactComposerFileActionType').RESET:l&&l.$ReactComposerFileStore2(m);break;case c('ReactComposerFileActionType').SAVE_DROPBOX_FILE:l&&l.$ReactComposerFileStore3(m);break;case c('ReactComposerFileActionType').SAVE_FILE:l&&l.$ReactComposerFileStore4(m);break;case c('ReactComposerFileActionType').SET_FILE_CONFIG:l&&l.$ReactComposerFileStore5(m);break;}});l=this;}k.prototype.getDialogAppURL=function(l){'use strict';return this.getComposerData(l).dialogAppURL;};k.prototype.getDropboxActionEndpoint=function(l){'use strict';return this.getComposerData(l).dropboxActionEndpoint;};k.prototype.getDropboxAppID=function(l){'use strict';return this.getComposerData(l).dropboxAppID;};k.prototype.getDropboxEnabled=function(l){'use strict';return this.getComposerData(l).dropboxEnabled;};k.prototype.getDropboxFileID=function(l){'use strict';return this.getComposerData(l).dropboxFileID;};k.prototype.getFile=function(l){'use strict';return this.getComposerData(l).file;};k.prototype.getMaxFileUploadSize=function(l){'use strict';return this.getComposerData(l).maxFileUploadSize;};k.prototype.getMaxFileUploadString=function(l){'use strict';return this.getComposerData(l).maxFileUploadString;};k.prototype.getSelectedDropboxFileName=function(l){'use strict';return this.getComposerData(l).selectedDropboxFileName;};k.prototype.getSelectedFileName=function(l){'use strict';return this.getComposerData(l).selectedFileName;};k.prototype.getURI=function(l){'use strict';return this.hasFile(l)?'/ajax/groups/files/upload':'/ajax/groups/files/dropbox_publish';};k.prototype.hasDropboxFile=function(l){'use strict';return !!this.getComposerData(l).dropboxFileID;};k.prototype.hasFile=function(l){'use strict';return !!this.getComposerData(l).file;};k.prototype.isFileSelected=function(l){'use strict';var m=this.getComposerData(l);return !!m.file||!!m.dropboxFileID;};k.prototype.$ReactComposerFileStore1=function(){'use strict';return h._("No file chosen");};k.prototype.$ReactComposerFileStore2=function(l){'use strict';var m=this.validateAction(l,'composerID'),n=this.getComposerData(m);n.file=n.dropboxFileID=null;n.selectedFileName=n.selectedDropboxFileName=this.$ReactComposerFileStore1();this.emitChange(l.composerID);};k.prototype.$ReactComposerFileStore3=function(l){'use strict';var m=this.validateAction(l,['composerID','id','name']),n=m[0],o=m[1],p=m[2],q=this.getComposerData(n);q.dropboxFileID=o;q.selectedDropboxFileName=p;this.emitChange(n);};k.prototype.$ReactComposerFileStore4=function(l){'use strict';var m=this.validateAction(l,['composerID','file','name']),n=m[0],o=m[1],p=m[2],q=this.getComposerData(n);q.file=o;q.selectedFileName=p;this.emitChange(l.composerID);};k.prototype.$ReactComposerFileStore5=function(l){'use strict';var m=this.validateAction(l,['composerID','config']),n=m[0],o=m[1],p=this.getComposerData(n);p.dialogAppURL=o.dialogAppURL;p.dropboxActionEndpoint=o.dropboxActionEndpoint;p.dropboxAppID=o.dropboxAppID;p.dropboxEnabled=o.dropboxEnabled;p.maxFileUploadSize=o.maxFileUploadSize;p.maxFileUploadString=o.maxFileUploadString;this.emitChange(l.composerID);};f.exports=new k();},null);
__d('ReactComposerAudienceActionTypes',['keyMirrorRecursive'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports=c('keyMirrorRecursive')({SET_AUDIENCE:null,SET_AUDIENCE_ELEMENT:null,SET_AUDIENCE_INSTANCE:null,SET_PRIVACYX_NULL_DANGEROUS:null},'ReactComposerAudienceActionTypes');},null);
__d('ReactComposerAudienceStore',['csx','invariant','ReactComposerActionStore','ReactComposerAudienceActionTypes','$','DOM'],function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();j=babelHelpers.inherits(l,c('ReactComposerActionStore'));k=j&&j.prototype;function l(){'use strict';var m;k.constructor.call(this,function(){return {audience:null,audienceElement:null,audienceInstance:null,legacyAudience:null,privacyxNullDangerous:false};},function(n){switch(n.type){case c('ReactComposerAudienceActionTypes').SET_AUDIENCE:m&&m.$ReactComposerAudienceStore1(n);break;case c('ReactComposerAudienceActionTypes').SET_AUDIENCE_ELEMENT:m&&m.$ReactComposerAudienceStore2(n);break;case c('ReactComposerAudienceActionTypes').SET_AUDIENCE_INSTANCE:m&&m.$ReactComposerAudienceStore3(n);break;case c('ReactComposerAudienceActionTypes').SET_PRIVACYX_NULL_DANGEROUS:m&&m.$ReactComposerAudienceStore4(n);break;}});m=this;}l.prototype.getAudience=function(m){'use strict';if(this.getPrivacyxNullDangerous(m))return null;var n=c('DOM').scry(c('$')(m),"._5dd8");!(n.length<2)?i(0):void 0;var o=n[0];if(o){var p=c('DOM').scry(o,'input[name="privacyx"]');!(p.length<2)?i(0):void 0;if(p.length===1)return p[0].value;}return this.getComposerData(m).audience;};l.prototype.getLegacyAudience=function(m){'use strict';return this.getComposerData(m).legacyAudience;};l.prototype.getAudienceElement=function(m){'use strict';return this.getComposerData(m).audienceElement;};l.prototype.getAudienceInstance=function(m){'use strict';return this.getComposerData(m).audienceInstance;};l.prototype.getPrivacyxNullDangerous=function(m){'use strict';return this.getComposerData(m).privacyxNullDangerous;};l.prototype.$ReactComposerAudienceStore1=function(m){'use strict';var n=this.validateAction(m,'composerID'),o=this.getComposerData(n);o.audience=m.audience;o.legacyAudience=m.legacyAudience;this.emitChange(n);};l.prototype.$ReactComposerAudienceStore2=function(m){'use strict';var n=this.validateAction(m,['composerID','audienceElement']),o=n[0],p=n[1],q=this.getComposerData(o);q.audienceElement=p;this.emitChange(o);};l.prototype.$ReactComposerAudienceStore3=function(m){'use strict';var n=this.validateAction(m,'composerID'),o=this.getComposerData(n);o.audienceInstance=m.audienceInstance;this.emitChange(n);};l.prototype.$ReactComposerAudienceStore4=function(m){'use strict';var n=this.validateAction(m,'composerID'),o=this.getComposerData(n);o.privacyxNullDangerous=m.privacyxNullDangerous;this.emitChange(n);};f.exports=new l();},null);
__d('ReactComposerCustomConfigActionType',['keyMirrorRecursive'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports=c('keyMirrorRecursive')({SET_IS_FEED_ONLY_POST:null},'ReactComposerCustomConfigActionType');},null);
__d('ReactComposerCustomConfigStore',['ReactComposerStoreBase','ReactComposerCustomConfigActionType'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('ReactComposerStoreBase'));i=h&&h.prototype;function j(){'use strict';var k;i.constructor.call(this,function(){return {isFeedOnlyPost:false};},function(l){switch(l.type){case c('ReactComposerCustomConfigActionType').SET_IS_FEED_ONLY_POST:k&&k.$ReactComposerCustomConfigStore1(l);break;}});k=this;}j.prototype.isFeedOnlyPost=function(k){'use strict';return this.getComposerData(k).isFeedOnlyPost;};j.prototype.$ReactComposerCustomConfigStore1=function(k){'use strict';var l=this.validateAction(k,['composerID','isFeedOnlyPost']),m=l[0],n=l[1],o=this.getComposerData(m);o.isFeedOnlyPost=n;this.emitChange(m);};f.exports=new j();},null);
__d('ReactComposerLocationAttachmentActionType',['keyMirrorRecursive'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports=c('keyMirrorRecursive')({LOCATION_ATTACHMENT_ENABLED:null,FETCH_LOCATION_ATTACHMENT:null,SET_MINUTIAE_ACTION_CONTEXT:null,SET_LOCATION_MARKUP:null},'ReactComposerLocationAttachmentActionType');},null);
__d("XReactComposerLocationAttachmentController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/react_composer\/location\/attachment\/",{composer_id:{type:"String",required:true},location_id:{type:"String",required:true},target_id:{type:"String",required:true}});},null);
__d('ReactComposerLocationAttachmentStore',['ReactComposerAttachmentActionType','ReactComposerAttachmentType','ReactComposerLocationAttachmentActionType','ReactComposerStoreBase','XReactComposerLocationAttachmentController','AsyncRequest'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('ReactComposerStoreBase'));i=h&&h.prototype;function j(){'use strict';var k;i.constructor.call(this,function(){return {isEnabled:false,isFetching:false,markup:null,pendingRequest:null,minutiaeTaggedPlace:null,isTimeline:false};},function(l){switch(l.type){case c('ReactComposerLocationAttachmentActionType').LOCATION_ATTACHMENT_ENABLED:k&&k.$ReactComposerLocationAttachmentStore1(l);break;case c('ReactComposerLocationAttachmentActionType').FETCH_LOCATION_ATTACHMENT:k&&k.$ReactComposerLocationAttachmentStore2(l);break;case c('ReactComposerLocationAttachmentActionType').SET_MINUTIAE_ACTION_CONTEXT:k&&k.$ReactComposerLocationAttachmentStore3(l);break;case c('ReactComposerLocationAttachmentActionType').SET_LOCATION_MARKUP:k&&k.$ReactComposerLocationAttachmentStore4(l);break;case c('ReactComposerAttachmentActionType').SELECT_ATTACHMENT:k&&k.$ReactComposerLocationAttachmentStore5(l);break;}});k=this;}j.prototype.isEnabled=function(k){'use strict';return this.getComposerData(k).isEnabled;};j.prototype.getMarkup=function(k){'use strict';return this.getComposerData(k).markup;};j.prototype.getMinutiaeTaggedPlace=function(k){'use strict';return this.getComposerData(k).minutiaeTaggedPlace;};j.prototype.getIsTimeline=function(k){'use strict';return this.getComposerData(k).isTimeline;};j.prototype.isFetching=function(k){'use strict';return this.getComposerData(k).isFetching;};j.prototype.$ReactComposerLocationAttachmentStore1=function(k){'use strict';var l=this.validateAction(k,['composerID','enabled']),m=l[0],n=l[1],o=this.getComposerData(m);o.isEnabled=n;};j.prototype.$ReactComposerLocationAttachmentStore2=function(k){'use strict';var l=this.validateAction(k,['composerID','locationID','targetID']),m=l[0],n=l[1],o=l[2];if(!this.isEnabled(m))return;var p=this.getComposerData(m);p.isFetching=true;var q=c('XReactComposerLocationAttachmentController').getURIBuilder().setString('composer_id',m).setString('location_id',n).setString('target_id',o).getURI();p.pendingRequest=new (c('AsyncRequest'))(q).setFinallyHandler(function(){p.isFetching=false;p.pendingRequest=null;this.emitChange(m);}.bind(this));p.pendingRequest.send();this.emitChange(m);};j.prototype.$ReactComposerLocationAttachmentStore3=function(k){'use strict';var l=this.validateAction(k,['composerID','objectID','isTimeline']),m=l[0],n=l[1],o=l[2],p=this.getComposerData(m);p.minutiaeTaggedPlace=n;p.isTimeline=o;this.emitChange(m);};j.prototype.$ReactComposerLocationAttachmentStore4=function(k){'use strict';var l=this.validateAction(k,['composerID','markup']),m=l[0],n=l[1],o=this.getComposerData(m);o.markup=n;this.emitChange(m);};j.prototype.$ReactComposerLocationAttachmentStore5=function(k){'use strict';var l=this.validateAction(k,['composerID','id']),m=l[0],n=l[1];if(n===c('ReactComposerAttachmentType').STATUS)return;var o=this.getComposerData(m);o.markup=null;o.isFetching=false;o.pendingRequest&&o.pendingRequest.abandon();this.emitChange(m);};f.exports=new j();},null);
__d('ReactComposerMinutiaeAttachmentActionType',['keyMirrorRecursive'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports=c('keyMirrorRecursive')({FETCH_ATTACHMENT:null,SET_EXPLICIT_LOCATION:null,SET_MARKUP:null},'ReactComposerMinutiaeAttachmentActionType');},null);
__d("XReactComposerMinutiaeAttachmentController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/react_composer\/minutiae\/attachment\/",{composer_id:{type:"String",required:true},action_id:{type:"String",required:true},object_id:{type:"String",required:true},target_id:{type:"String",required:true},is_timeline:{type:"Bool",defaultValue:false},explicit_place_tag_id:{type:"String"}});},null);
__d('ReactComposerMinutiaeAttachmentStore',['ReactComposerAttachmentActionType','ReactComposerAttachmentType','ReactComposerMinutiaeAttachmentActionType','ReactComposerStoreBase','XReactComposerMinutiaeAttachmentController','AsyncRequest'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('ReactComposerStoreBase'));i=h&&h.prototype;function j(){'use strict';var k;i.constructor.call(this,function(){return {isFetching:false,markup:null,pendingRequest:null,explicitLocation:null};},function(l){switch(l.type){case c('ReactComposerMinutiaeAttachmentActionType').FETCH_ATTACHMENT:k&&k.$ReactComposerMinutiaeAttachmentStore1(l);break;case c('ReactComposerMinutiaeAttachmentActionType').SET_MARKUP:k&&k.$ReactComposerMinutiaeAttachmentStore2(l);break;case c('ReactComposerAttachmentActionType').SELECT_ATTACHMENT:k&&k.$ReactComposerMinutiaeAttachmentStore3(l);break;case c('ReactComposerMinutiaeAttachmentActionType').SET_EXPLICIT_LOCATION:k&&k.$ReactComposerMinutiaeAttachmentStore4(l);break;}});k=this;}j.prototype.getMarkup=function(k){'use strict';return this.getComposerData(k).markup;};j.prototype.isFetching=function(k){'use strict';return this.getComposerData(k).isFetching;};j.prototype.$ReactComposerMinutiaeAttachmentStore4=function(k){'use strict';var l=this.validateAction(k,['composerID','explicitLocation']),m=l[0],n=l[1],o=this.getComposerData(m);o.explicitLocation=n;this.emitChange(m);};j.prototype.$ReactComposerMinutiaeAttachmentStore1=function(k){'use strict';var l=this.validateAction(k,['composerID','actionID','objectID','targetID','isTimeline']),m=l[0],n=l[1],o=l[2],p=l[3],q=l[4],r=this.getComposerData(m);r.isFetching=true;var s=c('XReactComposerMinutiaeAttachmentController').getURIBuilder().setString('composer_id',m).setString('action_id',n).setString('object_id',o).setString('target_id',p).setBool('is_timeline',q);if(r.explicitLocation)s.setString('explicit_place_tag_id',r.explicitLocation);r.pendingRequest=new (c('AsyncRequest'))(s.getURI()).setFinallyHandler(function(){r.isFetching=false;r.pendingRequest=null;this.emitChange(m);}.bind(this));r.pendingRequest.send();this.emitChange(m);};j.prototype.$ReactComposerMinutiaeAttachmentStore2=function(k){'use strict';var l=this.validateAction(k,['composerID','markup']),m=l[0],n=l[1],o=this.getComposerData(m);o.markup=n;this.emitChange(m);};j.prototype.$ReactComposerMinutiaeAttachmentStore3=function(k){'use strict';var l=this.validateAction(k,['composerID','id']),m=l[0],n=l[1];if(n===c('ReactComposerAttachmentType').STATUS)return;var o=this.getComposerData(m);o.markup=null;o.isFetching=false;o.pendingRequest&&o.pendingRequest.abandon();this.emitChange(m);};f.exports=new j();},null);
__d('ReactComposerMultilingualStatusActionType',['keyMirrorRecursive'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports=c('keyMirrorRecursive')({MOUNTED_MULTILINGUAL_STATUS:null,MULTILINGUAL_PROMPT_CLICK:null,MULTILINGUAL_PROMPT_CLOSE:null,LANGUAGE_CREATED:null,LANGUAGE_CHANGED:null,LANGUAGE_REMOVED:null,SET_LANGUAGE_EDITOR_STATE:null,SET_SPECIFIED_POST_LANGUAGE:null,PREFILL_MULTILINGUAL_DATA:null},'ReactComposerMultilingualStatusActionType');},null);
__d('ReactComposerMultilingualStatusStore',['ReactComposerMultilingualStatusActionType','ReactComposerStoreBase','MentionsInputUtility','getMentionsInputDecorator','getMentionsTextForContentState','immutable'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('immutable').Record({languageDialect:null,editorState:null});h=babelHelpers.inherits(k,c('ReactComposerStoreBase'));i=h&&h.prototype;function k(){'use strict';var l;i.constructor.call(this,function(){return {statuses:c('immutable').List(),specifiedPostLanguage:''};},function(m){switch(m.type){case c('ReactComposerMultilingualStatusActionType').MOUNTED_MULTILINGUAL_STATUS:l&&l.$ReactComposerMultilingualStatusStore1(m);break;case c('ReactComposerMultilingualStatusActionType').LANGUAGE_CREATED:l&&l.$ReactComposerMultilingualStatusStore2(m);break;case c('ReactComposerMultilingualStatusActionType').LANGUAGE_REMOVED:l&&l.$ReactComposerMultilingualStatusStore3(m);break;case c('ReactComposerMultilingualStatusActionType').LANGUAGE_CHANGED:l&&l.$ReactComposerMultilingualStatusStore4(m);break;case c('ReactComposerMultilingualStatusActionType').SET_LANGUAGE_EDITOR_STATE:l&&l.$ReactComposerMultilingualStatusStore5(m);break;case c('ReactComposerMultilingualStatusActionType').SET_SPECIFIED_POST_LANGUAGE:l&&l.$ReactComposerMultilingualStatusStore6(m);break;case c('ReactComposerMultilingualStatusActionType').PREFILL_MULTILINGUAL_DATA:l&&l.$ReactComposerMultilingualStatusStore7(m);break;}});l=this;}k.prototype.getAllPostDialects=function(l){'use strict';var m=this.getLanguageDialects(l);m.push(this.getSpecifiedPostLanguage(l));return m;};k.prototype.getSpecifiedPostLanguage=function(l){'use strict';return this.getComposerData(l).specifiedPostLanguage;};k.prototype.getLanguageDialects=function(l){'use strict';return this.getStatuses(l).map(function(m){return m.languageDialect;}).toArray();};k.prototype.getEditorStates=function(l){'use strict';return this.getStatuses(l).map(function(m){return m.editorState;}).toArray();};k.prototype.getMessages=function(l){'use strict';return this.getStatuses(l).map(function(m){return this.$ReactComposerMultilingualStatusStore8(m);}.bind(this)).toArray();};k.prototype.getMessage=function(l,m){'use strict';var n=this.getStatus(l,m);return this.$ReactComposerMultilingualStatusStore8(n);};k.prototype.getStatuses=function(l){'use strict';return this.getComposerData(l).statuses;};k.prototype.getStatus=function(l,m){'use strict';var n=this.getComposerData(l),o=this.$ReactComposerMultilingualStatusStore9(n.statuses,m);return n.statuses.get(o);};k.prototype.$ReactComposerMultilingualStatusStore9=function(l,m){'use strict';var n=l.findIndex(function(o){return (o.languageDialect===m);});if(n===-1)throw new Error('Undefined status language dialect: '+m);return n;};k.prototype.$ReactComposerMultilingualStatusStore8=function(l){'use strict';var m=l.editorState.getCurrentContent();return c('getMentionsTextForContentState')(m);};k.prototype.$ReactComposerMultilingualStatusStore2=function(l){'use strict';var m=this.validateAction(l,['composerID','languageDialect','languageConfig']),n=m[0],o=m[1],p=m[2],q=this.getComposerData(n),r=new j({languageDialect:o,editorState:p.editorState});q.statuses=q.statuses.push(r);this.emitChange(n);};k.prototype.$ReactComposerMultilingualStatusStore3=function(l){'use strict';var m=this.validateAction(l,['composerID','languageDialect']),n=m[0],o=m[1],p=this.getComposerData(n),q=this.$ReactComposerMultilingualStatusStore9(p.statuses,o);p.statuses=p.statuses.splice(q,1);this.emitChange(n);};k.prototype.$ReactComposerMultilingualStatusStore4=function(l){'use strict';var m=this.validateAction(l,['composerID','oldLanguageDialect','newLanguageDialect']),n=m[0],o=m[1],p=m[2],q=this.getComposerData(n),r=this.$ReactComposerMultilingualStatusStore9(q.statuses,o);q.statuses=q.statuses.set(r,new j({languageDialect:p,editorState:q.statuses.get(r).editorState}));this.emitChange(n);};k.prototype.$ReactComposerMultilingualStatusStore5=function(l){'use strict';var m=this.validateAction(l,['composerID','languageDialect','editorState']),n=m[0],o=m[1],p=m[2],q=this.getComposerData(n),r=this.$ReactComposerMultilingualStatusStore9(q.statuses,o);q.statuses=q.statuses.set(r,new j({languageDialect:o,editorState:p}));this.emitChange(n);};k.prototype.$ReactComposerMultilingualStatusStore1=function(l){'use strict';this.$ReactComposerMultilingualStatusStore6(l);};k.prototype.$ReactComposerMultilingualStatusStore6=function(l){'use strict';var m=this.validateAction(l,['composerID','languageDialect']),n=m[0],o=m[1],p=this.getComposerData(n);p.specifiedPostLanguage=o;this.emitChange(n);};k.prototype.$ReactComposerMultilingualStatusStore7=function(l){'use strict';var m=this.validateAction(l,['composerID','multilingualData']),n=m[0],o=m[1],p=this.getComposerData(n);p.specifiedPostLanguage=o.specifiedDialect;o.multilingualStatuses.forEach(function(q){p.statuses=p.statuses.push(new j({languageDialect:q.dialect,editorState:c('MentionsInputUtility').createFromTextWithMentions(q.message,c('getMentionsInputDecorator')())}));});this.emitChange(n);};f.exports=new k();},null);
__d('ReactComposerPromptsActionTypes',['keyMirrorRecursive'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports=c('keyMirrorRecursive')({SET_MINUTIAE_DATA:null,SET_PROMPT_DATA:null,SET_PROMPT_XHP:null},'ReactComposerPromptsActionTypes');},null);
__d('ReactComposerPromptsStore',['ReactComposerPromptsActionTypes','ReactComposerStoreBase'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('ReactComposerStoreBase'));i=h&&h.prototype;function j(){'use strict';var k;i.constructor.call(this,function(){return {promptData:null,promptXHP:null};},function(l){k&&k.handler(l);});k=this;}j.prototype.handler=function(k){'use strict';switch(k.type){case c('ReactComposerPromptsActionTypes').SET_MINUTIAE_DATA:this.$ReactComposerPromptsStore1(k);break;case c('ReactComposerPromptsActionTypes').SET_PROMPT_DATA:this.$ReactComposerPromptsStore2(k);break;case c('ReactComposerPromptsActionTypes').SET_PROMPT_XHP:this.$ReactComposerPromptsStore3(k);break;default:}};j.prototype.$ReactComposerPromptsStore1=function(k){'use strict';var l=this.validateAction(k,['composerID','minutiaeData']),m=l[0],n=l[1],o=this.getComposerData(m);o.minutiaeData=n;};j.prototype.getMinutiaeData=function(k){'use strict';return this.getComposerData(k).minutiaeData;};j.prototype.$ReactComposerPromptsStore2=function(k){'use strict';var l=this.validateAction(k,['composerID','promptData']),m=l[0],n=l[1],o=this.getComposerData(m);o.promptData=n;};j.prototype.getPromptData=function(k){'use strict';return this.getComposerData(k).promptData;};j.prototype.$ReactComposerPromptsStore3=function(k){'use strict';var l=this.validateAction(k,['composerID','promptXHP']),m=l[0],n=l[1],o=this.getComposerData(m);o.promptXHP=n;this.emitChange(m);};j.prototype.getPromptXHP=function(k){'use strict';return this.getComposerData(k).promptXHP;};f.exports=new j();},null);
__d('ReactComposerPostDataUtils',['AdsAPITargetFields','ReactComposerAttachmentStore','ReactComposerAttachmentType','ReactComposerAudienceStore','ReactComposerCustomConfigStore','ReactComposerLocationAttachmentStore','ReactComposerLoggingStore','ReactComposerMinutiaeAttachmentStore','ReactComposerMultilingualStatusStore','ReactComposerPhotoStore','ReactComposerPostUtilsCore','ReactComposerProfileBadgeStore','ReactComposerPromptsStore','ReactComposerScrapedAttachmentStore','ReactComposerStatusStore','ReactComposerStore','ReactComposerTaggerStore','ReactComposerTaggerType','ReactComposerSelectedImagesStore','ReactComposerSlideshowStore','ReactComposerTopicFeedsTaggerStore','PagesComposerBoostedPostsStore','PhotoEditorLoggingConstants','PhotoEditorSaveStates','PlaceAttachmentSetting','PUWApplications','SlideshowConstants','SlideshowUtil','isNumberLike','StorySurfaces'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={getPostData:function(i){var j=i.composerID,k=i.targetID,l=c('ReactComposerTaggerStore').getTaggerData(j,c('ReactComposerTaggerType').PEOPLE)||[],m=[],n=[];l.forEach(function(ua){m.push(ua.getTitle());n.push(ua.getUniqueID());});var o=c('ReactComposerTaggerStore').getTaggerData(j,c('ReactComposerTaggerType').PRODUCT)||[];o=o.filter(function(ua){return !ua.getAuxiliaryData().isFacebox;});var p=o.map(function(ua){return ua.getUniqueID();}),q=c('ReactComposerTaggerStore').getTaggerData(j,c('ReactComposerTaggerType').ACTIVITY),r=[],s=[],t=[],u;if(q&&q.action&&q.object){r.push(q.action.getUniqueID());u=q.actionIconID;if(c('isNumberLike')(q.object.getUniqueID())){s.push(q.object.getUniqueID());t.push('');}else t.push(q.object.getTitle());}var v=!c('ReactComposerMinutiaeAttachmentStore').getMarkup(j),w=c('ReactComposerLocationAttachmentStore').getMarkup(j)!==null?c('PlaceAttachmentSetting').SHOW_ATTACHMENT:c('PlaceAttachmentSetting').HIDE_ATTACHMENT,x=c('ReactComposerMultilingualStatusStore').getMessages(j),y=c('ReactComposerMultilingualStatusStore').getLanguageDialects(j),z=c('ReactComposerMultilingualStatusStore').getSpecifiedPostLanguage(j),aa=c('ReactComposerTaggerStore').getTaggerData(j,c('ReactComposerTaggerType').LOCATION),ba=aa?aa.place:null,ca=c('ReactComposerTaggerStore').getTaggerData(j,c('ReactComposerTaggerType').BACKDATE)||{},da={year:this._sanitizeDateField(ca.year),month:this._sanitizeDateField(ca.month),day:this._sanitizeDateField(ca.day),hour:this._sanitizeDateField(ca.hour),minute:this._sanitizeDateField(ca.minute)},ea=aa&&aa.implicitLocation?aa.implicitLocation.citypageid:null,fa=c('ReactComposerTaggerStore').getTaggerData(j,c('ReactComposerTaggerType').SPONSOR)||[],ga=[];fa.forEach(function(ua){ga.push(ua.getUniqueID());});var ha,ia=c('ReactComposerAudienceStore').getLegacyAudience(j);if(ia)ha=[{value:ia}];var ja=i.useHints,ka=c('ReactComposerTaggerStore').getTaggerData(j,c('ReactComposerTaggerType').TARGETING),la=ka?ja?ka.hints:ka.targeting:null;if(la){if(!ja&&la.fan_of)la.fan_of=la.fan_of.map(function(ua){return ua.id;});if(ja&&la[c('AdsAPITargetFields').INTERESTS])la[c('AdsAPITargetFields').INTERESTS]=la[c('AdsAPITargetFields').INTERESTS].map(function(ua){return ua.id;});}var ma=ka?ka.gating:null;if(i.composerConfig.contextInfo.stopFeedDistributionDateFormatted){if(!la)la={};la['relevant-until-date']=i.composerConfig.contextInfo.stopFeedDistributionDateFormatted;la['relevant-until-time']=i.composerConfig.contextInfo.stopFeedDistributionTimeFormatted;}var na=c('PagesComposerBoostedPostsStore').getConfig(j),oa=c('ReactComposerScrapedAttachmentStore').getAttachmentConfig(j),pa=!!c('ReactComposerTaggerStore').getTaggerData(j,c('ReactComposerTaggerType').MARKDOWN).isMarkdown,qa=c('ReactComposerTaggerStore').getTaggerData(j,c('ReactComposerTaggerType').CONTENT_WARNINGS);if(qa!=null)qa=qa.map(function(ua){return ua.getUniqueID();});var ra=null;if(!c('ReactComposerTopicFeedsTaggerStore').getIsDarkLaunch(j))ra=c('ReactComposerTopicFeedsTaggerStore').getTaggedTopics(j).toArray();var sa=c('ReactComposerPromptsStore').getPromptData(j),ta=c('ReactComposerCustomConfigStore').isFeedOnlyPost(j)?[c('StorySurfaces').TIMELINE]:null;return Object.assign({action_type_id:r,attachment:oa,backdated_date:da,boosted_post_config:na,audience:ha,composer_session_id:c('ReactComposerLoggingStore').getSessionID(j),composer_type:i.composerType,composertags_city:ea,composertags_place:ba&&ba.getUniqueID()||ea,composertags_place_name:ba&&ba.getTitle(),composertags_with:n,composertags_sponsors:ga,composertags_product_items:p,content_warnings:qa,feed_targeted_data:la,feed_topics:ra,hide_object_attachment:v,icon_id:u,is_explicit_place:!!ba,is_markdown:pa,is_q_and_a:c('ReactComposerAttachmentStore').getIsAttachmentSelected(j,c('ReactComposerAttachmentType').QANDA),is_profile_badge_post:c('ReactComposerProfileBadgeStore').hasProfileBadge(j),multilingual_statuses:x,multilingual_status_langs:y,multilingual_specified_lang:z,object_id:s,object_str:t,place_attachment_setting:w,post_surfaces_blacklist:ta,privacyx:c('ReactComposerAudienceStore').getAudience(j),prompt_id:sa?sa.promptID:null,prompt_tracking_string:sa?sa.trackingString:null,ref:c('ReactComposerStore').getRef(j),tagger_session_id:aa&&aa.sessionID,target_type:c('ReactComposerStore').getTargetType(j),targeted_privacy_data:ma,text_composertags_with:m,xhpc_message:c('ReactComposerStatusStore').getMessage(j),xhpc_message_text:c('ReactComposerStatusStore').getMessageText(j),is_forced_reshare_of_post:oa&&oa.reshare_original_post,xc_disable_config:{xc_disable_link:oa&&oa.readOnly}},this._getScrapedAttachmentData(oa),c('ReactComposerPostUtilsCore').getCoreData(j,i.composerConfig.contextInfo,k));},getPhotoUploadsData:function(i,j){var k=j.map(function(n){return n.photoID;}).toArray(),l=c('ReactComposerSlideshowStore').isSlideshowSelected(i),m=null;if(l)m=this._getSlideshowSpec(i);return Object.assign({composer_unpublished_photo:k,qn:c('ReactComposerLoggingStore').getSessionID(i),slideshow_spec:m,waterfallxapp:c('PUWApplications').WEB_REACT_COMPOSER,xy_tags:this._getXYTagData(i)},this._getCreativeEditingToolsData(j));},_sanitizeDateField:function(i){return !i||i===-1||i===0?null:i;},_getSlideshowSpec:function(i){var j=c('ReactComposerSlideshowStore').getAudioFile(i),k=c('ReactComposerSlideshowStore').getDurationInMS(i),l=c('ReactComposerSlideshowStore').getTransitionInMS(i),m=c('ReactComposerSelectedImagesStore').getNumberOfImages(i),n=c('SlideshowUtil').getTotalLengthInSec(k,m),o=c('SlideshowUtil').getDurationParam(m,n,l);if(j)j=c('SlideshowUtil').getAudioFileParam(j,n);return {photo_ids:c('ReactComposerSelectedImagesStore').getPhotoIDs(i),images_crops:c('ReactComposerSelectedImagesStore').getImagesCrops(i),audio_file:j,photo_duration:o.durationInMS,photo_transition_duration:o.transitionInMS};},_getXYTagData:function(i){var j=c('ReactComposerPhotoStore').getAllTaggedFaceboxes(i).map(function(l){return {fbid:l.get('photoID'),x:l.get('x'),y:l.get('y'),name:l.get('taggedValue'),subject:l.get('taggedSubjectID'),from_facebox:true,source:l.get('isMagicTag')?'composerx_suggestions':'composerx_flyout'};}),k=c('ReactComposerPhotoStore').getAllXYTags(i).map(function(l){return {fbid:l.get('photoID'),x:l.get('x'),y:l.get('y'),name:l.get('name'),subject:l.get('subject'),from_facebox:l.get('from_facebox'),source:l.get('source')};});return j.concat(k);},_getCreativeEditingToolsData:function(i){var j={},k={},l={},m={};i.forEach(function(o){var p=o.get('photoID'),q=c('PhotoEditorSaveStates').getLoggingData(o.get('originalPhotoID'));if(q){j[p]=q.hasFilter?true:null;k[p]=q.hasCrop?true:null;l[p]=q.textOverlays;m[p]=q.stickers;}});var n={};n[c('PhotoEditorLoggingConstants').COMPOSER_IMAGE_HAS_FILTER]=j;n[c('PhotoEditorLoggingConstants').COMPOSER_IMAGE_HAS_CROP]=k;n[c('PhotoEditorLoggingConstants').COMPOSER_IMAGE_TEXT_OVERLAY]=l;n[c('PhotoEditorLoggingConstants').COMPOSER_IMAGE_STICKER]=m;return n;},_getScrapedAttachmentData:function(i){if(!i||!i.params||i.readOnly)return null;return {xc_share_params:JSON.stringify(i.params),xc_share_target_type:i.type,xc_share_images:i.params.images,xc_share_title:i.params.title,xc_share_summary:i.params.summary,xc_link_url:i.params.url};}};f.exports=h;},null);
__d("PhotoEditorImageData",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(j,k,l,m){"use strict";this.r=j;this.g=k;this.b=l;this.a=m;}h.fromArray=function(j,k){return new h(j[k],j[k+1],j[k+2],j[k+3]);};function i(j){"use strict";this.image_data=j;this.width=j.width;this.height=j.height;this.array=j.data;}i.prototype.getData=function(){"use strict";return this.image_data;};i.prototype.getWidth=function(){"use strict";return this.width;};i.prototype.getHeight=function(){"use strict";return this.height;};i.prototype.getPixel=function(j,k){"use strict";var l=this.getIndex(j,k);return h.fromArray(this.array,l);};i.prototype.setPixel=function(j,k,l){"use strict";var m=this.getIndex(j,k);this.array[m]=l.r;this.array[m+1]=l.g;this.array[m+2]=l.b;this.array[m+3]=l.a;};i.prototype.getIndex=function(j,k){"use strict";return 4*(j+k*this.width);};i.prototype.forEach=function(j){"use strict";for(var k=0;k<this.getWidth();k++)for(var l=0;l<this.getHeight();l++)this.setPixel(k,l,j(this.getPixel(k,l)));};i.Pixel=h;f.exports=i;},null);
__d('PhotoEditorCanvas',['BlobFactory','DOM','PhotoEditorImageData','PhotoResizeModeConst','Vector','sprintf'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){'use strict';this._editor=i;this._canvas=c('DOM').create('canvas');this._ctx=this._canvas.getContext('2d');this._drawHandler=null;}h.prototype.setImageContent=function(i){'use strict';this._canvas.width=i.width;this._canvas.height=i.height;this._ctx.drawImage(i,0,0);return this;};h.prototype.drawGraphic=function(){'use strict';this._ctx.drawImage.apply(this._ctx,arguments);return this;};h.prototype.isBlobSupported=function(){'use strict';return !!this._canvas.toBlob;};h.prototype.getElement=function(){'use strict';return this._canvas;};h.prototype.getDimensions=function(){'use strict';return new (c('Vector'))(this._canvas.width,this._canvas.height,'document');};h.prototype.getWidth=function(){'use strict';return this._canvas.width;};h.prototype.getHeight=function(){'use strict';return this._canvas.height;};h.prototype.getContext=function(){'use strict';return this._ctx;};h.prototype.setWidth=function(i){'use strict';this._canvas.width=i;return this;};h.prototype.setHeight=function(i){'use strict';this._canvas.height=i;return this;};h.prototype.toBlob=function(i){'use strict';if(this.isBlobSupported()){this._canvas.toBlob(i);return;}this.getBlobFromDataURL(i);};h.prototype.getBlobFromDataURL=function(i){'use strict';var j=this.toDataURL('image/png'),k=j.match(/^data:(.*?);base64,/),l=k[1],m=j.substr(k[0].length),n=b.atob(m),o=new ArrayBuffer(n.length),p=new Uint8Array(o);for(var q=0;q<n.length;q++)p[q]=n.charCodeAt(q);var r=c('BlobFactory').getBlob([o],{type:l});i(r);};h.prototype.toBlobURL=function(i){'use strict';this.toBlob(function(j){i(b.URL.createObjectURL(j));});};h.prototype.toURL=function(i){'use strict';if(this.isBlobSupported()){this.toBlobURL(i);return;}i(this.toDataURL());};h.prototype.toDataURL=function(i){'use strict';return this._canvas.toDataURL(i);};h.prototype.resizedCopy=function(i,j){'use strict';var k=i.x/this.getWidth(),l=i.y/this.getHeight();if(j==c('PhotoResizeModeConst').CONTAIN){if(k>l){return this.scaledCopy(l);}else return this.scaledCopy(k);}else if(j==c('PhotoResizeModeConst').COVER){if(k<l){return this.scaledCopy(l);}else return this.scaledCopy(k);}else throw new Error('mode must be one of PhotoResizeModeConst');};h.prototype.scaledCopy=function(i){'use strict';var j=this._canvas.width*i,k=this._canvas.height*i;return new h().setWidth(j).setHeight(k).drawGraphic(this._canvas,0,0,j,k);};h.prototype.copy=function(){'use strict';return this.scaledCopy(1);};h.prototype.getPixelColor=function(i,j,k){'use strict';var l=new (c('PhotoEditorImageData'))(this.getImageData(i,j,1,1)).getPixel(0,0);if(k)l=k(l);return c('sprintf')('rgba(%s,%s,%s,%s)',l.r,l.g,l.b,l.a);};h.prototype.getImageData=function(i,j,k,l){'use strict';return this._ctx.getImageData(i||0,j||0,k||this.getWidth(),l||this.getHeight());};h.prototype.putImageData=function(i,j,k){'use strict';this._ctx.putImageData(i,j||0,k||0);return this;};h.prototype.toDataURI=function(){'use strict';return this._canvas.toDataURL('image/png');};h.prototype.toBase64=function(){'use strict';var i='data:image/png;base64,',j=this.toDataURI();return j.slice(i.length);};h.prototype.applyFilter=function(i,j){'use strict';this.putImageData(new i(this).run(j));};h.prototype.enableDrawing=function(i,j){'use strict';if(!this._editor)return;this.disableDrawing();this._drawHandler=new i(this._editor,j).start();return this._drawHandler;};h.prototype.setDrawingFillStyle=function(i){'use strict';if(!this._drawHandler)return;this._drawHandler.setFillStyle(i);};h.prototype.setFillStyle=function(i){'use strict';this._ctx.fillStyle=i;};h.prototype.disableDrawing=function(){'use strict';if(!this._drawHandler)return;this._drawHandler.stop();this._drawHandler=null;};h.prototype.clear=function(){'use strict';this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height);return this;};h.prototype.crop=function(i,j,k,l){'use strict';var m=new h().setWidth(k).setHeight(l);m.drawGraphic(this._canvas,Math.max(0,i),Math.max(0,j),k,l,0,0,k,l);this.setImageContent(m.getElement());return this;};h.prototype.fillText=function(i,j,k,l,m,n){'use strict';this._ctx.font=j;if(n){this._canvas.width=this._ctx.measureText(i).width;this._ctx.font=j;}this._ctx.textBaseline='top';this._ctx.fillStyle=k;this._ctx.fillText(i,l,m);return this;};h.prototype.fillCircle=function(i,j,k,l){'use strict';this._ctx.fillStyle=l||'black';this._ctx.beginPath();this._ctx.arc(i,j,k,0,Math.PI*2);this._ctx.closePath();this._ctx.fill();};h.prototype.fillRect=function(i,j,k,l,m){'use strict';this._ctx.fillStyle=m||'black';this._ctx.fillRect(i||0,j||0,k||this._canvas.width,l||this._canvas.height);return this;};f.exports=h;},null);
__d('PhotoEditorFont',['PhotoEditorConfig','sprintf'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('PhotoEditorConfig').Constants;function i(j,k,l){'use strict';this.$PhotoEditorFont1=j||h.DEFAULT_FONT_FAMILY;this.$PhotoEditorFont2=k||h.DEFAULT_FONT_SIZE;this.$PhotoEditorFont3=l||h.DEFAULT_FONT_METRIC;}i.prototype.setFamily=function(j){'use strict';this.$PhotoEditorFont1=j;};i.prototype.getFamily=function(){'use strict';return this.$PhotoEditorFont1;};i.prototype.setSize=function(j){'use strict';this.$PhotoEditorFont2=j;};i.prototype.getSize=function(){'use strict';return this.$PhotoEditorFont2;};i.prototype.setMetric=function(j){'use strict';this.$PhotoEditorFont3=j;};i.prototype.getMetric=function(){'use strict';return this.$PhotoEditorFont3;};i.prototype.toString=function(){'use strict';return c('sprintf')('%s%s %s',this.$PhotoEditorFont2,this.$PhotoEditorFont3,this.$PhotoEditorFont1);};i.prototype.copy=function(){'use strict';return new i(this.$PhotoEditorFont1,this.$PhotoEditorFont2,this.$PhotoEditorFont3);};i.getDefault=function(){return new i();};f.exports=i;},null);
__d('PhotoEditorGraphic',['cx','ArbiterMixin','PhotoEditorCanvas','CSS','DOM','Draggable','Event','PhotoEditorFont','Rect','SimpleDrag','Style','SubscriptionsHandler','UserAgent_DEPRECATED','Vector','clamp','emptyFunction','mixin','throttle'],function a(b,c,d,e,f,g,h){var i,j,k,l,m,n,o,p,q,r;if(c.__markCompiled)c.__markCompiled();var s=0,t=[],u=.7,v=.25,w=30,x=50,y=4,z=.8,aa=150,ba=315,ca=5,da=function(na){return {'-webkit-transform':na,'-moz-transform':na,'-ms-transform':na,transform:na};},ea=function(na,oa){var pa=na.x*oa.x+na.y*oa.y,qa=pa/(na.magnitude()*oa.magnitude());qa=c('clamp')(qa,-1,1);var ra=Math.acos(qa)*(180/Math.PI),sa=na.x*oa.y-oa.x*na.y;if(sa<0)ra*=-1;return ra;};function fa(){'use strict';this.root=c('DOM').create('div');c('CSS').addClass(this.root,"_5g8y");c('CSS').addClass(this.root,"_5a2z");var na=c('DOM').create('div');c('CSS').addClass(na,"_2fb7");c('CSS').addClass(na,"_5a2-");this.root.appendChild(na);this.$FreeFormEditButton1=c('emptyFunction');this.$FreeFormEditButton2=c('emptyFunction');this.$FreeFormEditButton3=c('emptyFunction');var oa=new (c('SimpleDrag'))(this.root);oa.subscribe('start',function(pa,event){if(event.button!==0)return false;this.$FreeFormEditButton4=true;c('CSS').addClass(this.root,"_2fb8");this.$FreeFormEditButton1(event);}.bind(this));oa.subscribe('update',c('throttle')(this.$FreeFormEditButton5,w,this));oa.subscribe('end',function(pa,event){this.$FreeFormEditButton4=false;c('CSS').removeClass(this.root,"_2fb8");c('Style').apply(this.root,da('translate(50%, -50%)'));this.$FreeFormEditButton2(event);}.bind(this));}fa.prototype.$FreeFormEditButton5=function(na,event){'use strict';if(!this.$FreeFormEditButton4)return;this.$FreeFormEditButton3(event);};fa.prototype.setDragStartHandler=function(na){'use strict';this.$FreeFormEditButton1=na;return this;};fa.prototype.setDragMoveHandler=function(na){'use strict';this.$FreeFormEditButton3=na;return this;};fa.prototype.setDragEndHandler=function(na){'use strict';this.$FreeFormEditButton2=na;return this;};fa.prototype.getElement=function(){'use strict';return this.root;};function ga(){'use strict';this.$DOMDrawer1=new (c('Vector'))();this.$DOMDrawer2=new XMLSerializer();this.$DOMDrawer3=undefined;}ga.prototype.setDimensions=function(na){'use strict';this.$DOMDrawer1=na;return this;};ga.prototype.render=function(na){'use strict';var oa='<svg xmlns="http://www.w3.org/2000/svg" '+'width="'+this.$DOMDrawer1.x+'" '+'height="'+this.$DOMDrawer1.y+'">'+'<foreignObject width="100%" height="100%">'+'<div xmlns="http://www.w3.org/1999/xhtml">'+this.$DOMDrawer2.serializeToString(na)+'</div>'+'</foreignObject>'+'</svg>',pa=new Image();pa.width=this.$DOMDrawer1.x;pa.height=this.$DOMDrawer1.y;pa.src=this.$DOMDrawer4(oa);return pa;};ga.prototype.$DOMDrawer4=function(na){'use strict';return 'data:image/svg+xml;base64,'+b.btoa(na);};i=babelHelpers.inherits(ha,c('mixin')(c('ArbiterMixin')));j=i&&i.prototype;function ha(na,oa,pa){'use strict';j.constructor.call(this);this.id=s++;this.photoEditor=na;t.push(this);this.root=c('DOM').create('div');this.maxWidth=oa;this.maxHeight=pa;c('CSS').addClass(this.root,"_55gm");var qa=c('DOM').create('div');c('CSS').addClass(qa,"_5g8y");c('CSS').addClass(qa,"_bbn");var ra=c('DOM').create('div');c('CSS').addClass(ra,"_2fb7");c('CSS').addClass(ra,"_bbo");qa.appendChild(ra);this.root.appendChild(qa);this.$Graphic1=c('DOM').create('div');c('CSS').addClass(this.$Graphic1,"_5lzw");this.$Graphic1.appendChild(this.root);this.$Graphic2=new (c('Vector'))(0,0,'document');this.subscriptionsHandler=new (c('SubscriptionsHandler'))();this.subscriptionsHandler.addSubscriptions(c('Event').listen(qa,'click',this.remove.bind(this)),c('Event').listen(qa,'mousedown',function(event){c('CSS').addClass(qa,"_2fb8");event.stopPropagation();}),c('Event').listen(qa,'mouseleave',function(event){c('CSS').removeClass(qa,"_2fb8");}));}ha.prototype.serialize=function(){'use strict';var na=this.getPos(),oa=this.getDimensions(),pa=this.photoEditor.getCanvasDimensions();return {type:this.constructor,left:na.x/pa.x,top:na.y/pa.y,width:oa.x/pa.x,height:oa.y/pa.y,rotation:this.getRotation()};};ha.prototype.initFromSerializedState=function(na){'use strict';var oa=this.photoEditor.getCanvasDimensions();this.setDimensions(new (c('Vector'))(na.width*oa.x,na.height*oa.y));this.setPos(new (c('Vector'))(na.left*oa.x,na.top*oa.y));this.setRotation(na.rotation);};ha.prototype.onActive=function(){'use strict';this.__draggable=this.__draggable||new (c('Draggable'))(this.$Graphic1).setUseAbsolute(true).setUseScroller(false).addHandle(this.root).setDropHandler(this.updatePos.bind(this));c('CSS').addClass(this.root,"_36w9");this.updateDraggableBoundingBox();};ha.prototype.onInactive=function(){'use strict';this.__draggable&&this.__draggable.destroy();this.__draggable=null;c('CSS').removeClass(this.root,"_36w9");};ha.prototype.updateDraggableBoundingBox=function(){'use strict';if(this.__draggable){var na=this.getDimensions(),oa=this.photoEditor.getGraphicsLayer(),pa=c('Vector').getElementPosition(oa),qa=c('Vector').getElementDimensions(oa),ra=new (c('Rect'))(pa.y-na.y,pa.x+qa.x+na.x,pa.y+qa.y+na.y,pa.x-na.x);this.__draggable.setBoundingBox(ra);}};ha.prototype.onBeforeSuddenTransformation=function(){'use strict';};ha.prototype.onAfterSuddenTransformation=function(){'use strict';};ha.prototype.getElement=function(){'use strict';return this.$Graphic1;};ha.prototype.getInitialDimensions=function(){'use strict';return new (c('Vector'))(this.maxWidth,this.maxHeight,'document').mul(v);};ha.prototype.getPos=function(){'use strict';return this.$Graphic2;};ha.prototype.getCenterPos=function(){'use strict';return this.getPos().add(this.getDimensions().div(2));};ha.prototype.getCenterCoordinates=function(){'use strict';return c('Vector').getElementPosition(this.$Graphic1).add(this.getDimensions().div(2));};ha.prototype.isRemoved=function(){'use strict';return !this.$Graphic1.parentNode;};ha.prototype.setPos=function(na){'use strict';this.$Graphic2=na;c('Style').apply(this.$Graphic1,{left:this.$Graphic2.x+'px',top:this.$Graphic2.y+'px'});};ha.prototype.updatePos=function(){'use strict';this.setPos(this.getNewPos());};ha.prototype.getNewPos=function(){'use strict';return new (c('Vector'))(c('Style').get(this.$Graphic1,'left'),c('Style').get(this.$Graphic1,'top'));};ha.prototype.setDimensions=function(na){'use strict';c('Style').apply(this.root,{width:na.x+'px',height:na.y+'px'});this.updateDraggableBoundingBox();};ha.prototype.remove=function(event){'use strict';this.subscriptionsHandler.release();c('DOM').remove(this.$Graphic1);this.photoEditor.removeGraphic(this);};ha.prototype.getDrawableObj=function(){'use strict';};ha.prototype.getDimensions=function(){'use strict';return c('Vector').getElementDimensions(this.$Graphic1);};ha.prototype.getDimensionsForDrawable=function(){'use strict';return c('Vector').getElementDimensions(this.root);};ha.prototype.getRotation=function(){'use strict';return 0;};ha.prototype.setRotation=function(na){'use strict';};ha.prototype.onDragStart=function(na){'use strict';if(c('UserAgent_DEPRECATED').firefox()){this.$Graphic3=na.layerX;this.$Graphic4=na.layerY;}else{this.$Graphic3=na.offsetX;this.$Graphic4=na.offsetY;}na.dataTransfer.setData('graphic_id',this.id);};ha.prototype.onDrop=function(na,oa){'use strict';if(this.id!==parseInt(na.dataTransfer.getData('graphic_id'),10))return;if(!oa)oa=new (c('Vector'))(0,0,'document');this.$Graphic2=new (c('Vector'))(oa.x+na.layerX-this.$Graphic3,oa.y+na.layerY-this.$Graphic4,'document');this.setPos(this.$Graphic2);na.kill();};k=babelHelpers.inherits(ia,ha);l=k&&k.prototype;function ia(na,oa,pa,qa,ra){'use strict';l.constructor.call(this,na,pa,qa);this.$ImageGraphic1=c('DOM').create('div');c('CSS').addClass(this.$ImageGraphic1,"_36wa");this.root.appendChild(this.$ImageGraphic1);this.$ImageGraphic2=pa/qa;this.$ImageGraphic3=0;this.$ImageGraphic4=0;this.$ImageGraphic5=false;this.$ImageGraphic6=new Image();this.$ImageGraphic6.crossOrigin='anonymous';c('Style').apply(this.$ImageGraphic6,{maxWidth:pa+'px',maxHeight:qa+'px'});c('CSS').addClass(this.root,"_55jn");c('CSS').addClass(this.root,'loading');this.$ImageGraphic7=c('DOM').create('div');c('CSS').addClass(this.$ImageGraphic7,"_5a2y");if(!ra)this.$ImageGraphic8();this.subscriptionsHandler.addSubscriptions(c('Event').listen(this.$ImageGraphic6,'load',this.$ImageGraphic9.bind(this)),c('Event').listen(this.root,'dragenter',c('Event').prevent),c('Event').listen(this.root,'dragover',c('Event').prevent),c('Event').listen(this.$ImageGraphic1,'mousedown',this.$ImageGraphic10.bind(this)));this.$ImageGraphic6.src=oa;this.imageURL=oa;this.setDimensions(this.getInitialDimensions());}ia.prototype.serialize=function(){'use strict';return babelHelpers['extends']({},l.serialize.call(this),{imageURL:this.imageURL});};ia.prototype.getDrawableObj=function(){'use strict';return this.$ImageGraphic6;};ia.prototype.onDragStart=function(na){'use strict';l.onDragStart.call(this,na);na.dataTransfer.setData('text/plain',this.$ImageGraphic6.src);};ia.prototype.$ImageGraphic8=function(){'use strict';var na=new fa();this.$ImageGraphic7.appendChild(na.getElement());this.root.appendChild(this.$ImageGraphic7);this.subscriptionsHandler.addSubscriptions(c('Event').listen(na.getElement(),'mousedown',function(event){event.stopPropagation();}));na.setDragStartHandler(function(){this.$ImageGraphic11=this.getCenterCoordinates();this.$ImageGraphic12();}.bind(this)).setDragMoveHandler(this.$ImageGraphic13.bind(this)).setDragEndHandler(function(){this.$ImageGraphic3=this.$ImageGraphic4;this.$ImageGraphic14();this.$ImageGraphic15();}.bind(this));this.$ImageGraphic16=na;};ia.prototype.$ImageGraphic13=function(event){'use strict';var na=c('Vector').getEventPosition(event),oa=this.$ImageGraphic11,pa=oa.distanceTo(na),qa=this.photoEditor.getCanvasDimensions(),ra=Math.max(qa.x,qa.y),sa=c('clamp')(pa*2,x,ra),ta=new (c('Vector'))(sa,sa),ua=ta.sub(this.getDimensions());if(ua.magnitude()>y){var va=this.getPos().sub(ua.div(2));this.setDimensions(ta);this.setPos(va);}var wa=na.sub(oa),xa=new (c('Vector'))(-1*Math.cos(Math.PI*3/4),-1*Math.sin(Math.PI*3/4)),ya=ea(xa,wa);this.$ImageGraphic17(ya);this.updatePos();};ia.prototype.$ImageGraphic17=function(na){'use strict';this.$ImageGraphic4=this.$ImageGraphic3+na;c('Style').apply(this.$ImageGraphic1,da('rotate('+this.$ImageGraphic4+'deg)'));this.$ImageGraphic18(ba+na);c('Style').apply(this.$ImageGraphic16.getElement(),da('translate(50%, -50%) rotate('+na+'deg)'));};ia.prototype.$ImageGraphic15=function(){'use strict';this.$ImageGraphic18(ba);};ia.prototype.$ImageGraphic14=function(){'use strict';c('Style').set(this.$ImageGraphic7,'transition','transform 0.3s cubic-bezier(.08,.98,.15,1.09)');};ia.prototype.$ImageGraphic12=function(){'use strict';c('Style').set(this.$ImageGraphic7,'transition','');};ia.prototype.$ImageGraphic18=function(na){'use strict';c('Style').apply(this.$ImageGraphic7,da('rotate('+na+'deg) '+'translateX('+this.getDimensions().x/2+'px) '+'rotate('+ -1*na+'deg)'));};ia.prototype.$ImageGraphic10=function(event){'use strict';this.photoEditor.setActiveGraphic(this);};ia.prototype.$ImageGraphic9=function(){'use strict';c('CSS').removeClass(this.root,'loading');c('CSS').addClass(this.root,'loaded');this.$ImageGraphic2=this.$ImageGraphic6.width/this.$ImageGraphic6.height;var na=new (c('PhotoEditorCanvas'))();na.setImageContent(this.$ImageGraphic6);c('Style').set(this.$ImageGraphic1,'backgroundImage','url('+na.toDataURL()+')');this.setDimensions(this.getDimensions());this.updatePos();this.inform('loaded');};ia.prototype.setPos=function(na){'use strict';l.setPos.call(this,na);var oa=this.$ImageGraphic19();c('Style').apply(this.$ImageGraphic1,{left:oa.x+'px',top:oa.y+'px'});};ia.prototype.setDimensions=function(na){'use strict';c('Style').apply(this.root,{height:na.x+'px',width:na.x+'px'});var oa=this.getImageScale(),pa=new (c('Vector'))(na.x,na.x).mul(oa.x,oa.y);c('Style').apply(this.$ImageGraphic1,{height:Math.round(pa.y)+'px',width:Math.round(pa.x)+'px'});this.$ImageGraphic15();this.updateDraggableBoundingBox();};ia.prototype.getImageScale=function(){'use strict';var na=this.$ImageGraphic2>1?new (c('Vector'))(1,1/this.$ImageGraphic2):new (c('Vector'))(this.$ImageGraphic2,1);return na.mul(u);};ia.prototype.$ImageGraphic19=function(){'use strict';var na=this.getDimensions(),oa=this.getDimensionsForDrawable();return na.sub(oa).div(2);};ia.prototype.getInitialDimensions=function(){'use strict';var na=Math.min(this.maxWidth,this.maxHeight);return new (c('Vector'))(na,na,'document').mul(v);};ia.prototype.getDimensionsForDrawable=function(){'use strict';return c('Vector').getElementDimensions(this.$ImageGraphic1);};ia.prototype.getRotation=function(){'use strict';return this.$ImageGraphic4;};ia.prototype.setRotation=function(na){'use strict';this.$ImageGraphic3=this.$ImageGraphic4=na;c('Style').apply(this.$ImageGraphic1,da('rotate('+this.$ImageGraphic3+'deg)'));};ia.prototype.onBeforeSuddenTransformation=function(){'use strict';this.$ImageGraphic12();};ia.prototype.onAfterSuddenTransformation=function(){'use strict';this.$ImageGraphic14();};m=babelHelpers.inherits(ja,ia);n=m&&m.prototype;function ja(na,oa,pa,qa,ra,sa){'use strict';n.constructor.call(this,na,pa,qa,ra,sa);this.$StickerGraphic1=oa;}ja.prototype.serialize=function(){'use strict';return babelHelpers['extends']({},n.serialize.call(this),{sticker_id:this.$StickerGraphic1});};o=babelHelpers.inherits(ka,ha);p=o&&o.prototype;function ka(na,oa,pa,qa,ra,sa,ta,ua,va,wa){'use strict';p.constructor.call(this,na,ua,va);this.$TextGraphic1=new Image();this.$TextGraphic2=qa;this.$TextGraphic3=new (c('PhotoEditorFont'))(pa);this.$TextGraphic4=null;this.$TextGraphic5=0;this.$TextGraphic6=1;this.$TextGraphic7=0;this.$TextGraphic8=new ga().setDimensions(ka.ImageSettings.DIMENSIONS);this.$TextGraphic9=sa;this.$TextGraphic10=c('DOM').create('textarea');c('Style').apply(this.$TextGraphic10,{position:'absolute',width:ka.ImageSettings.WIDTH+'px',padding:'0px',margin:'0px',border:'none',overflow:'hidden',resize:'none',background:'transparent'});var xa=c('DOM').create('div',{className:"_3bul"});c('Style').set(xa,'width',ka.ImageSettings.WIDTH+'px');xa.appendChild(this.$TextGraphic10);this.root.appendChild(xa);this.$TextGraphic11=ra||new (c('Vector'))(0,0,'document');this.focusInput=c('DOM').create('textarea',{className:"_5g78"});this.$TextGraphic12=c('DOM').create('div',{className:"_5l-2"});this.root.appendChild(this.focusInput);this.root.appendChild(this.$TextGraphic12);c('CSS').addClass(this.root,'loaded');c('CSS').addClass(this.root,"_5g79");this.subscriptionsHandler.addSubscriptions(c('Event').listen(this.$TextGraphic12,'click',function(){this.focusInput.focus();}.bind(this)),c('Event').listen(this.focusInput,'blur',function(){c('CSS').removeClass(this.root,"_5g7a");}.bind(this)),c('Event').listen(this.focusInput,'focus',function(){na.setActiveGraphic(this);c('CSS').addClass(this.root,"_5g7a");this.adjustFontSizeFit();}.bind(this)),c('Event').listen(this.focusInput,'keyup',c('throttle')(this.$TextGraphic13,50,this)));if(!wa)this.$TextGraphic14();var ya=Math.min(ua,va)*z,za=ya/ka.ImageSettings.WIDTH;this.$TextGraphic6=za;this.$TextGraphic15=new (c('Vector'))(ya,za*ka.ImageSettings.HEIGHT,'document');this.$TextGraphic15.setElementDimensions(this.root);this.updateText(oa);}ka.prototype.getInitialDimensions=function(){'use strict';return this.$TextGraphic15;};ka.prototype.$TextGraphic16=function(event){'use strict';var na=c('Vector').getEventPosition(event),oa=this.getDimensions(),pa=oa.magnitude(),qa=oa.div(pa),ra=this.$TextGraphic17,sa=ra.distanceTo(na),ta=this.photoEditor.getCanvasDimensions(),ua=Math.max(ta.x,ta.y),va=c('clamp')(sa*2,x,ua),wa=qa.mul(va),xa=wa.sub(oa);if(xa.magnitude()>y){var ya=this.getPos().sub(xa.div(2));this.setDimensions(wa);this.setPos(ya);}var za=ra.sub(na),ab=ea(oa.mul(-1,1),za);ab=(ab+360)%360;if(ab%90<ca||ab%90>90-ca)ab=Math.round(ab/90)*90;this.setRotation(ab);this.updateDraggableBoundingBox();this.updatePos();};ka.prototype.$TextGraphic14=function(){'use strict';var na=new fa();this.root.appendChild(na.getElement());this.subscriptionsHandler.addSubscriptions(c('Event').listen(na.getElement(),'mousedown',function(event){event.stopPropagation();}));na.setDragStartHandler(function(){this.$TextGraphic17=this.getCenterCoordinates();}.bind(this)).setDragMoveHandler(this.$TextGraphic16.bind(this));};ka.prototype.$TextGraphic13=function(){'use strict';var na=this.focusInput.value;if(na.length>aa)this.focusInput.value=na.substr(0,aa);this.updateText(this.focusInput.value);};ka.prototype.onActive=function(){'use strict';p.onActive.call(this);this.focusInput.focus();this.inform('focus');};ka.prototype.onInactive=function(){'use strict';p.onInactive.call(this);this.focusInput.blur();c('CSS').removeClass(this.root,"_5g7a");this.inform('blur');var na=this.$TextGraphic4.replace(/^\s*/,'').replace(/\s*$/,'');if(!na.length)this.remove();};ka.prototype.getRotation=function(){'use strict';return this.$TextGraphic5;};ka.prototype.setRotation=function(na){'use strict';this.$TextGraphic5=na;c('Style').apply(this.root,da('rotate('+this.$TextGraphic5+'deg)'));};ka.prototype.setDimensions=function(na){'use strict';this.$TextGraphic6=na.x/ka.ImageSettings.WIDTH;c('Style').apply(this.root,{width:na.x+'px',height:this.$TextGraphic6*ka.ImageSettings.HEIGHT+'px'});this.$TextGraphic18();};ka.prototype.getDrawableObj=function(){'use strict';return this.$TextGraphic1;};ka.prototype.getTextAlign=function(){'use strict';return this.$TextGraphic9;};ka.prototype.getText=function(){'use strict';return this.$TextGraphic4;};ka.prototype.getFillStyle=function(){'use strict';return this.$TextGraphic2;};ka.prototype.getFontFamily=function(){'use strict';return this.$TextGraphic3.getFamily();};ka.prototype.updateText=function(na,oa,pa){'use strict';if(pa)this.$TextGraphic2=pa;if(oa)this.$TextGraphic3.setFamily(oa);if(typeof na==='string'){na=na.substr(0,aa);if(this.$TextGraphic4!=na){this.focusInput.value=this.$TextGraphic4=na;this.$TextGraphic10.innerText=this.$TextGraphic10.textContent=na;}}c('Style').apply(this.focusInput,{textAlign:this.$TextGraphic9,color:this.$TextGraphic2,fontFamily:this.$TextGraphic3.getFamily()});c('Style').apply(this.$TextGraphic10,{textAlign:this.$TextGraphic9,font:this.$TextGraphic3.toString(),color:this.$TextGraphic2});this.adjustFontSizeFit();this.$TextGraphic1=this.$TextGraphic8.render(this.$TextGraphic10);};ka.prototype.adjustFontSizeFit=function(){'use strict';var na=ka.ImageSettings.MAX_FONT;this.$TextGraphic3.setSize(na);c('Style').apply(this.$TextGraphic10,{font:this.$TextGraphic3.toString(),height:'0px'});while(this.$TextGraphic10.scrollHeight>ka.ImageSettings.HEIGHT){this.$TextGraphic3.setSize(--na);c('Style').set(this.$TextGraphic10,'font',this.$TextGraphic3.toString());}this.$TextGraphic7=(ka.ImageSettings.HEIGHT-this.$TextGraphic10.scrollHeight)/2;c('Style').apply(this.$TextGraphic10,{marginTop:this.$TextGraphic7+'px',marginBottom:this.$TextGraphic7+'px',height:this.$TextGraphic10.scrollHeight+'px'});this.$TextGraphic18();};ka.prototype.setFontSize=function(na){'use strict';this.$TextGraphic3.setSize(na);};ka.prototype.$TextGraphic18=function(){'use strict';var na=this.$TextGraphic6,oa=this.$TextGraphic10.clientHeight;setTimeout(function(){c('Style').apply(this.focusInput,{width:ka.ImageSettings.WIDTH*na+'px',height:oa*na+'px',marginTop:this.$TextGraphic7*na+'px',marginBottom:this.$TextGraphic7*na+'px',fontSize:this.$TextGraphic3.getSize()*na+'px'});}.bind(this),0);};ka.prototype.setTextAlign=function(na){'use strict';this.$TextGraphic9=na;this.updateText();};ka.prototype.setText=function(na){'use strict';this.updateText(na);};ka.prototype.setFontFamily=function(na){'use strict';this.$TextGraphic3.setFamily(na);this.updateText();};ka.prototype.setFillStyle=function(na){'use strict';this.$TextGraphic2=na;this.updateText();};ka.prototype.getColorCoordinates=function(){'use strict';return new (c('Vector'))(this.$TextGraphic11.x,this.$TextGraphic11.y,'document');};ka.prototype.setColorCoordinates=function(na){'use strict';this.$TextGraphic11=na;};ka.prototype.serialize=function(){'use strict';return babelHelpers['extends']({},p.serialize.call(this),{text:this.$TextGraphic4,fontFamily:this.$TextGraphic3.getFamily(),fill:this.$TextGraphic2,textAlign:this.$TextGraphic9,colorCoordinates:{x:this.$TextGraphic11.x,y:this.$TextGraphic11.y}});};ka.prototype.initFromSerializedState=function(na){'use strict';this.$TextGraphic9=na.textAlign;this.$TextGraphic11=na.colorCoordinates;this.updateText(na.text,na.fontFamily,na.fill);p.initFromSerializedState.call(this,na);};ka.ImageSettings={WIDTH:200,HEIGHT:120,MAX_FONT:30,DIMENSIONS:new (c('Vector'))(200,120)};q=babelHelpers.inherits(la,ia);r=q&&q.prototype;la.prototype.remove=function(){'use strict';r.remove.call(this);b.URL.revokeObjectURL(this.imageURL);};function la(){'use strict';q.apply(this,arguments);}function ma(na,oa){if(t[na])t[na].onDrop(oa);}f.exports={Blob:la,FreeFormEditButton:fa,Graphic:ha,Image:ia,onDrop:ma,Sticker:ja,Text:ka};},null);
__d('ProfilePicCanvas',['PhotoEditorCanvas'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){'use strict';this.$ProfilePicCanvas1=new (c('PhotoEditorCanvas'))();this.$ProfilePicCanvas1.setImageContent(i);this.$ProfilePicCanvas2=[];this.$ProfilePicCanvas3=1;}h.prototype.toBlob=function(i){'use strict';this.$ProfilePicCanvas4().toBlob(i);};h.prototype.addGraphic=function(i,j){'use strict';i.setPos(j);this.$ProfilePicCanvas2.push(i);};h.prototype.setResizeFactor=function(i){'use strict';this.$ProfilePicCanvas3=i;return this;};h.prototype.$ProfilePicCanvas5=function(){'use strict';return window.devicePixelRatio||1;};h.prototype.$ProfilePicCanvas6=function(i){'use strict';return i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1;};h.prototype.$ProfilePicCanvas4=function(){'use strict';var i=this.$ProfilePicCanvas1.getWidth(),j=new (c('PhotoEditorCanvas'))(),k=j.getContext();j.setImageContent(this.$ProfilePicCanvas1.getElement());var l=this.$ProfilePicCanvas5(),m=this.$ProfilePicCanvas6(k),n=l/m;if(n!==1){j=j.scaledCopy(n);k=j.getContext();k.scale(n,n);k.save();}var o,p;for(var q=0;q<this.$ProfilePicCanvas2.length;q++){o=this.$ProfilePicCanvas2[q];p=o.getPos();k.save();k.translate(p.x,p.y);j.drawGraphic(o.getDrawableObj(),0,0,i*this.$ProfilePicCanvas3,i*this.$ProfilePicCanvas3);k.restore();}return j;};f.exports=h;},null);
__d('ReactComposerProfilePictureFrameActionTypes',['keyMirrorRecursive'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports=c('keyMirrorRecursive')({CROP_IMAGE:null,POST_START:null,POST_SUCCESS:null,SET_OVERLAYS:null,SET_PHOTO_DATA:null,SET_SELECTED_ID:null},'ReactComposerProfilePictureFrameActionTypes');},null);
__d("XPagesComposerPublishFrameCropController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/composer\/publish_frame\/crop\/",{height:{type:"Float"},overlay_id:{type:"Int"},width:{type:"Float"},x:{type:"Float"},y:{type:"Float"}});},null);
__d('ReactComposerProfilePictureFrameStore',['invariant','ActorURI','AsyncUploadRequest','ReactComposerPhotoUpload','Event','ProfilePicCanvas','ProfilePictureOverlay','ProfilePictureOverlayAdminStrings','ReactComposerProfilePictureFrameActionTypes','ReactComposerStoreBase','Vector','XPagesComposerPublishFrameCropController','immutable','PhotoEditorGraphic','tidyEvent'],function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('immutable').List,l=c('PhotoEditorGraphic').Sticker;function m(o,p){var q=new Image();q.crossOrigin='anonymous';q.src=o;c('tidyEvent')([c('Event').listen(q,'load',function(){return p(q);})]);}i=babelHelpers.inherits(n,c('ReactComposerStoreBase'));j=i&&i.prototype;function n(){'use strict';var o=void 0;j.constructor.call(this,function(){return {croppedPhotoID:null,overlays:{},photoData:null,savingMessage:null,selectedOverlayID:null};},function(p){if(o)o.$ReactComposerProfilePictureFrameStore1(p);});o=this;}n.prototype.getSavingMessage=function(o){'use strict';return this.getComposerData(o).savingMessage;};n.prototype.getCroppedPhotoID=function(o){'use strict';return this.getComposerData(o).croppedPhotoID;};n.prototype.getOverlays=function(o){'use strict';return this.getComposerData(o).overlays;};n.prototype.getPhotoData=function(o){'use strict';return this.getComposerData(o).photoData;};n.prototype.getSelectedOverlayID=function(o){'use strict';return this.getComposerData(o).selectedOverlayID;};n.prototype.getCroppedPhotoForUpload=function(o){'use strict';var p=this.getCroppedPhotoID(o);!p?h(0):void 0;return k([new (c('ReactComposerPhotoUpload'))({photoID:p,originalPhotoID:p})]);};n.prototype.$ReactComposerProfilePictureFrameStore1=function(o){'use strict';switch(o.type){case c('ReactComposerProfilePictureFrameActionTypes').SET_OVERLAYS:this.$ReactComposerProfilePictureFrameStore2(o);break;case c('ReactComposerProfilePictureFrameActionTypes').SET_PHOTO_DATA:this.$ReactComposerProfilePictureFrameStore3(o);break;case c('ReactComposerProfilePictureFrameActionTypes').SET_SELECTED_ID:this.$ReactComposerProfilePictureFrameStore4(o);break;case c('ReactComposerProfilePictureFrameActionTypes').CROP_IMAGE:this.$ReactComposerProfilePictureFrameStore5(o);break;case c('ReactComposerProfilePictureFrameActionTypes').POST_START:this.$ReactComposerProfilePictureFrameStore6(o);break;case c('ReactComposerProfilePictureFrameActionTypes').POST_SUCCESS:this.$ReactComposerProfilePictureFrameStore7(o);break;}};n.prototype.$ReactComposerProfilePictureFrameStore6=function(o){'use strict';var p=this.getComposerData(o.composerID);p.savingMessage=c('ProfilePictureOverlayAdminStrings').postingFrame();this.emitChange(o.composerID);};n.prototype.$ReactComposerProfilePictureFrameStore7=function(o){'use strict';var p=this.getComposerData(o.composerID);p.savingMessage=null;this.emitChange(o.composerID);};n.prototype.$ReactComposerProfilePictureFrameStore4=function(o){'use strict';var p=this.getComposerData(o.composerID);if(p.selectedOverlayID!==o.selectedOverlayID){p.selectedOverlayID=o.selectedOverlayID;this.emitChange(o.composerID);}};n.prototype.$ReactComposerProfilePictureFrameStore2=function(o){'use strict';var p={};o.overlays.map(function(r){p[r.id]=c('ProfilePictureOverlay').fromObject(r);});var q=this.getComposerData(o.composerID);q.overlays=p;q.selectedOverlayID=o.selectedOverlayID;this.emitChange(o.composerID);};n.prototype.$ReactComposerProfilePictureFrameStore3=function(o){'use strict';var p=this.getComposerData(o.composerID);if(!p.photoData||p.photoData.original.uri!==o.photoData.original.uri){p.photoData=o.photoData;this.emitChange(o.composerID);}};n.prototype.$ReactComposerProfilePictureFrameStore5=function(o){'use strict';var p=o.composerID,q=this.getComposerData(p),r=q.savingMessage,s=q.overlays,t=q.photoData,u=q.selectedOverlayID;if(!t||!u||r)return;q.savingMessage=c('ProfilePictureOverlayAdminStrings').processingImage();this.emitChange(p);m(t.original.uri,function(v){var w=s[u],x=t.original,y=new l(null,w.id,w.getSrc(o.overlaySize),x.width,x.height);y.subscribe('loaded',function(){this.$ReactComposerProfilePictureFrameStore8(o,v,y);}.bind(this));}.bind(this));};n.prototype.$ReactComposerProfilePictureFrameStore8=function(o,p,q){'use strict';var r=o.composerID,s=o.dimensions,t=this.$ReactComposerProfilePictureFrameStore9(r).original,u=new (c('ProfilePicCanvas'))(p),v=s.getArea();u.addGraphic(q,new (c('Vector'))(v.x,v.y));u.setResizeFactor(v.width/t.width);u.toBlob(function(w){return this.$ReactComposerProfilePictureFrameStore10(o,w);}.bind(this));};n.prototype.$ReactComposerProfilePictureFrameStore10=function(o,p){'use strict';var q=o.composerID,r=this.$ReactComposerProfilePictureFrameStore9(q),s=r.original,t=o.dimensions.getArea(),u={x:t.x/s.width,y:t.y/s.height,width:t.width/s.width,height:t.height/s.height},v=c('XPagesComposerPublishFrameCropController').getURIBuilder().setFloat('height',Math.min(u.height,1)).setFloat('width',Math.min(u.width,1)).setFloat('x',u.x).setFloat('y',u.y).setInt('overlay_id',this.getSelectedOverlayID(q)).getURI(),w=new (c('AsyncUploadRequest'))().setFiles({image:p}).setAllowCrossOrigin(true).setURI(c('ActorURI').create(v,o.targetID));c('tidyEvent')([w.subscribe('success',function(x,y){var z=y.getResponse(),aa=z.payload,ba=this.getComposerData(q);ba.croppedPhotoID=aa.cropped_fbid;ba.savingMessage=null;o.onCropSuccess();this.emitChange(q);}.bind(this))]);w.send();};n.prototype.$ReactComposerProfilePictureFrameStore9=function(o){'use strict';var p=this.getPhotoData(o);!p?h(0):void 0;return p;};f.exports=new n();},null);
__d('ReactComposerQuestionActionType',['keyMirrorRecursive'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports=c('keyMirrorRecursive')({ADD_OPTION:null,ANYONE_ADD_OPTIONS:null,CHOOSE_MULTIPLE_OPTIONS:null,ENTER_POLL_OPTIONS_MODE:null,SHOW_QUESTION_CONFIG:null,SAVE_OPTION_DATA:null,SET_QUESTION_CONFIG:null},'ReactComposerQuestionActionType');},null);
__d('ReactComposerQuestionStore',['ReactComposerQuestionActionType','ReactComposerStoreBase','Map'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();var j=3;h=babelHelpers.inherits(k,c('ReactComposerStoreBase'));i=h&&h.prototype;function k(){'use strict';var l;i.constructor.call(this,function(){return {anyoneAddPollOptions:true,chooseMultiplePollOptions:true,dataSource:null,maxOptionsShown:null,optionIDs:new (c('Map'))(),optionStrings:new (c('Map'))(),pollLinkEnabled:true};},function(m){switch(m.type){case c('ReactComposerQuestionActionType').ADD_OPTION:l&&l.$ReactComposerQuestionStore1(m);break;case c('ReactComposerQuestionActionType').ANYONE_ADD_OPTIONS:l&&l.$ReactComposerQuestionStore2(m);break;case c('ReactComposerQuestionActionType').CHOOSE_MULTIPLE_OPTIONS:l&&l.$ReactComposerQuestionStore3(m);break;case c('ReactComposerQuestionActionType').ENTER_POLL_OPTIONS_MODE:l&&l.$ReactComposerQuestionStore4(m);break;case c('ReactComposerQuestionActionType').SAVE_OPTION_DATA:l&&l.$ReactComposerQuestionStore5(m);break;case c('ReactComposerQuestionActionType').SET_QUESTION_CONFIG:l&&l.$ReactComposerQuestionStore6(m);break;}});l=this;}k.prototype.canAnyoneAddPollOptions=function(l){'use strict';return this.getComposerData(l).anyoneAddPollOptions;};k.prototype.canChooseMultiplePollOptions=function(l){'use strict';return this.getComposerData(l).chooseMultiplePollOptions;};k.prototype.getDataSource=function(l){'use strict';return this.getComposerData(l).dataSource;};k.prototype.getMaxOptionsShown=function(l){'use strict';return this.getComposerData(l).maxOptionsShown;};k.prototype.getNumberOptionsShown=function(l){'use strict';return j;};k.prototype.getOptionIDs=function(l){'use strict';var m=[],n=this.getComposerData(l).optionIDs;n.forEach(function(o,p){return m.push(o);});return m;};k.prototype.getOptionStrings=function(l){'use strict';var m=[],n=this.getComposerData(l).optionStrings;n.forEach(function(o,p){return m.push(o);});return m;};k.prototype.getSearchSource=function(l){'use strict';return this.getComposerData(l).dataSource;};k.prototype.isPollLinkEnabled=function(l){'use strict';return this.getComposerData(l).pollLinkEnabled;};k.prototype.$ReactComposerQuestionStore1=function(l){'use strict';var m=this.validateAction(l,'composerID');j++;this.emitChange(m);};k.prototype.$ReactComposerQuestionStore2=function(l){'use strict';var m=this.validateAction(l,['composerID','value']),n=m[0],o=m[1],p=this.getComposerData(n);p.anyoneAddPollOptions=o;this.emitChange(n);};k.prototype.$ReactComposerQuestionStore3=function(l){'use strict';var m=this.validateAction(l,['composerID','value']),n=m[0],o=m[1],p=this.getComposerData(n);p.chooseMultiplePollOptions=o;this.emitChange(n);};k.prototype.$ReactComposerQuestionStore4=function(l){'use strict';var m=this.validateAction(l,'composerID'),n=this.getComposerData(m);n.pollLinkEnabled=false;this.emitChange(m);};k.prototype.$ReactComposerQuestionStore5=function(l){'use strict';var m=this.validateAction(l,['composerID','optionData']),n=m[0],o=m[1],p=this.getComposerData(n);p.optionIDs.set(o.keyID,o.ID);p.optionStrings.set(o.keyID,o.content);this.emitChange(n);};k.prototype.$ReactComposerQuestionStore6=function(l){'use strict';var m=this.validateAction(l,['composerID','config']),n=m[0],o=m[1],p=this.getComposerData(n);p.dataSource=o.dataSource;p.maxOptionsShown=o.maxOptionsShown;this.emitChange(n);};f.exports=new k();},null);
__d('ReactComposerRedEnvelopeActionType',['keyMirrorRecursive'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports=c('keyMirrorRecursive')({SET_RED_ENVELOPE_CONFIG:null,SET_AVAILABLE_AMOUNT:null,SET_TOTAL_AMOUNT:null,SET_DISTIBUTION:null,SET_NUMBER_OF_ENVELOPES:null},'ReactComposerRedEnvelopeActionType');},null);
__d('ReactComposerRedEnvelopeStore',['ReactComposerRedEnvelopeActionType','ReactComposerStoreBase'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('ReactComposerStoreBase'));i=h&&h.prototype;function j(){'use strict';var k;i.constructor.call(this,function(){return {availableAmount:0,totalAmount:1000,distribution:'RND',numberOfEnvelopes:5,contextInfo:null};},function(l){switch(l.type){case c('ReactComposerRedEnvelopeActionType').SET_AVAILABLE_AMOUNT:k&&k.$ReactComposerRedEnvelopeStore1(l);break;case c('ReactComposerRedEnvelopeActionType').SET_TOTAL_AMOUNT:k&&k.$ReactComposerRedEnvelopeStore2(l);break;case c('ReactComposerRedEnvelopeActionType').SET_DISTIBUTION:k&&k.$ReactComposerRedEnvelopeStore3(l);break;case c('ReactComposerRedEnvelopeActionType').SET_NUMBER_OF_ENVELOPES:k&&k.$ReactComposerRedEnvelopeStore4(l);break;case c('ReactComposerRedEnvelopeActionType').SET_RED_ENVELOPE_CONFIG:k&&k.$ReactComposerRedEnvelopeStore5(l);break;}});k=this;}j.prototype.getAvailableAmount=function(k){'use strict';return this.getComposerData(k).availableAmount;};j.prototype.getTotalAmount=function(k){'use strict';return this.getComposerData(k).totalAmount;};j.prototype.getDistribution=function(k){'use strict';return this.getComposerData(k).distribution;};j.prototype.getNumberOfEnvelopes=function(k){'use strict';return this.getComposerData(k).numberOfEnvelopes;};j.prototype.getContextInfo=function(k){'use strict';return this.getComposerData(k).contextInfo;};j.prototype.$ReactComposerRedEnvelopeStore1=function(k){'use strict';var l=this.validateAction(k,['composerID','availableAmount']),m=l[0],n=l[1],o=this.getComposerData(m);o.availableAmount=n;this.emitChange(m);};j.prototype.$ReactComposerRedEnvelopeStore2=function(k){'use strict';var l=this.validateAction(k,['composerID','totalAmount']),m=l[0],n=l[1],o=this.getComposerData(m);o.totalAmount=n;this.emitChange(m);};j.prototype.$ReactComposerRedEnvelopeStore4=function(k){'use strict';var l=this.validateAction(k,['composerID','numberOfEnvelopes']),m=l[0],n=l[1],o=this.getComposerData(m);o.numberOfEnvelopes=n;this.emitChange(m);};j.prototype.$ReactComposerRedEnvelopeStore3=function(k){'use strict';var l=this.validateAction(k,['composerID','distribution']),m=l[0],n=l[1],o=this.getComposerData(m);o.distribution=n;this.emitChange(m);};j.prototype.$ReactComposerRedEnvelopeStore5=function(k){'use strict';var l=this.validateAction(k,['composerID','config']),m=l[0],n=l[1],o=this.getComposerData(m);o.availableAmount=n.availableAmount;o.contextInfo=n.contextInfo;this.emitChange(m);};f.exports=new j();},null);
__d('ReactComposerStatusDonateButtonActionType',['keyMirrorRecursive'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports=c('keyMirrorRecursive')({SET_DONATE_CONFIG:null,UPDATE_DESCRIPTION:null,UPDATE_TITLE:null,SET_DATA:null,SET_ENABLED:null,SET_ERRORS:null,SET_TEXT_DISABLED:null},'ReactComposerStatusDonateButtonActionType');},null);
__d('ReactComposerStatusDonateButtonStore',['ReactComposerStatusDonateButtonActionType','ReactComposerStoreBase'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('ReactComposerStoreBase'));i=h&&h.prototype;function j(){'use strict';var k;i.constructor.call(this,function(){return {charityName:'',fundraiserCampaignId:1,enabled:false,textDisabled:false,errors:false};},function(l){switch(l.type){case c('ReactComposerStatusDonateButtonActionType').SET_DONATE_CONFIG:k&&k.$ReactComposerStatusDonateButtonStore1(l);break;case c('ReactComposerStatusDonateButtonActionType').UPDATE_TITLE:k&&k.$ReactComposerStatusDonateButtonStore2(l);break;case c('ReactComposerStatusDonateButtonActionType').UPDATE_DESCRIPTION:k&&k.$ReactComposerStatusDonateButtonStore3(l);break;case c('ReactComposerStatusDonateButtonActionType').SET_DATA:k&&k.$ReactComposerStatusDonateButtonStore4(l);break;case c('ReactComposerStatusDonateButtonActionType').SET_ENABLED:k&&k.$ReactComposerStatusDonateButtonStore5(l);break;case c('ReactComposerStatusDonateButtonActionType').SET_ERRORS:k&&k.$ReactComposerStatusDonateButtonStore6(l);break;case c('ReactComposerStatusDonateButtonActionType').SET_TEXT_DISABLED:k&&k.$ReactComposerStatusDonateButtonStore7(l);break;}});k=this;}j.prototype.getFundraiserCampaignID=function(k){'use strict';return this.getComposerData(k).fundraiserCampaignId;};j.prototype.getCharityName=function(k){'use strict';return this.getComposerData(k).charityName;};j.prototype.getTitle=function(k){'use strict';return this.getComposerData(k).title;};j.prototype.getDescription=function(k){'use strict';return this.getComposerData(k).description;};j.prototype.getEnabled=function(k){'use strict';return this.getComposerData(k).enabled;};j.prototype.getErrors=function(k){'use strict';return this.getComposerData(k).errors;};j.prototype.getTextDisabled=function(k){'use strict';return this.getComposerData(k).textDisabled;};j.prototype.$ReactComposerStatusDonateButtonStore1=function(k){'use strict';var l=this.validateAction(k,['composerID','config']),m=l[0],n=l[1],o=this.getComposerData(m);o.fundraiserCampaignId=n.fundraiserCampaignId;o.charityName=n.charityName;this.emitChange(k.composerID);};j.prototype.$ReactComposerStatusDonateButtonStore2=function(k){'use strict';var l=this.validateAction(k,['composerID','title']),m=l[0],n=l[1],o=this.getComposerData(m);o.title=n.substring(0,60);this.emitChange(k.composerID);};j.prototype.$ReactComposerStatusDonateButtonStore3=function(k){'use strict';var l=this.validateAction(k,['composerID','description']),m=l[0],n=l[1],o=this.getComposerData(m);o.description=n;this.emitChange(k.composerID);};j.prototype.$ReactComposerStatusDonateButtonStore4=function(k){'use strict';var l=this.validateAction(k,['composerID','title','description']),m=l[0],n=l[1],o=l[2],p=this.getComposerData(m);p.title=n;p.description=o;this.emitChange(k.composerID);};j.prototype.$ReactComposerStatusDonateButtonStore5=function(k){'use strict';var l=this.validateAction(k,['composerID','enabled']),m=l[0],n=l[1],o=this.getComposerData(m);o.enabled=n;this.emitChange(k.composerID);};j.prototype.$ReactComposerStatusDonateButtonStore6=function(k){'use strict';var l=this.validateAction(k,['composerID','errors']),m=l[0],n=l[1],o=this.getComposerData(m);o.errors=n;this.emitChange(k.composerID);};j.prototype.$ReactComposerStatusDonateButtonStore7=function(k){'use strict';var l=this.validateAction(k,['composerID','textDisabled']),m=l[0],n=l[1],o=this.getComposerData(m);o.textDisabled=n;this.emitChange(k.composerID);};f.exports=new j();},null);
__d("XComposerXMediaNLUInterceptController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/composerx\/nlu_intercept\/media\/",{xhpc_composerid:{type:"String",required:true},xhpc_message:{type:"String"}});},null);
__d("XComposerXStatusNLUInterceptController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/composerx\/nlu_intercept\/status\/",{xhpc_composerid:{type:"String",required:true},xhpc_message:{type:"String"}});},null);
__d("XRedEnvelopeSaveController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/redenv\/save\/",{xhpc_targetid:{type:"Int",required:true},xhpc_composerid:{type:"String",required:true},composer_attachment_message:{type:"String"},distribution:{type:"String",required:true},total_amount:{type:"Int",required:true},number_of_envelopes:{type:"Int",required:true}});},null);
__d("XTimelineMLEWriteController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/mle\/save\/",{create_scrapbook:{type:"Bool",defaultValue:false}});},null);
__d("XVideoEditDialogSaveController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/video\/edit\/dialog\/save\/",{v:{type:"Int",required:true}});},null);
__d('ReactComposerPostUtils',['invariant','ReactComposerActions','ReactComposerAsyncRequest','ReactComposerAttachmentStore','ReactComposerAttachmentType','ReactComposerAutosSellStore.react','ComposerEntryPointRef','ReactComposerFileStore','ReactComposerLifeEventStore','ReactComposerMediaUploadStore','ReactComposerMediaUploadType','ReactComposerPhotoStore','ReactComposerPostDataUtils','ReactComposerProfilePictureFrameStore','ReactComposerQuestionStore','ReactComposerRedEnvelopeStore','ReactComposerSellStore','ReactComposerSlideshowStore','ReactComposerStatusDonateButtonStore','ReactComposerStatusStore','ReactComposerStore','ReactComposerVideoUploadStore','XComposerXMediaNLUInterceptController','XComposerXStatusNLUInterceptController','XRedEnvelopeSaveController','XTimelineMLEWriteController','XVideoEditDialogSaveController','ActorURI','Arbiter','HTML','URI'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={publish:function(j,k){c('ReactComposerActions').publishStarted(j);k=k||{};k.composer_id=j;if(k.streamNode){k.streamStory=k.streamNode;}else if(k.streamMarkup)k.streamStory=c('HTML')(k.streamMarkup).getRootNode();if(k.contentID)k.matchData={content_id:k.contentID};c('Arbiter').inform('composer/publish',k);},isPostButtonDisabled:function(j,k){var l=c('ReactComposerPhotoStore').isLimitExceeded(j,k),m=c('ReactComposerMediaUploadStore').isUploading(j),n=c('ReactComposerPhotoStore').isRecognizing(j),o=!!c('ReactComposerVideoUploadStore').getVideo(j)&&c('ReactComposerStore').isPosting(j);return l||m||n||o;},post:function(j){!!!j.actorID?h(0):void 0;!!!j.composerConfig?h(0):void 0;!!!j.composerConfig.contextInfo?h(0):void 0;!!!j.composerID?h(0):void 0;!!!j.targetID?h(0):void 0;var k=j.actorID,l=j.composerID,m=c('ReactComposerAttachmentStore').getIsAttachmentSelected(l,c('ReactComposerAttachmentType').MEDIA),n=c('ReactComposerAttachmentStore').getIsAttachmentSelected(l,c('ReactComposerAttachmentType').QANDA),o=c('ReactComposerAttachmentStore').getIsAttachmentSelected(l,c('ReactComposerAttachmentType').FILE),p=c('ReactComposerAttachmentStore').getIsAttachmentSelected(l,c('ReactComposerAttachmentType').QUESTION),q=c('ReactComposerAttachmentStore').getIsAttachmentSelected(l,c('ReactComposerAttachmentType').RED_ENVELOPE),r=c('ReactComposerAttachmentStore').getIsAttachmentSelected(l,c('ReactComposerAttachmentType').SELL)||c('ReactComposerSellStore').getInterceptSell(l),s=c('ReactComposerAttachmentStore').getIsAttachmentSelected(l,c('ReactComposerAttachmentType').LIFE_EVENT),t=c('ReactComposerSlideshowStore').isSlideshowSelected(l),u=c('ReactComposerAttachmentStore').getIsAttachmentSelected(l,c('ReactComposerAttachmentType').PROFILE_PIC_FRAME),v=j.composerConfig.attachmentsConfig||{},w=v[c('ReactComposerAttachmentType').STATUS]||{},x=w.legacyIntercept===false&&!r&&!c('ReactComposerSellStore').showNLUIntercept(l),y=c('ReactComposerPostDataUtils').getPostData(j);if(c('ReactComposerStatusDonateButtonStore').getEnabled(l))Object.assign(y,{cta_data:{type:'DONATE',value:{fundraiser_campaign_id:c('ReactComposerStatusDonateButtonStore').getFundraiserCampaignID(l),link_title:c('ReactComposerStatusDonateButtonStore').getTitle(l),link_description:c('ReactComposerStatusDonateButtonStore').getDescription(l)}}});var z=c('ReactComposerVideoUploadStore').getVideo(l);if(m&&!!z){var aa=c('ReactComposerVideoUploadStore').getUploader(l);aa&&aa.uploadFromFile(z.file,y);return;}var ba,ca=c('ReactComposerPhotoStore').getPhotos(l),da=c('ReactComposerMediaUploadStore').getUploads(l),ea=da.filter(function(ta){return ta.mediaType===c('ReactComposerMediaUploadType').VIDEO?true:ca.some(function(ua){return ua.id===ta.photoID;});});if(r)Object.assign(y,{composer_attachment_sell_title:c('ReactComposerSellStore').getTitleText(l),composer_attachment_sell_price:c('ReactComposerSellStore').getPrice(l),composer_attachment_sell_price_type:c('ReactComposerSellStore').getPriceType(l),composer_attachment_sell_currency:c('ReactComposerSellStore').getCurrency(l),composer_attachment_sell_category:c('ReactComposerSellStore').getCategoryID(l),composer_attachment_sell_location_page_id:c('ReactComposerSellStore').getLocationID(l),composer_attachment_sell_pickup_note:c('ReactComposerSellStore').getPickupNoteText(l),post_to_marketplace:c('ReactComposerSellStore').isNearbyLocationChecked(l),cross_post_checked:c('ReactComposerSellStore').isCrossPostChecked(l),composer_attachment_sell_audience_group_ids:Array.from(c('ReactComposerSellStore').getAudienceGroupIDs(l)).join(','),composer_attachment_sell_autos_make:c('ReactComposerAutosSellStore.react').getMake(l),composer_attachment_sell_autos_model:c('ReactComposerAutosSellStore.react').getModel(l),composer_attachment_sell_autos_vin:c('ReactComposerAutosSellStore.react').getVIN(l),composer_attachment_sell_autos_year:c('ReactComposerAutosSellStore.react').getYear(l),composer_attachment_sell_autos_odometer:c('ReactComposerAutosSellStore.react').getOdometerValue(l),composer_attachment_sell_autos_odometer_units:c('ReactComposerAutosSellStore.react').getOdometerUnits(l)});var fa=da.size>0,ga=m||n||r,ha=t||ga&&fa;if(ha){if(x){ba=c('XComposerXMediaNLUInterceptController').getURIBuilder().setString('xhpc_message',c('ReactComposerStatusStore').getMessageText(l)).setString('xhpc_composerid',j.composerID).getURI();}else ba=new (c('URI'))('/media/upload/photos/composer/');var ia=c('ReactComposerPostDataUtils').getPhotoUploadsData(l,ea);Object.assign(y,ia);}else if(o){ba=new (c('URI'))(c('ReactComposerFileStore').getURI(l));Object.assign(y,{transaction_id:c('ReactComposerFileStore').getDropboxFileID(l)});}else if(p){ba=new (c('URI'))('/ajax/questions/save.php');var ja=c('ReactComposerQuestionStore').getOptionIDs(l),ka=c('ReactComposerQuestionStore').getOptionStrings(l);ja.push('');ka.push('');var la=c('ReactComposerStore').getRef(l);Object.assign(y,{composerAttachmentQuestion:c('ReactComposerStatusStore').getMessage(l),question_option_ids:ja,question_options:ka,source:la===c('ComposerEntryPointRef').GROUP?'group':la===c('ComposerEntryPointRef').EVENT||la===c('ComposerEntryPointRef').EVENT_ABOUT?'event':null,create_eigenpoll:c('ReactComposerQuestionStore').canChooseMultiplePollOptions(l),anyone_add_options:c('ReactComposerQuestionStore').canAnyoneAddPollOptions(l)});}else if(q){Object.assign(y,{composer_attachment_message:c('ReactComposerStatusStore').getMessageText(l),total_amount:c('ReactComposerRedEnvelopeStore').getTotalAmount(l),distribution:c('ReactComposerRedEnvelopeStore').getDistribution(l),number_of_envelopes:c('ReactComposerRedEnvelopeStore').getNumberOfEnvelopes(l)});ba=c('XRedEnvelopeSaveController').getURIBuilder().setString('composer_attachment_message',y.composer_attachment_message).setString('distribution',y.distribution).setInt('total_amount',y.total_amount).setInt('number_of_envelopes',y.number_of_envelopes).setInt('xhpc_targetid',j.targetID).setString('xhpc_composerid',j.composerID).getURI();}else if(r){ba=new (c('URI'))('/ajax/groups/sell/save.php');}else if(s){ba=c('XTimelineMLEWriteController').getURIBuilder().getURI();var ma=babelHelpers['extends']({},c('ReactComposerLifeEventStore').getSelectedLifeEventFields(l)),na=Object.keys(y.backdated_date).some(function(ta){return y.backdated_date[ta]!==null;});if(na)ma.date_start=y.backdated_date;var oa=ea.map(function(ta){return {fbid:ta.photoID};});Object.assign(y,{field_data_json:JSON.stringify(ma),icon:c('ReactComposerLifeEventStore').getSelectedLifeEventIconID(l),photos:JSON.stringify(oa),story:c('ReactComposerLifeEventStore').getSelectedLifeEventStory(l),surface:'composer',title:c('ReactComposerLifeEventStore').getSelectedLifeEventTitle(l),type:c('ReactComposerLifeEventStore').getSelectedLifeEventType(l)});}else if(u){var pa=c('ReactComposerProfilePictureFrameStore').getSelectedOverlayID(l);ia=c('ReactComposerPostDataUtils').getPhotoUploadsData(l,c('ReactComposerProfilePictureFrameStore').getCroppedPhotoForUpload(l));ba=new (c('URI'))('/media/upload/photos/composer/');Object.assign(y,babelHelpers['extends']({},ia,{sticker_id:pa}));}else if(x){ba=c('XComposerXStatusNLUInterceptController').getURIBuilder().setString('xhpc_message',c('ReactComposerStatusStore').getMessageText(l)).setString('xhpc_composerid',j.composerID).getURI();}else if(y.attachment&&y.attachment.params.carousel_video_lpp){ba=c('XVideoEditDialogSaveController').getURIBuilder().setInt('v',y.attachment.params.carousel_video_lpp.video_id).getURI();Object.assign(y,y.attachment.params.carousel_video_lpp);Object.assign(y,{description:y.xhpc_message});}else ba=new (c('URI'))('/ajax/updatestatus.php');ba=c('ActorURI').create(ba,k);var qa=new (c('ReactComposerAsyncRequest'))(j.composerID,ba).setData(y).setHandler(j.onPostSuccess).setErrorHandler(j.onPostFailure);if(o&&c('ReactComposerFileStore').hasFile(l)){var ra=c('ReactComposerFileStore').getFile(l),sa=new FormData();sa.append('file1',ra);qa.setRawData(sa);}qa.send();}};f.exports=i;},null);
__d('ReactComposerPagesStore',['ReactComposerActionStore','ReactComposerMediaConfig','ReactComposerPostUtils','ReactComposerTaggerType','PagesComposerUnpublishedPostsStore','dotAccess','formatDate'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('ReactComposerActionStore'));i=h&&h.prototype;function j(){'use strict';i.constructor.call(this);}j.prototype.__onPostStarted=function(k){'use strict';var l=c('PagesComposerUnpublishedPostsStore').getIsDraft(k.composerID),m=Object.assign({},k.config);m.contextInfo=Object.assign({},m.contextInfo||{});m.contextInfo.draft=l;var n=c('PagesComposerUnpublishedPostsStore').getScheduledPublishTime(k.composerID);if(n){var o=c('formatDate')(n,'m/d/Y',{skipPatternLocalization:true}),p=60*(60*n.getHours()+n.getMinutes());m.contextInfo.scheduled=true;m.contextInfo.future_date=o;m.contextInfo.future_time=p;}var q=c('PagesComposerUnpublishedPostsStore').getBackdateConfig(k.composerID);if(q){m.contextInfo.backdated_date={year:q.year,month:q.month,day:q.day};m.contextInfo.hide_from_newsfeed=q.hideFromNewsFeed;}var r=c('PagesComposerUnpublishedPostsStore').getStopFeedDistributionTime(k.composerID);if(r){m.contextInfo.stopFeedDistributionDateFormatted=c('formatDate')(r,'m/d/Y',{skipPatternLocalization:true});m.contextInfo.stopFeedDistributionTimeFormatted=60*(60*r.getHours()+r.getMinutes());}var s=c('PagesComposerUnpublishedPostsStore').getIsAdsPost(k.composerID);if(s)m.contextInfo.is_ad_post=1;var t=k.config.taggersConfig[c('ReactComposerTaggerType').TARGETING],u=t?c('dotAccess')(t,'feedTargetingGK'):false;c('ReactComposerPostUtils').post({actorID:k.actorID,composerConfig:m,composerID:k.composerID,composerType:k.composerType,targetID:k.targetID,onPostSuccess:k.onPostSuccess,useHints:u});};j.prototype.__canPost=function(k){'use strict';return !c('ReactComposerPostUtils').isPostButtonDisabled(k.composerID,c('ReactComposerMediaConfig').photo.limit);};f.exports=new j();},null);
__d('PagesComposerExtraAttachmentSelector.react',['fbt','invariant','ix','ReactComponentWithPureRenderMixin','React','BanzaiODS','ReactComposerAttachmentSelectorContainer.react','ReactComposerAttachmentType','ReactLayeredComponentMixin','SimpleNUXMessage','SimpleNUXMessageTypes','XUIAmbientNUX.react','OfferGK','PagesComposerExtraAttachmentIcons'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes,l=c('React').createClass({displayName:'PagesComposerExtraAttachmentSelector',mixins:[c('ReactComponentWithPureRenderMixin'),c('ReactLayeredComponentMixin')],propTypes:{label:k.string.isRequired,icon:k.oneOf(Object.keys(c('PagesComposerExtraAttachmentIcons'))).isRequired,attachmentsConfig:k.object.isRequired},getInitialState:function(){var m=!c('SimpleNUXMessage').hasUserSeenMessage(c('SimpleNUXMessageTypes').OFFERS_V2_PAGES_COMPOSER_NUX)&&c('OfferGK').okami_v2_composer_nux,n=this.props.attachmentsConfig;if(m&&n.attachments&&n.attachments.OFFER)m=m&&n.attachments.OFFER.showNewComposer&&n.attachments.OFFER.enabled;return {offersNuxShown:m};},componentDidMount:function(){if(this.state.offersNuxShown)c('BanzaiODS').bumpEntityKey('offers','offers_v2_pages_composer_nux_shown');},_onOffersNUXCloseButtonClick:function(){c('BanzaiODS').bumpEntityKey('offers','offers_v2_pages_composer_nux_dismissed');c('SimpleNUXMessage').markMessageSeenByUser(c('SimpleNUXMessageTypes').OFFERS_V2_PAGES_COMPOSER_NUX);this.setState({offersNuxShown:false});},renderLayers:function(){return {ambientNUX:c('React').createElement(c('XUIAmbientNUX.react'),{contextRef:function(){return this.refs.composerSelector;}.bind(this),position:'right',shown:this.state.offersNuxShown,onCloseButtonClick:this._onOffersNUXCloseButtonClick},h._("Now you can create an offer right from your Page."))};},render:function(){return (c('React').createElement(c('ReactComposerAttachmentSelectorContainer.react'),{attachmentID:c('ReactComposerAttachmentType').PAGES_EXTRA,label:this.props.label,icon:this._renderIcon(),id:'extraAttachmentSelector',ref:'composerSelector'}));},_renderIcon:function(){switch(this.props.icon){case c('PagesComposerExtraAttachmentIcons').FINCH_COUPONS_ICON:return j('/images/icons/pages/coupons/finch-offers.png');case c('PagesComposerExtraAttachmentIcons').Q_AND_A_ICON:return j('/images/litestand/composer/icons/qanda.png');case c('PagesComposerExtraAttachmentIcons').CAUSE_ICON:return j('/images/icons/pages/donations/cause.png');case c('PagesComposerExtraAttachmentIcons').COUPONS_ICON:return j('/images/icons/pages/coupons/offers.png');case c('PagesComposerExtraAttachmentIcons').FINCH_EVENTS_ICON:return j('/images/icons/finch-event.png');case c('PagesComposerExtraAttachmentIcons').EVENTS_ICON:return j('/images/icons/event.gif');case c('PagesComposerExtraAttachmentIcons').PRODUCT_ICON:return j('images/litestand/composer/icons/sell.png');case c('PagesComposerExtraAttachmentIcons').OFFERS_ICON:return j('images/icons/pages/offers/offers.png');default:i(0);}}});f.exports=l;},null);
__d("XPagesExtraAttachmentBootstrapController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/react_composer\/pages\/extra\/bootstrap\/",{});},null);
__d('PagesComposerExtraLazyAttachment.react',['ReactComposerAttachmentType','ReactComposerLoadableAttachmentBodyMixin','ReactComposerBootloaderPropTypes','ActorURI','React','XPagesExtraAttachmentBootstrapController'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'PagesComposerExtraLazyAttachment',mixins:[c('ReactComposerLoadableAttachmentBodyMixin')],propTypes:{bootloader:c('ReactComposerBootloaderPropTypes').isRequired},statics:{attachmentID:c('ReactComposerAttachmentType').PAGES_EXTRA},bootload:function(j){this.props.bootloader.extraAttachment(j);},getBootstrapURI:function(){var j=c('XPagesExtraAttachmentBootstrapController').getURIBuilder().getURI();return c('ActorURI').create(j,this.context.actorID);}});f.exports=i;},null);
__d('ReactComposerLiveVideoAttachmentSelector.react',['fbt','ix','ReactComposerAttachmentSelectorContainer.react','ReactComposerAttachmentType','ReactComponentWithPureRenderMixin','React'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'ReactComposerLiveVideoAttachmentSelector',mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{label:j.string},getDefaultProps:function(){return {label:h._("Live Video")};},render:function(){return (c('React').createElement(c('ReactComposerAttachmentSelectorContainer.react'),{attachmentID:c('ReactComposerAttachmentType').LIVE_VIDEO,label:this.props.label,icon:i('/images/video/broadcast/video-live_16.png'),'data-testid':'live-video-attachment-selector'}));}});f.exports=k;},null);
__d("XReactComposerLiveVideoAttachmentBootstrapController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/react_composer\/live_video\/bootstrap\/",{composer_id:{type:"String",required:true}});},null);
__d('ReactComposerLiveVideoLazyAttachment.react',['ReactComposerAttachmentType','ReactComposerLoadableAttachmentBodyMixin','ActorURI','Bootloader','React','XReactComposerLiveVideoAttachmentBootstrapController'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'ReactComposerLiveVideoLazyAttachment',mixins:[c('ReactComposerLoadableAttachmentBodyMixin')],propTypes:{selected:h.bool},statics:{attachmentID:c('ReactComposerAttachmentType').LIVE_VIDEO},bootload:function(j){c('Bootloader').loadModules(["ReactComposerLiveVideoAttachmentContainer.react"],j,'ReactComposerLiveVideoLazyAttachment.react');},getBootstrapURI:function(){return c('ActorURI').create(c('XReactComposerLiveVideoAttachmentBootstrapController').getURIBuilder().setString('composer_id',this.context.composerID).getURI(),this.context.actorID);}});f.exports=i;},null);
__d('ReactTargetingTaggerStore.react',['ReactComposerStoreBase','ReactComposerTaggerActionType','ReactComposerTaggerType'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('ReactComposerStoreBase'));i=h&&h.prototype;function j(){'use strict';var k;i.constructor.call(this,function(){var l={};l[c('ReactComposerTaggerType').TARGETING]={};return {taggersData:l,taggersSource:{}};},function(l){if(l.type===c('ReactComposerTaggerActionType').SET_TAGGER_DATA)k&&k.$ReactTargetingTaggerStore1(l);});k=this;}j.prototype.getTaggerData=function(k,l){'use strict';return this.getComposerData(k).taggersData[l];};j.prototype.$ReactTargetingTaggerStore1=function(k){'use strict';var l=this.getComposerData(k.composerID),m=Array.isArray(k.taggerData)?k.taggerData.slice():Object.assign({},k.taggerData);l.taggersData[k.taggerID]=m;this.emitChange(k.composerID);};f.exports=new j();},null);
__d("XPagesGetTargetingMetadataController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/targeting\/metadata\/",{page_id:{type:"Int",required:true},target_spec:{type:"String",required:true}});},null);
__d('ReactComposerTargetingUtils',['fbt','AsyncRequest','ReactComposerTaggerActions','ReactComposerTaggerStore','ReactComposerTaggerType','ReactTargetingTaggerStore.react','XPagesGetTargetingMetadataController','XUIText.react','React','curry','intlList'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={fetchMetadata:function(j,k,l){var m=c('XPagesGetTargetingMetadataController').getURIBuilder().setInt('page_id',k).setString('target_spec',JSON.stringify(j)).getURI();new (c('AsyncRequest'))().setURI(m).setHandler(c('curry')(this._onFetchMetadataHandler,l)).send();},_onFetchMetadataHandler:function(j,k){var l=k.payload,m=l.sentences.map(function(n){return (c('React').createElement('span',null,h._("{content_label} {children}",[h.param('content_label',c('React').createElement(c('XUIText.react'),{weight:'bold'},n.content)),h.param('children',c('intlList')(n.children,c('intlList').CONJUNCTIONS.OR))])));});j(JSON.parse(l.target_spec),c('React').createElement('span',null,c('intlList')(m,c('intlList').CONJUNCTIONS.NONE)),l.reach_estimate);},getDataFromComposerTaggerStore:function(j){return c('ReactComposerTaggerStore').getTaggerData(j,c('ReactComposerTaggerType').TARGETING);},getDataFromTargetingTaggerStore:function(j){return c('ReactTargetingTaggerStore.react').getTaggerData(j,c('ReactComposerTaggerType').TARGETING);},setData:function(j,k){var l={},m=['targeting','gating','hints','targetingSentences','gatingSentences','reachEstimate'];m.map(function(n){if(k[n])l[n]=k[n];});c('ReactComposerTaggerActions').setTaggerData(j,c('ReactComposerTaggerType').TARGETING,l);}};f.exports=i;},null);
__d('PagesComposerAudiences.react',['cx','fbt','BanzaiODS','BootloadedComponent.react','ReactComposerContextMixin','JSResource','LayerFadeOnHide','Link.react','React','ReactComposerTaggerStore','ReactComposerTargetingUtils','ReactTargetingTaggerStore.react','TargetingSpecStore','XUIDialog.react','XUIDialogBody.react','XUIDialogCancelButton.react','XUIDialogFooter.react','XUIDialogSaveButton.react','XUISpinner.react','XUIText.react','areEqual','isEmpty'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=587,l=c('React').createClass({displayName:'PagesComposerAudiences',mixins:[c('ReactComposerContextMixin')],propTypes:{shown:j.bool.isRequired,onToggle:j.func.isRequired,onSave:j.func.isRequired,rootElement:j.object,callbackDataStatus:j.func,callbackSelectionStatus:j.func,saveData:j.func,initialActiveKey:j.string,canSeeCompleteList:j.bool,useTargetingAsFilter:j.bool,canSeeDemographicOptions:j.bool,feedTargetingShowReachGK:j.bool,hideFeedTargeting:j.bool,useFromLegacyComposer:j.bool,shouldShowRestrictionTabNux:j.bool,shouldHideLeftFooter:j.bool},getStores:function(){if(this.props.useFromLegacyComposer)return [c('ReactTargetingTaggerStore.react')];return [c('ReactComposerTaggerStore')];},getInitialState:function(){return {fetching:false,targeting:this.getInitialSavedData('targeting'),gating:this.getInitialSavedData('gating'),hints:this.getInitialSavedData('hints'),targetingSentences:this.getInitialSavedData('targetingSentences'),gatingSentences:this.getInitialSavedData('gatingSentences'),reachEstimate:this.getInitialReachEstimate()};},componentWillMount:function(){if(this.props.callbackSelectionStatus)this.props.callbackSelectionStatus(true);},componentWillUnmount:function(){if(this.props.callbackSelectionStatus)this.props.callbackSelectionStatus(false);},componentDidMount:function(){c('BanzaiODS').bumpEntityKey('ui_audience_targeting','dialog_open');},_onSave:function(){var m={};Object.assign(m,this.state);if(!c('isEmpty')(m.targeting))m.targeting=this.convertConnectionsToInterestsFromApiToTargetingSpec(c('TargetingSpecStore').getTargetingApiSpec());if(!c('isEmpty')(m.gating))m.gating=c('TargetingSpecStore').getTargetingApiSpec();if(this.props.useFromLegacyComposer){this._onSaveLegacy(m);}else this._onSaveStore(m);this.props.onSave();},_onSaveStore:function(m){c('ReactComposerTargetingUtils').setData(this.context.composerID,m);},_isDefaultSpec:function(m){return c('areEqual')(m,{age_max:65,age_min:13});},_onSaveLegacy:function(m){if(this.props.callbackDataStatus)this.props.callbackDataStatus(m.gating&&!c('isEmpty')(m.gating)&&!this._isDefaultSpec(m.gating)||m.targeting&&!c('isEmpty')(m.targeting)&&!this._isDefaultSpec(m.targeting)||m.hints&&!c('isEmpty')(m.hints)&&!this._isDefaultSpec(m.hints));c('ReactComposerTargetingUtils').setData(this.context.targetID,m);},_onTargetingChange:function(m){if(!this.props.useTargetingAsFilter){delete m.age_min;delete m.age_max;}if(c('areEqual')(this.state.targeting,m)||c('areEqual')(this.state.hints,m))return;this.setState({fetching:true});var n=this.props.useTargetingAsFilter?m:Object.assign({},m,this.state.gating);c('ReactComposerTargetingUtils').fetchMetadata(n,this.context.targetID,this._onTargetingChangeHandler);},_onTargetingChangeHandler:function(m,n,o){if(this.props.useTargetingAsFilter){this.setState({fetching:false,targeting:m,targetingSentences:n,reachEstimate:o});}else this.setState({fetching:false,hints:m,targetingSentences:n});},_onGatingChange:function(m){if(c('areEqual')(this.state.gating,m))return;this.setState({fetching:true});var n=this.props.useTargetingAsFilter?m:Object.assign({},m,this.state.hints);c('ReactComposerTargetingUtils').fetchMetadata(n,this.context.targetID,this._onGatingChangeHandler);},_onGatingChangeHandler:function(m,n){if(this.props.useTargetingAsFilter){this.setState({fetching:false,gating:m,gatingSentences:n});}else this.setState({fetching:false,gating:m,targetingSentences:n});},convertConnectionsToInterestsFromApiToTargetingSpec:function(m){if(m&&m.connections&&!m.fan_of){m.fan_of=m.connections;delete m.connections;}return m;},convertInterestsToConnectionsFromTargetingSpecToApi:function(m){if(m&&m.fan_of&&!m.connections){m.connections=m.fan_of;delete m.fan_of;}return m;},getInitialSavedData:function(m){var n={};if(this.props.useFromLegacyComposer){n=this.getSavedSpec(m,this.context.targetID);}else n=this.getSavedSpec(m,this.context.composerID);return this.convertInterestsToConnectionsFromTargetingSpecToApi(n);},getSavedSpec:function(m,n){if(this.props.useFromLegacyComposer){var o=c('ReactComposerTargetingUtils').getDataFromTargetingTaggerStore(n);}else o=c('ReactComposerTargetingUtils').getDataFromComposerTaggerStore(n);return o==null?null:o[m];},getInitialReachEstimate:function(){if(!this.props.useTargetingAsFilter){return null;}else{var m=c('ReactComposerTargetingUtils').getDataFromComposerTaggerStore(this.context.composerID);return m==null?null:m.reachEstimate;}},renderReachEstimate:function(){if(!this.state.reachEstimate)return null;var m=this.state.reachEstimate===20?i._("0-20"):this.state.reachEstimate,n=i._("Reach estimate for news feed targeting: {estimate_number}",[i.param('estimate_number',m)]);return (c('React').createElement(c('XUIText.react'),null,n));},renderHelpLink:function(){var m=i._("Have a Question?"),n='https://www.facebook.com/facebookmedia/get-started/'+'audience-optimization/',o=c('React').createElement(c('Link.react'),{href:n,target:'_blank'},i._("Read our Guidelines."));return (c('React').createElement('div',{className:"_3xrd"},c('React').createElement(c('XUIText.react'),null,m),' ',o));},renderFooterLeftContent:function(){if(this.props.shouldHideLeftFooter)return null;if(!this.props.useTargetingAsFilter)return this.renderHelpLink();return this.renderReachEstimate();},render:function(){var m=c('React').createElement('div',{className:"_1220"},c('React').createElement(c('XUISpinner.react'),null)),n=this.props.useTargetingAsFilter?this.state.targeting:this.state.hints;return (c('React').createElement(c('XUIDialog.react'),{shown:this.props.shown,behaviors:{LayerFadeOnHide:c('LayerFadeOnHide')},layerHideOnBlur:false,onToggle:this.props.onToggle,width:k},c('React').createElement(c('XUIDialogBody.react'),null,c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('PagesComposerAudiencesBody.react').__setRef('PagesComposerAudiences.react'),bootloadPlaceholder:m,initialTargetingSpec:n,initialGatingSpec:this.state.gating,onTargetingChange:this._onTargetingChange,onGatingChange:this._onGatingChange,initialActiveKey:this.props.initialActiveKey,canSeeCompleteList:this.props.canSeeCompleteList,useTargetingAsFilter:this.props.useTargetingAsFilter,canSeeDemographicOptions:this.props.canSeeDemographicOptions,feedTargetingShowReachGK:this.props.feedTargetingShowReachGK,hideFeedTargeting:this.props.hideFeedTargeting,shouldShowRestrictionTabNux:this.props.shouldShowRestrictionTabNux})),c('React').createElement(c('XUIDialogFooter.react'),{leftContent:this.renderFooterLeftContent()},c('React').createElement(c('XUIDialogCancelButton.react'),{use:'default'}),c('React').createElement(c('XUIDialogSaveButton.react'),{className:"_2uyv",use:'confirm',action:'confirm',disabled:this.state.fetching,onClick:this._onSave}))));}});f.exports=l;},null);
__d('ReactComposerPagesPrivacySelector.react',['cx','fbt','ix','ReactComposerContextMixin','Image.react','PagesComposerAudiences.react','PopoverMenu.react','ReactComponentWithPureRenderMixin','React','ReactComposerTargetingUtils','ReactLayeredComponentMixin','ReactSelectorUtils','Tooltip.react','XUIGrayText.react','ReactXUIMenu','XUIMenuSeparator.react','XUIMenuStaticItem.react','XUISelector.react','XUISelectorButton.react','PagesComposerAudiencesConstants'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=c('ReactXUIMenu').SelectableMenu,l=c('XUISelector.react').Option,m=c('PagesComposerAudiencesConstants').TABS,n=j('/images/icons/audience/everyone.png'),o=j('/images/icons/audience/custom.png'),p='everyone',q='custom',r=c('React').PropTypes,s=c('React').createClass({displayName:'ReactComposerPagesPrivacySelector',mixins:[c('ReactComposerContextMixin'),c('ReactComponentWithPureRenderMixin'),c('ReactLayeredComponentMixin')],propTypes:{gatingSentences:r.object,useReactPrivacyDialogForLegacy:r.bool,isVideoDialog:r.bool,useTargetingAsFilter:r.bool},getInitialState:function(){return {dialogShown:false};},_getSelectorButton:function(){var t=this.props.gatingSentences?o:n;return (c('React').createElement(c('XUISelectorButton.react'),{image:c('React').createElement(c('Image.react'),{src:t}),suppressed:true}));},_getMenuItems:function(){return [c('React').createElement(l,{icon:c('React').createElement(c('Image.react'),{src:n}),value:p,onclick:this._onClearPrivacy},i._("Public")),c('React').createElement(c('XUIMenuSeparator.react'),null),c('React').createElement(c('XUIMenuStaticItem.react'),null,c('React').createElement(c('XUIGrayText.react'),{shade:'light'},i._("Limit Audience By:"))),c('React').createElement(l,{icon:c('React').createElement(c('Image.react'),{src:o}),value:q,onclick:function(){return this._onToggle(true);}.bind(this)},i._("Demographics"))];},_onToggle:function(t){setTimeout(function(){return this.setState({dialogShown:t});}.bind(this),0);},_onClearPrivacy:function(){var t=c('ReactComposerTargetingUtils').getDataFromComposerTaggerStore(this.context.composerID),u=Object.assign({},t);u.gating=null;u.gatingSentences=null;c('ReactComposerTargetingUtils').setData(this.context.composerID,u);},renderLayers:function(){if(!this.state.dialogShown)return {};return (c('React').createElement(c('PagesComposerAudiences.react'),{shown:this.state.dialogShown,onToggle:this._onToggle,onSave:function(){return this._onToggle(false);}.bind(this),initialActiveKey:m.GATING,useFromLegacyComposer:this.props.isVideoDialog,useTargetingAsFilter:this.props.useTargetingAsFilter}));},render:function(){var t=this.props.gatingSentences?q:p,u=c('ReactSelectorUtils').processMenuItems(this._getMenuItems(),t),v=c('React').createElement(k,{value:t},u.items);return (c('React').createElement(c('Tooltip.react'),{tooltip:this.props.gatingSentences},c('React').createElement('div',{className:"_5dd8"},c('React').createElement(c('PopoverMenu.react'),{menu:v},this._getSelectorButton()))));}});f.exports=s;},null);
__d('ReactComposerPagesPrivacyContainer.react',['fbt','ix','cx','ReactComposerPagesPrivacySelector.react','ReactComposerPropsAndStoreBasedStateMixin','ReactComposerTaggerStore','ReactComposerTaggerType','ReactComponentWithPureRenderMixin','React','Image.react','Tooltip.react'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=i('/images/icons/audience/everyone_gray.png'),l=c('React').PropTypes,m=c('React').createClass({displayName:'ReactComposerPagesPrivacyContainer',mixins:[c('ReactComponentWithPureRenderMixin'),c('ReactComposerPropsAndStoreBasedStateMixin')(c('ReactComposerTaggerStore'))],propTypes:{lockToPrivacy:l.string,useTargetingAsFilter:l.bool},statics:{calculateState:function(n,o){var p=c('ReactComposerTaggerStore').getTaggerData(n,c('ReactComposerTaggerType').TARGETING)||{};return {gatingSentences:p.gatingSentences};}},render:function(){if(this.props.lockToPrivacy){return this._renderLockedIcon();}else return this._renderSelector();},_renderSelector:function(){return (c('React').createElement(c('ReactComposerPagesPrivacySelector.react'),{gatingSentences:this.state.gatingSentences,useTargetingAsFilter:this.props.useTargetingAsFilter}));},_renderLockedIcon:function(){switch(this.props.lockToPrivacy){case 'everyone':return (c('React').createElement('div',{className:"_3jv0"},c('React').createElement(c('Tooltip.react'),{tooltip:h._("Everyone can see posts on this public page")},c('React').createElement('div',{className:"_3jv1"},c('React').createElement(c('Image.react'),{src:k})))));default:return null;}}});f.exports=m;},null);
__d('ReactComposerProductTaggerButton.react',['fbt','cx','AsyncRequest','CommerceSelfServeNUXType','ReactComposerTaggerActions','ReactComposerTaggerButtonMixin','ReactComposerTaggerType','React','XCommerceSelfServeMerchantNUXSeenController','XUIAmbientNUX.react'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').createClass({displayName:'ReactComposerProductTaggerButton',mixins:[c('ReactComposerTaggerButtonMixin')],statics:{taggerID:c('ReactComposerTaggerType').PRODUCT},getTitle:function(){return h._("Tag a product");},getNUX:function(){if(!this.state.showNUX||!this.refs.fbReactComposerProductTaggerButton)return null;return (c('React').createElement(c('XUIAmbientNUX.react'),{alignment:'center',contextRef:function(){return this.refs.fbReactComposerProductTaggerButton;}.bind(this),position:'below',shown:true,onCloseButtonClick:this._hideNUX},h._("Tag products from your shop in your post")));},getTooltip:function(){return h._("Tag a product");},getClassName:function(){return "_5rd2";},getRef:function(){return 'fbReactComposerProductTaggerButton';},_hideNUX:function(){c('ReactComposerTaggerActions').handleSetTaggerShowNUX(this.context.composerID,c('ReactComposerTaggerType').PRODUCT,false);var k=c('XCommerceSelfServeMerchantNUXSeenController').getURIBuilder().setInt('page_id',this.context.actorID).setEnum('nux_type',c('CommerceSelfServeNUXType').COMPOSER_PRODUCT_TAGGER_BUTTON).getURI();new (c('AsyncRequest'))(k).send();}});f.exports=j;},null);
__d('ReactComposerPeopleTaggerTokenizerToken.react',['cx','React','SearchableEntry','TokenizerToken.react','joinClasses'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'ReactComposerPeopleTaggerTokenizerToken',propTypes:{label:i.string.isRequired,entry:i.instanceOf(c('SearchableEntry')).isRequired,onRemove:i.func,highlighted:i.bool},_renderGlyph:function(){return (c('React').createElement('span',{className:"_jsa"}));},render:function(){var k=this.props.entry&&this.props.entry.getAuxiliaryData().isFacebox,l=(k?"_jsb":'')+(' '+"_jsc");return (c('React').createElement(c('TokenizerToken.react'),babelHelpers['extends']({},this.props,{className:c('joinClasses')(this.props.className,l),glyph:this._renderGlyph()})));}});f.exports=j;},null);
__d('ReactComposerProductTaggerTokenizerToken.react',['cx','ReactComposerPeopleTaggerTokenizerToken.react','React','joinClasses'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').createClass({displayName:'ReactComposerProductTaggerTokenizerToken',render:function(){var j="_rox";return (c('React').createElement(c('ReactComposerPeopleTaggerTokenizerToken.react'),babelHelpers['extends']({},this.props,{className:c('joinClasses')(this.props.className,j)})));}});f.exports=i;},null);
__d('ReactComposerProductTaggerComponent.react',['cx','fbt','ReactComposerPhotoActions','ReactComposerProductTaggerTokenizerToken.react','ReactComposerTaggerPresenter','ReactComposerTaggerViewStyles','Grid.react','React','TokenizerExampleSearchSource','XUITokenizer.react','emptyFunction'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('Grid.react').GridItem,k=c('React').PropTypes,l=c('React').createClass({displayName:'ReactComposerProductTaggerComponent',propTypes:{autoFocus:k.bool,placeholder:k.string,taggerSource:k.object,taggerData:k.array.isRequired,onSelect:k.func},getInitialState:function(){return {edited:false};},getDefaultProps:function(){return {autoFocus:true,onSelect:c('emptyFunction'),placeholder:i._("What products are in this post?"),taggerData:[],taggerSource:new (c('TokenizerExampleSearchSource'))()};},_onClear:function(){this.props.onSelect&&this.props.onSelect({});},render:function(){return (c('React').createElement(c('Grid.react'),{cols:2,className:"_5esl",role:'presentation'},c('React').createElement(j,{key:'label',className:"_5esm",role:'presentation'},i._("Products shown")),c('React').createElement(j,{key:'tokenizer',className:"_5esw",role:'presentation'},c('React').createElement('div',null,c('React').createElement(c('XUITokenizer.react'),babelHelpers['extends']({},this.props,{className:"_4fmg",presenter:this._getPresenter(),entries:this.props.taggerData,focusedOnInit:this.props.autoFocus,onAddEntryAttempt:this._onAdd,onQueryStringChange:this._onQueryStringChange,onRemoveEntryAttempt:this._onRemove,placeholder:this.props.placeholder,searchSource:this.props.taggerSource}))))));},_onAdd:function(m){var n=this.props.taggerData,o=m.getUniqueID(),p=n.some(function(q){return q.getUniqueID()===o;});if(p){return;}else{this.setState({edited:true});n.push(m);}this.props.onSelect&&this.props.onSelect(n);},_onRemove:function(m){var n=this.props.taggerData,o=n.indexOf(m);if(o==-1)return;this.setState({edited:true});n.splice(o,1);c('ReactComposerPhotoActions').untagSubjectFromAllPhotos(this.props.reactComposerID,m.getUniqueID());this.props.onSelect&&this.props.onSelect(n);},_onQueryStringChange:function(event){this.setState({edited:true});},_getPresenter:function(){var m={};m.taggerViewStyle=c('ReactComposerTaggerViewStyles').DEFAULT;return Object.assign({},c('ReactComposerTaggerPresenter'),{extraRendererProps:m,TokenRenderer:c('ReactComposerProductTaggerTokenizerToken.react')});}});f.exports=l;},null);
__d('ReactComposerProductTaggerContainer.react',['ReactComposerProductTaggerComponent.react','ReactComposerTaggerActions','ReactComposerTaggerContainerMixin','ReactComposerTaggerType','React','SubscriptionsHandler','WebAsyncSearchSource'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'ReactComposerProductTaggerContainer',_subscriptions:undefined,mixins:[c('ReactComposerTaggerContainerMixin')],statics:{taggerID:c('ReactComposerTaggerType').PRODUCT,taggerComponent:c('ReactComposerProductTaggerComponent.react')},propTypes:{reactComposerID:h.string.isRequired,viewer:h.string.isRequired},getInitialState:function(){return {reachEstimate:null,searchSource:null};},componentWillMount:function(){this._updateProductSearchSource();},componentWillUnmount:function(){this._subscriptions&&this._subscriptions.release();},_updateProductSearchSource:function(){var j=this.state.searchSource;if(j===null)j=this._createAndBootstrapProductTypeSearchSource();c('ReactComposerTaggerActions').setTaggerSource(this.context.composerID,c('ReactComposerTaggerType').PRODUCT,j);},_createAndBootstrapProductTypeSearchSource:function(){var j={filter:['product_items'],viewer:this.props.viewer};return new (c('WebAsyncSearchSource'))({queryRequests:[{uri:'/ajax/product_items/typeahead/query.php',data:Object.assign({},j,{is_bootstrap:false})}],bootstrapRequests:[{uri:'/ajax/product_items/typeahead/bootstrap.php',data:Object.assign({},j,{is_bootstrap:true})}],auxiliaryFields:{verified:'is_verified'}});}});f.exports=i;},null);
__d("XBrandedContentTaggerNuxController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/branded_content\/tagger\/nux\/",{action:{type:"Enum",required:true,enumType:1}});},null);
__d('ReactComposerSponsorTaggerButton.react',['fbt','cx','AsyncRequest','BrandedContentTaggerNuxAction','ReactComposerTaggerActions','ReactComposerTaggerButtonMixin','ReactComposerTaggerType','React','XBrandedContentTaggerNuxController','XUIAmbientNUX.react'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').createClass({displayName:'ReactComposerSponsorTaggerButton',mixins:[c('ReactComposerTaggerButtonMixin')],statics:{taggerID:c('ReactComposerTaggerType').SPONSOR},componentDidMount:function(){this._logNUXView();},getTitle:function(){return h._("Does this post feature a third party brand or product? If so, you must tag the associated Page. See Branded Content policy.");},getTooltip:function(){return h._("Does this post feature a third party brand or product? If so, you must tag the associated Page. See Branded Content policy.");},getClassName:function(){return "_3i-i";},getRef:function(){return 'fbReactComposerSponsorTaggerButton';},getNUX:function(){if(!this.state.showNUX||!this.refs.fbReactComposerSponsorTaggerButton)return null;return (c('React').createElement(c('XUIAmbientNUX.react'),{alignment:'left',contextRef:function(){return this.refs.fbReactComposerSponsorTaggerButton;}.bind(this),position:'below',shown:true,onCloseButtonClick:function(){return this._onNUXClose();}.bind(this)},h._("Share branded content on Facebook with our new tool.")));},_onNUXClose:function(){c('ReactComposerTaggerActions').handleSetTaggerShowNUX(this.context.composerID,c('ReactComposerTaggerType').SPONSOR,false);this._dismissNUX();},_dismissNUX:function(){var k=c('XBrandedContentTaggerNuxController').getURIBuilder().setEnum('action',c('BrandedContentTaggerNuxAction').DISMISS).getURI();new (c('AsyncRequest'))().setMethod('post').setURI(k).send();},_logNUXView:function(){var k=c('XBrandedContentTaggerNuxController').getURIBuilder().setEnum('action',c('BrandedContentTaggerNuxAction').LOG_VIEW).getURI();new (c('AsyncRequest'))().setMethod('post').setURI(k).send();}});f.exports=j;},null);
__d('ReactComposerSponsorTaggerComponent.react',['cx','fbt','ReactComposerTaggerViewStyles','Grid.react','Link.react','React','XUIContextualDialog.react','XUIContextualDialogBody.react','XUITokenizer.react','TokenizerExampleSearchSource','emptyFunction'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('Grid.react').GridItem,k=c('React').PropTypes,l=c('React').createClass({displayName:'ReactComposerSponsorTaggerComponent',propTypes:{autoFocus:k.bool,placeholder:k.string,taggerSource:k.object,taggerData:k.array.isRequired,onPeopleTagRemove:k.func,onSelect:k.func,taggerViewStyle:k.shape(c('ReactComposerTaggerViewStyles').Shape)},getInitialState:function(){return {tipFocused:false,inputFocused:false,edited:false};},getDefaultProps:function(){return {autoFocus:true,onSelect:c('emptyFunction'),placeholder:i._("Who is sponsoring you for this post?"),taggerViewStyle:c('ReactComposerTaggerViewStyles').DEFAULT,taggerData:[],taggerSource:new (c('TokenizerExampleSearchSource'))()};},_onClear:function(){this.props.onSelect&&this.props.onSelect({});},_renderTypeaheadTip:function(){var m=!this.state.edited&&(this.state.inputFocused||this.state.tipFocused)&&this.props.taggerData.length===0,n=function(){return this.refs.typeahead;}.bind(this),o=c('React').createElement('span',{onMouseLeave:this._onMouseLeaveTip,onMouseEnter:this._onMouseEnterTip},i._("Pages you tag in your post will be notified. They will be able to view your post's metrics and use it to create an ad. If you promote this post, the tagged Page can see the ad spend and its CPM metrics."),c('React').createElement('span',{className:"_2pis"},c('React').createElement(c('Link.react'),{href:'/policies/brandedcontent/',target:'_blank'},i._("See Policy"))));return (c('React').createElement(c('XUIContextualDialog.react'),{contextRef:n,position:'below',shown:m,width:350},c('React').createElement(c('XUIContextualDialogBody.react'),null,o)));},render:function(){return (c('React').createElement(c('Grid.react'),{cols:2,className:"_5esl",role:'presentation'},c('React').createElement(j,{key:'label',className:"_5esm",role:'presentation'},i._("With")),c('React').createElement(j,{key:'tokenizer',className:"_5esw",role:'presentation'},c('React').createElement('div',null,c('React').createElement(c('XUITokenizer.react'),babelHelpers['extends']({ref:'typeahead'},this.props,{entries:this.props.taggerData,focusedOnInit:this.props.autoFocus,onAddEntryAttempt:this._onAdd,onInputBlur:this._onInputBlur,onInputFocus:this._onInputFocus,onQueryStringChange:this._onQueryStringChange,onRemoveEntryAttempt:this._onRemove,placeholder:this.props.placeholder,searchSource:this.props.taggerSource})),this._renderTypeaheadTip()))));},_onAdd:function(m){var n=this.props.taggerData,o=m.getUniqueID(),p=n.some(function(q){return q.getUniqueID()===o;});if(p){return;}else{this.setState({edited:true});n.push(m);}this.props.onSelect&&this.props.onSelect(n);},_onRemove:function(m){var n=this.props.taggerData,o=n.indexOf(m);if(o==-1)return;this.setState({edited:true});n.splice(o,1);this.props.onSelect&&this.props.onSelect(n);},_onInputBlur:function(){this.setState({inputFocused:false});},_onInputFocus:function(){this.setState({inputFocused:true});},_onMouseEnterTip:function(){this.setState({tipFocused:true});},_onMouseLeaveTip:function(){this.setState({tipFocused:false});},_onQueryStringChange:function(event){this.setState({edited:true});}});f.exports=l;},null);
__d('ReactComposerSponsorTaggerContainer.react',['ReactComposerSponsorTaggerComponent.react','ReactComposerTaggerActions','ReactComposerTaggerContainerMixin','ReactComposerTaggerType','React','SubscriptionsHandler','WebAsyncSearchSource'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'ReactComposerSponsorTaggerContainer',_subscriptions:undefined,mixins:[c('ReactComposerTaggerContainerMixin')],statics:{taggerID:c('ReactComposerTaggerType').SPONSOR,taggerComponent:c('ReactComposerSponsorTaggerComponent.react')},propTypes:{viewer:h.string.isRequired},getInitialState:function(){return {sponsorSentences:null,reachEstimate:null,searchSource:null};},componentWillMount:function(){this._updateSponsorSearchSource();},componentWillUnmount:function(){this._subscriptions&&this._subscriptions.release();},_updateSponsorSearchSource:function(){var j=this.state.searchSource;if(j===null)j=this._createAndBootstrapSponsorTypeSearchSource();c('ReactComposerTaggerActions').setTaggerSource(this.context.composerID,c('ReactComposerTaggerType').SPONSOR,j);},_createAndBootstrapSponsorTypeSearchSource:function(){var j={filter:['page'],viewer:this.props.viewer,rsp:'mentions',bsp:'true'};return new (c('WebAsyncSearchSource'))({queryRequests:[{uri:'/ajax/typeahead/search.php',data:Object.assign({},j,{is_bootstrap:false})}],bootstrapRequests:[{uri:'/ajax/typeahead/first_degree.php',data:Object.assign({},j,{is_bootstrap:true})}],auxiliaryFields:{verified:'is_verified'}});}});f.exports=i;},null);
__d('ReactComposerTargetingTaggerButtonMixin',['cx','fbt'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j={getInitialState:function(){return {dialogShown:false};},getTitleTooltip:function(){if(this.props.createLiveVideoTooltipText!=null){return this.props.createLiveVideoTooltipText;}else if(this.props.useTargetingAsFilter){return i._("Narrow the potential News Feed audience for this post");}else return i._("Choose the preferred audiences for this post");},getTitle:function(){return this.getTitleTooltip();},getTooltip:function(){return this.getTitleTooltip();},getClassName:function(){return "_lmf";},getRef:function(){return 'fbReactComposerTargetingTagger';},_onToggle:function(k){setTimeout(function(){return this.setState({dialogShown:k});}.bind(this),0);},_onSelectX:function(){this.setState({dialogShown:true});}};f.exports=j;},null);
__d("XReactComposerTargetingTaggerNuxController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/react_composer\/edit\/targeting_tagger_nux\/",{});},null);
__d('ReactComposerTargetingTaggerButton.react',['fbt','AsyncRequest','ReactComposerTaggerButtonMixin','ReactComposerTaggerType','ReactComposerTargetingTaggerButtonMixin','PagesComposerAudiences.react','React','ReactLayeredComponentMixin','XReactComposerTargetingTaggerNuxController','XUIAmbientNUX.react','XUIText.react','PagesComposerAudiencesConstants'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('PagesComposerAudiencesConstants').TABS,k=-12,l=300,m=c('React').createClass({displayName:'ReactComposerTargetingTaggerButton',mixins:[c('ReactComposerTaggerButtonMixin'),c('ReactComposerTargetingTaggerButtonMixin'),c('ReactLayeredComponentMixin')],propTypes:{createLiveVideoTooltipText:i.string,feedTargetingGK:i.bool,feedTargetingShowReachGK:i.bool,hideFeedTargeting:i.bool,shouldShowTargetingTaggerNux:i.bool,shouldShowRestrictionTabNux:i.bool,useTargetingAsFilter:i.bool,shouldHideLeftFooter:i.bool},statics:{taggerID:c('ReactComposerTaggerType').TARGETING,disableToggle:true},getDefaultProps:function(){return {feedTargetingGK:false,feedTargetingShowReachGK:false,hideFeedTargeting:false,useTargetingAsFilter:true};},getInitialState:function(){return {showTargetingTaggerNux:this.props.shouldShowTargetingTaggerNux};},componentDidMount:function(){var n=!this.state.dialogShown&&this.state.showTargetingTaggerNux&&this.props.feedTargetingGK;if(n){var o=c('XReactComposerTargetingTaggerNuxController').getURIBuilder().getURI();new (c('AsyncRequest'))().setURI(o).setMethod('POST').setData({impression:true}).send();}},componentWillUnmount:function(){if(this.state.showTargetingTaggerNux)this.setState({showTargetingTaggerNux:false});},_onNuxClose:function(){this.setState({showTargetingTaggerNux:false});var n=c('XReactComposerTargetingTaggerNuxController').getURIBuilder().getURI();new (c('AsyncRequest'))().setURI(n).setMethod('POST').setData({acked:true}).send();},_renderNux:function(){return (c('React').createElement(c('XUIAmbientNUX.react'),{contextRef:function(){return this.refs.fbReactComposerTargetingTagger;}.bind(this),onCloseButtonClick:this._onNuxClose,offsetY:k,position:'below',shown:true,width:'custom',customwidth:l},c('React').createElement('div',null,c('React').createElement(c('XUIText.react'),null,h._("Use Audience Optimization to reach people who are more likely to engage with your post.")))));},renderLayers:function(){var n=!this.state.dialogShown&&this.state.showTargetingTaggerNux&&this.props.feedTargetingGK;if(n)return this._renderNux();if(this.state.dialogShown)return (c('React').createElement(c('PagesComposerAudiences.react'),{shown:this.state.dialogShown,onToggle:this._onToggle,onSave:function(){return this._onToggle(false);}.bind(this),initialActiveKey:this.props.hideFeedTargeting?j.GATING:j.TARGETING,shouldHideLeftFooter:this.props.shouldHideLeftFooter,useTargetingAsFilter:this.props.useTargetingAsFilter,feedTargetingShowReachGK:this.props.feedTargetingShowReachGK,hideFeedTargeting:this.props.hideFeedTargeting,shouldShowRestrictionTabNux:this.props.shouldShowRestrictionTabNux}));return {};}});f.exports=m;},null);
__d('ReactComposerTargetingTaggerComponent.react',['cx','fbt','Grid.react','React','XUICloseButton.react','XUIText.react','emptyFunction','isEmpty'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('Grid.react').GridItem,k=c('React').PropTypes,l=c('React').createClass({displayName:'ReactComposerTargetingTaggerComponent',propTypes:{taggerData:k.object.isRequired,onSelect:k.func.isRequired,targetingSentences:k.object},getDefaultProps:function(){return {taggerData:{},onSelect:c('emptyFunction')};},_onClear:function(){this.props.onSelect({});},render:function(){return (c('React').createElement(c('Grid.react'),{cols:2,className:"_5esl",role:'presentation'},c('React').createElement(j,{key:'prefix',className:"_5esm",role:'presentation'},i._("Targeting")),c('React').createElement(j,{key:'tagger',className:"_5esw",role:'presentation'},c('React').createElement('div',{className:"_2doa"},c('React').createElement('div',{className:"_2dob"},c('React').createElement(c('XUICloseButton.react'),{className:"_2doc"+(c('isEmpty')(this.props.taggerData)?' '+"hidden_elem":''),size:'small',type:'button',onClick:this._onClear})),c('React').createElement('div',{className:"_2dod"},c('React').createElement(c('XUIText.react'),null,this.props.targetingSentences))))));}});f.exports=l;},null);
__d('ReactComposerTargetingTaggerContainer.react',['ReactComposerTaggerActions','ReactComposerTaggerContainerStateMixin','ReactComposerTaggerStore','ReactComposerTaggerType','ReactComposerTargetingTaggerComponent.react','SubscriptionsHandler','React'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('React').createClass({displayName:'ReactComposerTargetingTaggerContainer',_subscriptions:undefined,mixins:[c('ReactComposerTaggerContainerStateMixin')],statics:{taggerID:c('ReactComposerTaggerType').TARGETING},getInitialState:function(){return {targetingSentences:null};},componentWillMount:function(){var i=new (c('SubscriptionsHandler'))();i.addSubscriptions(c('ReactComposerTaggerStore').addChangeListener(this._onChange));this._subscriptions=i;},componentWillUnmount:function(){this._subscriptions&&this._subscriptions.release();},_onChange:function(){var i=c('ReactComposerTaggerStore').getTaggerData(this.context.composerID,c('ReactComposerTaggerType').TARGETING);this.setState({targetingSentences:i?i.targetingSentences:null});},_onTaggerDataChanged:function(i){this.__onTaggerDataChanged&&this.__onTaggerDataChanged(i);c('ReactComposerTaggerActions').setTaggerData(this.context.composerID,c('ReactComposerTaggerType').TARGETING,i);this.props.onSelect&&this.props.onSelect(i);},render:function(){if(!this.state.isSelected)return c('React').createElement('noscript',null);return (c('React').createElement(c('ReactComposerTargetingTaggerComponent.react'),babelHelpers['extends']({},this.props,this.state,{autoFocus:this.state.autoFocus,taggerSource:this.state.taggerSource,taggerData:this.state.taggerData,onSelect:this._onTaggerDataChanged})));}});f.exports=h;},null);
__d('ReactPagesComposer.react',['cx','ReactComposer.react','ReactComposerAttachmentActions','ReactComposerBody.react','ReactComposerBoostedPostLazyButton.react','ReactComposerConfig','ReactComposerContextConfig','ReactComposerContextProviderMixin','ComposerEntryPointRef','ReactComposerLazyHeader.react','ReactComposerLiveVideoAttachmentSelector.react','ReactComposerLiveVideoLazyAttachment.react','ReactComposerMediaAttachmentSelector.react','ReactComposerMediaLazyAttachment.react','ReactComposerPagesBootloader','ReactComposerPagesPrivacyContainer.react','ReactComposerPagesStore','ReactComposerPrefillActions','ReactComposerProductTaggerButton.react','ReactComposerProductTaggerContainer.react','ReactComposerQAndALazyAttachment.react','ReactComposerQuestionLazyAttachment.react','ReactComposerTaggerActions','ReactComposerTaggerType','ReactComposerTargetingTaggerButton.react','ReactComposerTargetingTaggerContainer.react','ReactComposerSponsorTaggerButton.react','ReactComposerSponsorTaggerContainer.react','ReactComposerStatusAttachmentSelector.react','ReactComposerStatusLazyAttachment.react','ReactComposerAttachmentType','BootloadedComponent.react','JSResource','PagesComposer','PagesComposerExtraAttachmentSelector.react','PagesComposerExtraLazyAttachment.react','React','XUISpinner.react','dotAccess','PagesComposerUnpublishedPostsStore'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();c('PagesComposerUnpublishedPostsStore');var i=c('React').createClass({displayName:'ReactPagesComposer',mixins:[c('ReactComposerContextProviderMixin')],propTypes:{contextConfig:c('ReactComposerContextConfig').isRequired,config:c('ReactComposerConfig').isRequired},componentDidMount:function(){c('PagesComposer').init(this.props.contextConfig.composerID,this.props.contextConfig.targetID);c('ReactComposerPagesStore').registerComposerID(this.props.contextConfig.composerID);if(this.props.config.expanded)c('ReactComposerAttachmentActions').selectAttachment(this.props.contextConfig.composerID,c('ReactComposerAttachmentType').STATUS,true);},componentWillMount:function(){if(this.props.prefillConfig)c('ReactComposerPrefillActions').setPrefillData(this.props.contextConfig.composerID,this.props.prefillConfig);},_getAdditionalTaggersForStatusAttachment:function(){var j=[],k=this.props.config.taggersConfig;if(k[c('ReactComposerTaggerType').TARGETING].enabled)j.push(this._getTargetTagger());if(k[c('ReactComposerTaggerType').SPONSOR].enabled)j.push(this._getSponsorTagger());if(k[c('ReactComposerTaggerType').PRODUCT].enabled)j.push(this._getProductTagger());return j;},_getAdditionalTaggersForMediaAttachment:function(){return this._getAdditionalTaggersForStatusAttachment();},_getTargetTagger:function(){var j=this.props.config.taggersConfig[c('ReactComposerTaggerType').TARGETING],k=this.props.config.nuxConfig;return {button:c('React').createElement(c('ReactComposerTargetingTaggerButton.react'),{feedTargetingGK:c('dotAccess')(j,'feedTargetingGK'),feedTargetingShowReachGK:c('dotAccess')(j,'feedTargetingShowReachGK'),shouldShowTargetingTaggerNux:k.shouldShowTargetingTaggerNux,shouldShowRestrictionTabNux:this.props.config.nuxConfig.shouldShowRestrictionTabNux,useTargetingAsFilter:!c('dotAccess')(j,'feedTargetingGK'),key:'targeting_button'}),container:c('React').createElement(c('ReactComposerTargetingTaggerContainer.react'),{key:'targeting_container'})};},_getSponsorTagger:function(){var j=this.props.config.taggersConfig[c('ReactComposerTaggerType').SPONSOR];c('ReactComposerTaggerActions').handleSetTaggerShowNUX(this.props.contextConfig.composerID,c('ReactComposerTaggerType').SPONSOR,j.showSponsorTaggerButtonNUX);return {button:c('React').createElement(c('ReactComposerSponsorTaggerButton.react'),{key:'sponsor_button'}),container:c('React').createElement(c('ReactComposerSponsorTaggerContainer.react'),{key:'sponsor_container',viewer:this.props.config.actorConfig.viewerAccountID})};},_getProductTagger:function(){var j=this.props.config.taggersConfig[c('ReactComposerTaggerType').PRODUCT];c('ReactComposerTaggerActions').handleSetTaggerShowNUX(this.props.contextConfig.composerID,c('ReactComposerTaggerType').PRODUCT,j.showProductTaggerButtonNUX);return {button:c('React').createElement(c('ReactComposerProductTaggerButton.react'),{key:'product_button'}),container:c('React').createElement(c('ReactComposerProductTaggerContainer.react'),{key:'product_container',reactComposerID:this.props.contextConfig.composerID,viewer:this.props.config.actorConfig.viewerAccountID})};},_getAdditionalFooterActionsForStatusAttachment:function(){var j=[];if(this.props.config.boostedPostButtonConfig)j.push(c('React').createElement(c('ReactComposerBoostedPostLazyButton.react'),babelHelpers['extends']({},this.props.config.boostedPostButtonConfig,{key:'boosted_post_button',reactComposerID:this.props.contextConfig.composerID})));if(this.props.config.taggersConfig[c('ReactComposerTaggerType').TARGETING].enabled&&!c('dotAccess')(this.props.config,'feedTargetingGK'))j.push(c('React').createElement(c('ReactComposerPagesPrivacyContainer.react'),{key:'privacy_selector',lockToPrivacy:this.props.config.taggersConfig[c('ReactComposerTaggerType').TARGETING].lockToPrivacy,useTargetingAsFilter:true}));return j;},_getAdditionalFooterActionsForLiveVideoAttachment:function(){return this._getAdditionalFooterActionsForStatusAttachment();},_getAdditionalFooterActionsForMediaAttachment:function(){return this._getAdditionalFooterActionsForStatusAttachment();},render:function(){var j=this.props.config.attachmentsConfig,k=j[c('ReactComposerAttachmentType').PAGES_EXTRA],l=j[c('ReactComposerAttachmentType').STATUS],m=j[c('ReactComposerAttachmentType').MEDIA],n=j[c('ReactComposerAttachmentType').LIVE_VIDEO];return (c('React').createElement(c('ReactComposer.react'),{hideBorders:this.props.config.hideBorders!==false,loggingConfig:this.props.config.loggingConfig},c('React').createElement(c('ReactComposerLazyHeader.react'),{background:'light-wash',noHorizontalMargin:true,rightChild:this._renderActorSelector(),showDelimiter:false},c('React').createElement(c('ReactComposerStatusAttachmentSelector.react'),{label:l.label}),m.enabled?c('React').createElement(c('ReactComposerMediaAttachmentSelector.react'),null):null,n.enabled?c('React').createElement(c('ReactComposerLiveVideoAttachmentSelector.react'),null):null,k.enabled?c('React').createElement(c('PagesComposerExtraAttachmentSelector.react'),{enabled:!!k.enabled,label:k.label,icon:k.icon,attachmentsConfig:k}):null),c('React').createElement(c('ReactComposerBody.react'),null,c('React').createElement(c('ReactComposerStatusLazyAttachment.react'),{config:this.props.config,selected:true,placeholder:l.placeholder,additionalTaggers:this._getAdditionalTaggersForStatusAttachment(),additionalFooterActions:this._getAdditionalFooterActionsForStatusAttachment(),bootloader:c('ReactComposerPagesBootloader')}),c('React').createElement(c('ReactComposerMediaLazyAttachment.react'),{additionalTaggers:this._getAdditionalTaggersForMediaAttachment(),additionalFooterActions:this._getAdditionalFooterActionsForMediaAttachment(),bootloader:c('ReactComposerPagesBootloader'),config:this.props.config}),c('React').createElement(c('ReactComposerLiveVideoLazyAttachment.react'),{additionalFooterActions:this._getAdditionalFooterActionsForLiveVideoAttachment(),bootloader:c('ReactComposerPagesBootloader'),config:this.props.config}),c('React').createElement(c('PagesComposerExtraLazyAttachment.react'),{bootloader:c('ReactComposerPagesBootloader'),config:this.props.config}),c('React').createElement(c('ReactComposerQuestionLazyAttachment.react'),{config:this.props.config,key:c('ReactComposerAttachmentType').QUESTION,bootloader:c('ReactComposerPagesBootloader')}),c('React').createElement(c('ReactComposerQAndALazyAttachment.react'),{config:this.props.config,key:c('ReactComposerAttachmentType').QANDA,bootloader:c('ReactComposerPagesBootloader')}))));},_renderActorSelector:function(){var j=this.props.contextConfig.composerType;if(j!==c('ComposerEntryPointRef').PAGES_FEED&&j!==c('ComposerEntryPointRef').TIMELINE)return null;var k=this.props.config.actorConfig;k.composerID=this.props.contextConfig.composerID;return (c('React').createElement(c('BootloadedComponent.react'),babelHelpers['extends']({},k,{bootloadPlaceholder:c('React').createElement(c('XUISpinner.react'),{className:"_3igw"}),bootloadLoader:c('JSResource')('ReactComposerActorSelectorContainer.react').__setRef('ReactPagesComposer.react')})));}});f.exports=i;},null);
__d('FaceRecognitionController',['ArbiterMixin','BanzaiODS','Poller','mixin','removeFromArray','FacerecWaterfallEvent'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('mixin')(c('ArbiterMixin')));i=h&&h.prototype;function j(k){'use strict';i.constructor.call(this);this._config=babelHelpers['extends']({uri:'/photos/tagging/recognition/',interval:2000,maxRequests:4,targetIsPage:false,targetID:null},k);this._cleanup();this._poller=new (c('Poller'))({dontStart:true,maxRequests:this._config.maxRequests,interval:this._config.interval,setupRequest:function(l){l.setURI(this._config.uri).setData({recognition_project:'composer_facerec',photos:this._pendingPhotos,waterfallID:this._config.waterfallID,target:this._config.targetID,is_page:this._config.targetIsPage,include_unrecognized_faceboxes:!!this._config.include_unrecognized_faceboxes,include_face_crop_src:!!this._config.include_face_crop_src,include_recognized_user_profile_picture:!!this._config.include_recognized_user_profile_picture,include_low_confidence_recognitions:!!this._config.include_low_confidence_recognitions}).setHandler(this._handleResponse.bind(this));}.bind(this)});this._poller.subscribe('done',function(){var l=this._pendingPhotos;this._cleanup();this.inform('done',{unresolved:l,facerecWaterfallEvent:c('FacerecWaterfallEvent').CLIENT_RECOGNITION_POLLER_GIVE_UP});}.bind(this));}j.prototype.setWaterfallID=function(k){'use strict';this._config.waterfallID=k;};j.prototype.start=function(k){'use strict';Array.prototype.push.apply(this._pendingPhotos,k);this._poller.reset();this._resetSafeguardTimeout();};j.prototype.stop=function(){'use strict';this._poller.stop();this._cleanup();};j.prototype._cleanup=function(){'use strict';window.clearTimeout(this._safeguardTimeout);this._safeguardTimeout=null;this._pendingPhotos=[];};j.prototype._resetSafeguardTimeout=function(){'use strict';window.clearTimeout(this._safeguardTimeout);this._safeguardTimeout=window.setTimeout(function(){c('BanzaiODS').bumpEntityKey('composer_facerec','safeguard');var k=this._pendingPhotos;this._poller.stop();this._cleanup();this.inform('done',{unresolved:k,facerecWaterfallEvent:c('FacerecWaterfallEvent').CLIENT_RECOGNITION_POLLER_TIMEOUT});}.bind(this),(this._config.maxRequests+2)*this._config.interval);};j.prototype._handleResponse=function(k){'use strict';var l=k.getPayload();l.forEach(function(m){var n=0;c('removeFromArray')(this._pendingPhotos,m.fbid);m.faceboxes.forEach(function(o){n+=o.recognitions.length;o.recognitions.forEach(function(p){this.inform('recognition',{photo:m.fbid,facebox:{fbid:o.fbid,x:o.x,y:o.y},recognition:p});}.bind(this));}.bind(this));this.inform('photo',{photo:m.fbid,faceboxes:m.faceboxes,recognitions:n});}.bind(this));if(!this._pendingPhotos.length){this._poller.stop();this._cleanup();this.inform('done',{unresolved:this._pendingPhotos});}};f.exports=j;},null);
__d('PagesPicUIEvents',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={PHOTO_DESELECTED:'PagesPicUIEvents/photoDeselected',PHOTO_SELECTED:'PagesPicUIEvents/photoSelected',PHOTOS_SELECTED_CONFIRM:'PagesPicUIEvents/photosSelectedConfirm'};f.exports=h;},null);
__d('PagesPicModalManager',['Arbiter','PagesPicUIEvents','tidyEvent'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(){'use strict';this.setIsOpen(false);}h.prototype.setIsOpen=function(i){'use strict';this.$PagesPicModalManager1=i;return this;};h.prototype.isOpen=function(){'use strict';return this.$PagesPicModalManager1;};h.prototype.informPhotoSelected=function(i){'use strict';c('Arbiter').inform(c('PagesPicUIEvents').PHOTO_SELECTED,i);};h.prototype.informPhotoDeselected=function(i){'use strict';c('Arbiter').inform(c('PagesPicUIEvents').PHOTO_DESELECTED,i);};h.prototype.informPhotosSelectedConfirm=function(i){'use strict';c('Arbiter').inform(c('PagesPicUIEvents').PHOTOS_SELECTED_CONFIRM,i);};h.prototype.subscribePhotoSelected=function(i){'use strict';c('tidyEvent')(c('Arbiter').subscribe(c('PagesPicUIEvents').PHOTO_SELECTED,i));};h.prototype.subscribePhotoDeselected=function(i){'use strict';c('tidyEvent')(c('Arbiter').subscribe(c('PagesPicUIEvents').PHOTO_DESELECTED,i));};h.prototype.subscribePhotosSelectedConfirm=function(i){'use strict';return c('tidyEvent')(c('Arbiter').subscribeOnce(c('PagesPicUIEvents').PHOTOS_SELECTED_CONFIRM,i));};f.exports=new h();},null);
__d('ReactComposerMediaAttachmentActionType',['keyMirrorRecursive'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports=c('keyMirrorRecursive')({SET_MEDIA_CONFIG:null},'ReactComposerMediaAttachmentActionType');},null);
__d('ReactComposerCanvasActionType',['keyMirrorRecursive'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports=c('keyMirrorRecursive')({HIDE_CANVAS_SELECTOR:null,SHOW_CANVAS_SELECTOR:null},'ReactComposerCanvasActionType');},null);
__d('ReactComposerCanvasActions',['ReactComposerDispatcher','ReactComposerCanvasActionType'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={showCanvasSelector:function(i){c('ReactComposerDispatcher').dispatch({composerID:i,type:c('ReactComposerCanvasActionType').SHOW_CANVAS_SELECTOR});},hideCanvasSelector:function(i){c('ReactComposerDispatcher').dispatch({composerID:i,type:c('ReactComposerCanvasActionType').HIDE_CANVAS_SELECTOR});}};f.exports=h;},null);
__d('ReactComposerPhotoCarouselActionType',['keyMirrorRecursive'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports=c('keyMirrorRecursive')({SELECT_PHOTO_CAROUSEL:null,UNSELECT_PHOTO_CAROUSEL:null,PREVIEW_COMPLETED:null,PREVIEW_INCOMPLETED:null,HIDE_CAROUSEL_URL_INPUT_AREA:null,SHOW_CAROUSEL_URL_INPUT_AREA:null,SEEN_NUX:null},'ReactComposerPhotoCarouselActionType');},null);
__d('ReactComposerPhotoCarouselActions',['ReactComposerPhotoCarouselActionType','ReactComposerDispatcher','ReactComposerPhotoStore'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();c('ReactComposerPhotoStore');var h={selectPhotoCarouselEntryPoint:function(i){c('ReactComposerDispatcher').dispatch({composerID:i,type:c('ReactComposerPhotoCarouselActionType').SELECT_PHOTO_CAROUSEL});},unselectPhotoCarouselEntryPoint:function(i){c('ReactComposerDispatcher').dispatch({composerID:i,type:c('ReactComposerPhotoCarouselActionType').UNSELECT_PHOTO_CAROUSEL});},setPreviewCompleted:function(i){c('ReactComposerDispatcher').dispatch({composerID:i,type:c('ReactComposerPhotoCarouselActionType').PREVIEW_COMPLETED});},setPreviewIncompleted:function(i){c('ReactComposerDispatcher').dispatch({composerID:i,type:c('ReactComposerPhotoCarouselActionType').PREVIEW_INCOMPLETED});},showPhotoCarouselUrlEditArea:function(i,j,k){c('ReactComposerDispatcher').dispatch({composerID:i,source:j,targetID:k,type:c('ReactComposerPhotoCarouselActionType').SHOW_CAROUSEL_URL_INPUT_AREA});},hidePhotoCarouselUrlEditArea:function(i){c('ReactComposerDispatcher').dispatch({composerID:i,type:c('ReactComposerPhotoCarouselActionType').HIDE_CAROUSEL_URL_INPUT_AREA});},seenNux:function(i){c('ReactComposerDispatcher').dispatch({composerID:i,type:c('ReactComposerPhotoCarouselActionType').SEEN_NUX});}};f.exports=h;},null);
__d('SlideshowMediaUploadContainer.react',['cx','fbt','ix','React','FileInput.react','Image.react','XUIButton.react','fbglyph'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes,l=c('React').createClass({displayName:'SlideshowMediaUploadContainer',propTypes:{onVideoFileSelect:k.func.isRequired},statics:{getImageUploadButton:function(){return (c('React').createElement(c('XUIButton.react'),{className:"_v35",href:{url:'#'},image:c('React').createElement(c('Image.react'),{className:"_v36",src:j("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/photo-add_20_fig-white.png")}),label:i._("Add Photos"),size:'xlarge',use:'confirm'}));}},_onVideoFileSelect:function(){var m=this.refs.videoFileInput.getFileInput();if(m.input)this.props.onVideoFileSelect(m.input);m.clear();},_getVideoUploadButton:function(){return (c('React').createElement(c('FileInput.react'),{accept:'video/mp4,video/x-m4v,video/*',multiple:false,name:'slideshow_video_upload_button',ref:'videoFileInput',onChange:this._onVideoFileSelect},c('React').createElement(c('XUIButton.react'),{className:"_v35",href:{url:'#'},image:c('React').createElement(c('Image.react'),{className:"_v36",src:j("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/camcorder-plus_20_fig-dark-80.png")}),label:i._("Upload Video"),size:'xlarge'})));},render:function(){return (c('React').createElement('div',babelHelpers['extends']({},this.props,{className:"_v32"}),c('React').createElement(c('Image.react'),{className:"_v33",src:j('/images/ads/slideshow/photostack.png')}),i._("Add photos or upload a video to start creating a slideshow"),c('React').createElement('div',{className:"_v34"},this.props.children,this._getVideoUploadButton())));}});f.exports=l;},null);
__d("XPagesPicMenuDialogController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/profile\/pages\/picture\/menu_dialog\/",{multiselect:{type:"Bool",defaultValue:false},page_id:{type:"Int",required:true},source:{type:"String",defaultValue:"unknown"},__asyncDialog:{type:"Int"}});},null);
__d('ReactComposerSlideshowImageUploadsContainer.react',['cx','FileInput.react','Link.react','SlideshowMediaUploadContainer.react','Arbiter','AsyncDialog','AsyncRequest','ReactComposerSlideshowActions','PagesPicModalManager','React','XPagesPicMenuDialogController','emptyFunction','tidyEvent'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j='slideshow_pages_composer',k=c('React').createClass({displayName:'ReactComposerSlideshowImageUploadsContainer',statics:{_onFilesSelected:c('emptyFunction'),_pageImageDialog:null,_handleFileInput:function(l){c('tidyEvent')(l.subscribe('change',function(event){if(!l.getValue())return;this._onFilesSelected(event,l);if(self._pageImageDialog)self._pageImageDialog.hide();}.bind(this)));}},propTypes:{composerID:i.string.isRequired,imageUploadButtonType:i.oneOf(['more_link','add_button']).isRequired,mediaAcceptParam:i.string.isRequired,pageID:i.string.isRequired,showPagesLibrary:i.bool.isRequired,onFilesSelected:i.func.isRequired},componentWillMount:function(){k._onFilesSelected=this.props.onFilesSelected;},render:function(){var l=null;switch(this.props.imageUploadButtonType){case 'more_link':l=c('React').createElement(c('Link.react'),{className:"_38i2"});break;case 'add_button':l=c('SlideshowMediaUploadContainer.react').getImageUploadButton();break;}if(this.props.showPagesLibrary)return (c('React').createElement('span',{onClick:this._onPageImageDialogClick},l));return (c('React').createElement(c('FileInput.react'),{accept:this.props.mediaAcceptParam,'data-testid':'media-attachment-add-slideshow-photo',multiple:true,name:'composer_slideshow',ref:'imageFileInput',onChange:this._onFilesSelected},l));},_onFilesSelected:function(event){var l=this.refs.imageFileInput.getFileInput();if(l!==null&&l!==undefined&&this.props.onFilesSelected!==null&&this.props.onFilesSelected!==undefined)this.props.onFilesSelected(event,l);},_onPageImageDialogClick:function(){c('AsyncDialog').send(new (c('AsyncRequest'))(this._getPageImagesSelectURI()),function(l){self._pageImageDialog=l;var m=c('PagesPicModalManager').subscribePhotosSelectedConfirm(function(n,o){c('ReactComposerSlideshowActions').selectImagesConfirm(this.props.composerID,o);l.hide();}.bind(this));l.subscribe('hide',function(event){c('Arbiter').unsubscribe(m);});}.bind(this));},_getPageImagesSelectURI:function(){return c('XPagesPicMenuDialogController').getURIBuilder().setInt('page_id',this.props.pageID).setString('source',j).setBool('multiselect',true).getURI();}});f.exports=k;},null);
__d('SlideshowFbtUtils',['fbt'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i={None:h._("None"),Fade:h._("Fade"),Unknown:h._("Unknow")},j={None:h._("None"),Adventurous:h._("Adventurous"),Epic:h._("Epic"),Happy:h._("Happy"),Heroic:h._("Heroic"),Inspired:h._("Inspired"),Loved:h._("Loved"),Mellow:h._("Mellow"),Nostalgic:h._("Nostalgic"),Optimistic:h._("Optimistic"),Playful:h._("Playful"),Soulful:h._("Soulful"),Unknown:h._("Unknown")},k={Original:h._("Original"),Wide:h._("Rectangle (16:9)"),Square:h._("Square (1:1)")},l={Original:null,Wide:null,Square:null},m={_getFbtString:function(n,o){if(n[o])return n[o];return n.Unknown;},getDurationFbtString:function(n){if(n===1)return h._({"*":"{second} second"},[h.param('second',n,[0])]);return h._({"*":"{seconds} seconds"},[h.param('seconds',n,[0])]);},getTransitionFbtString:function(n){return this._getFbtString(i,n);},getAudioFbtString:function(n){return this._getFbtString(j,n);},getFormatFbtString:function(n){return this._getFbtString(k,n);},getFormatTooltipFbtString:function(n){return this._getFbtString(l,n);}};f.exports=m;},null);
__d('SlideshowDraggableImage.react',['cx','invariant','DraggableTokenMixin.react','FBOverlayBase.react','FBOverlayContainer.react','FBOverlayElement.react','LoadingImageBox.react','ReactComponentWithPureRenderMixin','React','SlideshowFrameImage.react','SlideshowImageUtil','XUICloseButton.react'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=100,k=100,l=c('React').PropTypes,m=c('React').createClass({displayName:'SlideshowDraggableImage',mixins:[c('DraggableTokenMixin.react'),c('ReactComponentWithPureRenderMixin')],propTypes:{dragTargetIndex:l.oneOfType([l.oneOf([null]),l.number]),image:l.shape({height:l.number,isLoading:l.bool.isRequired,key:l.string.isRequired,url:l.string,width:l.number}).isRequired,index:l.number.isRequired,overflow:l.bool.isRequired,onImageRemove:l.func.isRequired},_onImageRemove:function(){this.props.onImageRemove(this.props.image);},_getImage:function(){var n=this.props.image,o="_590x"+(this.props.overflow?' '+"_5b-k":'');if(n.isLoading){return (c('React').createElement(c('LoadingImageBox.react'),{className:o,height:j,width:k}));}else{!(n.width!=null&&n.height!=null)?i(0):void 0;return (c('React').createElement(c('SlideshowFrameImage.react'),{className:o,croppingSpec:c('SlideshowImageUtil').getFullSizeImageBoxCroppingSpec({width:n.width?n.width:0,height:n.height?n.height:0},{width:k,height:j}),imageSrc:n.url,imageWidth:n.width,imageHeight:n.height,maxWidth:k,maxHeight:j,positionStyle:'relative'}));}},render:function(){return this.renderDraggableToken(c('React').createElement(c('FBOverlayContainer.react'),null,c('React').createElement(c('FBOverlayBase.react'),null,this._getImage()),c('React').createElement(c('FBOverlayElement.react'),null,c('React').createElement('div',{className:"_5910"+(this.props.dragTargetIndex===this.props.index?' '+"_5911":'')},c('React').createElement(c('XUICloseButton.react'),{className:"_5912",shade:'light',size:'small',onClick:this._onImageRemove})))));}});f.exports=m;},null);
__d('SlideshowImageUploadsContainer.react',['cx','fbt','invariant','AdsHelpLink.react','React','SlideshowDraggableImage.react','padNumber'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=1000,l=60,m=':',n=0,o=1,p=2,q=c('React').PropTypes,r=c('React').createClass({displayName:'SlideshowImageUploadsContainer',propTypes:{durationWithTransitionInMS:q.number.isRequired,maxSelectedImages:q.number.isRequired,selectedImages:q.arrayOf(q.shape({height:q.number,isLoading:q.bool.isRequired,key:q.string.isRequired,url:q.string,width:q.number})).isRequired,onImageRemove:q.func.isRequired,onImageReorder:q.func.isRequired},getInitialState:function(){return this._getDefaultState();},_getDefaultState:function(){return {draggingIndex:null,dragTargetIndex:null};},_onTokenDragStart:function(s,t){this.setState({draggingIndex:t});},_onTokenDragEnd:function(s,t){this.setState(this._getDefaultState());},_onTokenDragOver:function(s,t,u){if(this.state.draggingIndex!==null&&this.state.dragTargetIndex!==t)this.setState({dragTargetIndex:t});},_onTokenDrop:function(s,t){if(this.state.draggingIndex!==null&&this.state.draggingIndex!==undefined&&this.state.draggingIndex!==t)this._onReorderImagesAttempt(this.state.draggingIndex,t);this.setState(this._getDefaultState());},_onReorderImagesAttempt:function(s,t){if(t<this.props.selectedImages.length&&t>=0)this.props.onImageReorder(s,t);},_onImageRemove:function(s){this.props.onImageRemove(s);},_renderTextAboveLine:function(s,t){var u=this.props,v=u.durationWithTransitionInMS,w=u.maxSelectedImages,x=v/k;if(t===w-1){return (c('React').createElement('span',null,this._formatTime(t*x),c('React').createElement('span',{className:"_73-"},this._formatTime(w*x))));}else if(t===w){return (c('React').createElement(c('AdsHelpLink.react'),{position:'left',width:290},i._("You can only show {maximum number of images} images in your slideshow. All other images won't get displayed.",[i.param('maximum number of images',w)])));}else if(t<w){return c('React').createElement('span',null,this._formatTime(t*x));}else return c('React').createElement('span',null,' ');},_formatTime:function(s){var t=Math.floor(s/l),u=s-t*l;return t+m+c('padNumber')(u,2);},_getTimeline:function(){var s=this.props,t=s.maxSelectedImages,u=s.selectedImages,v=Math.max(u.length,t),w=Array.from(Array(v),function(x,y){if(y<u.length&&y<t){return n;}else if(y<u.length&&y>=t){return p;}else return o;});return (c('React').createElement('div',{className:"_73_"},w.map(function(x,y){return (c('React').createElement('span',{className:"_2j_u"+(x===n&&y!==0&&y<t?' '+"_741":'')+(x===p&&y>=t?' '+"_4lrv":'')+(x===p&&y===t?' '+"_4lrw":'')+(x===o&&y===0?' '+"_742":'')+(x===o&&y===u.length&&y!==0?' '+"_743":'')+(x===o&&y!==u.length&&y!==0?' '+"_749":''),key:y},this._renderTextAboveLine(x,y)));}.bind(this))));},_getAddMoreImagesButton:function(){if(this.props.selectedImages.length>=this.props.maxSelectedImages)return null;!(this.props.children!=null&&!Array.isArray(this.props.children))?j(0):void 0;return this.props.children;},_getPlaceholderBoxes:function(){var s=this.props.maxSelectedImages-1-this.props.selectedImages.length;if(s<=0)return null;var t=[];for(var u=0;u<s;u++)t.push(c('React').createElement('span',{className:"_74a",key:u}));return t;},render:function(){var s="_38i3"+(this.props.selectedImages.length>=this.props.maxSelectedImages?' '+"_1ca2":'');return (c('React').createElement('div',{className:"_832"},c('React').createElement('div',{className:"_1ca3"},this._getTimeline(),c('React').createElement('div',{className:s},this.props.selectedImages.map(function(t,u){return (c('React').createElement(c('SlideshowDraggableImage.react'),{dragTargetIndex:this.state.dragTargetIndex,entry:{},image:t,index:u,isDragDropEnabled:true,key:t.key,overflow:u>=this.props.maxSelectedImages,onImageRemove:this._onImageRemove,onTokenDragEnd:this._onTokenDragEnd,onTokenDragOver:this._onTokenDragOver,onTokenDragStart:this._onTokenDragStart,onTokenDrop:this._onTokenDrop}));}.bind(this))),this._getAddMoreImagesButton(),this._getPlaceholderBoxes())));}});f.exports=r;},null);
__d('SlideshowPlayer.react',['cx','fbt','ix','Animation','Event','FBOverlayBase.react','FBOverlayContainer.react','FBOverlayElement.react','Image.react','Link.react','React','ReactDOM','Style','SlideshowConstants','ge'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes,l=1000,m=100,n=c('React').createClass({displayName:'SlideshowPlayer',_animation:null,_timeout:0,_audioEndedEvent:c('Event'),_audioref:'slideshow_audio_player',_fadeTimeOut:0,_fadeInterval:0,propTypes:{durationInMS:k.number.isRequired,imagesAllLoaded:k.bool.isRequired,transitionInMS:k.number.isRequired,audioFileSource:k.string.isRequired},getInitialState:function(){return {currIndex:0,nextIndex:1,playing:false};},componentDidMount:function(){this._timeout=0;this._audioEndedEvent=null;},componentWillUnmount:function(){this._clearTimeout();},componentWillReceiveProps:function(o){if(this.props.audioFileSource!==o.audioFileSource)this._stopPlaying();},_clearTimeout:function(){if(this._timeout){clearTimeout(this._timeout);this._timeout=0;}if(this._animation){this._animation.stop();this._animation=null;}if(this._fadeTimeOut)clearTimeout(this._fadeTimeOut);if(this._fadeInterval)clearInterval(this._fadeInterval);},_getItemCount:function(){return c('React').Children.count(this.props.children);},_moveNext:function(){if(this.state.nextIndex>=this._getItemCount()){this._stopPlaying();}else this._fadeImage();},_setTimeout:function(){this._timeout=setTimeout(this._moveNext,this.props.durationInMS);},_fadeImage:function(){var o=this.state,p=o.currIndex,q=o.nextIndex,r=c('ReactDOM').findDOMNode(this.refs[p]);if(!r){this._stopPlaying();return;}this._animation=new (c('Animation'))(c('ReactDOM').findDOMNode(this.refs[p])).from('opacity',1).to('opacity',0).duration(this.props.transitionInMS).ondone(function(){this.setState({currIndex:q,nextIndex:q+1},this._setTimeout);}.bind(this)).go();},_resetImages:function(){this.setState({currIndex:0,nextIndex:1});for(var o=0;o<this._getItemCount();o++)c('Style').set(c('ReactDOM').findDOMNode(this.refs[o]),'opacity',1);},_fadeAudio:function(){var o=c('ge')(this._audioref),p=c('SlideshowConstants').audio_fadeout*(l/m),q=1/p;this._fadeInterval=setInterval(function(){var r=o.volume;if(r-q>=0){r-=q;o.volume=r;}else clearInterval(this._fadeInterval);},m);},_startPlaying:function(){if(this._timeout)return;this.setState({playing:true},this._setTimeout);this._audioEndedEvent=null;var o=c('ge')(this._audioref);if(this.props.audioFileSource!=='none'){o.src=this.props.audioFileSource;o.currentTime=0;o.volume=1;o.play();this._audioEndedEvent=c('Event').listen(o,'ended',function(){o.play();});var p=this._getItemCount()*(this.props.durationInMS+this.props.transitionInMS);this._fadeTimeOut=setTimeout(this._fadeAudio,p-l*c('SlideshowConstants').audio_fadeout);}},_stopPlaying:function(){if(this._timeout){this.setState({playing:false});var o=c('ge')(this._audioref);o.pause();if(this._audioEndedEvent!==null)this._audioEndedEvent.remove();this._clearTimeout();this._resetImages();}},_getCurrentImages:function(){return this.props.children.map(function(o,p){return (c('React').createElement('div',{ref:p,key:p,style:{position:'absolute'}},o));}).reverse();},render:function(){var o=this._getItemCount();if(o===0)return (c('React').createElement('div',{className:"_2w6"},c('React').createElement(c('Image.react'),{className:"_3egj",src:j('/images/ads/video/play-na.png')}),i._("Add images to see a preview of your slideshow")));return (c('React').createElement(c('FBOverlayContainer.react'),null,c('React').createElement(c('FBOverlayBase.react'),null,c('React').createElement('div',{className:"_116i"},o===1?c('React').createElement('div',{ref:0,style:{position:'absolute'}},this.props.children):this._getCurrentImages(),c('React').createElement('audio',{id:this._audioref,className:'hidden_elem'},c('React').createElement('source',{type:'audio/mpeg'})))),c('React').createElement(c('FBOverlayElement.react'),null,c('React').createElement('div',{className:"_116j"+(this.state.playing||!this.props.imagesAllLoaded?' '+"_116m":'')},c('React').createElement(c('Link.react'),{onClick:this._startPlaying},c('React').createElement(c('Image.react'),{src:j('/images/calltoaction/videoendscreen/play_64dp.png')}))))));}});f.exports=n;},null);
__d('SlideshowPreview.react',['cx','invariant','LoadingImageBox.react','React','ReactComponentWithPureRenderMixin','SlideshowFrameImage.react','SlideshowImageUtil','SlideshowPlayer.react','SlideshowConstants'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('SlideshowConstants').formats,k=c('React').PropTypes,l=350,m=197,n='x',o=350,p=c('React').createClass({displayName:'SlideshowPreview',mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{audioFileSource:k.string.isRequired,durationWithTransitionInMS:k.number.isRequired,imagesAllLoaded:k.bool.isRequired,imagesCrops:k.arrayOf(k.object.isRequired).isRequired,maxSelectedImages:k.number.isRequired,selectedImages:k.arrayOf(k.shape({height:k.number,isLoading:k.bool.isRequired,key:k.string.isRequired,url:k.string,width:k.number})).isRequired,transitionInMS:k.number.isRequired},_renderImageBoxes:function(){var q=o,r=l,s=null;if(this.props.imagesCrops.length>0){var t=this.props.imagesCrops[0],u=Object.keys(t)[0];switch(u){case j.Wide:q=m;break;case j.Square:break;default:var v=u.split(n),w=Number(v[0]),x=Number(v[1]);if(w>x){q=Math.floor(r*x/w);}else r=Math.floor(q*w/x);break;}s={marginLeft:(l-r)/2,marginTop:(o-q)/2};}return (this.props.selectedImages.map(function(y,z){!(y.width!=null&&y.height!=null)?i(0):void 0;return (c('React').createElement('div',{style:s,key:y.key},c('React').createElement(c('SlideshowFrameImage.react'),{className:"_590x",croppingSpec:c('SlideshowImageUtil').getFullSizeImageBoxCroppingSpec({width:y.width?y.width:0,height:y.height?y.height:0},{width:r,height:q}),imageSrc:y.url,imageWidth:y.width,imageHeight:y.height,maxWidth:r,maxHeight:q,positionStyle:'relative'})));}).slice(0,this.props.maxSelectedImages));},render:function(){return (c('React').createElement('div',this.props,c('React').createElement(c('SlideshowPlayer.react'),{durationInMS:this.props.durationWithTransitionInMS-this.props.transitionInMS,audioFileSource:this.props.audioFileSource,imagesAllLoaded:this.props.imagesAllLoaded,transitionInMS:this.props.transitionInMS},this.props.imagesAllLoaded?this._renderImageBoxes():c('React').createElement(c('LoadingImageBox.react'),{className:"_590x",height:o,width:l}))));}});f.exports=p;},null);
__d('SlideshowDialog.react',['cx','fbt','ix','AdsHelpLink.react','Image.react','LayerFadeOnHide','Layout.react','LeftRight.react','Link.react','React','ReactComponentWithPureRenderMixin','SlideshowConstants','SlideshowFbtUtils','SlideshowImageUploadsContainer.react','SlideshowPreview.react','XUIButton.react','XUIDialog.react','XUIDialogButton.react','XUIDialogBody.react','XUIGrayText.react','XUIRadioButtonGroup.react','XUISelector.react'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes,l=c('Layout.react').Column,m=c('Layout.react').FillColumn,n=c('XUISelector.react').Option,o=900,p=[1,2,3,4,5],q=1000,r=c('React').createClass({displayName:'SlideshowDialog',mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{audioFile:k.string.isRequired,audioFileSource:k.string.isRequired,dialogShown:k.bool.isRequired,durationWithTransitionInMS:k.number.isRequired,format:k.string.isRequired,imagesAllLoaded:k.bool.isRequired,imagesCrops:k.arrayOf(k.object.isRequired).isRequired,maxSelectedImages:k.number.isRequired,onChangeAudio:k.func.isRequired,onChangeDuration:k.func.isRequired,onChangeTransition:k.func.isRequired,onChangeFormat:k.func.isRequired,onCloseDialog:k.func.isRequired,onCreateSlideshow:k.func.isRequired,onImageRemove:k.func.isRequired,onImageReorder:k.func.isRequired,selectedImages:k.arrayOf(k.shape({height:k.number,isLoading:k.bool.isRequired,key:k.string.isRequired,url:k.string,width:k.number})).isRequired,showAudioSelector:k.bool.isRequired,showPreview:k.bool.isRequired,transitionInMS:k.number.isRequired},getDefaultProps:function(){return {adgroupIDs:[]};},_renderFormatRadioButtons:function(){var s=c('SlideshowConstants').formats;return (c('React').createElement('div',{className:"_315i"},c('React').createElement('span',{className:"_315k"},i._("ASPECT RATIO")),c('React').createElement(c('AdsHelpLink.react'),{width:360},i._("Choose the aspect ratio for your video. Let the first image of your slideshow determine the ratio, or set it to square (1:1) or rectangle (16:9)")),c('React').createElement('div',{className:"_2i2r"},c('React').createElement(c('XUIRadioButtonGroup.react'),{selectedDepressed:true,selectedValue:this.props.format,onValueChange:this.props.onChangeFormat},Object.keys(s).map(function(t){return (c('React').createElement(c('XUIButton.react'),{'data-hover':'tooltip','data-tooltip-content':c('SlideshowFbtUtils').getFormatTooltipFbtString(t),'data-tooltip-position':'below',key:t,label:c('SlideshowFbtUtils').getFormatFbtString(t),size:'xlarge',value:s[t]}));})))));},_renderDurationSelector:function(){return (c('React').createElement('div',{className:"_315i"},c('React').createElement('span',{className:"_315k"},i._("IMAGE DURATION")),c('React').createElement(c('AdsHelpLink.react'),null,i._("Set the total number of seconds you show each image in your slideshow.")),c('React').createElement('div',{className:"_2i2r"},c('React').createElement(c('XUISelector.react'),{defaultValue:this.props.durationWithTransitionInMS,name:'duration',size:'xlarge',onChange:this.props.onChangeDuration},this._renderDurationSelectorOptions()))));},_renderDurationSelectorOptions:function(){return p.map(function(s){return (c('React').createElement(n,{key:s,value:s*q},c('SlideshowFbtUtils').getDurationFbtString(s)));});},_renderTransitionSelector:function(){return (c('React').createElement('div',{className:"_315i"},c('React').createElement('span',{className:"_315k"},i._("TRANSITION")),c('React').createElement(c('AdsHelpLink.react'),null,i._("Choose how your slideshow switches from one image to the next.")),c('React').createElement('div',{className:"_2i2r"},c('React').createElement(c('XUISelector.react'),{defaultValue:this.props.transitionInMS,name:'transition',size:'xlarge',onChange:this.props.onChangeTransition},this._renderTransitionSelectorOptions()))));},_renderTransitionSelectorOptions:function(){var s=c('SlideshowConstants').transitions;return Object.keys(s).map(function(t){return (c('React').createElement(n,{key:s[t],value:s[t]},c('SlideshowFbtUtils').getTransitionFbtString(t)));});},_renderAudioSelector:function(){if(!this.props.showAudioSelector)return null;return (c('React').createElement('div',{className:"_315i"},c('React').createElement('span',{className:"_315k"},i._("MUSIC")),c('React').createElement(c('AdsHelpLink.react'),null,i._("Add sound, such as narration or music, to your slideshow.")),c('React').createElement('div',{className:"_2i2r"},c('React').createElement(c('XUISelector.react'),{defaultValue:this.props.audioFile,name:'audio_file',size:'xlarge',onChange:this.props.onChangeAudio},this._renderAudioSelectorOptions()))));},_renderAudioSelectorOptions:function(){var s=c('SlideshowConstants').audio_files;return Object.keys(s).map(function(t){return (c('React').createElement(n,{key:s[t],value:s[t]},c('SlideshowFbtUtils').getAudioFbtString(t)));});},_getButtonTooltip:function(){if(this.props.selectedImages.length>=c('SlideshowConstants').min_photo_num)return null;return i._({"*":"You'll need to add at least {Minimum number of images} images to create a slideshow"},[i.param('Minimum number of images',c('SlideshowConstants').min_photo_num,[0])]);},render:function(){return (c('React').createElement(c('XUIDialog.react'),{behaviors:{LayerFadeOnHide:c('LayerFadeOnHide')},layerHideOnBlur:false,shown:this.props.dialogShown,width:o},c('React').createElement(c('XUIDialogBody.react'),{className:"_5z0a",useCustomPadding:true},c('React').createElement('div',{className:"_315q"},c('React').createElement(c('Layout.react'),{className:"_315r"},c('React').createElement(l,{className:"_3-91 _3-8w"},c('React').createElement(c('Image.react'),{src:j('/images/ads/createflow/mediaselect/video_small.png'),width:'48'})),c('React').createElement(m,{className:"_315s"},c('React').createElement(c('XUIGrayText.react'),{size:'medium'},i._("Add and edit images, set their duration and add transitions to your slideshow")))),this._renderFormatRadioButtons(),this._renderDurationSelector(),this._renderTransitionSelector(),this._renderAudioSelector()),c('React').createElement('div',{className:"_2ldm"},c('React').createElement(c('SlideshowPreview.react'),{audioFileSource:this.props.audioFileSource,durationWithTransitionInMS:this.props.durationWithTransitionInMS,hidden:!this.props.showPreview,imagesAllLoaded:this.props.imagesAllLoaded,imagesCrops:this.props.imagesCrops,maxSelectedImages:this.props.maxSelectedImages,selectedImages:this.props.selectedImages,transitionInMS:this.props.transitionInMS}),this.props.children[2],this.props.children[1]),c('React').createElement(c('SlideshowImageUploadsContainer.react'),{durationWithTransitionInMS:this.props.durationWithTransitionInMS,maxSelectedImages:this.props.maxSelectedImages,selectedImages:this.props.selectedImages,onImageRemove:this.props.onImageRemove,onImageReorder:this.props.onImageReorder},this.props.children[0])),c('React').createElement(c('LeftRight.react'),{className:"_5z0b"},c('React').createElement('div',null,c('React').createElement(c('Link.react'),{href:'/business/ads-guide/video-views/',target:'_blank'},i._("Guidelines")),c('React').createElement('span',{className:"_5z0c"},c('React').createElement(c('Link.react'),{href:'/help/830194837058589',target:'_blank'},i._("Help Center"))),c('React').createElement(c('Link.react'),{href:'/help/830194837058589',target:'_blank'},i._("FAQ"))),c('React').createElement('div',null,c('React').createElement(c('XUIDialogButton.react'),{label:i._("Cancel"),onClick:this.props.onCloseDialog}),c('React').createElement(c('XUIDialogButton.react'),{'data-hover':'tooltip','data-tooltip-content':this._getButtonTooltip(),'data-tooltip-position':'above',disabled:this.props.selectedImages.length<c('SlideshowConstants').min_photo_num,label:i._("Create Slideshow"),use:'confirm',onClick:this.props.onCreateSlideshow})))));}});f.exports=r;},null);
__d('ReactComposerSlideshowDialogContainer.react',['ReactComposerMediaUploadStore','ReactComposerMediaUploadActions','ReactComposerPropsAndStoreBasedStateMixin','ReactComposerSelectedImagesStore','ReactComposerSlideshowActions','ReactComposerSlideshowImageUploadsContainer.react','ReactComposerSlideshowStore','React','SlideshowDialog.react','SlideshowMediaUploadContainer.react','emptyFunction'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'ReactComposerSlideshowDialogContainer',mixins:[c('ReactComposerPropsAndStoreBasedStateMixin')(c('ReactComposerSelectedImagesStore'),c('ReactComposerSlideshowStore'))],propTypes:{dialogShown:h.bool,maxSelectedImages:h.number,mediaAcceptParam:h.string.isRequired,pageID:h.string,showAudioSelector:h.bool,showPagesLibrary:h.bool.isRequired,onCloseDialog:h.func,onFilesSelected:h.func.isRequired},statics:{calculateState:function(j,k){var l=!c('ReactComposerMediaUploadStore').isUploading(j);return {audioFile:c('ReactComposerSlideshowStore').getAudioFile(j),audioFileSource:c('ReactComposerSlideshowStore').getAudioFileSource(j),durationWithTransitionInMS:c('ReactComposerSlideshowStore').getDurationInMS(j),format:c('ReactComposerSelectedImagesStore').getFormat(j),imagesAllLoaded:l,imagesCrops:c('ReactComposerSelectedImagesStore').getImagesCrops(j),selectedImages:c('ReactComposerSelectedImagesStore').getSelectedImages(j),transitionInMS:c('ReactComposerSlideshowStore').getTransitionInMS(j)};}},_onChangeAudio:function(event){c('ReactComposerSlideshowActions').changeAudioFile(this.context.composerID,event.value);},_onChangeDuration:function(event){c('ReactComposerSlideshowActions').changeDuration(this.context.composerID,event.value);},_onChangeTransition:function(event){c('ReactComposerSlideshowActions').changeTransition(this.context.composerID,event.value);},_onCreateSlideshow:function(){var j=this.context.composerID;if(c('ReactComposerSlideshowStore').isEditing(j)){var k=c('ReactComposerSelectedImagesStore').getRemovedUploadIDs(j);k.forEach(function(l){if(c('ReactComposerMediaUploadStore').getMediaUploadExists(j,l)){var m=c('ReactComposerMediaUploadStore').getMediaUpload(j,l);c('ReactComposerMediaUploadActions').removePhotoAndPhotoUpload(j,m);}});}c('ReactComposerSlideshowActions').createSlideshow(this.context.composerID);},_onChangeFormat:function(j){c('ReactComposerSlideshowActions').changeFormat(this.context.composerID,j);},_onImageRemove:function(j){var k=this.context.composerID;c('ReactComposerSlideshowActions').removeImage(k,j);if(!c('ReactComposerSlideshowStore').isEditing(k)&&c('ReactComposerMediaUploadStore').getMediaUploadExists(k,j.key)){var l=c('ReactComposerMediaUploadStore').getMediaUpload(k,j.key);c('ReactComposerMediaUploadActions').removePhotoAndPhotoUpload(k,l);}},_onImageReorder:function(j,k){c('ReactComposerSlideshowActions').reorderImages(this.context.composerID,j,k);},_getImageUploadContainer:function(j){return (c('React').createElement(c('ReactComposerSlideshowImageUploadsContainer.react'),{composerID:this.context.composerID,imageUploadButtonType:j,mediaAcceptParam:this.props.mediaAcceptParam,pageID:this.props.pageID,pageImages:this.state.pageImages,showPagesLibrary:this.props.showPagesLibrary,onFilesSelected:this.props.onFilesSelected}));},render:function(){return (c('React').createElement(c('SlideshowDialog.react'),{audioFile:this.state.audioFile,audioFileSource:this.state.audioFileSource,dialogShown:this.props.dialogShown,durationWithTransitionInMS:this.state.durationWithTransitionInMS,format:this.state.format,imagesAllLoaded:this.state.imagesAllLoaded,imagesCrops:this.state.imagesCrops,maxSelectedImages:this.props.maxSelectedImages,selectedImages:this.state.selectedImages,showAudioSelector:this.props.showAudioSelector,showPreview:true,transitionInMS:this.state.transitionInMS,onChangeAudio:this._onChangeAudio,onChangeDuration:this._onChangeDuration,onChangeFormat:this._onChangeFormat,onChangeTransition:this._onChangeTransition,onCloseDialog:this.props.onCloseDialog,onCreateSlideshow:this._onCreateSlideshow,onImageRemove:this._onImageRemove,onImageReorder:this._onImageReorder},this._getImageUploadContainer('more_link'),c('React').createElement(c('SlideshowMediaUploadContainer.react'),{hidden:true,onVideoFileSelect:c('emptyFunction')},this._getImageUploadContainer('add_button'))));}});f.exports=i;},null);
__d('ReactComposerSlideshowPostButton.react',['ReactComposerSlideshowDialogContainer.react','React','ReactComponentWithPureRenderMixin','ReactLayeredComponentMixin'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'ReactComposerSlideshowPostButton',mixins:[c('ReactComponentWithPureRenderMixin'),c('ReactLayeredComponentMixin')],propTypes:{className:h.string,dialogShown:h.bool.isRequired,maxSelectedImages:h.number.isRequired,mediaAcceptParam:h.string.isRequired,pageID:h.string.isRequired,showAudioSelector:h.bool.isRequired,showPagesLibrary:h.bool.isRequired,onCancel:h.func.isRequired,onShowDialog:h.func.isRequired,onFilesSelected:h.func.isRequired},render:function(){return (c('React').createElement('div',{className:this.props.className,onClick:this.props.onShowDialog},this.props.children));},renderLayers:function(){var j=null;if(this.props.dialogShown)j=c('React').createElement(c('ReactComposerSlideshowDialogContainer.react'),babelHelpers['extends']({},this.props,{onCloseDialog:this.props.onCancel}));return {dialog:j};}});f.exports=i;},null);
__d('ReactComposerSlideshowPostButtonContainer.react',['ReactComposerMediaUploadActions','ReactComposerPropsAndStoreBasedStateMixin','ReactComposerSelectedImagesStore','ReactComposerSlideshowPlacement','React','ReactComposerSlideshowActions','ReactComposerSlideshowPostButton.react','ReactComposerSlideshowStore'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'ReactComposerSlideshowPostButtonContainer',mixins:[c('ReactComposerPropsAndStoreBasedStateMixin')(c('ReactComposerSlideshowStore'))],propTypes:{className:h.string,maxSelectedImages:h.number.isRequired,mediaAcceptParam:h.string.isRequired,pageID:h.string.isRequired,showAudioSelector:h.bool.isRequired,showPagesLibrary:h.bool.isRequired,onFilesSelected:h.func.isRequired},statics:{calculateState:function(j,k){var l=c('ReactComposerSlideshowStore').shouldShowSlideshowDialog(j);return {dialogShown:l};}},render:function(){return (c('React').createElement(c('ReactComposerSlideshowPostButton.react'),{className:this.props.className,dialogShown:this.state.dialogShown,maxSelectedImages:this.props.maxSelectedImages,mediaAcceptParam:this.props.mediaAcceptParam,pageID:this.props.pageID,showAudioSelector:this.props.showAudioSelector,showPagesLibrary:this.props.showPagesLibrary,onCancel:this._onCancel,onFilesSelected:this.props.onFilesSelected,onShowDialog:this._onShowDialog},this.props.children));},_onShowDialog:function(){var j=c('ReactComposerSelectedImagesStore').getNumberOfImages(this.context.composerID);c('ReactComposerSlideshowActions').showSlideshowDialog(this.context.composerID,j,c('ReactComposerSlideshowPlacement').PHOTO_VIDEO_TAB);c('ReactComposerSlideshowActions').logExposure(this.context.composerID);},_onCancel:function(){var j=c('ReactComposerSelectedImagesStore').getNumberOfImages(this.context.composerID);c('ReactComposerMediaUploadActions').removeAllPhotoUploads(this.context.composerID);c('ReactComposerSlideshowActions').closeSlideshowDialog(this.context.composerID,j,c('ReactComposerSlideshowStore').getPlacement(this.context.composerID));}});f.exports=i;},null);
__d("XCarouselPageComposerPhotoUploadFirstController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/composer\/photouploadfirst\/",{composer_id:{type:"String"},target_id:{type:"Int"}});},null);
__d('ReactComposerMediaAttachmentButtonsWithOptions.react',['cx','fbt','ix','ActorURI','ReactComposerAttachmentStore','ReactComposerCanvasActions','ReactComposerContextMixin','ReactComposerMediaUtils','ReactComposerMediaUploadActions','ReactComposerPhotoCarouselActions','ReactComposerSlideshowActions','ComposerTargetData','PagesComposerPostActionsLoggerEvent','PagesComposerActionsLogger','ReactComposerSlideshowPostButtonContainer.react','XCarouselPageComposerPhotoUploadFirstController','AsyncRequest','DOMContainer.react','FileInput.react','Grid.react','Image.react','Link.react','ReactComponentWithPureRenderMixin','React'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=c('Grid.react').GridItem,l=c('React').PropTypes,m=c('React').createClass({displayName:'ReactComposerMediaAttachmentButtonsWithOptions',mixins:[c('ReactComponentWithPureRenderMixin'),c('ReactComposerContextMixin')],propTypes:{carouselConfig:l.object,createAlbumLink:l.any,mediaAcceptParam:l.shape({photos:l.string,both:l.string}).isRequired,onFilesSelected:l.func.isRequired,showCanvasEntryPoint:l.bool,showCarouselEntryPoint:l.bool,showPhotoAlbumEntryPoint:l.bool,showSlideshowEntryPoint:l.bool,showUploadPhotosButton:l.bool,slideshowConfig:l.object,targetData:l.instanceOf(c('ComposerTargetData')).isRequired},getDefaultProps:function(){return {mediaAcceptParam:{}};},componentDidMount:function(){if(c('ReactComposerAttachmentStore').getSelectedAttachmentID(this.context.composerID))c('PagesComposerActionsLogger').log({event:c('PagesComposerPostActionsLoggerEvent').SHOW_PHOTO_CAROUSEL_CREATE_TAB,target_id:parseInt(this.context.targetID,10)});},render:function(){var o=[];o.push(this._getUploadPhotosButton());var p=null,q=null;if(this.props.showPhotoAlbumEntryPoint&&this.props.createAlbumLink){var r=c('React').createElement(c('DOMContainer.react'),{className:"_3m1x",display:'block'},this.props.createAlbumLink);p=c('React').createElement(k,{className:"_3m1y",key:'createAlbum'},c('React').createElement(c('Link.react'),{className:"_3m1z _5xvh",onClick:this._onClickPhotoAlbumOption},r));}if(this.props.showCarouselEntryPoint)q=this._getCarouselPostButton();o.push(p);o.push(q);if(this.props.showSlideshowEntryPoint)o.push(this._getSlideshowPostButton());if(this.props.showCanvasEntryPoint)o.push(this._getCanvasPostButton());return (c('React').createElement('div',{className:"_3m1_"},c('React').createElement(c('Grid.react'),{className:"_3m20",cols:1},o.filter(function(s){return s!=null;}))));},_getUploadPhotosButton:function(){if(!this.props.showUploadPhotosButton)return null;var o=this.props.targetData.targetSupportsMultiplePhotos,p=this.props.mediaAcceptParam.both,q=o?i._("Upload Photos\/Video"):i._("Upload Photo\/Video"),r=i._("Add photos or video to your status.");return (c('React').createElement(k,{className:"_3m1y",key:'uploadPhoto'},c('React').createElement(c('FileInput.react'),{accept:p,multiple:o,name:'composer_photo',onChange:this._onFilesSelected,onClick:this._onUploadPhotosClick,ref:'fileInput','data-testid':'media-attachment-add-photo'},c('React').createElement(c('Link.react'),{className:"_3m1z"},this._renderPhotoPostOption(n.PHOTOVIDEO,q,r)))));},_onUploadPhotosClick:function(){c('ReactComposerMediaUploadActions').inputClicked(this.context.composerID);c('PagesComposerActionsLogger').log({event:c('PagesComposerPostActionsLoggerEvent').CLICK_UPLOAD_PHOTO_OPTION,target_id:parseInt(this.context.targetID,10)});},_onClickPhotoAlbumOption:function(){c('PagesComposerActionsLogger').log({event:c('PagesComposerPostActionsLoggerEvent').CLICK_PHOTO_ALBUM_OPTION,target_id:parseInt(this.context.targetID,10)});},_onFilesSelected:function(event){this.props.onFilesSelected(event,this.refs.fileInput.getFileInput());c('ReactComposerMediaUtils').clearInput(this.refs.fileInput.getFileInput());},_getCarouselPostButton:function(){if(!this.props.showUploadPhotosButton)return null;var o=i._("Create a Photo Carousel"),p=i._("Build a scrolling photo carousel with a link.");return (c('React').createElement(k,{className:"_3m1y",key:'carousel'},c('React').createElement(c('Link.react'),{onClick:this._onCarouselClick,className:"_3m1z _5xvh"},this._renderPhotoPostOption(n.CAROUSEL,o,p))));},_onCarouselClick:function(){c('ReactComposerPhotoCarouselActions').selectPhotoCarouselEntryPoint(this.context.composerID);if(!this.props.carouselConfig||!this.props.carouselConfig.ComposerPhotoCarouselUploadFirst){c('ReactComposerPhotoCarouselActions').showPhotoCarouselUrlEditArea(this.context.composerID);}else{var o=c('XCarouselPageComposerPhotoUploadFirstController').getURIBuilder().setString('composer_id',this.context.composerID).setInt('target_id',parseInt(this.context.targetID,10)).getURI();o=c('ActorURI').create(o,this.context.targetID);var p=new (c('AsyncRequest'))().setURI(o);p.send();c('ReactComposerPhotoCarouselActions').setPreviewIncompleted(this.context.composerID);}var q={event:c('PagesComposerPostActionsLoggerEvent').CLICK_PHOTO_CAROUSEL_CREATE_TAB,target_id:parseInt(this.context.targetID,10)};c('PagesComposerActionsLogger').log(q);},_getSlideshowPostButton:function(){var o=this.props.slideshowConfig;if(!o)return null;var p=i._("Create Slideshow"),q=i._({"*":{"*":"Add {Minimum number of images} to {Maximum number of images} photos to create a video."}},[i.param('Minimum number of images',o?o.minPhotoNum:3,[0]),i.param('Maximum number of images',o?o.maxPhotoNum:7,[0])]),r=c('React').createElement(c('Link.react'),{className:"_3m1z _5xvh"},this._renderPhotoPostOption(n.SLIDESHOW,p,q));if(o.showPagesComposerV2)return (c('React').createElement(k,{className:"_3m1y",key:'slideshow'},c('React').createElement(c('ReactComposerSlideshowPostButtonContainer.react'),{className:"_3-8-",maxSelectedImages:o.maxPhotoNum,mediaAcceptParam:this.props.mediaAcceptParam.photos,pageID:o.pageID,showAudioSelector:o.showAudioSelector,showPagesLibrary:o.showPagesLibrary,onFilesSelected:this._onSlideshowFilesUpload},r)));return (c('React').createElement(k,{className:"_3m1y",key:'slideshow'},c('React').createElement(c('FileInput.react'),{accept:this.props.mediaAcceptParam.photos,multiple:true,name:'composer_slideshow',onClick:function(){c('ReactComposerSlideshowActions').logExposure(this.context.composerID);}.bind(this),onChange:this._onSlideshowSelected,ref:'imageFileInput','data-testid':'media-attachment-add-slideshow-photo'},r)));},_onSlideshowFilesUpload:function(event,o){this.props.onFilesSelected(event,o);c('ReactComposerMediaUtils').clearInput(o);},_onSlideshowSelected:function(event){this.props.onFilesSelected(event,this.refs.imageFileInput.getFileInput());c('ReactComposerMediaUtils').clearInput(this.refs.imageFileInput.getFileInput());c('ReactComposerSlideshowActions').showSlideshowEditField(this.context.composerID);c('PagesComposerActionsLogger').log({event:c('PagesComposerPostActionsLoggerEvent').CLICK_SLIDESHOW_CREATE_TAB,target_id:parseInt(this.context.targetID,10)});},_getCanvasPostButton:function(){var o=i._("Create a Canvas"),p=i._("Now you can tell a more immersive story by combining images and videos.");return (c('React').createElement(k,{className:"_3m1y",key:'canvas'},c('React').createElement(c('Link.react'),{onClick:this._onCanvasClick,className:"_3m1z _5xvh"},this._renderPhotoPostOption(n.CANVAS,o,p))));},_onCanvasClick:function(){c('ReactComposerCanvasActions').showCanvasSelector(this.context.composerID);var o={event:c('PagesComposerPostActionsLoggerEvent').CLICK_CANVAS_CREATE_TAB,target_id:parseInt(this.context.targetID,10)};c('PagesComposerActionsLogger').log(o);},_renderPhotoPostOption:function(o,p,q){var r=null;if(o===n.CAROUSEL&&this.props.carouselConfig&&this.props.carouselConfig.showCarouselOptionSuperscript){var s=i._("NEW");r=c('React').createElement('sup',{className:"_9td"},s);}return (c('React').createElement(c('Grid.react'),{className:"_3m1-",cols:2},c('React').createElement(k,{className:"_5xvi"},c('React').createElement(c('Image.react'),{className:"_5xvj",src:this._getIconSource(o)})),c('React').createElement(k,{className:"_5xvk"},c('React').createElement('div',{className:"_5xvl"},p,r),c('React').createElement('div',{className:"_5xvm"},q))));},_getIconSource:function(o){switch(o){case n.PHOTOVIDEO:return j('/images/composer/carousel/photo_video_upload.png');case n.PHOTOALBUM:return j('/images/composer/carousel/photo_album_icon.png');case n.CAROUSEL:return j('/images/composer/carousel/carousel_photo_tab_icon.png');case n.SLIDESHOW:return j('/images/composer/carousel/slideshow_video_icon.png');case n.CANVAS:return j('/images/composer/carousel/pages_canvas_icon.png');default:return null;}}}),n={PHOTOVIDEO:'photo_video',PHOTOALBUM:'photo_album',CAROUSEL:'carousel',SLIDESHOW:'slideshow',CANVAS:'canvas'};f.exports=m;},null);
__d('ReactComposerMediaAttachmentStore',['ReactComposerMediaAttachmentActionType','ReactComposerStoreBase'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('ReactComposerStoreBase'));i=h&&h.prototype;function j(){'use strict';var k;i.constructor.call(this,function(){return {createAlbumLink:null,taggingDataSource:null,videoUploader:null,videoProgressBar:null,videoProgressBarInstance:null};},function(l){switch(l.type){case c('ReactComposerMediaAttachmentActionType').SET_MEDIA_CONFIG:k&&k.$ReactComposerMediaAttachmentStore1(l);break;}});k=this;}j.prototype.getCreateAlbumLink=function(k){'use strict';return this.getComposerData(k).createAlbumLink;};j.prototype.getTaggingDataSource=function(k){'use strict';return this.getComposerData(k).taggingDataSource;};j.prototype.getVideoUploader=function(k){'use strict';return this.getComposerData(k).videoUploader;};j.prototype.getVideoProgressBarInstance=function(k){'use strict';return this.getComposerData(k).videoProgressBarInstance;};j.prototype.getVideoProgressBar=function(k){'use strict';return this.getComposerData(k).videoProgressBar;};j.prototype.$ReactComposerMediaAttachmentStore1=function(k){'use strict';var l=this.getComposerData(k.composerID);l.createAlbumLink=k.config.createAlbumLink;l.taggingDataSource=k.config.taggingDataSource;l.videoUploader=k.config.videoUploader;l.videoProgressBar=k.config.videoProgressBar;l.videoProgressBarInstance=k.config.videoProgressBarInstance;this.emitChange(k.composerID);};f.exports=new j();},null);
__d('ReactComposerPhotoCarouselStore',['CarouselPagesComposerSource','ReactComposerAttachmentActionType','ReactComposerAttachmentStore','ReactComposerAttachmentType','ReactComposerPhotoCarouselActionType','ReactComposerScrapedAttachmentActionType','ReactComposerStoreBase','PagesComposerPostActionsLoggerEvent','PagesComposerActionsLogger'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('ReactComposerStoreBase'));i=h&&h.prototype;function j(){'use strict';var k;i.constructor.call(this,function(){return {isPhotoCarouselSelected:false,isCarouselPreviewCompleted:true,shouldShowURLEditArea:false,seenNux:false};},function(l){switch(l.type){case c('ReactComposerPhotoCarouselActionType').SELECT_PHOTO_CAROUSEL:k&&k.$ReactComposerPhotoCarouselStore1(l);break;case c('ReactComposerPhotoCarouselActionType').UNSELECT_PHOTO_CAROUSEL:k&&k.$ReactComposerPhotoCarouselStore2(l);break;case c('ReactComposerPhotoCarouselActionType').PREVIEW_COMPLETED:k&&k.$ReactComposerPhotoCarouselStore3(l);break;case c('ReactComposerPhotoCarouselActionType').PREVIEW_INCOMPLETED:k&&k.$ReactComposerPhotoCarouselStore4(l);break;case c('ReactComposerPhotoCarouselActionType').SHOW_CAROUSEL_URL_INPUT_AREA:k&&k.$ReactComposerPhotoCarouselStore5(l);break;case c('ReactComposerPhotoCarouselActionType').HIDE_CAROUSEL_URL_INPUT_AREA:k&&k.$ReactComposerPhotoCarouselStore6(l);break;case c('ReactComposerAttachmentActionType').SELECT_ATTACHMENT:k&&k.$ReactComposerPhotoCarouselStore7(l);break;case c('ReactComposerScrapedAttachmentActionType').ATTACHMENT_SCRAPED:k&&k.$ReactComposerPhotoCarouselStore6(l);break;case c('ReactComposerPhotoCarouselActionType').SEEN_NUX:k&&k.$ReactComposerPhotoCarouselStore8(l);break;default:}});k=this;}j.prototype.$ReactComposerPhotoCarouselStore1=function(k){'use strict';var l=k.composerID,m=this.getComposerData(l);m.isPhotoCarouselSelected=true;this.emitChange(l);};j.prototype.$ReactComposerPhotoCarouselStore2=function(k){'use strict';var l=k.composerID,m=this.getComposerData(l);m.isPhotoCarouselSelected=false;this.emitChange(l);};j.prototype.$ReactComposerPhotoCarouselStore3=function(k){'use strict';var l=k.composerID,m=this.getComposerData(l);m.isCarouselPreviewCompleted=true;this.emitChange(l);};j.prototype.$ReactComposerPhotoCarouselStore4=function(k){'use strict';var l=k.composerID,m=this.getComposerData(l);m.isCarouselPreviewCompleted=false;this.emitChange(l);};j.prototype.$ReactComposerPhotoCarouselStore5=function(k){'use strict';var l=k.composerID,m=this.getComposerData(l);m.shouldShowURLEditArea=true;var n=k.source;if(n===c('CarouselPagesComposerSource').CAROUSEL_CAMERA_ICON)c('PagesComposerActionsLogger').log({event:c('PagesComposerPostActionsLoggerEvent').CLICK_CAROUSEL_CAMERA_ICON,target_id:k.targetID});this.emitChange(l);};j.prototype.$ReactComposerPhotoCarouselStore6=function(k){'use strict';var l=k.composerID,m=this.getComposerData(l);m.shouldShowURLEditArea=false;this.emitChange(l);};j.prototype.$ReactComposerPhotoCarouselStore7=function(k){'use strict';var l=k.composerID,m=this.getComposerData(l),n=c('ReactComposerAttachmentStore').getSelectedAttachmentID(l);if(m.shouldShowURLEditArea&&n!==c('ReactComposerAttachmentType').MEDIA)m.shouldShowURLEditArea=false;if(m.isPhotoCarouselSelected&&n!==c('ReactComposerAttachmentType').MEDIA){m.isPhotoCarouselSelected=false;m.isCarouselPreviewCompleted=false;}this.emitChange(l);};j.prototype.$ReactComposerPhotoCarouselStore8=function(k){'use strict';var l=k.composerID,m=this.getComposerData(l);m.seenNux=true;this.emitChange(l);};j.prototype.shouldShowURLEditArea=function(k){'use strict';return this.getComposerData(k).shouldShowURLEditArea;};j.prototype.seenNux=function(k){'use strict';return this.getComposerData(k).seenNux;};j.prototype.isPhotoCarouselSelected=function(k){'use strict';return this.getComposerData(k).isPhotoCarouselSelected;};j.prototype.isCarouselPreviewCompleted=function(k){'use strict';return this.getComposerData(k).isCarouselPreviewCompleted;};f.exports=new j();},null);
__d("XCarouselPageComposerSeenNuxController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/composer\/carouselseennux\/",{type:{type:"String"}});},null);
__d('ReactComposerPhotoCarouselUrlInput.react',['cx','fbt','ix','AsyncRequest','ReactComposerContextMixin','ReactComposerPhotoCarouselActions','ReactComposerPhotoCarouselStore','CSS','Keys','Locale','PagesComposerPostActionsLoggerEvent','PagesComposerActionsLogger','PagesComposerCarouselPostNuxType','ReactComponentWithPureRenderMixin','React','Image.react','ReactLayeredComponentMixin','ReactDOM','URLMatcher','URLScraper','XCarouselPageComposerSeenNuxController','XUIAmbientNUX.react','XUICloseButton.react','XUITextInput.react','fbglyph'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes,l=c('React').createClass({displayName:'ReactComposerPhotoCarouselUrlInput',mixins:[c('ReactComponentWithPureRenderMixin'),c('ReactComposerContextMixin'),c('ReactLayeredComponentMixin')],propTypes:{onChange:k.func.isRequired,onClickRemoveButton:k.func.isRequired,prefillURL:k.string,showUrlInputAreaNux:k.bool},getInitialState:function(){return {disableArrow:true,showUrlInputAreaNux:this.props.showUrlInputAreaNux&&!c('ReactComposerPhotoCarouselStore').seenNux(this.context.composerID)};},componentDidMount:function(){var m=c('ReactDOM').findDOMNode(this.refs.inputArea);m.focus();c('CSS').addClass(m,"_47_s");var n=this.props.prefillURL?this.props.prefillURL:'',o=!this._checkValidUrl(n);this.setState({disableArrow:o});c('PagesComposerActionsLogger').log({event:c('PagesComposerPostActionsLoggerEvent').PREFILL_SCRAPE_URL,target_id:parseInt(this.context.targetID,10),prefill_scrape_url:this.props.prefillURL});},renderLayers:function(){var m=i._("Photos are taken from a website you choose. Enter a website to build your photo carousel.");return {notice:c('React').createElement(c('XUIAmbientNUX.react'),{contextRef:function(){return this.refs.inputArea;}.bind(this),shown:this.state.showUrlInputAreaNux,onCloseButtonClick:this._onCloseButtonClick,position:'below'},m)};},_onCloseButtonClick:function(){var m=c('XCarouselPageComposerSeenNuxController').getURIBuilder().setString('type',c('PagesComposerCarouselPostNuxType').MEDIA_ATTACHEMENT_URL_INPUT_AREA_NUX).getURI(),n=new (c('AsyncRequest'))().setURI(m);n.send();this.setState({showUrlInputAreaNux:false});c('ReactComposerPhotoCarouselActions').seenNux(this.context.composerID);},render:function(){var m=i._("Photo Carousel"),n=i._("Remove"),o=i._("Destination URL"),p=null,q=null,r=null,s=c('Locale').isRTL();if(s){q=j("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/arrow-left_20_bluegray-10.png");r=j('/images/composer/carousel/arrow_left_blue.png');}else{q=j("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/arrow-right_20_bluegray-10.png");r=j('/images/composer/carousel/arrow_right_blue.png');}if(this.state.disableArrow){p=c('React').createElement(c('Image.react'),{className:"_3ev6",size:'small',src:q,onClick:this._handleScrapeLink});}else p=c('React').createElement(c('Image.react'),{className:"_3ev7",size:'small',src:r,onClick:this._handleScrapeLink});var t=i._("Enter a URL");return (c('React').createElement('div',{className:"_d67"},c('React').createElement('div',{className:"_d68"},c('React').createElement('div',{className:"_d69"},m),c('React').createElement(c('XUICloseButton.react'),{className:"_d6a",label:n,onClick:this.props.onClickRemoveButton,size:'medium'})),c('React').createElement('div',{className:"_d6b"},c('React').createElement('div',{className:"_px7"},c('React').createElement('span',{className:"_2do6"},o),c('React').createElement('div',{className:"_px8"},c('React').createElement(c('XUITextInput.react'),{className:"_d6c",defaultValue:this.props.prefillURL,onBlur:this._onBlur,onChange:this._onChange,onKeyUp:this._handleKeyUp,placeholder:t,ref:'inputArea'}))),p)));},_handleScrapeLink:function(event){var m=c('ReactDOM').findDOMNode(this.refs.inputArea),n=m.childNodes[0].value+'\n';this.setState({inputValue:n});this.props.onChange&&this.props.onChange(n);},_onBlur:function(event){c('CSS').removeClass(c('ReactDOM').findDOMNode(this.refs.inputArea),"_47_s");},_onChange:function(event){this.setState({inputValue:event.target.value});this.props.onChange&&this.props.onChange(event.target.value);var m=!this._checkValidUrl(event.target.value);this.setState({disableArrow:m});c('CSS').removeClass(c('ReactDOM').findDOMNode(this.refs.inputArea),"_47_s");},_handleKeyUp:function(event){if(event.keyCode===c('Keys').RETURN){var m=event.target.value+'\n';this.setState({inputValue:m});this.props.onChange&&this.props.onChange(m);}},_checkValidUrl:function(m){return c('URLScraper').match(m)||c('URLMatcher').permissiveMatch(m);}});f.exports=l;},null);
__d('ReactComposerPhotoCarouselUrlInputContainer.react',['ReactComposerContextMixin','ReactComposerPhotoCarouselActions','ReactComposerPhotoCarouselUrlInput.react','ReactComposerStatusUtils','PagesComposerPostActionsLoggerEvent','PagesComposerActionsLogger','ReactComponentWithPureRenderMixin','React','URLScraper'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'ReactComposerPhotoCarouselUrlInputContainer',mixins:[c('ReactComponentWithPureRenderMixin'),c('ReactComposerContextMixin')],propTypes:{prefillURL:h.string,showUrlInputAreaNux:h.bool},render:function(){return (c('React').createElement(c('ReactComposerPhotoCarouselUrlInput.react'),{onChange:this._onMentionsInputChange,onClickRemoveButton:this._onClickRemoveButton,prefillURL:this.props.prefillURL,showUrlInputAreaNux:this.props.showUrlInputAreaNux}));},_onClickRemoveButton:function(){c('ReactComposerPhotoCarouselActions').hidePhotoCarouselUrlEditArea(this.context.composerID);c('PagesComposerActionsLogger').log({event:c('PagesComposerPostActionsLoggerEvent').REMOVE_PHOTO_CAROUSEL_URL_INPUT,target_id:parseInt(this.context.targetID,10)});},_onMentionsInputChange:function(j){if(!c('URLScraper').trigger(j))c('ReactComposerStatusUtils').scrapeLink(this.context.composerID,this.context.targetID,j,this.context.composerType,this.context.actorID);}});f.exports=i;},null);
__d('ReactComposerPhotoCarouselUtils',['fbt','ReactComposerPhotoCarouselStore','React'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={getPhotoCarouselMediaContent:function(j,k){var l=null;if(!j)return l;if(j.ComposerPhotoCarouselPlaceHolder){var m=j.ComposerPhotoCarouselPlaceHolder;l=c('React').createElement(m,null);}else{var n=j.ComposerPhotoCarouselUrlInputContainer;l=c('React').createElement(n,{showUrlInputAreaNux:k.showUrlInputAreaNux,prefillURL:j.preFillURL});}return l;},getInputPlaceHolder:function(j,k){var l=h._("Write something...");if(k||!j||!j.ComposerPhotoCarouselPlaceHolder)return l;return h._("Enter a URL");},isPagePostButtonDisabled:function(j){if(!c('ReactComposerPhotoCarouselStore').isPhotoCarouselSelected(j))return false;if(c('ReactComposerPhotoCarouselStore').shouldShowURLEditArea(j))return true;if(!c('ReactComposerPhotoCarouselStore').isCarouselPreviewCompleted(j))return true;return false;}};f.exports=i;},null);
__d('ReactComposerFailedMediaUpload.react',['cx','fbt','ReactComponentWithPureRenderMixin','React','Tooltip','XUIButton.react','XUICloseButton.react'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'ReactComposerFailedMediaUpload',mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{error:j.object.isRequired,filename:j.string,onDismissClick:j.func,onRemoveClick:j.func,onRetryClick:j.func,uploadID:j.string.isRequired},render:function(){var l=this.props.error.summary+': '+this.props.error.description,m=this.props.error.transient?c('React').createElement(c('XUIButton.react'),{className:"_4_e",label:i._("Retry"),onClick:this.props.onRetryClick,size:'small',use:'special'}):c('React').createElement(c('XUIButton.react'),{className:"_4_f",label:i._("Okay"),onClick:this.props.onDismissClick,size:'small'});return (c('React').createElement('div',babelHelpers['extends']({},c('Tooltip').propsFor(l),{className:"_4_g"}),c('React').createElement(c('XUICloseButton.react'),{className:"_2n25",onClick:this.props.onRemoveClick,size:'medium',shade:'light'}),c('React').createElement('p',{className:"_4_h"},i._("Error")),c('React').createElement('div',{className:"_4_i"},c('React').createElement('p',{className:"_4_j"},this.props.filename)),m));}});f.exports=k;},null);
__d('ReactComposerPhotoUploader',['ReactComposerLoggingStore','ReactComposerMediaConfig','ReactComposerMediaUploadType','ReactComposerMediaUtils','ReactComposerPhotoActions','ReactComposerMediaUploadActions','ReactComposerMediaUploadStore','ReactComposerMediaUploadActionType','ActorURI','AsyncUploadRequest','FaceRecognitionController','JpegResizer','Map','SphericalPhotoConfig','XComposerPhotoUploader','performanceNow'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i,j,k){this.$ReactComposerPhotoUploader1=i.composerID;this.$ReactComposerPhotoUploader5=k;var l=c('ReactComposerMediaConfig').photo,m=null;if(c('JpegResizer').isSupported()){m=c('JpegResizer').getSingleton(j>1?c('JpegResizer').DEFAULT_POOL_SIZE:1);m.setHighQuality(l.highQuality);}else c('ReactComposerMediaUploadActions').resizerUnavailable(this.$ReactComposerPhotoUploader1);var n=c('ActorURI').create(l.uploadEndpoint,i.actorID);this.$ReactComposerPhotoUploader2=new (c('XComposerPhotoUploader'))({uploadEndpoint:n,uploadData:Object.assign({qn:c('ReactComposerLoggingStore').getSessionID(this.$ReactComposerPhotoUploader1),target_id:i.targetID},l.uploadData),retryLimit:l.retryLimit,concurrentLimit:l.concurrentLimit,resizer:m,onUploadEnqueued:this.$ReactComposerPhotoUploader6.bind(this),onResizeStart:this.$ReactComposerPhotoUploader7.bind(this),onResizeSuccess:this.$ReactComposerPhotoUploader8.bind(this),onResizeFailure:this.$ReactComposerPhotoUploader9.bind(this),onResizeProgress:this.$ReactComposerPhotoUploader10.bind(this),onUploadIsSpherical:this.$ReactComposerPhotoUploader11.bind(this),onUploadStart:this.$ReactComposerPhotoUploader12.bind(this),onUploadProgress:this.$ReactComposerPhotoUploader13.bind(this),onUploadSuccess:this.$ReactComposerPhotoUploader14.bind(this),onUploadFailure:this.$ReactComposerPhotoUploader15.bind(this),gks:i.gks});this.$ReactComposerPhotoUploader3=new (c('FaceRecognitionController'))({include_unrecognized_faceboxes:true,include_low_confidence_recognitions:true,include_face_crop_src:true});this.$ReactComposerPhotoUploader3.subscribe('photo',this.$ReactComposerPhotoUploader16.bind(this)),this.$ReactComposerPhotoUploader3.subscribe('done',this.$ReactComposerPhotoUploader17.bind(this));this.$ReactComposerPhotoUploader4=new (c('Map'))();}h.prototype.upload=function(i){var j=c('ReactComposerMediaUploadStore').getUploads(this.$ReactComposerPhotoUploader1).size;this.$ReactComposerPhotoUploader2.upload(i,j);};h.prototype.retry=function(i){var j=this.$ReactComposerPhotoUploader2.getAsyncUploadRequest([i]);j.send();};h.prototype.getAsyncUploadRequest=function(i,j){return this.$ReactComposerPhotoUploader2.getAsyncUploadRequest(i,j);};h.prototype.enqueueAsyncUploadRequest=function(i,j,k,l,m){j.forEach(function(n){var o=k.indexMap?k.indexMap.get(n.uploadID):c('ReactComposerMediaUploadStore').getUploads(i).size;c('ReactComposerMediaUploadActions').enqueue(i,n.uploadID,n.filename,o,c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_ENQUEUED,c('ReactComposerMediaUploadType').PHOTO,'',l.xyTags,m);});this.getAsyncUploadRequest(j,k).send();};h.prototype.isUploadLimitExceeded=function(i,j){var k=this.getMaxSelectableFilesCount(i),l=!j||!c('AsyncUploadRequest').isSupported()?1:j.length;return l>k;};h.prototype.getMaxSelectableFilesCount=function(i){return !!i?c('ReactComposerMediaConfig').photo.limit:1;};h.prototype.$ReactComposerPhotoUploader6=function(i){c('ReactComposerMediaUploadActions').enqueue(this.$ReactComposerPhotoUploader1,i.uploadID,i.fileName,c('ReactComposerMediaUploadStore').getUploads(this.$ReactComposerPhotoUploader1).size,c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_ENQUEUED,c('ReactComposerMediaUploadType').PHOTO,'',null,i.isSpherical);};h.prototype.$ReactComposerPhotoUploader11=function(i,j){c('ReactComposerMediaUploadActions').isSpherical(this.$ReactComposerPhotoUploader1,i.uploadID,j);};h.prototype.$ReactComposerPhotoUploader7=function(i){c('ReactComposerMediaUploadActions').startResizing(this.$ReactComposerPhotoUploader1,i.uploadID,{bytes:i.size});};h.prototype.$ReactComposerPhotoUploader10=function(i,event){setTimeout(function(){return c('ReactComposerMediaUploadActions').progressResizing(this.$ReactComposerPhotoUploader1,i,100*event.written/event.total);}.bind(this),0);};h.prototype.$ReactComposerPhotoUploader8=function(i,j,k,l){c('ReactComposerMediaUploadActions').doneResizing(this.$ReactComposerPhotoUploader1,i.uploadID,{dt:l,media_data_size:i.size,bytes:j.size,custom_tags:{skipped_resizing:k}});};h.prototype.$ReactComposerPhotoUploader9=function(i,j,k,l){c('ReactComposerMediaUploadActions').failResizing(this.$ReactComposerPhotoUploader1,i.uploadID,{dt:l,bytes:i.size,error_code:k.code,error_info:k.message});};h.prototype.$ReactComposerPhotoUploader12=function(i,j){c('ReactComposerMediaUploadActions').startUploading(this.$ReactComposerPhotoUploader1,i,j.upload,c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_UPLOADING);this.$ReactComposerPhotoUploader4.set(i,c('performanceNow')());};h.prototype.$ReactComposerPhotoUploader13=function(i,j){setTimeout(function(){return c('ReactComposerMediaUploadActions').progressUploading(this.$ReactComposerPhotoUploader1,i,100*j.event.loaded/j.event.total);}.bind(this),0);};h.prototype.$ReactComposerPhotoUploader14=function(i,j){if(c('ReactComposerMediaUploadStore').getHasUploadBeenRemoved(this.$ReactComposerPhotoUploader1,i))return;var k=j.response.payload;if(!k)return;c('ReactComposerMediaUploadActions').doneUploading(this.$ReactComposerPhotoUploader1,i,c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_DONE,j.upload,c('performanceNow')()-this.$ReactComposerPhotoUploader4.get(i),k.photoID,k.thumbSrc,k.originalPhotoID,k.mediaLocation,c('SphericalPhotoConfig').spherical_photo_www_upload&&k.cubestripURI||null,k.imageSrc,k.width,k.height);if(!this.$ReactComposerPhotoUploader5.disableFaceRecognition){c('ReactComposerPhotoActions').startRecognizing(this.$ReactComposerPhotoUploader1,k.photoID);this.$ReactComposerPhotoUploader3.start([k.photoID]);}var l=c('ReactComposerMediaUploadStore').getMediaUpload(this.$ReactComposerPhotoUploader1,i);if(l.xyTags)c('ReactComposerMediaUtils').handleXYTagsOnly(this.$ReactComposerPhotoUploader1,l.photoID,l.xyTags);};h.prototype.$ReactComposerPhotoUploader15=function(i,j,k){if(c('ReactComposerMediaUploadStore').getHasUploadBeenRemoved(this.$ReactComposerPhotoUploader1,i))return;var l=j.response,m={code:l.getError(),description:l.getErrorDescription(),summary:l.getErrorSummary(),transient:l.isTransient()||l.getError()==1004||l.getError()==1006};c('ReactComposerMediaUploadActions').failUploading(this.$ReactComposerPhotoUploader1,i,j.upload,c('performanceNow')()-this.$ReactComposerPhotoUploader4.get(i),m,c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_FAILED);};h.prototype.$ReactComposerPhotoUploader16=function(i,j){j.faceboxes.forEach(function(k){var l=void 0;if(k.recognitions.length>0){var m=k.recognitions[0].user;l={subjectID:m.fbid,value:m.name};}c('ReactComposerPhotoActions').addFacebox(this.$ReactComposerPhotoUploader1,j.photo,{id:k.fbid,x:k.x,y:k.y,top:k.top,left:k.left,width:k.width,height:k.height,croppedURI:k.src,bestRecognition:l,allRecognitions:k.allRecognitions});}.bind(this));c('ReactComposerPhotoActions').finishRecognizingPhoto(this.$ReactComposerPhotoUploader1,j.photo);};h.prototype.$ReactComposerPhotoUploader17=function(i,j){c('ReactComposerPhotoActions').finishRecognizing(this.$ReactComposerPhotoUploader1,j.unresolved,j.facerecWaterfallEvent||null);};f.exports=h;},null);
__d('ReactComposerFailedPhotoUploadContainer.react',['ReactComposerContextMixin','ReactComposerFailedMediaUpload.react','ReactComposerMediaUploadActions','ReactComposerMediaUploadActionType','ReactComposerPhotoUploader','ReactComposerMediaUploadStore','ReactComponentWithPureRenderMixin','React'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'ReactComposerPhotoUploadPlaceholderContainer',_uploader:undefined,mixins:[c('ReactComponentWithPureRenderMixin'),c('ReactComposerContextMixin')],propTypes:{mediaConfig:h.object.isRequired},render:function(){return (c('React').createElement(c('ReactComposerFailedMediaUpload.react'),babelHelpers['extends']({},this.props,{onDismissClick:this._onDismissClick,onRemoveClick:this._onDismissClick,onRetryClick:this._onRetryClick})));},_onDismissClick:function(){c('ReactComposerMediaUploadActions').removeMediaUpload(this.context.composerID,this.props.uploadID);},_onRetryClick:function(){var j=c('ReactComposerMediaUploadStore').getMediaUpload(this.context.composerID,this.props.uploadID).fileUpload.getFile();j.manuallyRetried=true;c('ReactComposerMediaUploadActions').retryMediaUpload(this.context.composerID,c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_RETRY);if(!this._uploader)this._uploader=new (c('ReactComposerPhotoUploader'))(this.context,this.props.mediaConfig.photoLimit,{disableFaceRecognition:this.props.mediaConfig.disableFaceboxTagger});this._uploader&&this._uploader.retry(j);}});f.exports=i;},null);
__d('ReactComposerFailedVideoXUploadContainer.react',['ReactComposerContextMixin','ReactComposerFailedMediaUpload.react','ReactComposerMediaUtils','ReactComposerMediaUploadActions','ReactComposerMediaUploadStore','ReactComponentWithPureRenderMixin','React'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'ReactComposerFailedVideoXUploadContainer',mixins:[c('ReactComponentWithPureRenderMixin'),c('ReactComposerContextMixin')],propTypes:{mediaConfig:h.object.isRequired},render:function(){return (c('React').createElement(c('ReactComposerFailedMediaUpload.react'),babelHelpers['extends']({},this.props,{onDismissClick:this._onDismissClick,onRemoveClick:this._onDismissClick,onRetryClick:this._onRetryClick})));},_onDismissClick:function(){c('ReactComposerMediaUploadActions').removeMediaUpload(this.context.composerID,this.props.uploadID);},_onRetryClick:function(){var j=c('ReactComposerMediaUploadStore').getMediaUpload(this.context.composerID,this.props.uploadID).fileUpload;j.manuallyRetried=true;var k=c('ReactComposerMediaUtils').getVideoXUploader(this.context.composerID);k.uploadVideo(j);}});f.exports=i;},null);
__d('ReactComposerNUXActionType',['keyMirrorRecursive'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports=c('keyMirrorRecursive')({NUX_WAS_SHOWN:null,NUX_WAS_SEEN:null},'ReactComposerNUXActionType');},null);
__d('ReactComposerNUXStore',['CommerceSelfServeNUXType','ReactComposerStoreBase','ReactComposerNUXActionType','AsyncRequest','Map'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('ReactComposerStoreBase'));i=h&&h.prototype;function j(){'use strict';var k;i.constructor.call(this,function(){return {nuxes:new (c('Map'))()};},function(l){switch(l.type){case c('ReactComposerNUXActionType').NUX_WAS_SHOWN:k&&k.$ReactComposerNUXStore1(l);break;case c('ReactComposerNUXActionType').NUX_WAS_SEEN:k&&k.$ReactComposerNUXStore2(l);break;}});k=this;}j.prototype.hasNUXBeenSeen=function(k,l){'use strict';return this.$ReactComposerNUXStore3(k,l).seen;};j.prototype.getNUXShownPhotoID=function(k,l){'use strict';return this.$ReactComposerNUXStore3(k,l).photoID;};j.prototype.$ReactComposerNUXStore1=function(k){'use strict';var l=this.validateAction(k,['composerID','nuxType','photoID']),m=l[0],n=l[1],o=l[2],p=this.$ReactComposerNUXStore3(m,n);p.photoID=o;this.emitChange(m);};j.prototype.$ReactComposerNUXStore2=function(k){'use strict';var l=this.validateAction(k,['composerID','nuxType']),m=l[0],n=l[1],o=this.$ReactComposerNUXStore3(m,n);o.seen=true;if(n!==c('CommerceSelfServeNUXType').COMPOSER_PRODUCT_PHOTO_TAGGER_BUTTON)new (c('AsyncRequest'))('/ajax/photos/composer/mark_nux_seen.php').setData({type:n}).send();this.emitChange(m);};j.prototype.$ReactComposerNUXStore3=function(k,l){'use strict';var m=this.getComposerData(k),n=m.nuxes.get(l);if(!n){n={seen:false,photoID:null};m.nuxes.set(l,n);}return n;};f.exports=new j();},null);
__d('ReactComposerNUXActions',['ReactComposerNUXActionType','ReactComposerDispatcher','ReactComposerNUXStore'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();c('ReactComposerNUXStore');var h={nuxWasShown:function(i,j,k){c('ReactComposerDispatcher').dispatch({composerID:i,type:c('ReactComposerNUXActionType').NUX_WAS_SHOWN,nuxType:j,photoID:k});},nuxWasSeen:function(i,j){c('ReactComposerDispatcher').dispatch({composerID:i,type:c('ReactComposerNUXActionType').NUX_WAS_SEEN,nuxType:j});}};f.exports=h;},null);
__d('ReactComposerPhotoActionButton.react',['cx','ReactComponentWithPureRenderMixin','React','Tooltip','joinClasses'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'ReactComposerPhotoActionButton',mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{tooltip:i.string,className:i.string,onClick:i.func,iconClassName:i.string},render:function(){var k=c('joinClasses')(this.props.className,"_jfh");return (c('React').createElement('button',babelHelpers['extends']({className:k,onClick:this.props.onClick,tabIndex:'0','aria-label':this.props.tooltip},c('Tooltip').propsFor(this.props.tooltip)),c('React').createElement('div',{className:this.props.iconClassName})));}});f.exports=j;},null);
__d('ReactComposerPhotoEditActionButton.react',['cx','fbt','ReactComposerPhotoActionButton.react','ReactComponentWithPureRenderMixin','React'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'ReactComposerPhotoEditActionButton',mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{onClick:j.func},render:function(){var l=i._("Edit Photo");return (c('React').createElement(c('ReactComposerPhotoActionButton.react'),{className:"_4_z4",onClick:this.props.onClick,tooltip:l,iconClassName:"_4_z5"}));}});f.exports=k;},null);
__d('ReactComposerFaceboxTaggerTypeaheadPresenter',['cx','React','XUITypeaheadView.react'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').createClass({displayName:'ComposerFaceboxTaggerTypeaheadView',render:function(){return (c('React').createElement('div',{className:"_3ntx"},c('React').createElement(c('XUITypeaheadView.react'),this.props)));}}),j={ViewRenderer:i,useLayer:true};f.exports=j;},null);
__d('ReactComposerPhotoFaceboxTagger.react',['cx','fbt','ReactComposerFaceboxTaggerTypeaheadPresenter','ReactComponentWithPureRenderMixin','React','XUITypeahead.react'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'ReactComposerPhotoFaceboxTagger',mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{faceboxID:j.string.isRequired,dataSource:j.object.isRequired,onTagAdded:j.func.isRequired},getInitialState:function(){return {query:''};},render:function(){var l=i._("Who is this?");return (c('React').createElement(c('XUITypeahead.react'),{className:"_xgd",queryString:this.state.query,placeholder:l,onSelectAttempt:this._onTokenSelected,onChange:this._onTypeaheadChanged,searchSource:this.props.dataSource,highlightOnSelect:true,showEntriesOnFocus:true,autoHighlight:true,selectOnTab:true,focusedOnInit:true,presenter:c('ReactComposerFaceboxTaggerTypeaheadPresenter')}));},_onTokenSelected:function(l){this.props.onTagAdded(this.props.faceboxID,l.getUniqueID(),l.getTitle());},_onTypeaheadChanged:function(event){this.setState({query:event.target.value});}});f.exports=k;},null);
__d('ReactComposerQAndAActionType',['keyMirrorRecursive'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports=c('keyMirrorRecursive')({SET_QANDA_CONFIG:null},'ReactComposerQAndAActionType');},null);
__d('ReactComposerQAndAStore',['ReactComposerQAndAActionType','ReactComposerStoreBase'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('ReactComposerStoreBase'));i=h&&h.prototype;function j(){'use strict';var k;i.constructor.call(this,function(){return {photoLimit:1,profilePicURI:null,profileURI:null,faceboxDataSource:null};},function(l){switch(l.type){case c('ReactComposerQAndAActionType').SET_QANDA_CONFIG:k&&k.$ReactComposerQAndAStore1(l);break;}});k=this;}j.prototype.getPhotoLimit=function(k){'use strict';return this.getComposerData(k).photoLimit;};j.prototype.getProfilePicSrc=function(k){'use strict';return this.getComposerData(k).profilePicSrc;};j.prototype.getProfileURI=function(k){'use strict';return this.getComposerData(k).profileURI;};j.prototype.getFaceboxDataSource=function(k){'use strict';return this.getComposerData(k).faceboxDataSource;};j.prototype.$ReactComposerQAndAStore1=function(k){'use strict';var l=this.validateAction(k,['composerID','config']),m=l[0],n=l[1],o=this.getComposerData(m);o.photoLimit=n.photoLimit;o.profilePicSrc=n.profilePicSrc;o.profileURI=n.profileURI;o.faceboxDataSource=n.faceboxDataSource;this.emitChange(k.composerID);};f.exports=new j();},null);
__d('ReactComposerPhotoFaceboxTaggerContainer.react',['ReactComposerMediaAttachmentStore','ReactComposerPhotoFaceboxTagger.react','ReactComposerPropsAndStoreBasedStateMixin','ReactComposerQAndAStore','ReactComponentWithPureRenderMixin','React'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'ReactComposerPhotoFaceboxTaggerContainer',mixins:[c('ReactComponentWithPureRenderMixin'),c('ReactComposerPropsAndStoreBasedStateMixin')(c('ReactComposerMediaAttachmentStore'),c('ReactComposerQAndAStore'))],propTypes:{faceboxID:h.string.isRequired,onTagAdded:h.func.isRequired},statics:{calculateState:function(j){var k=c('ReactComposerMediaAttachmentStore').getTaggingDataSource(j)||c('ReactComposerQAndAStore').getFaceboxDataSource(j);k&&k.bootstrap();return {dataSource:k};}},render:function(){return (c('React').createElement(c('ReactComposerPhotoFaceboxTagger.react'),{faceboxID:this.props.faceboxID,dataSource:this.state.dataSource,onTagAdded:this.props.onTagAdded}));}});f.exports=i;},null);
__d('ReactComposerPhotoProductTagActionButton.react',['cx','fbt','AsyncRequest','CommerceSelfServeNUXType','ReactComposerPhotoActionButton.react','ReactComposerTaggerActions','ReactComposerTaggerType','ReactComponentWithPureRenderMixin','React','XCommerceSelfServeMerchantNUXSeenController','XUIAmbientNUX.react'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'ReactComposerPhotoProductTagActionButton',mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{composerID:j.string.isRequired,pageID:j.string.isRequired,hasTag:j.bool.isRequired,onClick:j.any,onHideNux:j.func.isRequired,showNux:j.bool.isRequired},render:function(){var l=i._("Tag Products");return (c('React').createElement('div',null,c('React').createElement(c('ReactComposerPhotoActionButton.react'),{ref:'fbReactComposerPhotoActionbutton',className:"_a69"+(this.props.hasTag?' '+"_a6b":''),tooltip:l,iconClassName:"_a6_",onClick:this.props.onClick}),this._showNux()));},_showNux:function(){if(!this.props.showNux)return null;c('ReactComposerTaggerActions').handleSetTaggerShowNUX(this.props.composerID,c('ReactComposerTaggerType').PRODUCT,false);return (c('React').createElement(c('XUIAmbientNUX.react'),{alignment:'center',contextRef:function(){return this.refs.fbReactComposerPhotoActionbutton;}.bind(this),position:'below',shown:true,onCloseButtonClick:this._hideNUX},i._("Tag products from your shop in this photo.")));},_hideNUX:function(){var l=c('XCommerceSelfServeMerchantNUXSeenController').getURIBuilder().setInt('page_id',this.props.pageID).setEnum('nux_type',c('CommerceSelfServeNUXType').COMPOSER_PRODUCT_PHOTO_TAGGER_BUTTON).getURI();new (c('AsyncRequest'))(l).send();this.props.onHideNux();}});f.exports=k;},null);
__d('ReactComposerPhotoTagActionButton.react',['cx','fbt','ReactComposerPhotoActionButton.react','ReactComponentWithPureRenderMixin','React'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'ReactComposerPhotoTagActionButton',mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{hasTag:j.bool.isRequired,onClick:j.any},render:function(){var l=i._("Tag");return (c('React').createElement(c('ReactComposerPhotoActionButton.react'),{className:"_cwf"+(this.props.hasTag?' '+"_cwh":''),tooltip:l,iconClassName:"_cwg",onClick:this.props.onClick}));}});f.exports=k;},null);
__d('ReactComposerPhotoTaggedFaceboxSummary.react',['cx','fbt','ix','Image.react','LeftRight.react','ReactComponentWithPureRenderMixin','React','TooltipLink.react'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes,l=c('React').createClass({displayName:'ReactComposerPhotoTaggedFaceboxSummary',mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{faceboxID:k.string.isRequired,onTagRemoved:k.func.isRequired,taggedSubjectID:k.string.isRequired,taggedValue:k.string.isRequired},render:function(){var m=i._("Edit Name");return (c('React').createElement(c('LeftRight.react'),{className:"_31bg"},c('React').createElement('div',{className:"_31bh"},this.props.taggedValue),c('React').createElement(c('TooltipLink.react'),{alignH:'center',position:'below',tooltip:m,onClick:this._onEditClicked},c('React').createElement(c('Image.react'),{src:j('/images/icons/edit.png')}))));},_onEditClicked:function(){this.props.onTagRemoved(this.props.faceboxID,this.props.taggedSubjectID);}});f.exports=l;},null);
__d('ReactComposerPhotoTagger.react',['cx','fbt','ReactComposerContextMixin','ReactComposerPhotoActions','ReactComposerPhotoFaceboxTaggerContainer.react','ReactComposerPhotoEditActionButton.react','ReactComposerPhotoStore','ReactComposerPhotoTagActionButton.react','ReactComposerPhotoProductTagActionButton.react','ReactComposerPhotoTaggedFaceboxSummary.react','ActorURI','AsyncRequest','ContextualLayerAutoFlip','Image.react','ImageBlock.react','immutable','ReactLayeredComponentMixin','LayerHideOnBlur','LayerHideOnEscape','LayerTabIsolation','ModalPhotoEditorTabName','ReactComponentWithPureRenderMixin','React','XStickerPhotoEditorController','PhotoEditorTargetType','XUIContextualDialog.react','XUIContextualDialogBody.react','XUIDialogCloseButton.react','XUIContextualDialogFooter.react'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=268,l=32,m=c('React').createClass({displayName:'ReactComposerPhotoTagger',_photoEditorRequest:undefined,mixins:[c('ReactLayeredComponentMixin'),c('ReactComponentWithPureRenderMixin'),c('ReactComposerContextMixin')],propTypes:{canTagFromModal:j.bool,draggingPhotos:j.bool,enableFaceboxTagger:j.bool.isRequired,enableProductTagger:j.bool.isRequired,disablePhotoEditing:j.bool.isRequired,faceboxes:j.instanceOf(c('immutable').Map).isRequired,onEditClick:j.func,onHideProductTaggerNux:j.func.isRequired,onTagAdded:j.func.isRequired,onTagIntent:j.func,onTagRemoved:j.func.isRequired,originalID:j.string,photoID:j.string.isRequired,shown:j.bool.isRequired,showProductTaggerNux:j.bool.isRequired},getDefaultProps:function(){return {shown:false};},componentWillReceiveProps:function(n){if(!this.props.draggingPhotos&&n.draggingPhotos)c('ReactComposerPhotoActions').setPhotoBeingTagged(this.context.composerID,null);},render:function(){var n=null;if(this.props.enableProductTagger){n=this._onProductTagClick;}else if(this.props.canTagFromModal)n=this._onTagClick;var o=null;if(this.props.enableProductTagger){o=c('React').createElement(c('ReactComposerPhotoProductTagActionButton.react'),{composerID:this.context.composerID,pageID:this.context.targetID,hasTag:c('ReactComposerPhotoStore').hasTagsInPhoto(this.context.composerID,this.props.photoID),onClick:n,onHideNux:this.props.onHideProductTaggerNux,showNux:this.props.showProductTaggerNux});}else if(this.props.enableFaceboxTagger)o=c('React').createElement(c('ReactComposerPhotoTagActionButton.react'),{hasTag:c('ReactComposerPhotoStore').hasTagsInPhoto(this.context.composerID,this.props.photoID),onClick:n});var p=this.props.disablePhotoEditing?null:c('React').createElement(c('ReactComposerPhotoEditActionButton.react'),{onClick:this._onEditClick});return (c('React').createElement('div',{className:"_jfi",onClick:this._onClick,tabIndex:'-1'},o,p));},renderLayers:function(){if(!this.props.shown||!this.props.enableFaceboxTagger)return null;return {dialog:this._getDialog()};},_getDialog:function(){return (c('React').createElement(c('XUIContextualDialog.react'),{ref:'dialog',shown:this.props.shown,onToggle:this._onDialogToggled,contextRef:function(){return this;}.bind(this),position:'below',alignment:'center',width:k,behaviors:{LayerHideOnBlur:c('LayerHideOnBlur'),LayerHideOnEscape:c('LayerHideOnEscape'),ContextualLayerAutoFlip:c('ContextualLayerAutoFlip'),LayerTabIsolation:c('LayerTabIsolation')}},c('React').createElement(c('XUIContextualDialogBody.react'),null,this._getDialogBody()),c('React').createElement(c('XUIContextualDialogFooter.react'),null,c('React').createElement(c('XUIDialogCloseButton.react'),{use:'confirm',label:'Close',onClick:this._onCloseButtonClicked}))));},_getDialogBody:function(){if(this.props.faceboxes.size===0)return i._("We could not find any faces to tag.");return this.props.faceboxes.valueSeq().map(function(n){var o=n.taggedSubjectID?c('React').createElement(c('ReactComposerPhotoTaggedFaceboxSummary.react'),{faceboxID:n.id,onTagRemoved:this.props.onTagRemoved,taggedSubjectID:n.taggedSubjectID,taggedValue:n.taggedValue}):c('React').createElement(c('ReactComposerPhotoFaceboxTaggerContainer.react'),{faceboxID:n.id,onTagAdded:this.props.onTagAdded});return (c('React').createElement(c('ImageBlock.react'),{key:n.id,className:"_qv7"},c('React').createElement(c('Image.react'),{className:"_qv8",height:l,src:n.croppedURI,width:l}),o));}.bind(this));},_onCloseButtonClicked:function(){c('ReactComposerPhotoActions').setPhotoBeingTagged(this.context.composerID,null);},_onDialogToggled:function(n){if(!n)this._onCloseButtonClicked();},_onClick:function(){this.props.onTagIntent&&this.props.onTagIntent();c('ReactComposerPhotoActions').setPhotoBeingTagged(this.context.composerID,this.props.photoID);},_onTagClick:function(event){this._onEditClick(event,null,c('ModalPhotoEditorTabName').TAG);},_onProductTagClick:function(event){this._onEditClick(event,null,c('ModalPhotoEditorTabName').PRODUCT_TAG);},_onEditClick:function(event,n,o){event.stopPropagation();if(this._photoEditorRequest)return;c('ReactComposerPhotoActions').startPhotoEdit(this.context.composerID,this.props.photoID);var p=c('XStickerPhotoEditorController').getURIBuilder().setString('grid_id',this.context.composerID).setEnum('target_type',c('PhotoEditorTargetType').COMPOSER).setInt('latest_fbid',this.props.photoID).setInt('photo_fbid',this.props.originalID||this.props.photoID).setEnum('initial_tab',o).getURI();p=c('ActorURI').create(p,this.context.actorID);this._photoEditorRequest=new (c('AsyncRequest'))(p).setFinallyHandler(function(){this._photoEditorRequest=null;c('ReactComposerPhotoActions').finishLoadingPhotoEdit(this.context.composerID,this.props.photoID);}.bind(this));this._photoEditorRequest&&this._photoEditorRequest.send();this.props.onEditClick&&this.props.onEditClick();}});f.exports=m;},null);
__d('ReactComposerPhoto.react',['cx','fbt','ix','ReactComposerMediaConfig','ReactComposerPhotoTagger.react','ReactComposerPropsAndStoreBasedStateMixin','ReactComposerStore','Image.react','ImageBlock.react','immutable','LoadingIndicator.react','ReactComponentWithPureRenderMixin','React','ReactLayeredComponentMixin','XUIAmbientNUX.react','XUICloseButton.react','XUIContextualDialog.react','XUIContextualDialogBody.react','XUIText.react'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes,l=c('React').createClass({displayName:'ReactComposerPhoto',mixins:[c('ReactComponentWithPureRenderMixin'),c('ReactLayeredComponentMixin'),c('ReactComposerPropsAndStoreBasedStateMixin')(c('ReactComposerStore'))],propTypes:{canTagFromModal:k.bool,draggingPhotos:k.bool,enableFaceboxTagger:k.bool,enableProductTagger:k.bool,disablePhotoEditing:k.bool,faceboxes:k.instanceOf(c('immutable').Map).isRequired,isLoadingPhotoEdit:k.bool,isSpherical:k.bool,onEditClick:k.func,onHideProductTaggerNux:k.func.isRequired,onRemoveButtonClicked:k.func.isRequired,onTagAdded:k.func.isRequired,onTaggingNUXClose:k.func,onTagIntent:k.func,onTagRemoved:k.func.isRequired,originalID:k.string,photoID:k.string.isRequired,showStickersNUX:k.bool,showTaggingNUX:k.bool,thumbSrc:k.string.isRequired},getDefaultProps:function(){return {enableFaceboxTagger:true,enableProductTagger:false,disablePhotoEditing:false};},statics:{calculateState:function(m,n){return {posting:c('ReactComposerStore').isPosting(m)};}},render:function(){var m={width:c('ReactComposerMediaConfig').photo.thumbWidth,height:c('ReactComposerMediaConfig').photo.thumbHeight},n=this.props.isRecognizingFaceboxes||this.props.isLoadingPhotoEdit?c('React').createElement('div',{className:"_jff"},c('React').createElement(c('LoadingIndicator.react'),{className:"_jfg",size:'small',color:'white'})):null,o=this.props.showProductTaggerNux?"_jfc"+(this.props.isRecognizingFaceboxes?' '+"_jfd":'')+(' '+"_43p_"):"_jfc"+(this.props.isRecognizingFaceboxes?' '+"_jfd":''),p=void 0,q=void 0;if(!this.state.posting){p=c('React').createElement(c('XUICloseButton.react'),{className:"_jfe",onClick:this.props.onRemoveButtonClicked,size:'medium',shade:'light'});q=c('React').createElement(c('ReactComposerPhotoTagger.react'),{canTagFromModal:this.props.canTagFromModal,draggingPhotos:this.props.draggingPhotos,enableFaceboxTagger:this.props.enableFaceboxTagger,enableProductTagger:this.props.enableProductTagger,disablePhotoEditing:this.props.disablePhotoEditing,faceboxes:this.props.faceboxes,onEditClick:this.props.onEditClick,onHideProductTaggerNux:this.props.onHideProductTaggerNux,onTagIntent:this.props.onTagIntent,onTagAdded:this.props.onTagAdded,onTagRemoved:this.props.onTagRemoved,originalID:this.props.originalID,photoID:this.props.photoID,shown:this.props.showPhotoTagger,showProductTaggerNux:this.props.showProductTaggerNux});}return (c('React').createElement('div',{ref:'root',className:o,style:m},p,c('React').createElement(c('Image.react'),{src:this.props.thumbSrc,width:c('ReactComposerMediaConfig').photo.thumbWidth,height:c('ReactComposerMediaConfig').photo.thumbHeight}),n,q));},renderLayers:function(){return {taggingNUX:this.props.enableFaceboxTagger?this._getTaggingNux():null,stickersNUX:this.props.disablePhotoEditing?null:this._getStickersNux()};},_getTaggingNux:function(){return (c('React').createElement(c('XUIContextualDialog.react'),{contextRef:function(){return this.refs.root;}.bind(this),position:'below',alignment:'left',shown:this.props.showTaggingNUX,width:300},c('React').createElement(c('XUIContextualDialogBody.react'),null,c('React').createElement(c('XUICloseButton.react'),{className:"rfloat",onClick:this.props.onTaggingNUXClose}),c('React').createElement('div',null,c('React').createElement(c('XUIText.react'),{weight:'bold',display:'block'},i._("Now It's Easier to Tag Photos.")),i._("Click photos with a {tagging_badge_icon} to review tag suggestions or add, edit, and remove tags. When you post the photo, your tags will be applied.",[i.param('tagging_badge_icon',c('React').createElement(c('Image.react'),{className:"_2z-r",src:j('/images/photos/editor/tag_icon_blue.png')}))])))));},_getStickersNux:function(){return (c('React').createElement(c('XUIAmbientNUX.react'),{alignment:'right',contextRef:function(){return this.refs.root;}.bind(this),onCloseButtonClick:this.props.onStickersNUXClose,position:'below',shown:this.props.showStickersNUX},c('React').createElement(c('ImageBlock.react'),{spacing:'medium'},c('React').createElement(c('Image.react'),{src:j('/images/photos/editor/beast.png')}),c('React').createElement('div',{className:"_21ft"},c('React').createElement('div',{className:"_21fs"},i._("New! Add Stickers!")),i._("You can now add stickers to your photos")))));}});f.exports=l;},null);
__d('ReactComposerSphericalPhotoEditActionButton.react',['cx','fbt','ReactComposerPhotoActionButton.react','ReactComponentWithPureRenderMixin','React'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'ReactComposerSphericalPhotoEditActionButton',mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{onClick:j.func},render:function(){var l=i._("Edit 360 Settings");return (c('React').createElement(c('ReactComposerPhotoActionButton.react'),{className:"_4_z4",onClick:this.props.onClick,tooltip:l,iconClassName:"_4_z5"}));}});f.exports=k;},null);
__d('ReactComposerSphericalPhotoTagger.react',['cx','ReactComposerContextMixin','ReactComposerSphericalPhotoEditActionButton.react','AsyncRequest','Image.react','ReactLayeredComponentMixin','LayerFadeOnHide','LayerHideOnBlur','LayerHideOnEscape','LayerTabIsolation','ReactComponentWithPureRenderMixin','React','XUIDialog.react','XUIDialogTitle.react','XUIDialogBody.react','XUIDialogFooter.react','XUIDialogCancelButton.react','XUIDialogSaveButton.react'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'ReactComposerSphericalPhotoTagger',_photoEditorRequest:undefined,mixins:[c('ReactLayeredComponentMixin'),c('ReactComponentWithPureRenderMixin'),c('ReactComposerContextMixin')],propTypes:{onEditClick:i.func,originalID:i.string,photoID:i.string.isRequired,cubestripURI:i.string.isRequired},getInitialState:function(){return {settingsDialogShown:false};},getDefaultProps:function(){return {shown:false};},componentWillReceiveProps:function(k){},render:function(){return (c('React').createElement('div',{className:"_jfi",tabIndex:'-1'},c('React').createElement(c('ReactComposerSphericalPhotoEditActionButton.react'),{onClick:this._onEditSettingsClick})));},renderLayers:function(){if(!this.state.settingsDialogShown)return null;return {settingsDialog:this._getSettingsDialog()};},_getSettingsDialog:function(){return (c('React').createElement(c('XUIDialog.react'),{ref:'dialog',causalElementRef:function(){return this.refs.button;}.bind(this),shown:this.state.settingsDialogShown,behaviors:{LayerFadeOnHide:c('LayerFadeOnHide'),LayerHideOnEscape:c('LayerHideOnEscape'),LayerHideOnBlur:c('LayerHideOnBlur'),LayerTabIsolation:c('LayerTabIsolation')},onToggle:this._onSettingsDialogToggled,width:445},c('React').createElement(c('XUIDialogTitle.react'),null,c('React').createElement('span',null,'Edit 360 photo settings')),c('React').createElement(c('XUIDialogBody.react'),null,c('React').createElement('div',null,c('React').createElement(c('Image.react'),{ref:'cubestrip',src:this.props.cubestripURI,alt:'360 Photo cubestrip'}))),c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIDialogCancelButton.react'),null),c('React').createElement(c('XUIDialogSaveButton.react'),{use:'confirm',onClick:this._handleSaveSettings}))));},_handleSaveSettings:function(){this.setState({settingsDialogShown:false});},_onSettingsDialogToggled:function(k){setTimeout(function(){return this.setState({settingsDialogShown:k});}.bind(this),0);},_onEditSettingsClick:function(){event.stopPropagation();this.setState({settingsDialogShown:true});this.props.onEditClick&&this.props.onEditClick();}});f.exports=j;},null);
__d('ReactComposerSphericalPhoto.react',['cx','ix','ReactComposerContextMixin','ReactComposerMediaConfig','ReactComposerSphericalPhotoTagger.react','ReactComposerPropsAndStoreBasedStateMixin','ReactComposerStore','SphericalPhotoConfig','Image.react','LoadingIndicator.react','ReactComponentWithPureRenderMixin','React','XUICloseButton.react'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'ReactComposerSphericalPhoto',mixins:[c('ReactComponentWithPureRenderMixin'),c('ReactComposerPropsAndStoreBasedStateMixin')(c('ReactComposerStore')),c('ReactComposerContextMixin')],propTypes:{enableFaceboxTagger:j.bool,onEditClick:j.func,onRemoveButtonClicked:j.func.isRequired,originalID:j.string,photoID:j.string.isRequired,thumbSrc:j.string.isRequired},getDefaultProps:function(){return {enableFaceboxTagger:false,disablePhotoEditing:false};},statics:{calculateState:function(l,m){return {posting:c('ReactComposerStore').isPosting(l)};}},render:function(){var l={width:c('ReactComposerMediaConfig').photo.thumbWidth,height:c('ReactComposerMediaConfig').photo.thumbHeight},m=this.props.isRecognizingFaceboxes?c('React').createElement('div',{className:"_jff"},c('React').createElement(c('LoadingIndicator.react'),{className:"_jfg",size:'small',color:'white'})):null,n="_jfc"+(this.props.isRecognizingFaceboxes?' '+"_jfd":''),o=void 0,p=void 0;if(!this.state.posting){o=c('React').createElement(c('XUICloseButton.react'),{className:"_jfe",onClick:this.props.onRemoveButtonClicked,size:'medium',shade:'light'});var q=this.props.enableFaceboxTagger&&c('SphericalPhotoConfig').spherical_photo_www_upload_settings;p=q?c('React').createElement(c('ReactComposerSphericalPhotoTagger.react'),{onEditClick:this.props.onEditClick,originalID:this.props.originalID,photoID:this.props.photoID,cubestripURI:this.props.cubestripURI}):null;}return (c('React').createElement('div',{ref:'root',className:n,style:l},o,c('React').createElement(c('Image.react'),{src:this.props.thumbSrc,width:c('ReactComposerMediaConfig').photo.thumbWidth,height:c('ReactComposerMediaConfig').photo.thumbHeight}),c('React').createElement(c('Image.react'),{className:"_2xj3",src:i('/images/photos/spherical/gyro-small.png'),alt:'360 Photo'}),m,p));}});f.exports=k;},null);
__d('ReactComposerPhotoContainer.react',['CommerceSelfServeNUXType','ReactComposerPhoto.react','ReactComposerSphericalPhoto.react','ReactComposerPhotoActions','ReactComposerPhotoStore','ReactComposerPropsAndStoreBasedStateMixin','ReactComposerNUXActions','ReactComposerNUXStore','ComposerNUXType','ReactComponentWithPureRenderMixin','React','ReactDOM'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'ReactComposerPhotoContainer',mixins:[c('ReactComponentWithPureRenderMixin'),c('ReactComposerPropsAndStoreBasedStateMixin')(c('ReactComposerNUXStore'),c('ReactComposerPhotoStore'))],propTypes:{dragHandler:h.shape({add:h.func.isRequired,remove:h.func.isRequired}),enableFaceboxTagger:h.bool,enableProductTagger:h.bool,disablePhotoEditing:h.bool,nuxConfig:h.object.isRequired,photoID:h.string.isRequired,showProductTaggerNux:h.bool,uploadID:h.string.isRequired},statics:{beforeCalculateInitialState:function(j,k){var l=c('ReactComposerPhotoStore').getPhoto(j,k.photoID),m=this._shouldShowStickersNUX(j,l,k.nuxConfig),n=!m&&this._shouldShowTaggingNUX(j,l,k.nuxConfig);if(m)c('ReactComposerNUXActions').nuxWasShown(j,c('ComposerNUXType').ADD_STICKERS_NUX,l.id);if(n)c('ReactComposerNUXActions').nuxWasShown(j,c('ComposerNUXType').TAGGING_FLYOUT_NUX,l.id);},calculateState:function(j,k){var l=c('ReactComposerPhotoStore').getPhoto(j,k.photoID),m=this._shouldShowStickersNUX(j,l,k.nuxConfig),n=!m&&this._shouldShowTaggingNUX(j,l,k.nuxConfig),o=c('ReactComposerPhotoStore').getPhotoBeingTagged(j)===k.photoID,p=k.showProductTaggerNux===true&&this._shouldShowProductPhotoTaggingNUX(j);return {cubestripURI:l.cubestripURI,faceboxes:l.faceboxes,isLoadingPhotoEdit:l.isLoadingPhotoEdit,isRecognizingFaceboxes:l.isRecognizingFaceboxes,isSpherical:Boolean(l.cubestripURI),showPhotoTagger:o,showProductTaggerNux:p,showStickersNUX:m,showTaggingNUX:n,thumbSrc:l.thumbSrc};},_couldShowNUX:function(j,k,l,m){var n=c('ReactComposerNUXStore').getNUXShownPhotoID(j,m),o=c('ReactComposerNUXStore').hasNUXBeenSeen(j,m);return (!!l[m]&&!o&&(!n||n===k.id));},_shouldShowStickersNUX:function(j,k,l){return this._couldShowNUX(j,k,l,c('ComposerNUXType').ADD_STICKERS_NUX);},_shouldShowTaggingNUX:function(j,k,l){return (this._couldShowNUX(j,k,l,c('ComposerNUXType').TAGGING_FLYOUT_NUX)&&k.faceboxes.size>0);},_shouldShowProductPhotoTaggingNUX:function(j){return !c('ReactComposerNUXStore').hasNUXBeenSeen(j,c('CommerceSelfServeNUXType').COMPOSER_PRODUCT_PHOTO_TAGGER_BUTTON);}},componentDidMount:function(){setTimeout(function(){var j=this.props.dragHandler;j&&j.add(c('ReactDOM').findDOMNode(this.refs.container));}.bind(this),0);},componentWillUnmount:function(){setTimeout(function(){var j=this.props.dragHandler;j&&j.remove(c('ReactDOM').findDOMNode(this.refs.container));}.bind(this),0);},render:function(){if(this.state.isSpherical){return (c('React').createElement(c('ReactComposerSphericalPhoto.react'),babelHelpers['extends']({},this.props,this.state,{onEditClick:this._onEditClick,onRemoveButtonClicked:this._onRemoveButtonClicked,ref:'container'})));}else return (c('React').createElement(c('ReactComposerPhoto.react'),babelHelpers['extends']({},this.props,this.state,{onEditClick:this._onEditClick,onHideProductTaggerNux:this._onHideProductTaggerNux,onRemoveButtonClicked:this._onRemoveButtonClicked,onStickersNUXClose:this._onStickersNUXClose,onTagAdded:this._onTagAdded,onTagIntent:this._onTagIntent,onTaggingNUXClose:this._onTaggingNUXClose,onTagRemoved:this._onTagRemoved,ref:'container'})));},_onEditClick:function(){this._onStickersNUXClose();},_onRemoveButtonClicked:function(){c('ReactComposerPhotoActions').removePhoto(this.context.composerID,this.props.photoID,this.props.uploadID);},_onStickersNUXClose:function(){c('ReactComposerNUXActions').nuxWasSeen(this.context.composerID,c('ComposerNUXType').ADD_STICKERS_NUX);},_onTagAdded:function(j,k,l){c('ReactComposerPhotoActions').tagFacebox(this.context.composerID,this.props.photoID,j,k,l);},_onTaggingNUXClose:function(){c('ReactComposerNUXActions').nuxWasSeen(this.context.composerID,c('ComposerNUXType').TAGGING_FLYOUT_NUX);},_onTagIntent:function(){if(this.state.showTaggingNUX)this._onTaggingNUXClose();},_onTagRemoved:function(j,k){c('ReactComposerPhotoActions').untagFacebox(this.context.composerID,this.props.photoID,j,k);},_onHideProductTaggerNux:function(){c('ReactComposerNUXActions').nuxWasSeen(this.context.composerID,c('CommerceSelfServeNUXType').COMPOSER_PRODUCT_PHOTO_TAGGER_BUTTON);}});f.exports=i;},null);
__d('ReactComposerPhotoUploadPlaceholder.react',['cx','ix','ReactComposerPhotoUploadState','Image.react','LoadingIndicator.react','ProgressBar.react','ReactComponentWithPureRenderMixin','React','XUICloseButton.react'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'ReactComposerPhotoUploadPlaceholder',mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{onRemoveButtonClicked:j.func.isRequired,uploadID:j.string.isRequired,uploadState:j.oneOf(Object.keys(c('ReactComposerPhotoUploadState'))).isRequired,uploadProgress:j.number,isSpherical:j.bool},render:function(){var l=null,m=null,n=this.props.uploadState,o=n===c('ReactComposerPhotoUploadState').PHOTO_UPLOAD_RESIZE_STARTED,p=n===c('ReactComposerPhotoUploadState').PHOTO_UPLOAD_UPLOADING;if(o||p){var q="_1b01"+(o?' '+"_1b02":'')+(p?' '+"_1b03":'');l=c('React').createElement(c('ProgressBar.react'),{value:this.props.uploadProgress,className:q});}else m=c('React').createElement(c('LoadingIndicator.react'),{className:"_1b00",color:'white',size:'medium'});var r=void 0;if(this.props.isSpherical)r=c('React').createElement(c('Image.react'),{className:"_1az2",src:i('/images/photos/spherical/gyro-small.png'),alt:'360 Photo'});return (c('React').createElement('div',{className:"_1a__"},c('React').createElement(c('XUICloseButton.react'),{className:"_1b04",onClick:this.props.onRemoveButtonClicked,size:'medium',shade:'dark'}),r,l,m));}});f.exports=k;},null);
__d('ReactComposerPhotoUploadPlaceholderContainer.react',['ReactComposerMediaUploadActions','ReactComposerPhotoUploadPlaceholder.react','ReactComposerMediaUploadStore','ReactComposerPropsAndStoreBasedStateMixin','ReactComponentWithPureRenderMixin','React'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'ReactComposerPhotoUploadPlaceholderContainer',mixins:[c('ReactComponentWithPureRenderMixin'),c('ReactComposerPropsAndStoreBasedStateMixin')(c('ReactComposerMediaUploadStore'))],propTypes:{uploadID:h.string.isRequired},statics:{calculateState:function(j,k){var l=c('ReactComposerMediaUploadStore').getMediaUpload(j,k.uploadID);return {uploadProgress:l.progress,uploadState:l.state,isSpherical:l.isSpherical};}},render:function(){return (c('React').createElement(c('ReactComposerPhotoUploadPlaceholder.react'),babelHelpers['extends']({},this.props,this.state,{onRemoveButtonClicked:this._onRemoveButtonClicked})));},_onRemoveButtonClicked:function(){c('ReactComposerMediaUploadActions').removeMediaUpload(this.context.composerID,this.props.uploadID);}});f.exports=i;},null);
__d('ReactComposerVideoX.react',['cx','ReactComposerMediaConfig','Image.react','ReactComponentWithPureRenderMixin','React','XUICloseButton.react'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'ReactComposerVideoX',mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{onRemoveButtonClicked:i.func.isRequired,thumbSrc:i.string.isRequired,posting:i.bool.isRequired},render:function(){var k={width:c('ReactComposerMediaConfig').photo.thumbWidth,height:c('ReactComposerMediaConfig').photo.thumbHeight},l="_1sjs"+(this.props.isRecognizingFaceboxes?' '+"_1sjt":''),m=void 0;if(!this.props.posting)m=c('React').createElement(c('XUICloseButton.react'),{className:"_1sju",onClick:this.props.onRemoveButtonClicked,size:'medium',shade:'light'});return (c('React').createElement('div',{ref:'root',className:l,style:k},m,c('React').createElement('div',{className:"_2v_s"}),c('React').createElement(c('Image.react'),{src:this.props.thumbSrc,width:c('ReactComposerMediaConfig').photo.thumbWidth,height:c('ReactComposerMediaConfig').photo.thumbHeight})));}});f.exports=j;},null);
__d('ReactComposerVideoXContainer.react',['cx','ReactComposerPropsAndStoreBasedStateMixin','ReactComposerStore','ReactComposerVideoX.react','ReactComposerMediaUploadActions','ReactComposerMediaUploadStore','EventListener','generateVideoThumbnails','React','ReactDOM'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=100,k=100,l=c('React').createClass({displayName:'ReactComposerVideoXContainer',mixins:[c('ReactComposerPropsAndStoreBasedStateMixin')(c('ReactComposerStore'))],_loadedmetadataListener:null,propTypes:{dragHandler:i.shape({add:i.func.isRequired,remove:i.func.isRequired}),photoID:i.string.isRequired,uploadID:i.string.isRequired,fileURL:i.string.isRequired},statics:{calculateState:function(m,n){var o=c('ReactComposerMediaUploadStore').getMediaUpload(m.toString(),n.uploadID),p=o&&o.thumbSrc?o.thumbSrc:'/images/icons/timeline/placeholder/placeholder-movies.png';return {posting:c('ReactComposerStore').isPosting(m),thumbSrc:p};}},componentDidMount:function(){var m=c('ReactDOM').findDOMNode(this.refs.videoPlayer);this._loadedmetadataListener=c('EventListener').listen(m,'loadedmetadata',this.generateVideoThumbnails);setTimeout(function(){var n=this.props.dragHandler;n&&n.add(c('ReactDOM').findDOMNode(this.refs.container));}.bind(this),0);},generateVideoThumbnails:function(){var m=c('ReactDOM').findDOMNode(this.refs.videoPlayer);c('generateVideoThumbnails')(m,k,j,1).done(function(n){c('ReactComposerMediaUploadActions').setVideoThumbnail(this.context.composerID,this.props.uploadID,n.thumbnails[0].getURL());}.bind(this));},componentWillUnmount:function(){if(this._loadedmetadataListener){this._loadedmetadataListener.remove();this._loadedmetadataListener=null;}setTimeout(function(){var m=this.props.dragHandler;m&&m.remove(c('ReactDOM').findDOMNode(this.refs.container));}.bind(this),0);},render:function(){return (c('React').createElement('div',null,c('React').createElement(c('ReactComposerVideoX.react'),{posting:this.state.posting,thumbSrc:this.state.thumbSrc,onRemoveButtonClicked:this._onRemoveButtonClicked,ref:'container'}),c('React').createElement('video',{ref:'videoPlayer',className:"_2mpk",src:this.props.fileURL})));},_onRemoveButtonClicked:function(){c('ReactComposerMediaUploadActions').removeMediaUpload(this.context.composerID,this.props.uploadID);}});f.exports=l;},null);
__d('ReactComposerVideoXUploadPlaceholder.react',['cx','ReactComposerPhotoUploadState','ProgressBar.react','ReactComponentWithPureRenderMixin','React','XUICloseButton.react'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'ReactComposerVideoXUploadPlaceholder',mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{onRemoveButtonClicked:i.func.isRequired,uploadID:i.string.isRequired,uploadState:i.oneOf(Object.keys(c('ReactComposerPhotoUploadState'))).isRequired,uploadProgress:i.number},render:function(){var k=null,l=this.props.uploadState,m=l===c('ReactComposerPhotoUploadState').PHOTO_UPLOAD_UPLOADING;if(m){var n="_5t36"+(m?' '+"_5t3f":'');k=c('React').createElement(c('ProgressBar.react'),{value:this.props.uploadProgress,className:n});}return (c('React').createElement('div',{className:"_5t3l"},c('React').createElement(c('XUICloseButton.react'),{className:"_5t3o",onClick:this.props.onRemoveButtonClicked,size:'medium',shade:'dark'}),k));}});f.exports=j;},null);
__d('ReactComposerVideoXUploadPlaceholderContainer.react',['ReactComposerMediaUploadActions','ReactComposerVideoXUploadPlaceholder.react','ReactComposerMediaUploadStore','ReactComposerPropsAndStoreBasedStateMixin','ReactComponentWithPureRenderMixin','React'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'ReactComposerVideoXUploadPlaceholderContainer',mixins:[c('ReactComponentWithPureRenderMixin'),c('ReactComposerPropsAndStoreBasedStateMixin')(c('ReactComposerMediaUploadStore'))],propTypes:{uploadID:h.string.isRequired},statics:{calculateState:function(j,k){var l=c('ReactComposerMediaUploadStore').getMediaUpload(j,k.uploadID);return {uploadProgress:l.progress,uploadState:l.state};}},render:function(){return (c('React').createElement(c('ReactComposerVideoXUploadPlaceholder.react'),babelHelpers['extends']({},this.props,this.state,{onRemoveButtonClicked:this._onRemoveButtonClicked})));},_onRemoveButtonClicked:function(){c('ReactComposerMediaUploadActions').removeMediaUpload(this.context.composerID,this.props.uploadID);}});f.exports=i;},null);
__d('ReactComposerDraggableMedia.react',['cx','fbt','ReactComposerContextMixin','ReactComposerFailedPhotoUploadContainer.react','ReactComposerMediaUploadType','ReactComposerPhotoActions','ReactComposerPhotoContainer.react','ReactComposerMediaUploadActions','ReactComposerPhotoUploadPlaceholderContainer.react','ReactComposerPhotoUploadState','ReactComposerVideoXContainer.react','ReactComposerFailedVideoXUploadContainer.react','ReactComposerVideoXUploadPlaceholderContainer.react','XUIAmbientNUX.react','Draggable','ReactComponentWithPureRenderMixin','ReactLayeredComponentMixin','React','ReactDOM','SimpleNUXMessage','SimpleNUXMessageTypes','Vector','throttle'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=200,l=5,m=c('ReactComposerPhotoUploadState').PHOTO_UPLOAD_DONE,n=c('React').createClass({displayName:'ReactComposerDraggableMedia',_draggable:undefined,_grabbed:undefined,_scrollParent:undefined,mixins:[c('ReactComponentWithPureRenderMixin'),c('ReactComposerContextMixin'),c('ReactLayeredComponentMixin')],propTypes:{enableFaceboxTagger:j.bool,enableProductTagger:j.bool,disablePhotoEditing:j.bool,mediaConfig:j.object.isRequired,upload:j.object.isRequired,nuxConfig:j.object.isRequired,showSphericalSingletonNux:j.bool,draggingPhotos:j.bool,enableMediaDragging:j.bool,index:j.number,updateComponentPosition:j.func.isRequired,onGrab:j.func.isRequired,onDrag:j.func.isRequired,onDrop:j.func.isRequired},getInitialState:function(){return {dragging:false,showSphericalSingletonNux:false};},componentWillReceiveProps:function(o){if(this.props.index!==o.index&&o.index!==undefined)setTimeout(this._updateComponentPosition,0);if(!this.props.showSphericalSingletonNux&&o.showSphericalSingletonNux&&!c('SimpleNUXMessage').hasUserSeenMessage(c('SimpleNUXMessageTypes').SPHERICAL_SINGLETON_NUX))this.setState({showSphericalSingletonNux:true});},componentDidUpdate:function(o){if(this.props.enableMediaDragging&&o.upload.state!==m&&this.props.upload.state===m){this._createDraggable();}else if(o.upload.state===m&&this.props.upload.state!==m)this._draggable&&this._draggable.destroy();},componentDidMount:function(){this._scrollParent=this._findScrollParent();if(this.props.enableMediaDragging&&this.props.upload.state===m)this._createDraggable();setTimeout(this._updateComponentPosition,0);},componentWillUnmount:function(){this._draggable&&this._draggable.destroy();},render:function(){var o=(this.state.dragging?"_2pkn":'')+(' '+"_2pko");return (c('React').createElement('div',{className:o,onClick:this._onClick,key:this.props.upload.photoID||this.props.upload.id,ref:'draggable_media'},this._getInnerMediaComponent()));},renderLayers:function(){return {sphericalSingletonNux:this._sphericalSingletonNux()};},_sphericalSingletonNux:function(){if(!this.props.showSphericalSingletonNux)return null;return c('React').createElement(c('XUIAmbientNUX.react'),{alignment:'left',contextRef:function(){return this.refs.draggable_media;}.bind(this),shown:this.state.showSphericalSingletonNux,position:'below',onCloseButtonClick:this._onSphericalSingletonNuxClose,width:'auto'},i._("Post this photo individually to view in 360\u00b0"));},_onSphericalSingletonNuxClose:function(){this.setState({showSphericalSingletonNux:false});c('SimpleNUXMessage').markMessageSeenByUser(c('SimpleNUXMessageTypes').SPHERICAL_SINGLETON_NUX);},_getInnerMediaComponent:function(){if(this.props.upload.mediaType==c('ReactComposerMediaUploadType').VIDEO)return this._getInnerVideoComponent();return this._getInnerPhotoComponent();},_getInnerVideoComponent:function(){var o=this.props.upload;if(o.state===m){var p=this._getDragHandler();return (c('React').createElement(c('ReactComposerVideoXContainer.react'),{dragHandler:p,key:o.photoID,photoID:o.photoID,uploadID:o.id,fileURL:o.fileURL}));}if(o.state===c('ReactComposerPhotoUploadState').PHOTO_UPLOAD_FAILED)return (c('React').createElement(c('ReactComposerFailedVideoXUploadContainer.react'),{error:o.error,filename:o.filename,key:o.id,mediaConfig:this.props.mediaConfig,uploadID:o.id}));return (c('React').createElement(c('ReactComposerVideoXUploadPlaceholderContainer.react'),{key:o.id,uploadID:o.id}));},_getInnerPhotoComponent:function(){var o=this.props.upload;if(o.state===m){var p=this._getDragHandler();return (c('React').createElement(c('ReactComposerPhotoContainer.react'),{canTagFromModal:this.props.mediaConfig.canTagFromModal,draggingPhotos:this.props.draggingPhotos,dragHandler:p,enableFaceboxTagger:this.props.enableFaceboxTagger,enableProductTagger:this.props.enableProductTagger,disablePhotoEditing:this.props.disablePhotoEditing,key:o.photoID,nuxConfig:this.props.nuxConfig,originalID:o.originalPhotoID,photoID:o.photoID,showProductTaggerNux:this.props.nuxConfig.showProductTaggerNux&&this.props.index===0,uploadID:o.id}));}if(o.state===c('ReactComposerPhotoUploadState').PHOTO_UPLOAD_FAILED)return (c('React').createElement(c('ReactComposerFailedPhotoUploadContainer.react'),{error:o.error,filename:o.filename,key:o.id,mediaConfig:this.props.mediaConfig,uploadID:o.id}));return (c('React').createElement(c('ReactComposerPhotoUploadPlaceholderContainer.react'),{key:o.id,uploadID:o.id}));},_getDragHandler:function(){var o=this;return {add:function(p){o._draggable&&o._draggable.addHandle(p);},remove:function(p){o._draggable&&o._draggable.removeHandle(p);}};},_createDraggable:function(){this._draggable=new (c('Draggable'))(c('ReactDOM').findDOMNode(this)).setNamespace('ReactComposer').setUseAbsolute(true).setAvoidKillingEvents(true).setGutter(l).setGrabHandler(this._onGrab).setDragHandler(c('throttle')(this._onDrag,k)).setDropHandler(this._onDrop);this._updateComponentPosition();},_updateComponentPosition:function(){var o=c('ReactDOM').findDOMNode(this),p=c('Vector').getElementPosition(o);p=this._compensateForScroll(o,p);this.props.updateComponentPosition(this.props.upload.id||this.props.upload.photoID,p,c('Vector').getElementDimensions(o));},_compensateForScroll:function(o,p){return this._scrollParent?p.add(this._scrollParent.scrollLeft,this._scrollParent.scrollTop):p;},_findScrollParent:function(){var o=c('ReactDOM').findDOMNode(this);if(o.closest){return o.closest('.fbScrollableAreaWrap');}else{var p=document.querySelectorAll('.fbScrollableAreaWrap');while(o&&o.nodeType===1){var q=0;while(p[q]){if(p[q]===o)return o;q++;}o=o.parentNode;}return null;}},_onGrab:function(){if(this.state.dragging)return;this._grabbed=true;var o=c('ReactDOM').findDOMNode(this);this.props.onGrab(this.props.upload.id||this.props.upload.photoID,o);},_onDrag:function(o){if(!this._grabbed)return;this.setState({dragging:true});var p=c('ReactDOM').findDOMNode(this);o=this._compensateForScroll(p,o);this.props.onDrag(o);},_onDrop:function(o){this._draggable&&this._draggable.resetPosition();this.setState({dragging:false});this._grabbed=false;var p=c('ReactComposerMediaUploadActions').mediaMoved,q=c('ReactDOM').findDOMNode(this);o=this._compensateForScroll(q,o);this.props.onDrop(o,p);},_onClick:function(){c('ReactComposerPhotoActions').setPhotoBeingTagged(this.context.composerID,this.props.upload.photoID);}});f.exports=n;},null);
__d('ReactComposerGenericPhotoUploadLink.react',['cx','ReactComponentWithPureRenderMixin','React','Link.react','joinClasses'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'ReactComposerGenericPhotoUploadLink',mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{className:i.string},getDefaultProps:function(){return {className:"__9t"};},render:function(){var k=c('joinClasses')("__9u",this.props.className);return (c('React').createElement(c('Link.react'),{className:k},this.props.children));}});f.exports=j;},null);
__d('ReactComposerMediaScrollableArea.react',['ReactComponentWithPureRenderMixin','TimelineMapScrollableArea','React','ReactDOM','joinClasses'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=h.oneOfType([h.string,h.number]),j=c('React').createClass({displayName:'ReactComposerMediaScrollableArea',_scrollableArea:c('TimelineMapScrollableArea'),mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{children:h.array.isRequired,getAddMoreDOM:h.func,height:i.isRequired,persistent:h.bool,photosCount:h.number,scrollbar:h.oneOf(['native','fade','nofade']).isRequired,verticalScroll:h.bool,width:i.isRequired},getDefaultProps:function(){return {scrollbar:'native',width:'100%'};},componentDidMount:function(){this._scrollableArea=new (c('TimelineMapScrollableArea'))(c('ReactDOM').findDOMNode(this.refs.container),{fade:this.props.scrollbar==='fade',persistent:this.props.persistent,verticalscroll:this.props.verticalScroll});this._scrollAddButtonIntoView();},componentDidUpdate:function(k,l){if(this.props.photosCount>k.photosCount)this._scrollAddButtonIntoView();},componentWillUnmount:function(){this._scrollableArea.destroy();},render:function(){var k=c('joinClasses')(this.props.className,this.props.scrollbar),l={height:this.props.height,width:this.props.width},m=this.props.height-(this.props.scrollbar==='fade'?0:10),n={height:m};return (c('React').createElement('div',{className:k,ref:'container'},c('React').createElement('div',{className:'fbScrollableArea',style:l},c('React').createElement('div',{className:'fbScrollableAreaWrap'},c('React').createElement('div',{className:'fbScrollableAreaBody',style:n},c('React').createElement('div',{className:'fbScrollableAreaContent'},this.props.children))),this._getTrack())));},_getTrack:function(){if(this.props.scrollbar==='native')return null;return (c('React').createElement('div',{className:'fbScrollableAreaTrack invisible_elem'},c('React').createElement('div',{className:'fbScrollableAreaGripper'})));},_scrollAddButtonIntoView:function(){this.props.getAddMoreDOM&&this.props.getAddMoreDOM()&&this._scrollableArea.scrollIntoView(this.props.getAddMoreDOM());}});f.exports=j;},null);
__d('ReactComposerMediaUploadsGrid.react',['cx','fbt','ReactComposerContextMixin','ReactComposerDraggableMedia.react','ReactComposerGenericPhotoUploadLink.react','ReactComposerMediaScrollableArea.react','ReactComposerMediaUtils','ReactComposerMediaUploadActions','FileInput.react','immutable','ReactComponentWithPureRenderMixin','React','ReactDOM','joinClasses'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=112,l=c('React').createClass({displayName:'ReactComposerMediaUploadsGrid',mixins:[c('ReactComponentWithPureRenderMixin'),c('ReactComposerContextMixin')],propTypes:{enableFaceboxTagger:j.bool,enableProductTagger:j.bool,disablePhotoEditing:j.bool,addMorePhotosConfig:j.shape({maxPhotos:j.number}).isRequired,mediaAcceptParam:j.string,mediaConfig:j.object.isRequired,nuxConfig:j.object.isRequired,onFilesSelected:j.func,canUploadMultiplePhotos:j.bool,uploads:j.instanceOf(c('immutable').List).isRequired,sphericalSingletonNuxUpload:j.object,onDrop:j.func,photoUploadLink:j.element,scrollableAreaHeight:j.number.isRequired,sourceIndex:j.number,targetIndex:j.number,updateComponentPosition:j.func.isRequired},getDefaultProps:function(){return {addMorePhotosConfig:{},canUploadMultiplePhotos:false,photoUploadLink:c('React').createElement(c('ReactComposerGenericPhotoUploadLink.react'),null),scrollableAreaHeight:k,showSellUploadLink:false};},render:function(){return (c('React').createElement('div',{className:"_kkp"},c('React').createElement('div',{className:c('joinClasses')("_kkq",this.props.className)},c('React').createElement(c('ReactComposerMediaScrollableArea.react'),{fade:true,getAddMoreDOM:this._getAddMoreDOM,height:this.props.scrollableAreaHeight,photosCount:this.props.uploads.size,scrollbar:'fade',verticalScroll:true},this.props.children,this._getComponents(),this._getAddMorePhotosButton()))));},_onAddMorePhotosClick:function(){c('ReactComposerMediaUploadActions').inputClicked(this.context.composerID);},_onFilesSelected:function(event){if(this.props.onFilesSelected){var m=this.props.onFilesSelected;m(event,this.refs.fileInput.getFileInput());}c('ReactComposerMediaUtils').clearInput(this.refs.fileInput.getFileInput());},_getAddMorePhotosButton:function(){if(!this.props.canUploadMultiplePhotos&&this.props.uploads.size>0)return null;if(this.props.addMorePhotosConfig.maxPhotos&&this.props.uploads.size>=this.props.addMorePhotosConfig.maxPhotos)return null;return (c('React').createElement('span',{ref:'addMore',className:"_kkr"},c('React').createElement(c('FileInput.react'),{accept:this.props.mediaAcceptParam,multiple:this.props.canUploadMultiplePhotos,name:'composer_photo',onChange:this._onFilesSelected,onClick:this._onAddMorePhotosClick,ref:'fileInput',title:i._("Choose a file to upload"),'data-testid':'add-more-photos'},this.props.photoUploadLink)));},_getComponents:function(){var m=this.props.uploads.toSeq().filter(function(o,p){return p!==this.props.sourceIndex;}.bind(this)).map(function(o,p){return this._getDraggablePhoto(o,p);}.bind(this));if(this.props.targetIndex!=null){var n=c('React').createElement('div',{key:'placeholder',className:"_kks"});m=m.splice(this.props.targetIndex,0,n);}if(this.props.sourceIndex!=null)m=m.splice(this.props.sourceIndex,0,this._getDraggablePhoto(this.props.uploads.get(this.props.sourceIndex)));return m.toArray();},_getDraggablePhoto:function(m,n){return (c('React').createElement(c('ReactComposerDraggableMedia.react'),{enableFaceboxTagger:this.props.enableFaceboxTagger,enableProductTagger:this.props.enableProductTagger,disablePhotoEditing:this.props.disablePhotoEditing,key:m.id,upload:m,nuxConfig:this.props.nuxConfig,showSphericalSingletonNux:m===this.props.sphericalSingletonNuxUpload,draggingPhotos:this.props.sourceIndex!=null,enableMediaDragging:true,index:n,mediaConfig:this.props.mediaConfig,updateComponentPosition:this.props.updateComponentPosition,onGrab:this.props.onGrab,onDrag:this.props.onDrag,onDrop:this.props.onDrop}));},_getAddMoreDOM:function(){return c('ReactDOM').findDOMNode(this.refs.addMore);}});f.exports=l;},null);
__d('ReactComposerMediaUploadsGridContainer.react',['ReactComposerContextMixin','ReactComposerMediaUploadsGrid.react','Locale','ReactComponentWithPureRenderMixin','React','ReactDOM','Rect','Vector'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'ReactComposerMediaUploadsGridContainer',_componentsPosition:{},mixins:[c('ReactComponentWithPureRenderMixin'),c('ReactComposerContextMixin')],propTypes:{photoUploadLink:h.element,enableFaceboxTagger:h.bool,enableProductTagger:h.bool,disablePhotoEditing:h.bool,showSellUploadLink:h.bool},getInitialState:function(){return {rtl:c('Locale').isRTL(),sourceIndex:null,targetIndex:null,uploads:this.props.uploads,sphericalSingletonNuxUpload:null};},componentWillReceiveProps:function(j){if(this.state.uploads!==j.uploads){var k=j.uploads.toSeq().filter(function(l){return l.canShowSphericalSingletonNux;}).first();this.setState({uploads:j.uploads,sphericalSingletonNuxUpload:k});}},render:function(){return (c('React').createElement(c('ReactComposerMediaUploadsGrid.react'),babelHelpers['extends']({},this.props,{onGrab:this._onGrab,onDrag:this._onDrag,onDrop:this._onDrop,sourceIndex:this.state.sourceIndex,targetIndex:this.state.targetIndex,updateComponentPosition:this._updateComponentPosition,uploads:this.state.uploads,sphericalSingletonNuxUpload:this.state.sphericalSingletonNuxUpload})));},_onGrab:function(j,k){var l=this.state.uploads.findIndex(function(m){return m.id===j;});this.setState({sourceIndex:l,targetIndex:l});},_onDrag:function(j){var k=c('Vector').getElementPosition(c('ReactDOM').findDOMNode(this));j=j.sub(k);this.setState({targetIndex:this._getTargetID(j)});},_onDrop:function(j,k){this._onDrag(j);var l=this.state.sourceIndex,m=this.state.targetIndex;if(l==null||m==null)return;if(l!==m){var n=this.state.uploads;n=n.splice(l,1).splice(m,0,n.get(l));this.setState({uploads:n});k(this.context.composerID,l,m);}this._endDrag();},_endDrag:function(){this.setState({sourceIndex:null,targetIndex:null});},_getTargetID:function(j){var k=this.state.uploads,l=this.state.rtl?function(q,r){return q.right>=r.x;}:function(q,r){return q.left<=r.x;};for(var m=k.size-1;m>=0;m--){var n=k.get(m),o=n.id,p=this._componentsPosition[o];if(l(p,j))return m;}return 0;},_updateComponentPosition:function(j,k,l){var m=new (c('Rect'))(c('ReactDOM').findDOMNode(this));this._componentsPosition[j]={left:k.x-m.l,right:k.x-m.l+l.x};}});f.exports=i;},null);
__d('ReactComposerSlideshowPhotoUploadsContainer.react',['cx','fbt','ix','ReactComposerAttachmentType','ReactComposerConfig','ReactComposerMediaUploadsGridContainer.react','Image.react','immutable','React','Link.react','padNumber'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes,l=136,m=60,n=':',o=0,p=1,q=2,r=c('React').createClass({displayName:'ReactComposerSlideshowPhotoUploadsContainer',propTypes:{config:c('ReactComposerConfig').isRequired,onFileSelected:k.func,uploads:k.instanceOf(c('immutable').List).isRequired},_shouldShowAddMorePhotosButton:function(){var s=this.props.config.attachmentsConfig[c('ReactComposerAttachmentType').MEDIA];if(s.slideshowConfig.maxPhotoNum&&this.props.uploads.size>=s.slideshowConfig.maxPhotoNum)return false;return true;},_formatTime:function(s){var t=Math.floor(s/m),u=s-t*m;return t+n+c('padNumber')(u,2);},_renderTextAboveLine:function(s,t){var u=this.props.config.attachmentsConfig[c('ReactComposerAttachmentType').MEDIA].slideshowConfig;if(s===q){if(t===u.maxPhotoNum){return (c('React').createElement(c('Image.react'),{className:"_33ss",src:j('/images/devsite/glyph/error_red_small.png')}));}else return (c('React').createElement('span',{className:"_33tl"}));}else{var v=Math.round((u.durationInMS+u.transitionInMS)/1000);if(t===u.maxPhotoNum-1){return (c('React').createElement('span',null,this._formatTime(t*v),c('React').createElement('span',{className:"_33tm"+(s===p?' '+"_2103":'')},this._formatTime(u.maxPhotoNum*v))));}else return c('React').createElement('span',null,this._formatTime(t*v));}},_getTimeline:function(){var s=this.props.config.attachmentsConfig[c('ReactComposerAttachmentType').MEDIA].slideshowConfig,t=s.maxPhotoNum-this.props.uploads.size,u=[];this.props.uploads.map(function(x,y){if(y<s.maxPhotoNum)u.push(o);});if(t>0){for(var v=0;v<t;v++)u.push(p);}else if(t<0)for(var w=0;w<-t;w++)u.push(q);return (c('React').createElement('div',{className:"_3rr_"},u.map(function(x,y){return (c('React').createElement('span',{className:(x===o&&y===0?"_33to":'')+(x===o&&y!==0?' '+"_33tp":'')+(x===p&&y===this.props.uploads.size&&this.props.uploads.size<s.maxPhotoNum?' '+"_2104":'')+(x===p&&y!==this.props.uploads.size?' '+"_33tq":'')+(x===q&&y===s.maxPhotoNum?' '+"_33tr":'')+(x===q&&y!==s.maxPhotoNum?' '+"_33ts":''),key:y},this._renderTextAboveLine(x,y)));}.bind(this))));},render:function(){var s=this.props.config.attachmentsConfig[c('ReactComposerAttachmentType').MEDIA];return (c('React').createElement('div',{className:"_3-9a _3-8_"},c('React').createElement(c('ReactComposerMediaUploadsGridContainer.react'),{addMorePhotosConfig:{maxPhotos:s.slideshowConfig.maxPhotoNum},canUploadMultiplePhotos:true,className:"_3rsr",disablePhotoEditing:true,enableFaceboxTagger:false,mediaConfig:s,nuxConfig:this.props.config.nuxConfig,onFilesSelected:this.props.onFilesSelected,scrollableAreaHeight:l,uploads:this.props.uploads},this._getTimeline()),c('React').createElement('div',{className:"_4dwc"},c('React').createElement(c('Image.react'),{className:"_33ss",src:j('images/components/HelpLink/info.png')}),i._("{Learn more} about using slideshows in your posts.",[i.param('Learn more',c('React').createElement(c('Link.react'),{href:'/help/818247301636195',target:'_blank'},i._("Learn more")))]))));}});f.exports=r;},null);
__d('ReactComposerSlideshowThumbnailViewContainer.react',['cx','fbt','ix','ReactComposerMediaConfig','ReactComposerPhotoActionButton.react','ReactComposerMediaUploadActions','ReactComposerMediaUploadStore','ReactComposerPropsAndStoreBasedStateMixin','ReactComposerSelectedImagesStore','ReactComposerSlideshowActions','ReactComposerSlideshowDialogContainer.react','ReactComposerSlideshowStore','Image.react','Link.react','React','ReactComponentWithPureRenderMixin','ReactLayeredComponentMixin','XUICloseButton.react'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes,l=c('React').createClass({displayName:'ReactComposerSlideshowThumbnailViewContainer',mixins:[c('ReactComposerPropsAndStoreBasedStateMixin')(c('ReactComposerSlideshowStore'),c('ReactComposerSelectedImagesStore')),c('ReactComponentWithPureRenderMixin'),c('ReactLayeredComponentMixin')],propTypes:{maxSelectedImages:k.number.isRequired,mediaAcceptParam:k.string.isRequired,pageID:k.string.isRequired,showAudioSelector:k.bool.isRequired,showPagesLibrary:k.bool.isRequired,onFilesSelected:k.func.isRequired},statics:{calculateState:function(m,n){var o=c('ReactComposerSlideshowStore').shouldShowSlideshowDialog(m),p=c('ReactComposerSelectedImagesStore').getThumbnailSrc(m);return {dialogShown:o,thumbSrc:p};}},render:function(){var m={width:c('ReactComposerMediaConfig').photo.thumbWidth,height:c('ReactComposerMediaConfig').photo.thumbHeight},n=c('React').createElement(c('XUICloseButton.react'),{className:"_jfe",onClick:this._onXout,size:'medium',shade:'light'}),o=i._("Edit Slideshow"),p=c('React').createElement(c('ReactComposerPhotoActionButton.react'),{className:"_4_z4",tooltip:o,iconClassName:"_4_z5",onClick:this._onShowDialog});return (c('React').createElement('div',{className:"_3-9a _3-8_"},c('React').createElement('div',{className:"_jfc",style:m},n,c('React').createElement(c('Image.react'),{src:this.state.thumbSrc,width:c('ReactComposerMediaConfig').photo.thumbWidth,height:c('ReactComposerMediaConfig').photo.thumbHeight}),c('React').createElement('div',{className:"_jfi",tabIndex:'-1'},p)),this._getHelpLink()));},renderLayers:function(){var m=null;if(this.state.dialogShown)m=c('React').createElement(c('ReactComposerSlideshowDialogContainer.react'),{dialogShown:this.state.dialogShown,maxSelectedImages:this.props.maxSelectedImages,mediaAcceptParam:this.props.mediaAcceptParam,pageID:this.props.pageID,showAudioSelector:this.props.showAudioSelector,showPagesLibrary:this.props.showPagesLibrary,onCloseDialog:this._onCloseDialog,onFilesSelected:this.props.onFilesSelected});return {dialog:m};},_getHelpLink:function(){return (c('React').createElement('div',{className:"_4dwc"},c('React').createElement(c('Image.react'),{className:"_33ss",src:j('images/components/HelpLink/info.png')}),i._("{Learn more} about using slideshows in your posts.",[i.param('Learn more',c('React').createElement(c('Link.react'),{href:'/help/818247301636195',target:'_blank'},i._("Learn more")))])));},_onShowDialog:function(){c('ReactComposerSlideshowActions').showEditSlideshowDialog(this.context.composerID);},_onXout:function(){var m=c('ReactComposerSelectedImagesStore').getNumberOfImages(this.context.composerID);c('ReactComposerMediaUploadActions').removeAllPhotoUploads(this.context.composerID);c('ReactComposerSlideshowActions').hideSlideshowEditField(this.context.composerID,m);},_onCloseDialog:function(){var m=c('ReactComposerSelectedImagesStore').getAddedUploadIDs(this.context.composerID);m.forEach(function(n){var o=c('ReactComposerMediaUploadStore').getMediaUpload(this.context.composerID,n);c('ReactComposerMediaUploadActions').removePhotoAndPhotoUpload(this.context.composerID,o);}.bind(this));c('ReactComposerSlideshowActions').closeEditSlideshowDialog(this.context.composerID);}});f.exports=l;},null);
__d('ReactComposerAttachmentPreview.react',['DOMContainer.react','ReactComponentWithPureRenderMixin','React'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'ReactComposerAttachmentPreview',mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{markup:h.instanceOf(HTMLElement).isRequired},render:function(){if(!this.props.markup)return c('React').createElement('noscript',null);return (c('React').createElement(c('DOMContainer.react'),null,this.props.markup));}});f.exports=i;},null);
__d('ReactComposerLocationAttachmentActions',['ReactComposerLocationAttachmentActionType','ReactComposerDispatcher','ReactComposerLocationAttachmentStore'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();c('ReactComposerLocationAttachmentStore');h.prototype.enabled=function(i,j){'use strict';c('ReactComposerDispatcher').dispatch({composerID:i,type:c('ReactComposerLocationAttachmentActionType').LOCATION_ATTACHMENT_ENABLED,enabled:j});};h.prototype.fetchLocationAttachment=function(i,j,k){'use strict';c('ReactComposerDispatcher').dispatch({composerID:i,type:c('ReactComposerLocationAttachmentActionType').FETCH_LOCATION_ATTACHMENT,locationID:j,targetID:k});};h.prototype.setMinutiaeActionContext=function(i,j,k){'use strict';var l={composerID:i,type:c('ReactComposerLocationAttachmentActionType').SET_MINUTIAE_ACTION_CONTEXT,objectID:j,isTimeline:k};c('ReactComposerDispatcher').dispatch(l);};h.prototype.setMarkup=function(i,j){'use strict';c('ReactComposerDispatcher').dispatch({composerID:i,type:c('ReactComposerLocationAttachmentActionType').SET_LOCATION_MARKUP,markup:j});};function h(){'use strict';}f.exports=new h();},null);
__d('ReactComposerMinutiaeAttachmentActions',['ReactComposerMinutiaeAttachmentActionType','ReactComposerDispatcher','ReactComposerMinutiaeAttachmentStore'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();c('ReactComposerMinutiaeAttachmentStore');h.prototype.fetchMinutiaeAttachment=function(i,j,k,l,m){'use strict';var n={composerID:i,type:c('ReactComposerMinutiaeAttachmentActionType').FETCH_ATTACHMENT,actionID:j,objectID:k,targetID:l,isTimeline:m};c('ReactComposerDispatcher').dispatch(n);};h.prototype.setExplicitLocation=function(i,j){'use strict';var k={composerID:i,type:c('ReactComposerMinutiaeAttachmentActionType').SET_EXPLICIT_LOCATION,explicitLocation:j};c('ReactComposerDispatcher').dispatch(k);};h.prototype.setMarkup=function(i,j){'use strict';var k={composerID:i,type:c('ReactComposerMinutiaeAttachmentActionType').SET_MARKUP,markup:j};c('ReactComposerDispatcher').dispatch(k);};function h(){'use strict';}f.exports=new h();},null);
__d('ReactComposerAttachmentPreviewContainer.react',['csx','cx','ReactComposerLocationAttachmentActions','ReactComposerLocationAttachmentStore','ReactComposerMinutiaeAttachmentActions','ReactComposerMinutiaeAttachmentStore','ReactComposerPropsAndStoreBasedStateMixin','ReactComposerAttachmentPreview.react','ReactComposerPrefillStore','ReactComposerScrapedAttachmentActions','ReactComposerScrapedAttachmentStore','Arbiter','DOM','Event','ReactComponentWithPureRenderMixin','React','ReactDOM','XUICloseButton.react'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'ReactComposerAttachmentPreviewContainer',_buttonEvent:undefined,mixins:[c('ReactComponentWithPureRenderMixin'),c('ReactComposerPropsAndStoreBasedStateMixin')(c('ReactComposerScrapedAttachmentStore'),c('ReactComposerMinutiaeAttachmentStore'),c('ReactComposerLocationAttachmentStore'))],propTypes:{markup:j.instanceOf(HTMLElement)},statics:{beforeCalculateInitialState:function(l,m){var n=c('ReactComposerPrefillStore').getAndEraseField(l,'attachmentPreviewData');if(n&&n.scrapedAttachment)c('ReactComposerScrapedAttachmentActions').setScrapedAttachment(l,n.scrapedAttachment.markup,n.scrapedAttachment.attachmentConfig);},calculateState:function(l,m){var n=c('ReactComposerScrapedAttachmentStore').getMarkup(l),o=c('ReactComposerScrapedAttachmentStore').isReadOnly(l),p=c('ReactComposerMinutiaeAttachmentStore').getMarkup(l),q=c('ReactComposerLocationAttachmentStore').getMarkup(l);return {markup:n||p||q,showRemoveButton:n&&o};}},componentDidMount:function(){this._cleanupButtonEvent();this._setButtonEvent();},componentDidUpdate:function(){this._setButtonEvent();},componentWillUnmount:function(){this._cleanupButtonEvent();},render:function(){if(!this.state.markup)return null;var l=this.state.showRemoveButton?this._renderRemoveButton():null;return (c('React').createElement('div',{className:"_2ane"},c('React').createElement(c('ReactComposerAttachmentPreview.react'),{ref:'attachment',markup:this.state.markup}),l));},_renderRemoveButton:function(){return (c('React').createElement('div',{className:"_2anf"},c('React').createElement(c('XUICloseButton.react'),{className:"_2anh",size:'medium',shade:'light',onClick:this._clearAttachment})));},_setButtonEvent:function(){if(this.refs.attachment){var l=c('DOM').scry(c('ReactDOM').findDOMNode(this.refs.attachment),"._9s")[0];if(l)this._buttonEvent=c('Event').listen(l,'click',function(event){this._clearAttachment();this._buttonEvent&&this._buttonEvent.remove();this._buttonEvent=null;}.bind(this));c('Arbiter').inform('react_composer_dom_ready/'+this.context.composerID);}},_clearAttachment:function(){c('ReactComposerScrapedAttachmentActions').setScrapedAttachment(this.context.composerID,null,{});c('ReactComposerMinutiaeAttachmentActions').setMarkup(this.context.composerID,null);c('ReactComposerLocationAttachmentActions').setMarkup(this.context.composerID,null);},_cleanupButtonEvent:function(){this._buttonEvent&&this._buttonEvent.remove();}});f.exports=k;},null);