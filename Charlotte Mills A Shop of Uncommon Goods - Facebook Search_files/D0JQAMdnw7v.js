if (self.CavalryLogger) { CavalryLogger.start_js(["EkPhv"]); }

__d("ComposedEntityMutability",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={MUTABLE:0,IMMUTABLE:1,SEGMENTED:2};},null);
__d('NotificationJewelReminder',['cx','fbt','$','Arbiter','ContextualDialog','ContextualDialogXUITheme','DOM','Event','ImageBlock.react','LayerFadeOnHide','LayerFadeOnShow','NotificationStore','NotificationUpdates','React','ReactDOM','SubscriptionsHandler','Toggler','WorkFocusModeController','clearTimeout','ge','intlList','setTimeout'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('WorkFocusModeController').WorkFocusMode,k=2,l='fbRequestsJewel',m='fbNotificationsJewel';function n(o){'use strict';this.$NotificationJewelReminder1=o;if(o.request.count>0&&o.show_request){this.$NotificationJewelReminder2(l);}else this.$NotificationJewelReminder3();}n.prototype.$NotificationJewelReminder3=function(){'use strict';var o=j&&j.currentViewerInFocusMode();if(!this.$NotificationJewelReminder1.show_notif||o){return;}else{this.$NotificationJewelReminder4();return;}};n.prototype.$NotificationJewelReminder4=function(){'use strict';this.$NotificationJewelReminder5=c('NotificationUpdates').subscribe('update-notifications',function(o,p){if(p.nodes)this.$NotificationJewelReminder6(p.nodes);}.bind(this));c('NotificationStore').getNotifications(Number.isInteger(this.$NotificationJewelReminder1.show_notif)?this.$NotificationJewelReminder1.show_notif:0,this.$NotificationJewelReminder6.bind(this));};n.prototype.$NotificationJewelReminder6=function(o){'use strict';if(this.$NotificationJewelReminder5){this.$NotificationJewelReminder5.unsubscribe();this.$NotificationJewelReminder5=null;}var p=c('ge')(m);if(!p||c('Toggler').getInstance(p).isShown())return;var q=[],r;o=o.filter(function(x){return x.seen_state==='UNSEEN_AND_UNREAD';});var s=Object.keys(o);for(var t=0;t<s.length;t++){if(!o[s[t]].showBeep)continue;var u=o[s[t]].actors;if(u.length===0)continue;for(var v=0;v<u.length;v++){r=r||u[v].profile_picture.uri;if(q.length<k&&u[v].name&&q.indexOf(u[v].name)===-1)q.push(u[v].name);}if(q.length===k)break;}if(q.length===0||!r)return;var w=this.$NotificationJewelReminder7(r,q,s.length,m);this.$NotificationJewelReminder8(w);};n.prototype.$NotificationJewelReminder7=function(o,p,q,r){'use strict';var s=c('React').createElement('div',{className:"_5bov"},c('React').createElement(c('ImageBlock.react'),null,c('React').createElement('img',{className:"_5bow",src:o}),c('React').createElement('div',null,this.$NotificationJewelReminder9(q,p,r)))),t=c('DOM').create('div');c('ReactDOM').render(s,t);var u=new (c('ContextualDialog'))({alignment:'right',contextSelector:'#'+r+' a.jewelButton',offsetY:-10,position:'below',theme:c('ContextualDialogXUITheme'),width:210},t);u.enableBehaviors([c('LayerFadeOnShow'),c('LayerFadeOnHide')]);return u;};n.prototype.$NotificationJewelReminder9=function(o,p,q){'use strict';p=p.map(function(r){return c('React').createElement('b',null,r);});if(q===m){return i._({"*":{"notifications":"{number} notifications from {notification senders}","notification":"{number} notification from {notification senders}"}},[i.param('number',o,[0]),i['enum'](o>1?'notifications':'notification',{notifications:'notifications',notification:'notification'}),i.param('notification senders',c('intlList')(p))]);}else return i._({"*":{"requests":"{number} friend requests from {request senders}","request":"{number} friend request from {request senders}"}},[i.param('number',o,[0]),i['enum'](o>1?'requests':'request',{requests:'requests',request:'request'}),i.param('request senders',c('intlList')(p))]);};n.prototype.$NotificationJewelReminder8=function(o){'use strict';o.show();this.$NotificationJewelReminder10=o;var p=o.getRoot();this.$NotificationJewelReminder11=c('setTimeout')(this.$NotificationJewelReminder12.bind(this),this.$NotificationJewelReminder1.show_time);this.$NotificationJewelReminder13=new (c('SubscriptionsHandler'))();this.$NotificationJewelReminder13.addSubscriptions(c('Arbiter').subscribe('layer_shown',function(q,r){if(r&&r.type==='Jewel')this.$NotificationJewelReminder12();}.bind(this)),c('Event').listen(p,'mouseenter',function(){c('clearTimeout')(this.$NotificationJewelReminder11);}.bind(this)),c('Event').listen(p,'mouseleave',this.$NotificationJewelReminder12.bind(this)),c('Event').listen(p,'click',function(){this.$NotificationJewelReminder12();c('Toggler').show(c('$')(m));}.bind(this)));};n.prototype.$NotificationJewelReminder12=function(){'use strict';c('clearTimeout')(this.$NotificationJewelReminder11);this.$NotificationJewelReminder10.hide();this.$NotificationJewelReminder13.release();};n.prototype.$NotificationJewelReminder2=function(o){'use strict';if(!this.$NotificationJewelReminder1.show_request||!this.$NotificationJewelReminder1.request.count)return;var p=c('ge')(o);if(!p||c('Toggler').getInstance(p).isShown())return;var q=this.$NotificationJewelReminder7(this.$NotificationJewelReminder1.request.pics[0],this.$NotificationJewelReminder1.request.names,this.$NotificationJewelReminder1.request.count,o);this.$NotificationJewelReminder14(q);};n.prototype.$NotificationJewelReminder14=function(o){'use strict';o.show();this.$NotificationJewelReminder15=o;var p=o.getRoot();this.$NotificationJewelReminder16=c('setTimeout')(this.$NotificationJewelReminder17.bind(this),this.$NotificationJewelReminder1.show_time);this.$NotificationJewelReminder18=new (c('SubscriptionsHandler'))();this.$NotificationJewelReminder18.addSubscriptions(c('Arbiter').subscribe('layer_shown',function(q,r){if(r&&r.type==='Jewel')this.$NotificationJewelReminder17();}.bind(this)),c('Event').listen(p,'mouseenter',function(){c('clearTimeout')(this.$NotificationJewelReminder16);}.bind(this)),c('Event').listen(p,'mouseleave',this.$NotificationJewelReminder17.bind(this)),c('Event').listen(p,'click',function(){this.$NotificationJewelReminder17();c('Toggler').show(c('$')(l));}.bind(this)));};n.prototype.$NotificationJewelReminder17=function(){'use strict';c('clearTimeout')(this.$NotificationJewelReminder16);this.$NotificationJewelReminder15.hide();this.$NotificationJewelReminder18.release();this.$NotificationJewelReminder3();};f.exports=n;},null);